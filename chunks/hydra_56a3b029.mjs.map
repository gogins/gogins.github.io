{"version":3,"file":"hydra_56a3b029.mjs","sources":["../../../packages/hydra/hydra.mjs"],"sourcesContent":["import { getDrawContext } from '@strudel.cycles/core';\n\nlet latestOptions;\n\nfunction appendCanvas(c) {\n  const { canvas: testCanvas } = getDrawContext();\n  c.canvas.id = 'hydra-canvas';\n  c.canvas.style.position = 'fixed';\n  c.canvas.style.top = '0px';\n  testCanvas.after(c.canvas);\n  return testCanvas;\n}\n\nexport async function initHydra(options = {}) {\n  // reset if options have changed since last init\n  if (latestOptions && JSON.stringify(latestOptions) !== JSON.stringify(options)) {\n    document.getElementById('hydra-canvas').remove();\n  }\n  latestOptions = options;\n  //load and init hydra\n  if (!document.getElementById('hydra-canvas')) {\n    console.log('reinit..');\n    const {\n      src = 'https://unpkg.com/hydra-synth',\n      feedStrudel = false,\n      ...hydraConfig\n    } = { detectAudio: false, ...options };\n    await import(src);\n    const hydra = new Hydra(hydraConfig);\n    if (feedStrudel) {\n      const { canvas } = getDrawContext();\n      canvas.style.display = 'none';\n      hydra.synth.s0.init({ src: canvas });\n    }\n    appendCanvas(hydra);\n  }\n}\n\nexport const H = (p) => () => p.queryArc(getTime(), getTime())[0].value;\n"],"names":[],"mappings":";;;;;;;;AAEA,IAAI,aAAa,CAAC;AAClB;AACA,SAAS,YAAY,CAAC,CAAC,EAAE;AACzB,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU,EAAE,GAAG,cAAc,EAAE,CAAC;AAClD,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,GAAG,cAAc,CAAC;AAC/B,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,OAAO,CAAC;AACpC,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC;AAC7B,EAAE,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;AAC7B,EAAE,OAAO,UAAU,CAAC;AACpB,CAAC;AACD;AACO,eAAe,SAAS,CAAC,OAAO,GAAG,EAAE,EAAE;AAC9C;AACA,EAAE,IAAI,aAAa,IAAI,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,KAAK,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;AAClF,IAAI,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC;AACrD,GAAG;AACH,EAAE,aAAa,GAAG,OAAO,CAAC;AAC1B;AACA,EAAE,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,EAAE;AAChD,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC5B,IAAI,MAAM;AACV,MAAM,GAAG,GAAG,+BAA+B;AAC3C,MAAM,WAAW,GAAG,KAAK;AACzB,MAAM,GAAG,WAAW;AACpB,KAAK,GAAG,EAAE,WAAW,EAAE,KAAK,EAAE,GAAG,OAAO,EAAE,CAAC;AAC3C,IAAI,MAAM,OAAO,GAAG,CAAC,CAAC;AACtB,IAAI,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;AACzC,IAAI,IAAI,WAAW,EAAE;AACrB,MAAM,MAAM,EAAE,MAAM,EAAE,GAAG,cAAc,EAAE,CAAC;AAC1C,MAAM,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;AACpC,MAAM,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC;AAC3C,KAAK;AACL,IAAI,YAAY,CAAC,KAAK,CAAC,CAAC;AACxB,GAAG;AACH,CAAC;AACD;AACY,MAAC,CAAC,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,QAAQ,CAAC,OAAO,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;;;;"}