import{I as h}from"./utils.C2-HDFYZ.js";import{P as M,n as v,b as E}from"./index.CEVOgZNG.js";import"./useClient.DzZdw0JO.js";import"./codemirror.r8QnqVLK.js";import"./index.xsBMAGf9.js";import"./_commonjsHelpers.BosuxZz1.js";import"./scope.CyWYA9A5.js";import"./index.DIn8BZQ7.js";/* empty css                      */const y=144,S=128,w=176;M.prototype.midi=function(f){return this.onTrigger((x,s,u,p,d)=>{let{note:o,nrpnn:O,nrpv:A,ccn:i,ccv:t,velocity:n=.9,gain:l=1}=s.value;const b=E(d,u)+34;n=Math.floor(l*n*100);const g=Math.floor(s.duration.valueOf()/p*1e3-10),c=Math.round(b),m=(s.value.midichan??1)-1,a=f??"IAC",e=[];if(o!=null){const r=typeof o=="number"?o:v(o);e.push({requestedport:a,message:[y+m,r,n],offset:c}),e.push({requestedport:a,message:[S+m,r,n],offset:c+g})}if(t&&i){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof i))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);e.push({requestedport:a,message:[w+m,i,r],offset:c})}e.length&&setTimeout(()=>{h("sendmidi",{messagesfromjs:e})})})};
//# sourceMappingURL=midibridge.BEjGvxKX.js.map
