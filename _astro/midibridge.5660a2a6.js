import{I as b}from"./utils.63de00d3.js";import{P as h,n as g}from"./index.7dcdd514.js";import"./Repl.ca27a478.js";import"./settings.ceb8da38.js";import"./index.3d4af9ee.js";import"./useKeydown.f3172d6b.js";import"./jsx-runtime.7e7f555b.js";import"./client.014307a4.js";import"./doc.bd86b523.js";import"./mini.080fc0a0.js";import"./useFrame.84ba1694.js";import"./scope.efc95823.js";import"./prebake.1db9593c.js";const v=144,E=128,M=176;h.prototype.midi=function(p){return this.onTrigger((u,e,a)=>{const{note:n,nrpnn:x,nrpv:y,ccn:s,ccv:t}=e.value,d=(u-a)*1e3,f=Math.floor((e.context?.velocity??.9)*100),l=Math.floor(e.duration.valueOf()*1e3-10),i=Math.round(d),m=(e.value.midichan??1)-1,c=p??"IAC",o=[];if(n!=null){const r=typeof n=="number"?n:g(n);o.push({requestedport:c,message:[v+m,r,f],offset:i}),o.push({requestedport:c,message:[E+m,r,f],offset:i+l})}if(t&&s){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof s))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);o.push({requestedport:c,message:[M+m,s,r],offset:i})}o.length&&setTimeout(()=>{b("sendmidi",{messagesfromjs:o})})})};
//# sourceMappingURL=midibridge.5660a2a6.js.map
