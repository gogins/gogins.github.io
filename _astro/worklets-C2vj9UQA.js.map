{"version":3,"file":"worklets-C2vj9UQA.js","sources":["../../packages/superdough/ola-processor.js","../../packages/superdough/fft.js","../../packages/superdough/worklets.mjs"],"sourcesContent":["'use strict';\n\n// sourced from https://github.com/olvb/phaze/tree/master?tab=readme-ov-file\nconst WEBAUDIO_BLOCK_SIZE = 128;\n\n/** Overlap-Add Node */\nclass OLAProcessor extends AudioWorkletProcessor {\n  constructor(options) {\n    super(options);\n    this.started = false;\n    this.nbInputs = options.numberOfInputs;\n    this.nbOutputs = options.numberOfOutputs;\n\n    this.blockSize = options.processorOptions.blockSize;\n    // TODO for now, the only support hop size is the size of a web audio block\n    this.hopSize = WEBAUDIO_BLOCK_SIZE;\n\n    this.nbOverlaps = this.blockSize / this.hopSize;\n\n    // pre-allocate input buffers (will be reallocated if needed)\n    this.inputBuffers = new Array(this.nbInputs);\n    this.inputBuffersHead = new Array(this.nbInputs);\n    this.inputBuffersToSend = new Array(this.nbInputs);\n    // default to 1 channel per input until we know more\n    for (let i = 0; i < this.nbInputs; i++) {\n      this.allocateInputChannels(i, 1);\n    }\n    // pre-allocate input buffers (will be reallocated if needed)\n    this.outputBuffers = new Array(this.nbOutputs);\n    this.outputBuffersToRetrieve = new Array(this.nbOutputs);\n    // default to 1 channel per output until we know more\n    for (let i = 0; i < this.nbOutputs; i++) {\n      this.allocateOutputChannels(i, 1);\n    }\n  }\n\n  /** Handles dynamic reallocation of input/output channels buffer\n     (channel numbers may lety during lifecycle) **/\n  reallocateChannelsIfNeeded(inputs, outputs) {\n    for (let i = 0; i < this.nbInputs; i++) {\n      let nbChannels = inputs[i].length;\n      if (nbChannels != this.inputBuffers[i].length) {\n        this.allocateInputChannels(i, nbChannels);\n      }\n    }\n\n    for (let i = 0; i < this.nbOutputs; i++) {\n      let nbChannels = outputs[i].length;\n      if (nbChannels != this.outputBuffers[i].length) {\n        this.allocateOutputChannels(i, nbChannels);\n      }\n    }\n  }\n\n  allocateInputChannels(inputIndex, nbChannels) {\n    // allocate input buffers\n\n    this.inputBuffers[inputIndex] = new Array(nbChannels);\n    for (let i = 0; i < nbChannels; i++) {\n      this.inputBuffers[inputIndex][i] = new Float32Array(this.blockSize + WEBAUDIO_BLOCK_SIZE);\n      this.inputBuffers[inputIndex][i].fill(0);\n    }\n\n    // allocate input buffers to send and head pointers to copy from\n    // (cannot directly send a pointer/subarray because input may be modified)\n    this.inputBuffersHead[inputIndex] = new Array(nbChannels);\n    this.inputBuffersToSend[inputIndex] = new Array(nbChannels);\n    for (let i = 0; i < nbChannels; i++) {\n      this.inputBuffersHead[inputIndex][i] = this.inputBuffers[inputIndex][i].subarray(0, this.blockSize);\n      this.inputBuffersToSend[inputIndex][i] = new Float32Array(this.blockSize);\n    }\n  }\n\n  allocateOutputChannels(outputIndex, nbChannels) {\n    // allocate output buffers\n    this.outputBuffers[outputIndex] = new Array(nbChannels);\n    for (let i = 0; i < nbChannels; i++) {\n      this.outputBuffers[outputIndex][i] = new Float32Array(this.blockSize);\n      this.outputBuffers[outputIndex][i].fill(0);\n    }\n\n    // allocate output buffers to retrieve\n    // (cannot send a pointer/subarray because new output has to be add to exising output)\n    this.outputBuffersToRetrieve[outputIndex] = new Array(nbChannels);\n    for (let i = 0; i < nbChannels; i++) {\n      this.outputBuffersToRetrieve[outputIndex][i] = new Float32Array(this.blockSize);\n      this.outputBuffersToRetrieve[outputIndex][i].fill(0);\n    }\n  }\n\n  /** Read next web audio block to input buffers **/\n  readInputs(inputs) {\n    // when playback is paused, we may stop receiving new samples\n    if (inputs[0].length && inputs[0][0].length == 0) {\n      for (let i = 0; i < this.nbInputs; i++) {\n        for (let j = 0; j < this.inputBuffers[i].length; j++) {\n          this.inputBuffers[i][j].fill(0, this.blockSize);\n        }\n      }\n      return;\n    }\n\n    for (let i = 0; i < this.nbInputs; i++) {\n      for (let j = 0; j < this.inputBuffers[i].length; j++) {\n        let webAudioBlock = inputs[i][j];\n        this.inputBuffers[i][j].set(webAudioBlock, this.blockSize);\n      }\n    }\n  }\n\n  /** Write next web audio block from output buffers **/\n  writeOutputs(outputs) {\n    for (let i = 0; i < this.nbInputs; i++) {\n      for (let j = 0; j < this.inputBuffers[i].length; j++) {\n        let webAudioBlock = this.outputBuffers[i][j].subarray(0, WEBAUDIO_BLOCK_SIZE);\n        outputs[i][j].set(webAudioBlock);\n      }\n    }\n  }\n\n  /** Shift left content of input buffers to receive new web audio block **/\n  shiftInputBuffers() {\n    for (let i = 0; i < this.nbInputs; i++) {\n      for (let j = 0; j < this.inputBuffers[i].length; j++) {\n        this.inputBuffers[i][j].copyWithin(0, WEBAUDIO_BLOCK_SIZE);\n      }\n    }\n  }\n\n  /** Shift left content of output buffers to receive new web audio block **/\n  shiftOutputBuffers() {\n    for (let i = 0; i < this.nbOutputs; i++) {\n      for (let j = 0; j < this.outputBuffers[i].length; j++) {\n        this.outputBuffers[i][j].copyWithin(0, WEBAUDIO_BLOCK_SIZE);\n        this.outputBuffers[i][j].subarray(this.blockSize - WEBAUDIO_BLOCK_SIZE).fill(0);\n      }\n    }\n  }\n\n  /** Copy contents of input buffers to buffer actually sent to process **/\n  prepareInputBuffersToSend() {\n    for (let i = 0; i < this.nbInputs; i++) {\n      for (let j = 0; j < this.inputBuffers[i].length; j++) {\n        this.inputBuffersToSend[i][j].set(this.inputBuffersHead[i][j]);\n      }\n    }\n  }\n\n  /** Add contents of output buffers just processed to output buffers **/\n  handleOutputBuffersToRetrieve() {\n    for (let i = 0; i < this.nbOutputs; i++) {\n      for (let j = 0; j < this.outputBuffers[i].length; j++) {\n        for (let k = 0; k < this.blockSize; k++) {\n          this.outputBuffers[i][j][k] += this.outputBuffersToRetrieve[i][j][k] / this.nbOverlaps;\n        }\n      }\n    }\n  }\n\n  process(inputs, outputs, params) {\n    const input = inputs[0];\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n    this.started = hasInput;\n    this.reallocateChannelsIfNeeded(inputs, outputs);\n\n    this.readInputs(inputs);\n    this.shiftInputBuffers();\n    this.prepareInputBuffersToSend();\n    this.processOLA(this.inputBuffersToSend, this.outputBuffersToRetrieve, params);\n    this.handleOutputBuffersToRetrieve();\n    this.writeOutputs(outputs);\n    this.shiftOutputBuffers();\n\n    return true;\n  }\n\n  processOLA(inputs, outputs, params) {\n    console.assert(false, 'Not overriden');\n  }\n}\n\nexport default OLAProcessor;\n","'use strict';\n// sourced from https://github.com/indutny/fft.js/\n// LICENSE\n// This software is licensed under the MIT License.\n// Copyright Fedor Indutny, 2017.\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nexport default class FFT {\n  constructor(size) {\n    this.size = size | 0;\n    if (this.size <= 1 || (this.size & (this.size - 1)) !== 0)\n      throw new Error('FFT size must be a power of two and bigger than 1');\n\n    this._csize = size << 1;\n\n    // NOTE: Use of `var` is intentional for old V8 versions\n    var table = new Array(this.size * 2);\n    for (var i = 0; i < table.length; i += 2) {\n      const angle = (Math.PI * i) / this.size;\n      table[i] = Math.cos(angle);\n      table[i + 1] = -Math.sin(angle);\n    }\n    this.table = table;\n\n    // Find size's power of two\n    var power = 0;\n    for (var t = 1; this.size > t; t <<= 1) power++;\n\n    // Calculate initial step's width:\n    //   * If we are full radix-4 - it is 2x smaller to give inital len=8\n    //   * Otherwise it is the same as `power` to give len=4\n    this._width = power % 2 === 0 ? power - 1 : power;\n\n    // Pre-compute bit-reversal patterns\n    this._bitrev = new Array(1 << this._width);\n    for (var j = 0; j < this._bitrev.length; j++) {\n      this._bitrev[j] = 0;\n      for (var shift = 0; shift < this._width; shift += 2) {\n        var revShift = this._width - shift - 2;\n        this._bitrev[j] |= ((j >>> shift) & 3) << revShift;\n      }\n    }\n\n    this._out = null;\n    this._data = null;\n    this._inv = 0;\n  }\n  fromComplexArray(complex, storage) {\n    var res = storage || new Array(complex.length >>> 1);\n    for (var i = 0; i < complex.length; i += 2) res[i >>> 1] = complex[i];\n    return res;\n  }\n  createComplexArray() {\n    const res = new Array(this._csize);\n    for (var i = 0; i < res.length; i++) res[i] = 0;\n    return res;\n  }\n  toComplexArray(input, storage) {\n    var res = storage || this.createComplexArray();\n    for (var i = 0; i < res.length; i += 2) {\n      res[i] = input[i >>> 1];\n      res[i + 1] = 0;\n    }\n    return res;\n  }\n  completeSpectrum(spectrum) {\n    var size = this._csize;\n    var half = size >>> 1;\n    for (var i = 2; i < half; i += 2) {\n      spectrum[size - i] = spectrum[i];\n      spectrum[size - i + 1] = -spectrum[i + 1];\n    }\n  }\n  transform(out, data) {\n    if (out === data) throw new Error('Input and output buffers must be different');\n\n    this._out = out;\n    this._data = data;\n    this._inv = 0;\n    this._transform4();\n    this._out = null;\n    this._data = null;\n  }\n  realTransform(out, data) {\n    if (out === data) throw new Error('Input and output buffers must be different');\n\n    this._out = out;\n    this._data = data;\n    this._inv = 0;\n    this._realTransform4();\n    this._out = null;\n    this._data = null;\n  }\n  inverseTransform(out, data) {\n    if (out === data) throw new Error('Input and output buffers must be different');\n\n    this._out = out;\n    this._data = data;\n    this._inv = 1;\n    this._transform4();\n    for (var i = 0; i < out.length; i++) out[i] /= this.size;\n    this._out = null;\n    this._data = null;\n  }\n  // radix-4 implementation\n  //\n  // NOTE: Uses of `var` are intentional for older V8 version that do not\n  // support both `let compound assignments` and `const phi`\n  _transform4() {\n    var out = this._out;\n    var size = this._csize;\n\n    // Initial step (permute and transform)\n    var width = this._width;\n    var step = 1 << width;\n    var len = (size / step) << 1;\n\n    var outOff;\n    var t;\n    var bitrev = this._bitrev;\n    if (len === 4) {\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n        const off = bitrev[t];\n        this._singleTransform2(outOff, off, step);\n      }\n    } else {\n      // len === 8\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n        const off = bitrev[t];\n        this._singleTransform4(outOff, off, step);\n      }\n    }\n\n    // Loop through steps in decreasing order\n    var inv = this._inv ? -1 : 1;\n    var table = this.table;\n    for (step >>= 2; step >= 2; step >>= 2) {\n      len = (size / step) << 1;\n      var quarterLen = len >>> 2;\n\n      // Loop through offsets in the data\n      for (outOff = 0; outOff < size; outOff += len) {\n        // Full case\n        var limit = outOff + quarterLen;\n        for (var i = outOff, k = 0; i < limit; i += 2, k += step) {\n          const A = i;\n          const B = A + quarterLen;\n          const C = B + quarterLen;\n          const D = C + quarterLen;\n\n          // Original values\n          const Ar = out[A];\n          const Ai = out[A + 1];\n          const Br = out[B];\n          const Bi = out[B + 1];\n          const Cr = out[C];\n          const Ci = out[C + 1];\n          const Dr = out[D];\n          const Di = out[D + 1];\n\n          // Middle values\n          const MAr = Ar;\n          const MAi = Ai;\n\n          const tableBr = table[k];\n          const tableBi = inv * table[k + 1];\n          const MBr = Br * tableBr - Bi * tableBi;\n          const MBi = Br * tableBi + Bi * tableBr;\n\n          const tableCr = table[2 * k];\n          const tableCi = inv * table[2 * k + 1];\n          const MCr = Cr * tableCr - Ci * tableCi;\n          const MCi = Cr * tableCi + Ci * tableCr;\n\n          const tableDr = table[3 * k];\n          const tableDi = inv * table[3 * k + 1];\n          const MDr = Dr * tableDr - Di * tableDi;\n          const MDi = Dr * tableDi + Di * tableDr;\n\n          // Pre-Final values\n          const T0r = MAr + MCr;\n          const T0i = MAi + MCi;\n          const T1r = MAr - MCr;\n          const T1i = MAi - MCi;\n          const T2r = MBr + MDr;\n          const T2i = MBi + MDi;\n          const T3r = inv * (MBr - MDr);\n          const T3i = inv * (MBi - MDi);\n\n          // Final values\n          const FAr = T0r + T2r;\n          const FAi = T0i + T2i;\n\n          const FCr = T0r - T2r;\n          const FCi = T0i - T2i;\n\n          const FBr = T1r + T3i;\n          const FBi = T1i - T3r;\n\n          const FDr = T1r - T3i;\n          const FDi = T1i + T3r;\n\n          out[A] = FAr;\n          out[A + 1] = FAi;\n          out[B] = FBr;\n          out[B + 1] = FBi;\n          out[C] = FCr;\n          out[C + 1] = FCi;\n          out[D] = FDr;\n          out[D + 1] = FDi;\n        }\n      }\n    }\n  }\n  // radix-2 implementation\n  //\n  // NOTE: Only called for len=4\n  _singleTransform2(outOff, off, step) {\n    const out = this._out;\n    const data = this._data;\n\n    const evenR = data[off];\n    const evenI = data[off + 1];\n    const oddR = data[off + step];\n    const oddI = data[off + step + 1];\n\n    const leftR = evenR + oddR;\n    const leftI = evenI + oddI;\n    const rightR = evenR - oddR;\n    const rightI = evenI - oddI;\n\n    out[outOff] = leftR;\n    out[outOff + 1] = leftI;\n    out[outOff + 2] = rightR;\n    out[outOff + 3] = rightI;\n  }\n  // radix-4\n  //\n  // NOTE: Only called for len=8\n  _singleTransform4(outOff, off, step) {\n    const out = this._out;\n    const data = this._data;\n    const inv = this._inv ? -1 : 1;\n    const step2 = step * 2;\n    const step3 = step * 3;\n\n    // Original values\n    const Ar = data[off];\n    const Ai = data[off + 1];\n    const Br = data[off + step];\n    const Bi = data[off + step + 1];\n    const Cr = data[off + step2];\n    const Ci = data[off + step2 + 1];\n    const Dr = data[off + step3];\n    const Di = data[off + step3 + 1];\n\n    // Pre-Final values\n    const T0r = Ar + Cr;\n    const T0i = Ai + Ci;\n    const T1r = Ar - Cr;\n    const T1i = Ai - Ci;\n    const T2r = Br + Dr;\n    const T2i = Bi + Di;\n    const T3r = inv * (Br - Dr);\n    const T3i = inv * (Bi - Di);\n\n    // Final values\n    const FAr = T0r + T2r;\n    const FAi = T0i + T2i;\n\n    const FBr = T1r + T3i;\n    const FBi = T1i - T3r;\n\n    const FCr = T0r - T2r;\n    const FCi = T0i - T2i;\n\n    const FDr = T1r - T3i;\n    const FDi = T1i + T3r;\n\n    out[outOff] = FAr;\n    out[outOff + 1] = FAi;\n    out[outOff + 2] = FBr;\n    out[outOff + 3] = FBi;\n    out[outOff + 4] = FCr;\n    out[outOff + 5] = FCi;\n    out[outOff + 6] = FDr;\n    out[outOff + 7] = FDi;\n  }\n  // Real input radix-4 implementation\n  _realTransform4() {\n    var out = this._out;\n    var size = this._csize;\n\n    // Initial step (permute and transform)\n    var width = this._width;\n    var step = 1 << width;\n    var len = (size / step) << 1;\n\n    var outOff;\n    var t;\n    var bitrev = this._bitrev;\n    if (len === 4) {\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n        const off = bitrev[t];\n        this._singleRealTransform2(outOff, off >>> 1, step >>> 1);\n      }\n    } else {\n      // len === 8\n      for (outOff = 0, t = 0; outOff < size; outOff += len, t++) {\n        const off = bitrev[t];\n        this._singleRealTransform4(outOff, off >>> 1, step >>> 1);\n      }\n    }\n\n    // Loop through steps in decreasing order\n    var inv = this._inv ? -1 : 1;\n    var table = this.table;\n    for (step >>= 2; step >= 2; step >>= 2) {\n      len = (size / step) << 1;\n      var halfLen = len >>> 1;\n      var quarterLen = halfLen >>> 1;\n      var hquarterLen = quarterLen >>> 1;\n\n      // Loop through offsets in the data\n      for (outOff = 0; outOff < size; outOff += len) {\n        for (var i = 0, k = 0; i <= hquarterLen; i += 2, k += step) {\n          var A = outOff + i;\n          var B = A + quarterLen;\n          var C = B + quarterLen;\n          var D = C + quarterLen;\n\n          // Original values\n          var Ar = out[A];\n          var Ai = out[A + 1];\n          var Br = out[B];\n          var Bi = out[B + 1];\n          var Cr = out[C];\n          var Ci = out[C + 1];\n          var Dr = out[D];\n          var Di = out[D + 1];\n\n          // Middle values\n          var MAr = Ar;\n          var MAi = Ai;\n\n          var tableBr = table[k];\n          var tableBi = inv * table[k + 1];\n          var MBr = Br * tableBr - Bi * tableBi;\n          var MBi = Br * tableBi + Bi * tableBr;\n\n          var tableCr = table[2 * k];\n          var tableCi = inv * table[2 * k + 1];\n          var MCr = Cr * tableCr - Ci * tableCi;\n          var MCi = Cr * tableCi + Ci * tableCr;\n\n          var tableDr = table[3 * k];\n          var tableDi = inv * table[3 * k + 1];\n          var MDr = Dr * tableDr - Di * tableDi;\n          var MDi = Dr * tableDi + Di * tableDr;\n\n          // Pre-Final values\n          var T0r = MAr + MCr;\n          var T0i = MAi + MCi;\n          var T1r = MAr - MCr;\n          var T1i = MAi - MCi;\n          var T2r = MBr + MDr;\n          var T2i = MBi + MDi;\n          var T3r = inv * (MBr - MDr);\n          var T3i = inv * (MBi - MDi);\n\n          // Final values\n          var FAr = T0r + T2r;\n          var FAi = T0i + T2i;\n\n          var FBr = T1r + T3i;\n          var FBi = T1i - T3r;\n\n          out[A] = FAr;\n          out[A + 1] = FAi;\n          out[B] = FBr;\n          out[B + 1] = FBi;\n\n          // Output final middle point\n          if (i === 0) {\n            var FCr = T0r - T2r;\n            var FCi = T0i - T2i;\n            out[C] = FCr;\n            out[C + 1] = FCi;\n            continue;\n          }\n\n          // Do not overwrite ourselves\n          if (i === hquarterLen) continue;\n\n          // In the flipped case:\n          // MAi = -MAi\n          // MBr=-MBi, MBi=-MBr\n          // MCr=-MCr\n          // MDr=MDi, MDi=MDr\n          var ST0r = T1r;\n          var ST0i = -T1i;\n          var ST1r = T0r;\n          var ST1i = -T0i;\n          var ST2r = -inv * T3i;\n          var ST2i = -inv * T3r;\n          var ST3r = -inv * T2i;\n          var ST3i = -inv * T2r;\n\n          var SFAr = ST0r + ST2r;\n          var SFAi = ST0i + ST2i;\n\n          var SFBr = ST1r + ST3i;\n          var SFBi = ST1i - ST3r;\n\n          var SA = outOff + quarterLen - i;\n          var SB = outOff + halfLen - i;\n\n          out[SA] = SFAr;\n          out[SA + 1] = SFAi;\n          out[SB] = SFBr;\n          out[SB + 1] = SFBi;\n        }\n      }\n    }\n  }\n  // radix-2 implementation\n  //\n  // NOTE: Only called for len=4\n  _singleRealTransform2(outOff, off, step) {\n    const out = this._out;\n    const data = this._data;\n\n    const evenR = data[off];\n    const oddR = data[off + step];\n\n    const leftR = evenR + oddR;\n    const rightR = evenR - oddR;\n\n    out[outOff] = leftR;\n    out[outOff + 1] = 0;\n    out[outOff + 2] = rightR;\n    out[outOff + 3] = 0;\n  }\n  // radix-4\n  //\n  // NOTE: Only called for len=8\n  _singleRealTransform4(outOff, off, step) {\n    const out = this._out;\n    const data = this._data;\n    const inv = this._inv ? -1 : 1;\n    const step2 = step * 2;\n    const step3 = step * 3;\n\n    // Original values\n    const Ar = data[off];\n    const Br = data[off + step];\n    const Cr = data[off + step2];\n    const Dr = data[off + step3];\n\n    // Pre-Final values\n    const T0r = Ar + Cr;\n    const T1r = Ar - Cr;\n    const T2r = Br + Dr;\n    const T3r = inv * (Br - Dr);\n\n    // Final values\n    const FAr = T0r + T2r;\n\n    const FBr = T1r;\n    const FBi = -T3r;\n\n    const FCr = T0r - T2r;\n\n    const FDr = T1r;\n    const FDi = T3r;\n\n    out[outOff] = FAr;\n    out[outOff + 1] = 0;\n    out[outOff + 2] = FBr;\n    out[outOff + 3] = FBi;\n    out[outOff + 4] = FCr;\n    out[outOff + 5] = 0;\n    out[outOff + 6] = FDr;\n    out[outOff + 7] = FDi;\n  }\n}\n","// coarse, crush, and shape processors adapted from dktr0's webdirt: https://github.com/dktr0/WebDirt/blob/5ce3d698362c54d6e1b68acc47eb2955ac62c793/dist/AudioWorklets.js\n// LICENSE GNU General Public License v3.0 see https://github.com/dktr0/WebDirt/blob/main/LICENSE\n// TOFIX: THIS FILE DOES NOT SUPPORT IMPORTS ON DEPOLYMENT\n\nimport OLAProcessor from './ola-processor';\nimport FFT from './fft.js';\n\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\nconst _mod = (n, m) => ((n % m) + m) % m;\n\nconst blockSize = 128;\n// adjust waveshape to remove frequencies above nyquist to prevent aliasing\n// referenced from https://www.kvraudio.com/forum/viewtopic.php?t=375517\nfunction polyBlep(phase, dt) {\n  // 0 <= phase < 1\n  if (phase < dt) {\n    phase /= dt;\n    // 2 * (phase - phase^2/2 - 0.5)\n    return phase + phase - phase * phase - 1;\n  }\n\n  // -1 < phase < 0\n  else if (phase > 1 - dt) {\n    phase = (phase - 1) / dt;\n    // 2 * (phase^2/2 + phase + 0.5)\n    return phase * phase + phase + phase + 1;\n  }\n\n  // 0 otherwise\n  else {\n    return 0;\n  }\n}\n\nconst waveshapes = {\n  tri(phase, skew = 0.5) {\n    const x = 1 - skew;\n    if (phase >= skew) {\n      return 1 / x - phase / x;\n    }\n    return phase / skew;\n  },\n  sine(phase) {\n    return Math.sin(Math.PI * 2 * phase) * 0.5 + 0.5;\n  },\n  ramp(phase) {\n    return phase;\n  },\n  saw(phase) {\n    return 1 - phase;\n  },\n\n  square(phase, skew = 0.5) {\n    if (phase >= skew) {\n      return 0;\n    }\n    return 1;\n  },\n  custom(phase, values = [0, 1]) {\n    const numParts = values.length - 1;\n    const currPart = Math.floor(phase * numParts);\n\n    const partLength = 1 / numParts;\n    const startVal = clamp(values[currPart], 0, 1);\n    const endVal = clamp(values[currPart + 1], 0, 1);\n    const y2 = endVal;\n    const y1 = startVal;\n    const x1 = 0;\n    const x2 = partLength;\n    const slope = (y2 - y1) / (x2 - x1);\n    return slope * (phase - partLength * currPart) + startVal;\n  },\n  sawblep(phase, dt) {\n    const v = 2 * phase - 1;\n    return v - polyBlep(phase, dt);\n  },\n};\n\nconst waveShapeNames = Object.keys(waveshapes);\nclass LFOProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [\n      { name: 'time', defaultValue: 0 },\n      { name: 'end', defaultValue: 0 },\n      { name: 'frequency', defaultValue: 0.5 },\n      { name: 'skew', defaultValue: 0.5 },\n      { name: 'depth', defaultValue: 1 },\n      { name: 'phaseoffset', defaultValue: 0 },\n      { name: 'shape', defaultValue: 0 },\n      { name: 'dcoffset', defaultValue: 0 },\n    ];\n  }\n\n  constructor() {\n    super();\n    this.phase;\n  }\n\n  incrementPhase(dt) {\n    this.phase += dt;\n    if (this.phase > 1.0) {\n      this.phase = this.phase - 1;\n    }\n  }\n\n  process(inputs, outputs, parameters) {\n    // eslint-disable-next-line no-undef\n    if (currentTime >= parameters.end[0]) {\n      return false;\n    }\n\n    const output = outputs[0];\n    const frequency = parameters['frequency'][0];\n\n    const time = parameters['time'][0];\n    const depth = parameters['depth'][0];\n    const skew = parameters['skew'][0];\n    const phaseoffset = parameters['phaseoffset'][0];\n\n    const dcoffset = parameters['dcoffset'][0];\n    const shape = waveShapeNames[parameters['shape'][0]];\n\n    const blockSize = output[0].length ?? 0;\n\n    if (this.phase == null) {\n      this.phase = _mod(time * frequency + phaseoffset, 1);\n    }\n    // eslint-disable-next-line no-undef\n    const dt = frequency / sampleRate;\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < output.length; i++) {\n        const modval = (waveshapes[shape](this.phase, skew) + dcoffset) * depth;\n        output[i][n] = modval;\n      }\n      this.incrementPhase(dt);\n    }\n\n    return true;\n  }\n}\nregisterProcessor('lfo-processor', LFOProcessor);\n\nclass CoarseProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [{ name: 'coarse', defaultValue: 1 }];\n  }\n\n  constructor() {\n    super();\n    this.started = false;\n  }\n\n  process(inputs, outputs, parameters) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n    this.started = hasInput;\n\n    let coarse = parameters.coarse[0] ?? 0;\n    coarse = Math.max(1, coarse);\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < input.length; i++) {\n        output[i][n] = n % coarse === 0 ? input[i][n] : output[i][n - 1];\n      }\n    }\n    return true;\n  }\n}\nregisterProcessor('coarse-processor', CoarseProcessor);\n\nclass CrushProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [{ name: 'crush', defaultValue: 0 }];\n  }\n\n  constructor() {\n    super();\n    this.started = false;\n  }\n\n  process(inputs, outputs, parameters) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n    this.started = hasInput;\n\n    let crush = parameters.crush[0] ?? 8;\n    crush = Math.max(1, crush);\n\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < input.length; i++) {\n        const x = Math.pow(2, crush - 1);\n        output[i][n] = Math.round(input[i][n] * x) / x;\n      }\n    }\n    return true;\n  }\n}\nregisterProcessor('crush-processor', CrushProcessor);\n\nclass ShapeProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [\n      { name: 'shape', defaultValue: 0 },\n      { name: 'postgain', defaultValue: 1 },\n    ];\n  }\n\n  constructor() {\n    super();\n    this.started = false;\n  }\n\n  process(inputs, outputs, parameters) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n    this.started = hasInput;\n\n    let shape = parameters.shape[0];\n    shape = shape < 1 ? shape : 1.0 - 4e-10;\n    shape = (2.0 * shape) / (1.0 - shape);\n    const postgain = Math.max(0.001, Math.min(1, parameters.postgain[0]));\n\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < input.length; i++) {\n        output[i][n] = (((1 + shape) * input[i][n]) / (1 + shape * Math.abs(input[i][n]))) * postgain;\n      }\n    }\n    return true;\n  }\n}\nregisterProcessor('shape-processor', ShapeProcessor);\n\nfunction fast_tanh(x) {\n  const x2 = x * x;\n  return (x * (27.0 + x2)) / (27.0 + 9.0 * x2);\n}\nconst _PI = 3.14159265359;\n//adapted from https://github.com/TheBouteillacBear/webaudioworklet-wasm?tab=MIT-1-ov-file\nclass LadderProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [\n      { name: 'frequency', defaultValue: 500 },\n      { name: 'q', defaultValue: 1 },\n      { name: 'drive', defaultValue: 0.69 },\n    ];\n  }\n\n  constructor() {\n    super();\n    this.started = false;\n    this.p0 = [0, 0];\n    this.p1 = [0, 0];\n    this.p2 = [0, 0];\n    this.p3 = [0, 0];\n    this.p32 = [0, 0];\n    this.p33 = [0, 0];\n    this.p34 = [0, 0];\n  }\n\n  process(inputs, outputs, parameters) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n\n    this.started = hasInput;\n\n    const resonance = parameters.q[0];\n    const drive = clamp(Math.exp(parameters.drive[0]), 0.1, 2000);\n\n    let cutoff = parameters.frequency[0];\n    // eslint-disable-next-line no-undef\n    cutoff = (cutoff * 2 * _PI) / sampleRate;\n    cutoff = cutoff > 1 ? 1 : cutoff;\n\n    const k = Math.min(8, resonance * 0.4);\n    //               drive makeup  * resonance volume loss makeup\n    let makeupgain = (1 / drive) * Math.min(1.75, 1 + k);\n\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < input.length; i++) {\n        const out = this.p3[i] * 0.360891 + this.p32[i] * 0.41729 + this.p33[i] * 0.177896 + this.p34[i] * 0.0439725;\n\n        this.p34[i] = this.p33[i];\n        this.p33[i] = this.p32[i];\n        this.p32[i] = this.p3[i];\n\n        this.p0[i] += (fast_tanh(input[i][n] * drive - k * out) - fast_tanh(this.p0[i])) * cutoff;\n        this.p1[i] += (fast_tanh(this.p0[i]) - fast_tanh(this.p1[i])) * cutoff;\n        this.p2[i] += (fast_tanh(this.p1[i]) - fast_tanh(this.p2[i])) * cutoff;\n        this.p3[i] += (fast_tanh(this.p2[i]) - fast_tanh(this.p3[i])) * cutoff;\n\n        output[i][n] = out * makeupgain;\n      }\n    }\n    return true;\n  }\n}\nregisterProcessor('ladder-processor', LadderProcessor);\n\nclass DistortProcessor extends AudioWorkletProcessor {\n  static get parameterDescriptors() {\n    return [\n      { name: 'distort', defaultValue: 0 },\n      { name: 'postgain', defaultValue: 1 },\n    ];\n  }\n\n  constructor() {\n    super();\n    this.started = false;\n  }\n\n  process(inputs, outputs, parameters) {\n    const input = inputs[0];\n    const output = outputs[0];\n\n    const hasInput = !(input[0] === undefined);\n    if (this.started && !hasInput) {\n      return false;\n    }\n    this.started = hasInput;\n\n    const shape = Math.expm1(parameters.distort[0]);\n    const postgain = Math.max(0.001, Math.min(1, parameters.postgain[0]));\n\n    for (let n = 0; n < blockSize; n++) {\n      for (let i = 0; i < input.length; i++) {\n        output[i][n] = (((1 + shape) * input[i][n]) / (1 + shape * Math.abs(input[i][n]))) * postgain;\n      }\n    }\n    return true;\n  }\n}\nregisterProcessor('distort-processor', DistortProcessor);\n\n// SUPERSAW\nfunction lerp(a, b, n) {\n  return n * (b - a) + a;\n}\n\nfunction getUnisonDetune(unison, detune, voiceIndex) {\n  if (unison < 2) {\n    return 0;\n  }\n  return lerp(-detune * 0.5, detune * 0.5, voiceIndex / (unison - 1));\n}\nclass SuperSawOscillatorProcessor extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.phase = [];\n  }\n  static get parameterDescriptors() {\n    return [\n      {\n        name: 'begin',\n        defaultValue: 0,\n        max: Number.POSITIVE_INFINITY,\n        min: 0,\n      },\n\n      {\n        name: 'end',\n        defaultValue: 0,\n        max: Number.POSITIVE_INFINITY,\n        min: 0,\n      },\n\n      {\n        name: 'frequency',\n        defaultValue: 440,\n        min: Number.EPSILON,\n      },\n\n      {\n        name: 'panspread',\n        defaultValue: 0.4,\n        min: 0,\n        max: 1,\n      },\n      {\n        name: 'freqspread',\n        defaultValue: 0.2,\n        min: 0,\n      },\n      {\n        name: 'detune',\n        defaultValue: 0,\n        min: 0,\n      },\n\n      {\n        name: 'voices',\n        defaultValue: 5,\n        min: 1,\n      },\n    ];\n  }\n  process(input, outputs, params) {\n    // eslint-disable-next-line no-undef\n    if (currentTime <= params.begin[0]) {\n      return true;\n    }\n    // eslint-disable-next-line no-undef\n    if (currentTime >= params.end[0]) {\n      // this.port.postMessage({ type: 'onended' });\n      return false;\n    }\n    let frequency = params.frequency[0];\n    //apply detune in cents\n    frequency = frequency * Math.pow(2, params.detune[0] / 1200);\n\n    const output = outputs[0];\n    const voices = params.voices[0];\n    const freqspread = params.freqspread[0];\n    const panspread = params.panspread[0] * 0.5 + 0.5;\n    const gain1 = Math.sqrt(1 - panspread);\n    const gain2 = Math.sqrt(panspread);\n\n    for (let n = 0; n < voices; n++) {\n      const isOdd = (n & 1) == 1;\n\n      //applies unison \"spread\" detune in semitones\n      const freq = frequency * Math.pow(2, getUnisonDetune(voices, freqspread, n) / 12);\n      let gainL = gain1;\n      let gainR = gain2;\n      // invert right and left gain\n      if (isOdd) {\n        gainL = gain2;\n        gainR = gain1;\n      }\n      // eslint-disable-next-line no-undef\n      const dt = freq / sampleRate;\n\n      for (let i = 0; i < output[0].length; i++) {\n        this.phase[n] = this.phase[n] ?? Math.random();\n        const v = waveshapes.sawblep(this.phase[n], dt);\n\n        output[0][i] = output[0][i] + v * gainL;\n        output[1][i] = output[1][i] + v * gainR;\n\n        this.phase[n] += dt;\n\n        if (this.phase[n] > 1.0) {\n          this.phase[n] = this.phase[n] - 1;\n        }\n      }\n    }\n    return true;\n  }\n}\n\nregisterProcessor('supersaw-oscillator', SuperSawOscillatorProcessor);\n\n// Phase Vocoder sourced from // sourced from https://github.com/olvb/phaze/tree/master?tab=readme-ov-file\nconst BUFFERED_BLOCK_SIZE = 2048;\n\nfunction genHannWindow(length) {\n  let win = new Float32Array(length);\n  for (var i = 0; i < length; i++) {\n    win[i] = 0.5 * (1 - Math.cos((2 * Math.PI * i) / length));\n  }\n  return win;\n}\n\nclass PhaseVocoderProcessor extends OLAProcessor {\n  static get parameterDescriptors() {\n    return [\n      {\n        name: 'pitchFactor',\n        defaultValue: 1.0,\n      },\n    ];\n  }\n\n  constructor(options) {\n    options.processorOptions = {\n      blockSize: BUFFERED_BLOCK_SIZE,\n    };\n    super(options);\n\n    this.fftSize = this.blockSize;\n    this.timeCursor = 0;\n\n    this.hannWindow = genHannWindow(this.blockSize);\n    // prepare FFT and pre-allocate buffers\n    this.fft = new FFT(this.fftSize);\n    this.freqComplexBuffer = this.fft.createComplexArray();\n    this.freqComplexBufferShifted = this.fft.createComplexArray();\n    this.timeComplexBuffer = this.fft.createComplexArray();\n    this.magnitudes = new Float32Array(this.fftSize / 2 + 1);\n    this.peakIndexes = new Int32Array(this.magnitudes.length);\n    this.nbPeaks = 0;\n  }\n\n  processOLA(inputs, outputs, parameters) {\n    // no automation, take last value\n\n    let pitchFactor = parameters.pitchFactor[parameters.pitchFactor.length - 1];\n\n    if (pitchFactor < 0) {\n      pitchFactor = pitchFactor * 0.25;\n    }\n    pitchFactor = Math.max(0, pitchFactor + 1);\n\n    for (var i = 0; i < this.nbInputs; i++) {\n      for (var j = 0; j < inputs[i].length; j++) {\n        // big assumption here: output is symetric to input\n        var input = inputs[i][j];\n        var output = outputs[i][j];\n\n        this.applyHannWindow(input);\n\n        this.fft.realTransform(this.freqComplexBuffer, input);\n\n        this.computeMagnitudes();\n        this.findPeaks();\n        this.shiftPeaks(pitchFactor);\n\n        this.fft.completeSpectrum(this.freqComplexBufferShifted);\n        this.fft.inverseTransform(this.timeComplexBuffer, this.freqComplexBufferShifted);\n        this.fft.fromComplexArray(this.timeComplexBuffer, output);\n        this.applyHannWindow(output);\n      }\n    }\n\n    this.timeCursor += this.hopSize;\n  }\n\n  /** Apply Hann window in-place */\n  applyHannWindow(input) {\n    for (var i = 0; i < this.blockSize; i++) {\n      input[i] = input[i] * this.hannWindow[i] * 1.62;\n    }\n  }\n\n  /** Compute squared magnitudes for peak finding **/\n  computeMagnitudes() {\n    var i = 0,\n      j = 0;\n    while (i < this.magnitudes.length) {\n      let real = this.freqComplexBuffer[j];\n      let imag = this.freqComplexBuffer[j + 1];\n      // no need to sqrt for peak finding\n      this.magnitudes[i] = real ** 2 + imag ** 2;\n      i += 1;\n      j += 2;\n    }\n  }\n\n  /** Find peaks in spectrum magnitudes **/\n  findPeaks() {\n    this.nbPeaks = 0;\n    var i = 2;\n    let end = this.magnitudes.length - 2;\n\n    while (i < end) {\n      let mag = this.magnitudes[i];\n\n      if (this.magnitudes[i - 1] >= mag || this.magnitudes[i - 2] >= mag) {\n        i++;\n        continue;\n      }\n      if (this.magnitudes[i + 1] >= mag || this.magnitudes[i + 2] >= mag) {\n        i++;\n        continue;\n      }\n\n      this.peakIndexes[this.nbPeaks] = i;\n      this.nbPeaks++;\n      i += 2;\n    }\n  }\n\n  /** Shift peaks and regions of influence by pitchFactor into new specturm */\n  shiftPeaks(pitchFactor) {\n    // zero-fill new spectrum\n    this.freqComplexBufferShifted.fill(0);\n\n    for (var i = 0; i < this.nbPeaks; i++) {\n      let peakIndex = this.peakIndexes[i];\n      let peakIndexShifted = Math.round(peakIndex * pitchFactor);\n\n      if (peakIndexShifted > this.magnitudes.length) {\n        break;\n      }\n\n      // find region of influence\n      var startIndex = 0;\n      var endIndex = this.fftSize;\n      if (i > 0) {\n        let peakIndexBefore = this.peakIndexes[i - 1];\n        startIndex = peakIndex - Math.floor((peakIndex - peakIndexBefore) / 2);\n      }\n      if (i < this.nbPeaks - 1) {\n        let peakIndexAfter = this.peakIndexes[i + 1];\n        endIndex = peakIndex + Math.ceil((peakIndexAfter - peakIndex) / 2);\n      }\n\n      // shift whole region of influence around peak to shifted peak\n      let startOffset = startIndex - peakIndex;\n      let endOffset = endIndex - peakIndex;\n      for (var j = startOffset; j < endOffset; j++) {\n        let binIndex = peakIndex + j;\n        let binIndexShifted = peakIndexShifted + j;\n\n        if (binIndexShifted >= this.magnitudes.length) {\n          break;\n        }\n\n        // apply phase correction\n        let omegaDelta = (2 * Math.PI * (binIndexShifted - binIndex)) / this.fftSize;\n        let phaseShiftReal = Math.cos(omegaDelta * this.timeCursor);\n        let phaseShiftImag = Math.sin(omegaDelta * this.timeCursor);\n\n        let indexReal = binIndex * 2;\n        let indexImag = indexReal + 1;\n        let valueReal = this.freqComplexBuffer[indexReal];\n        let valueImag = this.freqComplexBuffer[indexImag];\n\n        let valueShiftedReal = valueReal * phaseShiftReal - valueImag * phaseShiftImag;\n        let valueShiftedImag = valueReal * phaseShiftImag + valueImag * phaseShiftReal;\n\n        let indexShiftedReal = binIndexShifted * 2;\n        let indexShiftedImag = indexShiftedReal + 1;\n        this.freqComplexBufferShifted[indexShiftedReal] += valueShiftedReal;\n        this.freqComplexBufferShifted[indexShiftedImag] += valueShiftedImag;\n      }\n    }\n  }\n}\n\nregisterProcessor('phase-vocoder-processor', PhaseVocoderProcessor);\n"],"names":["OLAProcessor","options","i","inputs","outputs","nbChannels","inputIndex","outputIndex","j","webAudioBlock","k","params","hasInput","FFT","size","table","angle","power","t","shift","revShift","complex","storage","res","input","spectrum","half","out","data","width","step","len","outOff","bitrev","off","inv","quarterLen","limit","A","B","C","D","Ar","Ai","Br","Bi","Cr","Ci","Dr","Di","MAr","MAi","tableBr","tableBi","MBr","MBi","tableCr","tableCi","MCr","MCi","tableDr","tableDi","MDr","MDi","T0r","T0i","T1r","T1i","T2r","T2i","T3r","T3i","FAr","FAi","FCr","FCi","FBr","FBi","FDr","FDi","evenR","evenI","oddR","oddI","leftR","leftI","rightR","rightI","step2","step3","halfLen","hquarterLen","ST0r","ST0i","ST1r","ST1i","ST2r","ST2i","ST3r","ST3i","SFAr","SFAi","SFBr","SFBi","SA","SB","clamp","num","min","max","_mod","n","m","blockSize","polyBlep","phase","dt","waveshapes","skew","x","values","numParts","currPart","partLength","startVal","y2","y1","x1","x2","waveShapeNames","LFOProcessor","parameters","output","frequency","time","depth","phaseoffset","dcoffset","shape","modval","CoarseProcessor","coarse","CrushProcessor","crush","ShapeProcessor","postgain","fast_tanh","_PI","LadderProcessor","resonance","drive","cutoff","makeupgain","DistortProcessor","lerp","a","b","getUnisonDetune","unison","detune","voiceIndex","SuperSawOscillatorProcessor","voices","freqspread","panspread","gain1","gain2","isOdd","freq","gainL","gainR","v","BUFFERED_BLOCK_SIZE","genHannWindow","length","win","PhaseVocoderProcessor","pitchFactor","real","imag","end","mag","peakIndex","peakIndexShifted","startIndex","endIndex","peakIndexBefore","peakIndexAfter","startOffset","endOffset","binIndex","binIndexShifted","omegaDelta","phaseShiftReal","phaseShiftImag","indexReal","indexImag","valueReal","valueImag","valueShiftedReal","valueShiftedImag","indexShiftedReal","indexShiftedImag"],"mappings":"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"}