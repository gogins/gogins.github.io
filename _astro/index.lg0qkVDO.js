/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var gc=2e3,g={s:1,n:0,d:1};function U(t,e){if(isNaN(t=parseInt(t,10)))throw ht();return t*e}function T(t,e){if(e===0)throw Ot();var n=Object.create(k.prototype);n.s=t<0?-1:1,t=t<0?-t:t;var s=Y(t,e);return n.n=t/s,n.d=e/s,n}function Xt(t){for(var e={},n=t,s=2,r=4;r<=n;){for(;n%s===0;)n/=s,e[s]=(e[s]||0)+1;r+=1+2*s++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var J=function(t,e){var n=0,s=1,r=1,o=0,i=0,u=0,a=1,h=1,l=0,d=1,b=1,w=1,v=1e7,M;if(t!=null)if(e!==void 0){if(n=t,s=e,r=n*s,n%1!==0||s%1!==0)throw _c()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)n=t.n,s=t.d,"s"in t&&(n*=t.s);else if(0 in t)n=t[0],1 in t&&(s=t[1]);else throw ht();r=n*s;break}case"number":{if(t<0&&(r=t,t=-t),t%1===0)n=t;else if(t>0){for(t>=1&&(h=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=h);d<=v&&w<=v;)if(M=(l+b)/(d+w),t===M){d+w<=v?(n=l+b,s=d+w):w>d?(n=b,s=w):(n=l,s=d);break}else t>M?(l+=b,d+=w):(b+=l,w+=d),d>v?(n=b,s=w):(n=l,s=d);n*=h}else(isNaN(t)||isNaN(e))&&(s=n=NaN);break}case"string":{if(d=t.match(/\d+|./g),d===null)throw ht();if(d[l]==="-"?(r=-1,l++):d[l]==="+"&&l++,d.length===l+1?i=U(d[l++],r):d[l+1]==="."||d[l]==="."?(d[l]!=="."&&(o=U(d[l++],r)),l++,(l+1===d.length||d[l+1]==="("&&d[l+3]===")"||d[l+1]==="'"&&d[l+3]==="'")&&(i=U(d[l],r),a=Math.pow(10,d[l].length),l++),(d[l]==="("&&d[l+2]===")"||d[l]==="'"&&d[l+2]==="'")&&(u=U(d[l+1],r),h=Math.pow(10,d[l+1].length)-1,l+=3)):d[l+1]==="/"||d[l+1]===":"?(i=U(d[l],r),a=U(d[l+2],1),l+=3):d[l+3]==="/"&&d[l+1]===" "&&(o=U(d[l],r),i=U(d[l+2],r),a=U(d[l+4],1),l+=5),d.length<=l){s=a*h,r=n=u+s*o+h*i;break}}default:throw ht()}if(s===0)throw Ot();g.s=r<0?-1:1,g.n=Math.abs(n),g.d=Math.abs(s)};function wc(t,e,n){for(var s=1;e>0;t=t*t%n,e>>=1)e&1&&(s=s*t%n);return s}function bc(t,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var n=10%e,s=1;n!==1;s++)if(n=n*10%e,s>gc)return 0;return s}function vc(t,e,n){for(var s=1,r=wc(10,n,e),o=0;o<300;o++){if(s===r)return o;s=s*10%e,r=r*10%e}return 0}function Y(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function k(t,e){if(J(t,e),this instanceof k)t=Y(g.d,g.n),this.s=g.s,this.n=g.n/t,this.d=g.d/t;else return T(g.s*g.n,g.d)}var Ot=function(){return new Error("Division by Zero")},ht=function(){return new Error("Invalid argument")},_c=function(){return new Error("Parameters must be integer")};k.prototype={s:1,n:0,d:1,abs:function(){return T(this.n,this.d)},neg:function(){return T(-this.s*this.n,this.d)},add:function(t,e){return J(t,e),T(this.s*this.n*g.d+g.s*this.d*g.n,this.d*g.d)},sub:function(t,e){return J(t,e),T(this.s*this.n*g.d-g.s*this.d*g.n,this.d*g.d)},mul:function(t,e){return J(t,e),T(this.s*g.s*this.n*g.n,this.d*g.d)},div:function(t,e){return J(t,e),T(this.s*g.s*this.n*g.d,this.d*g.n)},clone:function(){return T(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new k(NaN);if(t===void 0)return T(this.s*this.n%this.d,1);if(J(t,e),g.n===0&&this.d===0)throw Ot();return T(this.s*(g.d*this.n)%(g.n*this.d),g.d*this.d)},gcd:function(t,e){return J(t,e),T(Y(g.n,this.n)*Y(g.d,this.d),g.d*this.d)},lcm:function(t,e){return J(t,e),g.n===0&&this.n===0?T(0,1):T(g.n*this.n,Y(g.n,this.n)*Y(g.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,e){return J(t,e),T(this.s*Math.round(this.n*g.d/(this.d*g.n))*g.n,g.d)},inverse:function(){return T(this.s*this.d,this.n)},pow:function(t,e){if(J(t,e),g.d===1)return g.s<0?T(Math.pow(this.s*this.d,g.n),Math.pow(this.n,g.n)):T(Math.pow(this.s*this.n,g.n),Math.pow(this.d,g.n));if(this.s<0)return null;var n=Xt(this.n),s=Xt(this.d),r=1,o=1;for(var i in n)if(i!=="1"){if(i==="0"){r=0;break}if(n[i]*=g.n,n[i]%g.d===0)n[i]/=g.d;else return null;r*=Math.pow(i,n[i])}for(var i in s)if(i!=="1"){if(s[i]*=g.n,s[i]%g.d===0)s[i]/=g.d;else return null;o*=Math.pow(i,s[i])}return g.s<0?T(o,r):T(r,o)},equals:function(t,e){return J(t,e),this.s*this.n*g.d===g.s*g.n*this.d},compare:function(t,e){J(t,e);var n=this.s*this.n*g.d-g.s*g.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),n=e.toContinued(),s=1;s<n.length;s++){for(var r=T(n[s-1],1),o=s-2;o>=0;o--)r=r.inverse().add(n[o]);if(Math.abs(r.sub(e).valueOf())<t)return r.mul(this.s)}return this},divisible:function(t,e){return J(t,e),!(!(g.n*this.d)||this.n*g.d%(g.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",s=this.n,r=this.d;return this.s<0&&(n+="-"),r===1?n+=s:(t&&(e=Math.floor(s/r))>0&&(n+=e,n+=" ",s%=r),n+=s,n+="/",n+=r),n},toLatex:function(t){var e,n="",s=this.n,r=this.d;return this.s<0&&(n+="-"),r===1?n+=s:(t&&(e=Math.floor(s/r))>0&&(n+=e,s%=r),n+="\\frac{",n+=s,n+="}{",n+=r,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,s=[];if(isNaN(e)||isNaN(n))return s;do s.push(Math.floor(e/n)),t=e%n,e=n,n=t;while(e!==1);return s},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var s=bc(e,n),r=vc(e,n,s),o=this.s<0?"-":"";if(o+=e/n|0,e%=n,e*=10,e&&(o+="."),s){for(var i=r;i--;)o+=e/n|0,e%=n,e*=10;o+="(";for(var i=s;i--;)o+=e/n|0,e%=n,e*=10;o+=")"}else for(var i=t;e&&i--;)o+=e/n|0,e%=n,e*=10;return o}};const Mt="strudel.log";let kc=1e3,Yt,te;function x(t,e,n={}){let s=performance.now();Yt===t&&s-te<kc||(Yt=t,te=s,console.log(`%c${t}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(Mt,{detail:{message:t,type:e,data:n}})))}x.key=Mt;const qc=t=>/^[a-gA-G][#bs]*[0-9]$/.test(t),pt=t=>/^[a-gA-G][#bsf]*[0-9]?$/.test(t),se=t=>{if(typeof t!="string")return[];const[e,n="",s]=t.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,n,s?Number(s):void 0]:[]},Tc={c:0,d:2,e:4,f:5,g:7,a:9,b:11},Ac={"#":1,b:-1,s:1,f:-1},ot=(t,e=3)=>{const[n,s,r=e]=se(t);if(!n)throw new Error('not a note: "'+t+'"');const o=Tc[n.toLowerCase()],i=s?.split("").reduce((u,a)=>u+Ac[a],0)||0;return(Number(r)+1)*12+o+i},et=t=>Math.pow(2,(t-69)/12)*440,re=t=>12*Math.log(t/440)/Math.LN2+69,Cc=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=t;if(typeof n=="number")return re(n);if(typeof s=="string")return ot(s);if(typeof s=="number")return s;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},Nc=(t,e)=>(t-e)*1e3,oe=t=>et(typeof t=="number"?t:ot(t)),Sc=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Oc=t=>{const e=Math.floor(t/12)-1;return Sc[t%12]+e},it=(t,e)=>(t%e+e)%e,ie=t=>t.reduce((e,n)=>e+n)/t.length;function ce(t,e=0){return isNaN(Number(t))?(x(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const Mc=(t,e)=>it(Math.round(ce(t??0,0)),e),Bc=t=>{let{value:e,context:n}=t,s=e;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof s=="number"&&n.type!=="frequency")s=et(t.value);else if(typeof s=="number"&&n.type==="frequency")s=t.value;else if(typeof s!="string"||!pt(s))throw new Error("not a note: "+JSON.stringify(s));return s},xc=t=>{let{value:e,context:n}=t;if(typeof e=="object")return e.freq?e.freq:oe(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=et(t.value);else if(typeof e=="string"&&pt(e))e=et(ot(t.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},ue=(t,e)=>t.slice(e).concat(t.slice(0,e)),ae=(...t)=>t.reduce((e,n)=>(...s)=>e(n(...s)),e=>e),zc=(...t)=>ae(...t.reverse()),st=t=>t.filter(e=>e!=null),K=t=>[].concat(...t),tt=t=>t,Ec=(t,e)=>t,Bt=(t,e)=>Array.from({length:e-t+1},(n,s)=>s+t);function _(t,e,n=t.length){const s=function r(...o){if(o.length>=n)return t.apply(this,o);{const i=function(...u){return r.apply(this,o.concat(u))};return e&&e(i,o),i}};return e&&e(s,[]),s}function xt(t){const e=Number(t);if(!isNaN(e))return e;if(pt(t))return ot(t);throw new Error(`cannot parse as numeral: "${t}"`)}function zt(t,e){return(...n)=>t(...n.map(e))}function $(t){return zt(t,xt)}function le(t){const e=Number(t);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[t];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${t}"`)}const jc=t=>zt(t,le),Et=function(t,e){return[e.slice(0,t),e.slice(t)]},jt=(t,e,n)=>e.map((s,r)=>t(s,n[r])),fe=function(t){const e=[];for(let n=0;n<t.length-1;++n)e.push([t[n],t[n+1]]);return e},he=(t,e,n)=>Math.min(Math.max(t,e),n),Pc=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],Jc=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],$c=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],Lc=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],Wc=["I","Ro","Ha","Ni","Ho","He","To"],Rc=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],Ic=(t,e="letters")=>{const s=(e==="solfeggio"?Pc:e==="indian"?Jc:e==="german"?$c:e==="byzantine"?Lc:e==="japanese"?Wc:Rc)[t%12],r=Math.floor(t/12)-1;return s+r};function Hc(t){var e={};return t.filter(function(n){return e.hasOwn(n)?!1:e[n]=!0})}function Fc(t){return t.sort().filter(function(e,n,s){return!n||e!=s[n-1]})}function de(t){return t.sort((e,n)=>e.compare(n)).filter(function(e,n,s){return!n||e.ne(s[n-1])})}function pe(t){const e=new TextEncoder().encode(t);return btoa(String.fromCharCode(...e))}function me(t){const e=new Uint8Array(atob(t).split("").map(s=>s.charCodeAt(0)));return new TextDecoder().decode(e)}function Dc(t){return encodeURIComponent(pe(t))}function Vc(t){return me(decodeURIComponent(t))}function ye(t,e){return Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([n,s],r)=>[n,e(s,n,r)]))}function _t(t,e){return t/e}class ge{constructor({getTargetClockTime:e=Qc,weight:n=16,offsetDelta:s=.005,checkAfterTime:r=2,resetAfterTime:o=8}){this.offsetTime,this.timeAtPrevOffsetSample,this.prevOffsetTimes=[],this.getTargetClockTime=e,this.weight=n,this.offsetDelta=s,this.checkAfterTime=r,this.resetAfterTime=o,this.reset=()=>{this.prevOffsetTimes=[],this.offsetTime=null,this.timeAtPrevOffsetSample=null}}calculateOffset(e){const n=this.getTargetClockTime(),s=n-this.timeAtPrevOffsetSample,r=n-e;if(s>this.resetAfterTime&&this.reset(),this.offsetTime==null&&(this.offsetTime=r),this.prevOffsetTimes.push(r),this.prevOffsetTimes.length>this.weight&&this.prevOffsetTimes.shift(),this.timeAtPrevOffsetSample==null||s>this.checkAfterTime){this.timeAtPrevOffsetSample=n;const o=ie(this.prevOffsetTimes);Math.abs(o-this.offsetTime)>this.offsetDelta&&(this.offsetTime=o)}return this.offsetTime}calculateTimestamp(e,n){return this.calculateOffset(e)+n}}function Gc(){return performance.now()*.001}function Qc(){return Date.now()*.001}k.prototype.sam=function(){return this.floor()};k.prototype.nextSam=function(){return this.sam().add(1)};k.prototype.wholeCycle=function(){return new S(this.sam(),this.nextSam())};k.prototype.cyclePos=function(){return this.sub(this.sam())};k.prototype.lt=function(t){return this.compare(t)<0};k.prototype.gt=function(t){return this.compare(t)>0};k.prototype.lte=function(t){return this.compare(t)<=0};k.prototype.gte=function(t){return this.compare(t)>=0};k.prototype.eq=function(t){return this.compare(t)==0};k.prototype.ne=function(t){return this.compare(t)!=0};k.prototype.max=function(t){return this.gt(t)?this:t};k.prototype.maximum=function(...t){return t=t.map(e=>new k(e)),t.reduce((e,n)=>n.max(e),this)};k.prototype.min=function(t){return this.lt(t)?this:t};k.prototype.mulmaybe=function(t){return t!==void 0?this.mul(t):void 0};k.prototype.divmaybe=function(t){return t!==void 0?this.div(t):void 0};k.prototype.addmaybe=function(t){return t!==void 0?this.add(t):void 0};k.prototype.submaybe=function(t){return t!==void 0?this.sub(t):void 0};k.prototype.show=function(){return this.s*this.n+"/"+this.d};k.prototype.or=function(t){return this.eq(0)?t:this};const p=t=>k(t),Uc=(...t)=>{if(t=st(t),t.length!==0)return t.reduce((e,n)=>e.gcd(n),p(1))},ct=(...t)=>{if(t=st(t),t.length===0)return;const e=t.pop();return t.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),e)};p._original=k;class S{constructor(e,n){this.begin=p(e),this.end=p(n)}get spanCycles(){const e=[];var n=this.begin;const s=this.end,r=s.sam();if(n.equals(s))return[new S(n,s)];for(;s.gt(n);){if(n.sam().equals(r)){e.push(new S(n,this.end));break}const o=n.nextSam();e.push(new S(n,o)),n=o}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new S(e,n)}withTime(e){return new S(e(this.begin),e(this.end))}withEnd(e){return new S(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),s=n.add(e(this.begin.sub(n))),r=n.add(e(this.end.sub(n)));return new S(s,r)}intersection(e){const n=this.begin.max(e.begin),s=this.end.min(e.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new S(n,s)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(p(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class N{constructor(e,n,s,r={},o=!1){this.whole=e,this.part=n,this.value=s,this.context=r,this.stateful=o,o&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let e;return typeof this.value?.duration=="number"?e=p(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,n){return n-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,n){return n<this.whole.begin&&n>this.whole.begin-e}isWithinTime(e,n){return this.whole.begin<=n&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new N(n,e(this.part),this.value,this.context)}withValue(e){return new N(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){return this.context.tags?.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,r]=n(e);return[s,new N(this.whole,this.part,r,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var r=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),r||(s+="("),s+=this.part.show(),r||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new N(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class nt{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new nt(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new nt(this.span,e)}}function Kc(t,e,n){if(e?.value!==void 0&&Object.keys(e).length===1)return x("[warn]: Can't do arithmetic on control pattern."),t;const s=Object.keys(t).filter(r=>Object.keys(e).includes(r));return Object.assign({},t,e,Object.fromEntries(s.map(r=>[r,n(t[r],e[r])])))}_((t,e)=>t*e);_((t,e)=>e.map(t));function we(t,e=60){let n=0,s=p(0),r=[""],o="";for(;r[0].length<e;){const i=t.queryArc(n,n+1),u=i.filter(l=>l.hasOnset()).map(l=>l.duration),a=Uc(...u),h=a.inverse();r=r.map(l=>l+"|"),o+="|";for(let l=0;l<h;l++){const[d,b]=[s,s.add(a)],w=i.filter(M=>M.whole.begin.lte(d)&&M.whole.end.gte(b)),v=w.length-r.length;v>0&&(r=r.concat(Array(v).fill(o))),r=r.map((M,j)=>{const P=w[j];if(P){const Z=P.whole.begin.eq(d)?""+P.value:"-";return M+Z}return M+"."}),o+=".",s=s.add(a)}n++}return r.join(`
`)}let kt,H=!0;const Zc=function(t){H=!!t},Xc=t=>kt=t;class m{constructor(e,n=void 0){this.query=e,this._Pattern=!0,this.tactus=n}get tactus(){return this.__tactus}set tactus(e){this.__tactus=e===void 0?void 0:p(e)}setTactus(e){return this.tactus=e,this}withTactus(e){return H?new m(this.query,this.tactus===void 0?void 0:e(this.tactus)):this}get hasTactus(){return this.tactus!==void 0}withValue(e){const n=new m(s=>this.query(s).map(r=>r.withValue(e)));return n.tactus=this.tactus,n}withState(e){return this.withHaps((n,s)=>(e(s),n))}fmap(e){return this.withValue(e)}appWhole(e,n){const s=this,r=function(o){const i=s.query(o),u=n.query(o),a=function(h,l){const d=h.part.intersection(l.part);if(d!=null)return new N(e(h.whole,l.whole),d,h.value(l.value),l.combineContext(h))};return K(i.map(h=>st(u.map(l=>a(h,l)))))};return new m(r)}appBoth(e){const n=this,s=function(o,i){if(!(o==null||i==null))return o.intersection_e(i)},r=n.appWhole(s,e);return H&&(r.tactus=ct(e.tactus,n.tactus)),r}appLeft(e){const n=this,s=function(o){const i=[];for(const u of n.query(o)){const a=e.query(o.setSpan(u.wholeOrPart()));for(const h of a){const l=u.whole,d=u.part.intersection(h.part);if(d){const b=u.value(h.value),w=h.combineContext(u),v=new N(l,d,b,w);i.push(v)}}}return i},r=new m(s);return r.tactus=this.tactus,r}appRight(e){const n=this,s=function(o){const i=[];for(const u of e.query(o)){const a=n.query(o.setSpan(u.wholeOrPart()));for(const h of a){const l=u.whole,d=h.part.intersection(u.part);if(d){const b=h.value(u.value),w=u.combineContext(h),v=new N(l,d,b,w);i.push(v)}}}return i},r=new m(s);return r.tactus=e.tactus,r}bindWhole(e,n){const s=this,r=function(o){const i=function(a,h){return new N(e(a.whole,h.whole),h.part,h.value,Object.assign({},a.context,h.context,{locations:(a.context.locations||[]).concat(h.context.locations||[])}))},u=function(a){return n(a.value).query(o.setSpan(a.part)).map(h=>i(a,h))};return K(s.query(o).map(a=>u(a)))};return new m(r)}bind(e){const n=function(s,r){if(!(s==null||r==null))return s.intersection_e(r)};return this.bindWhole(n,e)}join(){return this.bind(tt)}outerBind(e){return this.bindWhole(n=>n,e).setTactus(this.tactus)}outerJoin(){return this.outerBind(tt)}innerBind(e){return this.bindWhole((n,s)=>s,e)}innerJoin(){return this.innerBind(tt)}resetJoin(e=!1){const n=this;return new m(s=>n.discreteOnly().query(s).map(r=>r.value.late(e?r.whole.begin:r.whole.begin.cyclePos()).query(s).map(o=>new N(o.whole?o.whole.intersection(r.whole):void 0,o.part.intersection(r.part),o.value).setContext(r.combineContext(o))).filter(o=>o.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function n(s){const r=e.discreteOnly().query(s);function o(u){const h=u.value._focusSpan(u.wholeOrPart()).query(s.setSpan(u.part));function l(d,b){let w;if(b.whole&&d.whole&&(w=b.whole.intersection(d.whole),!w))return;const v=b.part.intersection(d.part);if(!v)return;const M=b.combineContext(d);return new N(w,v,b.value,M)}return h.map(d=>l(u,d))}return K(r.map(o)).filter(u=>u)}return new m(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}polyJoin=function(){const e=this;return e.fmap(n=>n.s_extend(e.tactus.div(n.tactus))).outerJoin()};polyBind(e){return this.fmap(e).polyJoin()}queryArc(e,n,s={}){try{return this.query(new nt(new S(e,n),s))}catch(r){return x(`[query]: ${r.message}`,"error"),[]}}splitQueries(){const e=this,n=s=>K(s.span.spanCycles.map(r=>e.query(s.setSpan(r))));return new m(n)}withQuerySpan(e){return new m(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new m(s=>{const r=s.withSpan(e);return r.span?n.query(r):[]})}withQueryTime(e){return new m(n=>this.query(n.withSpan(s=>s.withTime(e))))}withHapSpan(e){return new m(n=>this.query(n).map(s=>s.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){const n=new m(s=>e(this.query(s),s));return n.tactus=this.tactus,n}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){const n=this.withHap(s=>s.setContext(e(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const s={start:e,end:n},r=this.withContext(o=>{const i=(o.locations||[]).concat([s]);return{...o,locations:i}});return this.__pure&&(r.__pure=this.__pure,r.__pure_loc=s),r}filterHaps(e){return new m(n=>this.query(n).filter(e))}filterValues(e){return new m(n=>this.query(n).filter(s=>e(s.value))).setTactus(this.tactus)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(n=>{const s=[];for(var r=0;r<n.length;++r){for(var o=!0,i=n[r];o;){const h=JSON.stringify(n[r].value);for(var u=!1,a=r+1;a<n.length;a++){const l=n[a];if(i.whole.equals(l.whole)){if(i.part.begin.eq(l.part.end)){if(h===JSON.stringify(l.value)){i=new N(i.whole,new S(l.part.begin,i.part.end),i.value),n.splice(a,1),u=!0;break}}else if(l.part.begin.eq(i.part.end)&&h==JSON.stringify(l.value)){i=new N(i.whole,new S(i.part.begin,l.part.end),i.value),n.splice(a,1),u=!0;break}}}o=u}s.push(i)}return s})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new nt(new S(p(0),p(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(xt)}_opIn(e,n){return this.fmap(n).appLeft(y(e))}_opOut(e,n){return this.fmap(n).appRight(y(e))}_opMix(e,n){return this.fmap(n).appBoth(y(e))}_opSqueeze(e,n){const s=y(e);return this.fmap(r=>s.fmap(o=>n(r)(o))).squeezeJoin()}_opSqueezeOut(e,n){const s=this;return y(e).fmap(o=>s.fmap(i=>n(i)(o))).squeezeJoin()}_opReset(e,n){return y(e).fmap(r=>this.fmap(o=>n(o)(r))).resetJoin()}_opRestart(e,n){return y(e).fmap(r=>this.fmap(o=>n(o)(r))).restartJoin()}_opPoly(e,n){const s=y(e);return this.fmap(r=>s.fmap(o=>n(o)(r))).polyJoin()}layer(...e){return O(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return O(this,...e)}sequence(...e){return F(this,...e)}seq(...e){return F(this,...e)}cat(...e){return ke(this,...e)}fastcat(...e){return V(this,...e)}slowcat(...e){return X(this,...e)}onTrigger(e,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...r)=>{s.context.onTrigger?.(...r),e(...r)},dominantTrigger:s.context.dominantTrigger||n}))}log(e=(s,r)=>`[hap] ${r.showWhole(!0)}`,n=(s,r)=>({hap:r})){return this.onTrigger((...s)=>{x(e(...s),void 0,n(...s))},!1)}logValues(e=tt){return this.log((n,s)=>e(s.value))}drawLine(){return console.log(we(this)),this}}function Yc(t,e){let n=[];return e.forEach(s=>{const r=n.findIndex(([o])=>t(s,o));r===-1?n.push([s]):n[r].push(s)}),n}const tu=(t,e)=>t.spanEquals(e);m.prototype.collect=function(){return this.withHaps(t=>Yc(tu,t).map(e=>new N(e[0].whole,e[0].part,e,{})))};m.prototype.arpWith=function(t){return this.collect().fmap(e=>y(t(e))).innerJoin().withHap(e=>new N(e.whole,e.part,e.value.value,e.combineContext(e.value)))};m.prototype.arp=function(t){return this.arpWith(e=>t.fmap(n=>e[n%e.length]))};function ft(t){return!Array.isArray(t)&&typeof t=="object"}function eu(t,e,n){return ft(t)||ft(e)?(ft(t)||(t={value:t}),ft(e)||(e={value:e}),Kc(t,e,n)):n(t,e)}(function(){const t={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[$((n,s)=>n+s)],sub:[$((n,s)=>n-s)],mul:[$((n,s)=>n*s)],div:[$((n,s)=>n/s)],mod:[$(it)],pow:[$(Math.pow)],band:[$((n,s)=>n&s)],bor:[$((n,s)=>n|s)],bxor:[$((n,s)=>n^s)],blshift:[$((n,s)=>n<<s)],brshift:[$((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart","Poly"];for(const[n,[s,r]]of Object.entries(t)){m.prototype["_"+n]=function(o){return this.fmap(i=>s(i,o))},Object.defineProperty(m.prototype,n,{get:function(){const o=this,i=(...u)=>o[n].in(...u);for(const u of e)i[u.toLowerCase()]=function(...a){var h=o;a=F(a),r&&(h=r(h),a=r(a));var l;return n==="keepif"?(l=h["_op"+u](a,d=>b=>s(d,b)),l=l.removeUndefineds()):l=h["_op"+u](a,d=>b=>eu(d,b,s)),l};return i.squeezein=i.squeeze,i}});for(const o of e)m.prototype[o.toLowerCase()]=function(...i){return this.set[o.toLowerCase()](i)}}m.prototype.struct=function(...n){return this.keepif.out(...n)},m.prototype.structAll=function(...n){return this.keep.out(...n)},m.prototype.mask=function(...n){return this.keepif.in(...n)},m.prototype.maskAll=function(...n){return this.keep.in(...n)},m.prototype.reset=function(...n){return this.keepif.reset(...n)},m.prototype.resetAll=function(...n){return this.keep.reset(...n)},m.prototype.restart=function(...n){return this.keepif.restart(...n)},m.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const nu=O,su=O,ru=It,rt=t=>new m(()=>[],t),A=rt(1),L=rt(0);function D(t){function e(s){return s.span.spanCycles.map(r=>new N(p(r.begin).wholeCycle(),r,t))}const n=new m(e,1);return n.__pure=t,n}function Pt(t){return t instanceof m||t?._Pattern}function y(t){return Pt(t)?t:kt&&typeof t=="string"?kt(t):D(t)}function O(...t){t=t.map(s=>Array.isArray(s)?F(...s):y(s));const e=s=>K(t.map(r=>r.query(s))),n=new m(e);return H&&(n.tactus=ct(...t.map(s=>s.tactus))),n}function Jt(t,e){if(e=e.map(o=>Array.isArray(o)?F(...o):y(o)),e.length===0)return A;if(e.length===1)return e[0];const[n,...s]=e.map(o=>o.tactus),r=H?n.maximum(...s):void 0;return O(...t(r,e))}function be(...t){return Jt((e,n)=>n.map(s=>s.tactus.eq(e)?s:W(s,rt(e.sub(s.tactus)))),t)}function ve(...t){return Jt((e,n)=>n.map(s=>s.tactus.eq(e)?s:W(rt(e.sub(s.tactus)),s)),t)}function _e(...t){return Jt((e,n)=>n.map(s=>{if(s.tactus.eq(e))return s;const r=rt(e.sub(s.tactus).div(2));return W(r,s,r)}),t)}function ou(t,...e){const[n,...s]=e.map(i=>i.tactus),r=n.maximum(...s),o={centre:_e,left:be,right:ve,expand:O,repeat:(...i)=>Se(r,...i)};return t.inhabit(o).fmap(i=>i(...e)).innerJoin().setTactus(r)}function X(...t){if(t=t.map(s=>Array.isArray(s)?V(...s):y(s)),t.length==1)return t[0];const e=function(s){const r=s.span,o=it(r.begin.sam(),t.length),i=t[o];if(!i)return[];const u=r.begin.floor().sub(r.begin.div(t.length).floor());return i.withHapTime(a=>a.add(u)).query(s.setSpan(r.withTime(a=>a.sub(u))))},n=H?ct(...t.map(s=>s.tactus)):void 0;return new m(e).splitQueries().setTactus(n)}function $t(...t){t=t.map(y);const e=function(n){const s=Math.floor(n.span.begin)%t.length;return t[s]?.query(n)||[]};return new m(e).splitQueries()}function ke(...t){return X(...t)}function iu(...t){const e=t.reduce((n,[s])=>n+s,0);return t=t.map(([n,s])=>[n,s.fast(n)]),W(...t).slow(e)}function cu(...t){let e=p(0);for(let n of t)n.length==2&&n.unshift(e),e=n[1];return O(...t.map(([n,s,r])=>D(y(r)).compress(p(n).div(e),p(s).div(e)))).slow(e).innerJoin()}function V(...t){let e=X(...t);return t.length>1&&(e=e._fast(t.length),e.tactus=t.length),t.length==1&&t[0].__tactus_source&&(t.tactus=t[0].tactus),e}function F(...t){return V(...t)}function qe(...t){return V(...t)}function qt(t){return Array.isArray(t)?t.length==0?[A,0]:t.length==1?qt(t[0]):[V(...t.map(e=>qt(e)[0])),t.length]:[y(t),1]}const uu=_((t,e)=>y(e).mask(t)),au=_((t,e)=>y(e).struct(t)),lu=_((t,e)=>y(e).superimpose(...t)),fu=_((t,e)=>y(e).set(t)),hu=_((t,e)=>y(e).keep(t)),du=_((t,e)=>y(e).keepif(t)),pu=_((t,e)=>y(e).add(t)),mu=_((t,e)=>y(e).sub(t)),yu=_((t,e)=>y(e).mul(t)),gu=_((t,e)=>y(e).div(t)),wu=_((t,e)=>y(e).mod(t)),bu=_((t,e)=>y(e).pow(t)),vu=_((t,e)=>y(e).band(t)),_u=_((t,e)=>y(e).bor(t)),ku=_((t,e)=>y(e).bxor(t)),qu=_((t,e)=>y(e).blshift(t)),Tu=_((t,e)=>y(e).brshift(t)),Au=_((t,e)=>y(e).lt(t)),Cu=_((t,e)=>y(e).gt(t)),Nu=_((t,e)=>y(e).lte(t)),Su=_((t,e)=>y(e).gte(t)),Ou=_((t,e)=>y(e).eq(t)),Mu=_((t,e)=>y(e).eqt(t)),Bu=_((t,e)=>y(e).ne(t)),xu=_((t,e)=>y(e).net(t)),zu=_((t,e)=>y(e).and(t)),Eu=_((t,e)=>y(e).or(t)),ju=_((t,e)=>y(e).func(t));function f(t,e,n=!0,s=!1,r=o=>o.innerJoin()){if(Array.isArray(t)){const u={};for(const a of t)u[a]=f(a,e,n);return u}const o=e.length;var i;return n?i=function(...u){u=u.map(y);const a=u[u.length-1];let h;if(o===1)h=e(a);else{const l=u.slice(0,-1);if(l.every(d=>d.__pure!=null)){const d=l.map(w=>w.__pure),b=l.filter(w=>w.__pure_loc).map(w=>w.__pure_loc);h=e(...d,a),h=h.withContext(w=>{const v=(w.locations||[]).concat(b);return{...w,locations:v}})}else{const[d,...b]=l;let w=(...v)=>e(...v,a);w=_(w,null,o-1),h=r(b.reduce((v,M)=>v.appLeft(M),d.fmap(w)))}}return s&&(h.tactus=a.tactus),h}:i=function(...u){u=u.map(y);const a=e(...u);return s&&(a.tactus=u[u.length-1].tactus),a},m.prototype[t]=function(...u){if(o===2&&u.length!==1)u=[F(...u)];else if(o!==u.length+1)throw new Error(`.${t}() expects ${o-1} inputs but got ${u.length}.`);return u=u.map(y),i(...u,this)},o>1&&(m.prototype["_"+t]=function(...u){const a=e(...u,this);return s&&a.setTactus(this.tactus),a}),_(i,null,o)}function ut(t,e,n=!0,s=!1,r=o=>o.stepJoin()){return f(t,e,n,s,r)}const Pu=f("round",function(t){return t.asNumber().fmap(e=>Math.round(e))}),Ju=f("floor",function(t){return t.asNumber().fmap(e=>Math.floor(e))}),$u=f("ceil",function(t){return t.asNumber().fmap(e=>Math.ceil(e))}),Lu=f("toBipolar",function(t){return t.fmap(e=>e*2-1)}),Wu=f("fromBipolar",function(t){return t.fmap(e=>(e+1)/2)}),Ru=f("range",function(t,e,n){return n.mul(e-t).add(t)}),Iu=f("rangex",function(t,e,n){return n._range(Math.log(t),Math.log(e)).fmap(Math.exp)}),Hu=f("range2",function(t,e,n){return n.fromBipolar()._range(t,e)}),Fu=f("ratio",t=>t.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,s)=>n/s,e[0]):e)),Du=f("compress",function(t,e,n){return t=p(t),e=p(e),t.gt(e)||t.gt(1)||e.gt(1)||t.lt(0)||e.lt(0)?A:n._fastGap(p(1).div(e.sub(t)))._late(t)}),{compressSpan:Vu,compressspan:Gu}=f(["compressSpan","compressspan"],function(t,e){return e._compress(t.begin,t.end)}),{fastGap:Qu,fastgap:Uu}=f(["fastGap","fastgap"],function(t,e){const n=function(r){const o=r.begin.sam(),i=r.begin.sub(o).mul(t).min(1),u=r.end.sub(o).mul(t).min(1);if(!(i>=1))return new S(o.add(i),o.add(u))},s=function(r){const o=r.part.begin,i=r.part.end,u=o.sam(),a=o.sub(u).div(t).min(1),h=i.sub(u).div(t).min(1),l=new S(u.add(a),u.add(h)),d=r.whole?new S(l.begin.sub(o.sub(r.whole.begin).div(t)),l.end.add(r.whole.end.sub(i).div(t))):void 0;return new N(d,l,r.value,r.context)};return e.withQuerySpanMaybe(n).withHap(s).splitQueries()}),Ku=f("focus",function(t,e,n){return t=p(t),e=p(e),n._fast(p(1).div(e.sub(t))).late(t.cyclePos())}),{focusSpan:Zu,focusspan:Xu}=f(["focusSpan","focusspan"],function(t,e){return e._focus(t.begin,t.end)}),Yu=f("ply",function(t,e){const n=e.fmap(s=>D(s)._fast(t)).squeezeJoin();return H&&(n.tactus=p(t).mulmaybe(e.tactus)),n}),{fast:ta,density:If}=f(["fast","density"],function(t,e){return t===0?A:(t=p(t),e.withQueryTime(s=>s.mul(t)).withHapTime(s=>s.div(t)).setTactus(e.tactus))},!0,!0),ea=f("hurry",function(t,e){return e._fast(t).mul(D({speed:t}))}),{slow:na,sparsity:sa}=f(["slow","sparsity"],function(t,e){return t===0?A:e._fast(p(1).div(t))}),ra=f("inside",function(t,e,n){return e(n._slow(t))._fast(t)}),oa=f("outside",function(t,e,n){return e(n._fast(t))._slow(t)}),ia=f("lastOf",function(t,e,n){const s=Array(t-1).fill(n);return s.push(e(n)),$t(...s)}),{firstOf:ca,every:ua}=f(["firstOf","every"],function(t,e,n){const s=Array(t-1).fill(n);return s.unshift(e(n)),$t(...s)}),aa=f("apply",function(t,e){return t(e)}),la=f("cpm",function(t,e){return e._fast(t/60/1)}),fa=f("early",function(t,e){return t=p(t),e.withQueryTime(n=>n.add(t)).withHapTime(n=>n.sub(t))},!0,!0),Te=f("late",function(t,e){return t=p(t),e._early(p(0).sub(t))},!0,!0),ha=f("zoom",function(t,e,n){if(e=p(e),t=p(t),t.gte(e))return L;const s=e.sub(t),r=H?n.tactus.mulmaybe(s):void 0;return n.withQuerySpan(o=>o.withCycle(i=>i.mul(s).add(t))).withHapSpan(o=>o.withCycle(i=>i.sub(t).div(s))).splitQueries().setTactus(r)}),{zoomArc:da,zoomarc:pa}=f(["zoomArc","zoomarc"],function(t,e){return e.zoom(t.begin,t.end)}),ma=f("bite",(t,e,n)=>e.fmap(s=>r=>{const o=p(s).div(r).mod(1),i=o.add(p(1).div(r));return n.zoom(o,i)}).appLeft(t).squeezeJoin(),!1),ya=f("linger",function(t,e){return t==0?A:t<0?e._zoom(t.add(1),1)._slow(t):e._zoom(0,t)._slow(t)},!0,!0),ga=f("segment",function(t,e){return e.struct(D(!0)._fast(t)).setTactus(t)}),wa=f("swingBy",(t,e,n)=>n.inside(e,Te(qe(0,t/2)))),ba=f("swing",(t,e)=>e.swingBy(1/3,t)),{invert:va,inv:_a}=f(["invert","inv"],function(t){return t.fmap(e=>!e)},!0,!0),ka=f("when",function(t,e,n){return t?e(n):n}),qa=f("off",function(t,e,n){return O(n,e(n.late(t)))}),Ta=f("brak",function(t){return t.when(X(!1,!0),e=>V(e,A)._late(.25))}),Ae=f("rev",function(t){const e=function(n){const s=n.span,r=s.begin.sam(),o=s.begin.nextSam(),i=function(a){const h=a.withTime(d=>r.add(o.sub(d))),l=h.begin;return h.begin=h.end,h.end=l,h};return t.query(n.setSpan(i(s))).map(a=>a.withSpan(i))};return new m(e).splitQueries()},!1,!0),Aa=f("pressBy",function(t,e){return e.fmap(n=>D(n).compress(t,1)).squeezeJoin()}),Ca=f("press",function(t){return t._pressBy(.5)});m.prototype.hush=function(){return A};const Na=f("palindrome",function(t){return t.lastOf(2,Ae)},!0,!0),{juxBy:Sa,juxby:Oa}=f(["juxBy","juxby"],function(t,e,n){t/=2;const s=function(i,u,a){return u in i?i[u]:a},r=n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)-t})),o=e(n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)+t})));return O(r,o).setTactus(H?ct(r.tactus,o.tactus):void 0)}),Ma=f("jux",function(t,e){return e._juxBy(1,t,e)}),{echoWith:Ba,echowith:xa,stutWith:za,stutwith:Ea}=f(["echoWith","echowith","stutWith","stutwith"],function(t,e,n,s){return O(...Bt(0,t-1).map(r=>n(s.late(p(e).mul(r)),r)))}),ja=f("echo",function(t,e,n,s){return s._echoWith(t,e,(r,o)=>r.gain(Math.pow(n,o)))}),Pa=f("stut",function(t,e,n,s){return s._echoWith(t,n,(r,o)=>r.gain(Math.pow(e,o)))}),Lt=function(t,e,n=!1){return t=p(t),X(...Bt(0,t.sub(1)).map(s=>n?e.late(p(s).div(t)):e.early(p(s).div(t))))},Ja=f("iter",function(t,e){return Lt(t,e,!1)},!0,!0),{iterBack:$a,iterback:La}=f(["iterBack","iterback"],function(t,e){return Lt(t,e,!0)},!0,!0),{repeatCycles:Wa}=f("repeatCycles",function(t,e){return new m(function(n){const s=n.span.begin.sam(),r=s.div(t).sam(),o=s.sub(r);return n=n.withSpan(i=>i.withTime(u=>u.sub(o))),e.query(n).map(i=>i.withSpan(u=>u.withTime(a=>a.add(o))))}).splitQueries()},!0,!0),Wt=function(t,e,n,s=!1,r=!1){const o=Array(t-1).fill(!1);o.unshift(!0);const i=Lt(t,F(...o),!s);return r||(n=n.repeatCycles(t)),n.when(i,e)},{chunk:Ra,slowchunk:Ia,slowChunk:Ha}=f(["chunk","slowchunk","slowChunk"],function(t,e,n){return Wt(t,e,n,!1,!1)}),{chunkBack:Fa,chunkback:Da}=f(["chunkBack","chunkback"],function(t,e,n){return Wt(t,e,n,!0)}),{fastchunk:Va,fastChunk:Ga}=f(["fastchunk","fastChunk"],function(t,e,n){return Wt(t,e,n,!1,!0)}),Qa=f("bypass",function(t,e){return t=!!parseInt(t),t?A:e},!0,!0),Ua=f("ribbon",(t,e,n)=>n.early(t).restart(D(1).slow(e))),Ka=f("hsla",(t,e,n,s,r)=>r.color(`hsla(${t}turn,${e*100}%,${n*100}%,${s})`)),Za=f("hsl",(t,e,n,s)=>s.color(`hsl(${t}turn,${e*100}%,${n*100}%)`));m.prototype.tag=function(t){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([t])}))};const Xa=f("filter",(t,e)=>e.withHaps(n=>n.filter(t))),Ya=f("filterWhen",(t,e)=>e.filter(n=>t(n.whole.begin))),tl=f("within",(t,e,n,s)=>O(n(s.filterWhen(r=>r.cyclePos()>=t&&r.cyclePos()<=e)),s.filterWhen(r=>r.cyclePos()<t||r.cyclePos()>e)));m.prototype.stepJoin=function(){const t=this,e=W(...Tt(At(t.queryArc(0,1)))).tactus,n=function(s){const o=t.early(s.span.begin.sam()).query(s.setSpan(new S(p(0),p(1))));return W(...Tt(At(o))).query(s)};return new m(n,e)};function Tt(t){const e=t.filter((o,i)=>i.hasTactus).reduce((o,i)=>o.add(i),p(0)),n=st(t.map((o,i)=>i.tactus)).reduce((o,i)=>o.add(i),p(0)),s=e.eq(0)?void 0:n.div(e);function r(o,i){return i.tactus===void 0?[o.mulmaybe(s),i]:[i.tactus,i]}return t.map(o=>r(...o))}function At(t){const e=K(t.map(r=>[r.part.begin,r.part.end])),n=de([p(0),p(1),...e]);return fe(n).map(r=>[r[1].sub(r[0]),O(...Ce(new S(...r),t).map(o=>o.value.withHap(i=>i.setContext(i.combineContext(o)))))])}function Ce(t,e){return st(e.map(n=>Ne(t,n)))}function Ne(t,e){const n=t.intersection(e.part);if(n!=null)return new N(e.whole,n,e.value,e.context)}const el=f("steps",function(t,e){return e.tactus===void 0?e:e.tactus.eq(p(0))?L:e._fast(p(t).div(e.tactus)).setTactus(t)});function Rt(t,...e){const n=e.map(r=>qt(r));if(n.length==0)return A;t==0&&(t=n[0][1]);const s=[];for(const r of n)r[1]!=0&&(t==r[1]?s.push(r[0]):s.push(r[0]._fast(p(t).div(p(r[1])))));return O(...s)}function Se(t,...e){return e.length==0?A:Array.isArray(e[0])?Rt(t,...e):It(...e).steps(t)}function It(...t){if(Array.isArray(t[0]))return Rt(0,...t);if(t=t.filter(o=>o.hasTactus),t.length==0)return A;const e=t[0].tactus;if(e.eq(p(0)))return L;const[n,...s]=t,r=O(n,...s.map(o=>o._slow(o.tactus.div(e))));return r.tactus=e,r}function W(...t){if(t.length===0)return L;const e=i=>Array.isArray(i)?i:[i.tactus,i];if(t=t.map(e),t.find(i=>i[0]===void 0)){const i=t.map(a=>a[0]).filter(a=>a!==void 0);if(i.length===0)return V(...t.map(a=>a[1]));if(i.length===t.length)return L;const u=i.reduce((a,h)=>a.add(h),p(0)).div(i.length);for(let a of t)a[0]===void 0&&(a[0]=u)}if(t.length==1)return y(t[0][1]).withTactus(u=>t[0][0]);const n=t.map(i=>i[0]).reduce((i,u)=>i.add(u),p(0));let s=p(0);const r=[];for(const[i,u]of t){if(p(i).eq(0))continue;const a=s.add(i);r.push(y(u)._compress(s.div(n),a.div(n))),s=a}const o=O(...r);return o.tactus=n,o}const nl=W,Oe=W;function sl(...t){t=t.map(r=>Array.isArray(r)?r.map(y):[y(r)]);const e=ct(...t.map(r=>p(r.length)));let n=[];for(let r=0;r<e;++r)n.push(...t.map(o=>o.length==0?A:o[r%o.length]));n=n.filter(r=>r.hasTactus&&r.tactus>0);const s=n.reduce((r,o)=>r.add(o.tactus),p(0));return n=W(...n),n.tactus=s,n}const rl=ut("s_add",function(t,e){if(!e.hasTactus||e.tactus.lte(0)||(t=p(t),t.eq(0)))return L;const n=t<0;n&&(t=t.abs());const s=t.div(e.tactus);return s.lte(0)?L:s.gte(1)?e:n?e.zoom(p(1).sub(s),1):e.zoom(0,s)}),ol=ut("s_sub",function(t,e){return e.hasTactus?(t=p(t),t.lt(0)?e.s_add(p(0).sub(e.tactus.add(t))):e.s_add(e.tactus.sub(t))):L}),il=ut("s_extend",function(t,e){return e.fast(t).s_expand(t)}),cl=ut("s_expand",function(t,e){return e.withTactus(n=>n.mul(p(t)))}),ul=ut("s_contract",function(t,e){return e.withTactus(n=>n.div(p(t)))});m.prototype.s_taperlist=function(t,e){const n=this;if(!n.hasTactus)return[n];if(e=e-1,e===0)return[n];const s=[],r=t>0;t=p(Math.abs(t));const o=n.tactus.sub(t.mul(p(e))).max(p(0));for(let i=0;i<e;++i)s.push(n.zoom(0,o.add(t.mul(p(i))).div(n.tactus)));return s.push(n),r&&s.reverse(),s};const al=(t,e,n)=>n.s_taperlist(t,e),ll=f("s_taper",function(t,e,n){if(!n.hasTactus)return L;const s=n.s_taperlist(t,e),r=W(...s);return r.tactus=s.reduce((o,i)=>o.add(i.tactus),p(0)),r},!0,!1,t=>t.stepJoin());m.prototype.s_tour=function(...t){return W(...[].concat(...t.map((e,n)=>[...t.slice(0,t.length-n),this,...t.slice(t.length-n)]),this,...t))};const fl=function(t,...e){return t.s_tour(...e)},hl=f("chop",function(t,e){const s=Array.from({length:t},(i,u)=>u).map(i=>({begin:i/t,end:(i+1)/t})),r=function(i,u){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const a=i.end-i.begin;u={begin:i.begin+u.begin*a,end:i.begin+u.end*a}}return Object.assign({},i,u)},o=function(i){return F(s.map(u=>r(i,u)))};return e.squeezeBind(o).setTactus(H?p(t).mulmaybe(e.tactus):void 0)}),dl=f("striate",function(t,e){const s=Array.from({length:t},(o,i)=>i).map(o=>({begin:o/t,end:(o+1)/t})),r=X(...s);return e.set(r)._fast(t).setTactus(H?p(t).mulmaybe(e.tactus):void 0)}),Me=function(t,e,n=.5){return e.speed(1/t*n).unit("c").slow(t)},Be=f("slice",function(t,e,n){return t.innerBind(s=>e.outerBind(r=>n.outerBind(o=>{o=o instanceof Object?o:{s:o};const i=Array.isArray(s)?s[r]:r/s,u=Array.isArray(s)?s[r+1]:(r+1)/s;return D({begin:i,end:u,_slices:s,...o})}))).setTactus(e.tactus)},!1),pl=f("splice",function(t,e,n){const s=Be(t,e,n);return new m(r=>{const o=r.controls._cps||1;return s.query(r).map(u=>u.withValue(a=>({speed:o/a._slices/u.whole.duration*(a.speed||1),unit:"c",...a})))}).setTactus(e.tactus)},!1),{loopAt:ml,loopat:yl}=f(["loopAt","loopat"],function(t,e){const n=e.tactus?e.tactus.div(t):void 0;return new m(s=>Me(t,e,s.controls._cps).query(s),n)}),gl=f("fit",t=>t.withHaps((e,n)=>e.map(s=>s.withValue(r=>{const o=("end"in r?r.end:1)-("begin"in r?r.begin:0);return{...r,speed:(n.controls._cps||1)/s.whole.duration*o,unit:"c"}})))),{loopAtCps:wl,loopatcps:bl}=f(["loopAtCps","loopatcps"],function(t,e,n){return Me(t,n,e)}),vl=t=>D(1).withValue(()=>y(t())).innerJoin();let ee=t=>t<.5?1:1-(t-.5)/.5,xe=(t,e,n)=>{e=y(e),t=y(t),n=y(n);let s=e.fmap(o=>({gain:ee(o)})),r=e.fmap(o=>({gain:ee(1-o)}));return O(t.mul(s),n.mul(r))};m.prototype.xfade=function(t,e){return xe(this,t,e)};function mt(t){let e=Array.isArray(t);t=e?t:[t];const n=t[0],s=i=>{let u;if(typeof i=="object"&&i.value!==void 0&&(u={...i},i=i.value,delete u.value),e&&Array.isArray(i)){const a=u||{};return i.forEach((h,l)=>{l<t.length&&(a[t[l]]=h)}),a}else return u?(u[n]=i,u):{[n]:i}},r=(...i)=>F(...i).withValue(s),o=function(...i){return i.length?this.set(r(...i)):this.fmap(s)};return m.prototype[n]=o,r}function c(t,...e){const n=Array.isArray(t)?t[0]:t;let s={};return s[n]=mt(t),e.forEach(r=>{s[r]=s[n],m.prototype[r]=m.prototype[n]}),s}const{s:ze,sound:Ee}=c(["s","n","gain"],"sound"),{source:je,src:Pe}=c("source","src"),{n:Je}=c("n"),{note:$e}=c(["note","n"]),{accelerate:Le}=c("accelerate"),{velocity:We}=c("velocity"),{gain:Re}=c("gain"),{postgain:Ie}=c("postgain"),{amp:He}=c("amp"),{attack:Fe,att:De}=c("attack","att"),{fmh:Ve}=c(["fmh","fmi"],"fmh"),{fmi:Ge,fm:Qe}=c(["fmi","fmh"],"fm"),{fmenv:Ue}=c("fmenv"),{fmattack:Ke}=c("fmattack"),{fmdecay:Ze}=c("fmdecay"),{fmsustain:Xe}=c("fmsustain"),{fmrelease:Ye}=c("fmrelease"),{fmvelocity:tn}=c("fmvelocity"),{bank:en}=c("bank"),{analyze:nn}=c("analyze"),{fft:sn}=c("fft"),{decay:rn,dec:on}=c("decay","dec"),{sustain:cn,sus:un}=c("sustain","sus"),{release:an,rel:ln}=c("release","rel"),{hold:fn}=c("hold"),{bandf:hn,bpf:dn,bp:pn}=c(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:mn,bpq:yn}=c("bandq","bpq"),{begin:gn}=c("begin"),{end:wn}=c("end"),{loop:bn}=c("loop"),{loopBegin:vn,loopb:_n}=c("loopBegin","loopb"),{loopEnd:kn,loope:qn}=c("loopEnd","loope"),{crush:Tn}=c("crush"),{coarse:An}=c("coarse"),{drive:Cn}=c("drive"),{channels:Nn,ch:Sn}=c("channels","ch"),{phaserrate:On,ph:Mn,phaser:Bn}=c(["phaserrate","phaserdepth","phasercenter","phasersweep"],"ph","phaser"),{phasersweep:xn,phs:zn}=c("phasersweep","phs"),{phasercenter:En,phc:jn}=c("phasercenter","phc"),{phaserdepth:Pn,phd:Jn,phasdp:$n}=c("phaserdepth","phd","phasdp"),{channel:Ln}=c("channel"),{cut:Wn}=c("cut"),{cutoff:Rn,ctf:In,lpf:Hn,lp:Fn}=c(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:Dn,lpe:Vn}=c("lpenv","lpe"),{hpenv:Gn,hpe:Qn}=c("hpenv","hpe"),{bpenv:Un,bpe:Kn}=c("bpenv","bpe"),{lpattack:Zn,lpa:Xn}=c("lpattack","lpa"),{hpattack:Yn,hpa:ts}=c("hpattack","hpa"),{bpattack:es,bpa:ns}=c("bpattack","bpa"),{lpdecay:ss,lpd:rs}=c("lpdecay","lpd"),{hpdecay:os,hpd:is}=c("hpdecay","hpd"),{bpdecay:cs,bpd:us}=c("bpdecay","bpd"),{lpsustain:as,lps:ls}=c("lpsustain","lps"),{hpsustain:fs,hps:hs}=c("hpsustain","hps"),{bpsustain:ds,bps:ps}=c("bpsustain","bps"),{lprelease:ms,lpr:ys}=c("lprelease","lpr"),{hprelease:gs,hpr:ws}=c("hprelease","hpr"),{bprelease:bs,bpr:vs}=c("bprelease","bpr"),{ftype:_s}=c("ftype"),{fanchor:ks}=c("fanchor"),{vib:qs,vibrato:Ts,v:As}=c(["vib","vibmod"],"vibrato","v"),{noise:Cs}=c("noise"),{vibmod:Ns,vmod:Ss}=c(["vibmod","vib"],"vmod"),{hcutoff:Os,hpf:Ms,hp:Bs}=c(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:xs,hpq:zs}=c("hresonance","hpq"),{resonance:Es,lpq:js}=c("resonance","lpq"),{djf:Ps}=c("djf"),{delay:Js}=c(["delay","delaytime","delayfeedback"]),{delayfeedback:$s,delayfb:Ls,dfb:Ws}=c("delayfeedback","delayfb","dfb"),{delaytime:Rs,delayt:Is,dt:Hs}=c("delaytime","delayt","dt"),{lock:Fs}=c("lock"),{detune:Ds,det:Vs}=c("detune","det"),{unison:Gs}=c("unison"),{spread:Qs}=c("spread"),{dry:Us}=c("dry"),{fadeTime:Ks,fadeOutTime:Zs}=c("fadeTime","fadeOutTime"),{fadeInTime:Xs}=c("fadeInTime"),{freq:Ys}=c("freq"),{pattack:tr,patt:er}=c("pattack","patt"),{pdecay:nr,pdec:sr}=c("pdecay","pdec"),{psustain:rr,psus:or}=c("psustain","psus"),{prelease:ir,prel:cr}=c("prelease","prel"),{penv:ur}=c("penv"),{pcurve:ar}=c("pcurve"),{panchor:lr}=c("panchor"),{gate:fr,gat:hr}=c("gate","gat"),{leslie:dr}=c("leslie"),{lrate:pr}=c("lrate"),{lsize:mr}=c("lsize"),{activeLabel:yr}=c("activeLabel"),{label:gr}=c(["label","activeLabel"]),{degree:wr}=c("degree"),{mtranspose:br}=c("mtranspose"),{ctranspose:vr}=c("ctranspose"),{harmonic:_r}=c("harmonic"),{stepsPerOctave:kr}=c("stepsPerOctave"),{octaveR:qr}=c("octaveR"),{nudge:Tr}=c("nudge"),{octave:Ar}=c("octave"),{orbit:Cr}=c("orbit"),{overgain:Nr}=c("overgain"),{overshape:Sr}=c("overshape"),{pan:Or}=c("pan"),{panspan:Mr}=c("panspan"),{pansplay:Br}=c("pansplay"),{panwidth:xr}=c("panwidth"),{panorient:zr}=c("panorient"),{rate:Er}=c("rate"),{slide:jr}=c("slide"),{semitone:Pr}=c("semitone"),{voice:Jr}=c("voice"),{chord:$r}=c("chord"),{dictionary:Lr,dict:Wr}=c("dictionary","dict"),{anchor:Rr}=c("anchor"),{offset:Ir}=c("offset"),{octaves:Hr}=c("octaves"),{mode:Fr}=c(["mode","anchor"]),{room:Dr}=c(["room","size"]),{roomlp:Vr,rlp:Gr}=c("roomlp","rlp"),{roomdim:Qr,rdim:Ur}=c("roomdim","rdim"),{roomfade:Kr,rfade:Zr}=c("roomfade","rfade"),{ir:Xr,iresponse:Yr}=c(["ir","i"],"iresponse"),{roomsize:to,size:eo,sz:no,rsize:so}=c("roomsize","size","sz","rsize"),{shape:ro}=c(["shape","shapevol"]),{distort:oo,dist:io}=c(["distort","distortvol"],"dist"),{compressor:co}=c(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:uo}=c("compressorKnee"),{compressorRatio:ao}=c("compressorRatio"),{compressorAttack:lo}=c("compressorAttack"),{compressorRelease:fo}=c("compressorRelease"),{speed:ho}=c("speed"),{stretch:po}=c("stretch"),{unit:mo}=c("unit"),{squiz:yo}=c("squiz"),{vowel:go}=c("vowel"),{waveloss:wo}=c("waveloss"),{density:_l}=c("density"),{expression:bo}=c("expression"),{sustainpedal:vo}=c("sustainpedal"),{tremolodepth:_o,tremdp:ko}=c("tremolodepth","tremdp"),{tremolorate:qo,tremr:To}=c("tremolorate","tremr"),{fshift:Ao}=c("fshift"),{fshiftnote:Co}=c("fshiftnote"),{fshiftphase:No}=c("fshiftphase"),{triode:So}=c("triode"),{krush:Oo}=c("krush"),{kcutoff:Mo}=c("kcutoff"),{octer:Bo}=c("octer"),{octersub:xo}=c("octersub"),{octersubsub:zo}=c("octersubsub"),{ring:Eo}=c("ring"),{ringf:jo}=c("ringf"),{ringdf:Po}=c("ringdf"),{freeze:Jo}=c("freeze"),{xsdelay:$o}=c("xsdelay"),{tsdelay:Lo}=c("tsdelay"),{real:Wo}=c("real"),{imag:Ro}=c("imag"),{enhance:Io}=c("enhance"),{partials:Ho}=c("partials"),{comb:Fo}=c("comb"),{smear:Do}=c("smear"),{scram:Vo}=c("scram"),{binshift:Go}=c("binshift"),{hbrick:Qo}=c("hbrick"),{lbrick:Uo}=c("lbrick"),{midichan:Ko}=c("midichan"),{control:Zo}=c("control"),{ccn:Xo}=c("ccn"),{ccv:Yo}=c("ccv"),{polyTouch:ti}=c("polyTouch"),{midibend:ei}=c("midibend"),{miditouch:ni}=c("miditouch"),{ctlNum:si}=c("ctlNum"),{frameRate:ri}=c("frameRate"),{frames:oi}=c("frames"),{hours:ii}=c("hours"),{midicmd:ci}=c("midicmd"),{minutes:ui}=c("minutes"),{progNum:ai}=c("progNum"),{seconds:li}=c("seconds"),{songPtr:fi}=c("songPtr"),{uid:hi}=c("uid"),{val:di}=c("val"),{cps:pi}=c("cps"),{clip:mi,legato:yi}=c("clip","legato"),{duration:gi,dur:wi}=c("duration","dur"),{zrand:bi}=c("zrand"),{curve:vi}=c("curve"),{deltaSlide:_i}=c("deltaSlide"),{pitchJump:ki}=c("pitchJump"),{pitchJumpTime:qi}=c("pitchJumpTime"),{lfo:Ti,repeatTime:Ai}=c("lfo","repeatTime"),{znoise:Ci}=c("znoise"),{zmod:Ni}=c("zmod"),{zcrush:Si}=c("zcrush"),{zdelay:Oi}=c("zdelay"),{tremolo:Mi}=c("tremolo"),{zzfx:Bi}=c("zzfx"),{color:xi,colour:zi}=c(["color","colour"]);let Ei=(...t)=>t.reduce((e,n)=>Object.assign(e,{[n]:mt(n)}),{});const ji=f("adsr",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s,r,o]=t;return e.set({attack:n,decay:s,sustain:r,release:o})}),Pi=f("ad",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.attack(n).decay(s)}),Ji=f("ds",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=0]=t;return e.set({decay:n,sustain:s})}),$i=f("ar",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.set({attack:n,release:s})}),kl=Object.freeze(Object.defineProperty({__proto__:null,accelerate:Le,activeLabel:yr,ad:Pi,adsr:ji,amp:He,analyze:nn,anchor:Rr,ar:$i,att:De,attack:Fe,bandf:hn,bandq:mn,bank:en,begin:gn,binshift:Go,bp:pn,bpa:ns,bpattack:es,bpd:us,bpdecay:cs,bpe:Kn,bpenv:Un,bpf:dn,bpq:yn,bpr:vs,bprelease:bs,bps:ps,bpsustain:ds,ccn:Xo,ccv:Yo,ch:Sn,channel:Ln,channels:Nn,chord:$r,clip:mi,coarse:An,color:xi,colour:zi,comb:Fo,compressor:co,compressorAttack:lo,compressorKnee:uo,compressorRatio:ao,compressorRelease:fo,control:Zo,cps:pi,createParam:mt,createParams:Ei,crush:Tn,ctf:In,ctlNum:si,ctranspose:vr,curve:vi,cut:Wn,cutoff:Rn,dec:on,decay:rn,degree:wr,delay:Js,delayfb:Ls,delayfeedback:$s,delayt:Is,delaytime:Rs,deltaSlide:_i,density:_l,det:Vs,detune:Ds,dfb:Ws,dict:Wr,dictionary:Lr,dist:io,distort:oo,djf:Ps,drive:Cn,dry:Us,ds:Ji,dt:Hs,dur:wi,duration:gi,end:wn,enhance:Io,expression:bo,fadeInTime:Xs,fadeOutTime:Zs,fadeTime:Ks,fanchor:ks,fft:sn,fm:Qe,fmattack:Ke,fmdecay:Ze,fmenv:Ue,fmh:Ve,fmi:Ge,fmrelease:Ye,fmsustain:Xe,fmvelocity:tn,frameRate:ri,frames:oi,freeze:Jo,freq:Ys,fshift:Ao,fshiftnote:Co,fshiftphase:No,ftype:_s,gain:Re,gat:hr,gate:fr,harmonic:_r,hbrick:Qo,hcutoff:Os,hold:fn,hours:ii,hp:Bs,hpa:ts,hpattack:Yn,hpd:is,hpdecay:os,hpe:Qn,hpenv:Gn,hpf:Ms,hpq:zs,hpr:ws,hprelease:gs,hps:hs,hpsustain:fs,hresonance:xs,imag:Ro,ir:Xr,iresponse:Yr,kcutoff:Mo,krush:Oo,label:gr,lbrick:Uo,legato:yi,leslie:dr,lfo:Ti,lock:Fs,loop:bn,loopBegin:vn,loopEnd:kn,loopb:_n,loope:qn,lp:Fn,lpa:Xn,lpattack:Zn,lpd:rs,lpdecay:ss,lpe:Vn,lpenv:Dn,lpf:Hn,lpq:js,lpr:ys,lprelease:ms,lps:ls,lpsustain:as,lrate:pr,lsize:mr,midibend:ei,midichan:Ko,midicmd:ci,miditouch:ni,minutes:ui,mode:Fr,mtranspose:br,n:Je,noise:Cs,note:$e,nudge:Tr,octave:Ar,octaveR:qr,octaves:Hr,octer:Bo,octersub:xo,octersubsub:zo,offset:Ir,orbit:Cr,overgain:Nr,overshape:Sr,pan:Or,panchor:lr,panorient:zr,panspan:Mr,pansplay:Br,panwidth:xr,partials:Ho,patt:er,pattack:tr,pcurve:ar,pdec:sr,pdecay:nr,penv:ur,ph:Mn,phasdp:$n,phaser:Bn,phasercenter:En,phaserdepth:Pn,phaserrate:On,phasersweep:xn,phc:jn,phd:Jn,phs:zn,pitchJump:ki,pitchJumpTime:qi,polyTouch:ti,postgain:Ie,prel:cr,prelease:ir,progNum:ai,psus:or,psustain:rr,rate:Er,rdim:Ur,real:Wo,registerControl:c,rel:ln,release:an,repeatTime:Ai,resonance:Es,rfade:Zr,ring:Eo,ringdf:Po,ringf:jo,rlp:Gr,room:Dr,roomdim:Qr,roomfade:Kr,roomlp:Vr,roomsize:to,rsize:so,s:ze,scram:Vo,seconds:li,semitone:Pr,shape:ro,size:eo,slide:jr,smear:Do,songPtr:fi,sound:Ee,source:je,speed:ho,spread:Qs,squiz:yo,src:Pe,stepsPerOctave:kr,stretch:po,sus:un,sustain:cn,sustainpedal:vo,sz:no,tremdp:ko,tremolo:Mi,tremolodepth:_o,tremolorate:qo,tremr:To,triode:So,tsdelay:Lo,uid:hi,unison:Gs,unit:mo,v:As,val:di,velocity:We,vib:qs,vibmod:Ns,vibrato:Ts,vmod:Ss,voice:Jr,vowel:go,waveloss:wo,xsdelay:$o,zcrush:Si,zdelay:Oi,zmod:Ni,znoise:Ci,zrand:bi,zzfx:Bi},Symbol.toStringTag,{value:"Module"})),ql=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=Et(s,r);return[[s,n-s],[jt((a,h)=>a.concat(h),i,o),u]]},Tl=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=Et(n,o);return[[n,s-n],[jt((h,l)=>h.concat(l),r,i),u]]},Li=function(t,e){const[n,s]=t;return Math.min(n,s)<=1?[t,e]:Li(...n>s?ql(t,e):Tl(t,e))},Wi=function(t,e){const n=t<0;t=Math.abs(t);const s=e-t,r=Array(t).fill([1]),o=Array(s).fill([0]),i=Li([t,s],[r,o]),u=K(i[1][0]).concat(K(i[1][1]));return n?u.map(a=>a===0?1:0):u},Ht=function(t,e,n){const s=Wi(t,e);return n?ue(s,-n):s},Al=f("euclid",function(t,e,n){return n.struct(Ht(t,e,0))}),{euclidrot:Cl,euclidRot:Nl}=f(["euclidrot","euclidRot"],function(t,e,n,s){return s.struct(Ht(t,e,n))}),Ri=function(t,e,n,s){if(t<1)return A;const o=Ht(t,e,n).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return s.struct(Oe(...o))},Sl=f(["euclidLegato"],function(t,e,n){return Ri(t,e,0,n)}),Ol=f(["euclidLegatoRot"],function(t,e,n,s){return Ri(t,e,n,s)});function Ii(t,e,n=.05,s=.1,r=.1,o=globalThis.setInterval,i=globalThis.clearInterval,u=!0){let a=0,h=0,l=10**4,d=.01;const b=z=>n=z(n);r=r||s/2;const w=()=>{const z=t(),Q=z+s+r;for(h===0&&(h=z+d);h<Q;)h=u?Math.round(h*l)/l:h,e(h,n,a,z),h+=n,a++};let v;const M=()=>{j(),w(),v=o(w,s*1e3)},j=()=>{v!==void 0&&i(v),v=void 0};return{setDuration:b,start:M,stop:()=>{a=0,h=0,j()},pause:()=>j(),duration:n,interval:s,getPhase:()=>h,minLatency:d}}function Ml(t){return new m(e=>[new N(void 0,e.span,t)])}const I=t=>{const e=n=>[new N(void 0,n.span,t(n.span.midpoint()))];return new m(e)},Ft=I(t=>1-t%1),Hi=Ft.toBipolar(),yt=I(t=>t%1),Fi=yt.toBipolar(),Dt=I(t=>Math.sin(Math.PI*2*t)),Di=Dt.fromBipolar(),Bl=Di._early(p(1).div(4)),xl=Dt._early(p(1).div(4)),Vi=I(t=>Math.floor(t*2%2)),zl=Vi.toBipolar(),El=V(Ft,yt),jl=V(Hi,Fi),Gi=I(tt);let Vt=0,Gt=0;typeof window<"u"&&document.addEventListener("mousemove",t=>{Vt=t.clientY/document.body.clientHeight,Gt=t.clientX/document.body.clientWidth});const Pl=I(()=>Vt),Jl=I(()=>Vt),$l=I(()=>Gt),Ll=I(()=>Gt),Qi=t=>{const e=t<<13^t,n=e>>17^e;return n<<5^n},Wl=t=>t-Math.trunc(t),Ui=t=>Qi(Math.trunc(Wl(t/300)*536870912)),Ki=t=>t%536870912/536870912,Ct=t=>Math.abs(Ki(Ui(t))),Rl=(t,e)=>{const n=[];for(let s=0;s<e;++s)n.push(Ki(t)),t=Qi(t);return n},Il=(t,e)=>Rl(Ui(t),e),Hl=t=>yt.range(0,t).floor().segment(t),Zi=t=>I(e=>{const s=Il(e.floor().add(.5),t).map((o,i)=>[o,i]).sort((o,i)=>o[0]>i[0]-o[0]<i[0]).map(o=>o[1]),r=e.cyclePos().mul(t).floor()%t;return s[r]})._segment(t),Xi=(t,e,n)=>{const s=[...Array(e).keys()].map(r=>n.zoom(p(r).div(e),p(r+1).div(e)));return t.fmap(r=>s[r].repeatCycles(e)._fast(e)).innerJoin()},Fl=f("shuffle",(t,e)=>Xi(Zi(t),t,e)),Dl=f("scramble",(t,e)=>Xi(Ut(t)._segment(t),t,e)),R=I(Ct),Vl=R.toBipolar(),Qt=t=>R.fmap(e=>e<t),Gl=t=>y(t).fmap(Qt).innerJoin(),Ql=Qt(.5),Ut=t=>R.fmap(e=>Math.trunc(e*t)),Ul=t=>y(t).fmap(Ut).innerJoin(),Kt=(t,e)=>(e=e.map(y),e.length==0?A:t.range(0,e.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[s]})),gt=(t,e)=>Kt(t,e).outerJoin(),Yi=(t,e)=>Kt(t,e).innerJoin(),Kl=(...t)=>gt(R,t);m.prototype.choose=function(...t){return gt(this,t)};m.prototype.choose2=function(...t){return gt(this.fromBipolar(),t)};const tc=(...t)=>Yi(R.segment(1),t),Zl=tc,ec=function(t,...e){const n=e.map(u=>y(u[0])),s=[];let r=0;for(const u of e)r+=u[1],s.push(r);const o=r,i=function(u){const a=u*o;return n[s.findIndex(h=>h>a,s)]};return t.fmap(i)},Xl=(...t)=>ec(...t).outerJoin(),Yl=(...t)=>Xl(R,...t),nc=(...t)=>ec(R.segment(1),...t).innerJoin(),tf=nc,sc=t=>{const e=t.fmap(Math.floor),n=t.fmap(o=>Math.floor(o)+1),s=o=>6*o**5-15*o**4+10*o**3,r=o=>i=>u=>i+s(o)*(u-i);return t.sub(e).fmap(r).appBoth(e.fmap(Ct)).appBoth(n.fmap(Ct))},ef=sc(Gi.fmap(t=>Number(t))),nf=f("degradeByWith",(t,e,n)=>n.fmap(s=>r=>s).appLeft(t.filterValues(s=>s>e)),!0,!0),sf=f("degradeBy",function(t,e){return e._degradeByWith(R,t)},!0,!0),rf=f("degrade",t=>t._degradeBy(.5),!0,!0),of=f("undegradeBy",function(t,e){return e._degradeByWith(R.fmap(n=>1-n),t)},!0,!0),cf=f("undegrade",t=>t._undegradeBy(.5),!0,!0),uf=f("sometimesBy",function(t,e,n){return y(t).fmap(s=>O(n._degradeBy(s),e(n._undegradeBy(1-s)))).innerJoin()}),af=f("sometimes",function(t,e){return e._sometimesBy(.5,t)}),lf=f("someCyclesBy",function(t,e,n){return y(t).fmap(s=>O(n._degradeByWith(R._segment(1),s),e(n._degradeByWith(R.fmap(r=>1-r)._segment(1),1-s)))).innerJoin()}),ff=f("someCycles",function(t,e){return e._someCyclesBy(.5,t)}),hf=f("often",function(t,e){return e.sometimesBy(.75,t)}),df=f("rarely",function(t,e){return e.sometimesBy(.25,t)}),pf=f("almostNever",function(t,e){return e.sometimesBy(.1,t)}),mf=f("almostAlways",function(t,e){return e.sometimesBy(.9,t)}),yf=f("never",function(t,e){return e}),gf=f("always",function(t,e){return t(e)}),G=function(t,e,n=!0){const s=Array.isArray(t),r=Object.keys(t).length;return t=ye(t,y),r===0?A:e.fmap(o=>{let i=o;return s&&(i=n?Math.round(i)%r:he(Math.round(i),0,t.length-1)),t[i]})},rc=function(t,e){return Array.isArray(e)&&([e,t]=[t,e]),wf(t,e)},wf=f("pick",function(t,e){return G(t,e,!1).innerJoin()}),oc=f("pickmod",function(t,e){return G(t,e,!0).innerJoin()}),bf=f("pickF",function(t,e,n){return n.apply(rc(t,e))}),vf=f("pickmodF",function(t,e,n){return n.apply(oc(t,e))}),_f=f("pickOut",function(t,e){return G(t,e,!1).outerJoin()}),kf=f("pickmodOut",function(t,e){return G(t,e,!0).outerJoin()}),qf=f("pickRestart",function(t,e){return G(t,e,!1).restartJoin()}),Tf=f("pickmodRestart",function(t,e){return G(t,e,!0).restartJoin()}),Af=f("pickReset",function(t,e){return G(t,e,!1).resetJoin()}),Cf=f("pickmodReset",function(t,e){return G(t,e,!0).resetJoin()}),{inhabit:Nf,pickSqueeze:Sf}=f(["inhabit","pickSqueeze"],function(t,e){return G(t,e,!1).squeezeJoin()}),{inhabitmod:Of,pickmodSqueeze:Mf}=f(["inhabitmod","pickmodSqueeze"],function(t,e){return G(t,e,!0).squeezeJoin()}),Bf=(t,e)=>(e=e.map(y),e.length==0?A:t.fmap(n=>{const s=it(Math.round(n),e.length);return e[s]}).squeezeJoin());let dt;try{dt=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let ne=dt?.getVoices();function xf(t,e,n){dt.cancel();const s=new SpeechSynthesisUtterance(t);s.lang=e,ne=dt.getVoices();const r=ne.filter(o=>o.lang.includes(e));typeof n=="number"?s.voice=r[n%r.length]:typeof n=="string"&&(s.voice=r.find(o=>o.name===o)),speechSynthesis.speak(s)}const zf=f("speak",function(t,e,n){return n.onTrigger((s,r)=>{xf(r.value,t,e)})}),ic=async(...t)=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="fulfilled").map(s=>s.value);return e.forEach((s,r)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${r} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([r,o])=>{globalThis[r]=o})}),n};function Ef(t,e={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=e;n&&(t=`{${t}}`),s&&(t=`(async ()=>${t})()`);const r=`"use strict";return (${t})`;return Function(r)()}const cc=async(t,e,n)=>{let s={};if(e){const i=e(t,n);t=i.output,s=i}return{mode:"javascript",pattern:await Ef(t,{wrapExpression:!!e}),meta:s}};class jf{constructor({onTrigger:e,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.lastTick=0,this.getTime=s,this.time_at_last_tick_message=0,this.collator=new ge({getTargetClockTime:s}),this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker=new SharedWorker(new URL("/_astro/clockworker-ZDiUtESR.js",import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");const r=i=>{const{cps:u,begin:a,end:h,cycle:l,time:d}=i;this.cps=u,this.cycle=l;const b=this.collator.calculateOffset(d)+d;o(a,h,b),this.time_at_last_tick_message=b},o=(i,u,a)=>{if(this.started===!1)return;this.pattern.queryArc(i,u,{_cps:this.cps}).forEach(l=>{if(l.hasOnset()){const b=_t(l.whole.begin-this.cycle,this.cps)+a+this.latency,w=_t(l.duration,this.cps);e?.(l,0,w,this.cps,b)}})};this.channel.onmessage=i=>{if(!this.started)return;const{payload:u,type:a}=i.data;switch(a){case"tick":r(u)}}}sendMessage(e,n){this.worker.port.postMessage({type:e,payload:n,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){this.sendMessage("toggle",{started:e}),this.started=e,this.onToggle?.(e)}start(){x("[cyclist] start"),this.setStarted(!0)}stop(){x("[cyclist] stop"),this.collator.reset(),this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}class uc{constructor({interval:e,onTrigger:n,onToggle:s,onError:r,getTime:o,latency:i=.1,setInterval:u,clearInterval:a,beforeStart:h}){this.started=!1,this.beforeStart=h,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=o,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=i,this.clock=Ii(o,(d,b,w,v)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=d),this.num_ticks_since_cps_change++;const j=this.num_ticks_since_cps_change*b*this.cps;try{const P=this.lastEnd;this.lastBegin=P;const B=this.num_cycles_at_cps_change+j;if(this.lastEnd=B,this.lastTick=d,d<v){console.log("skip query: too late");return}this.pattern.queryArc(P,B,{_cps:this.cps}).forEach(z=>{if(z.hasOnset()){const Q=(z.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+i,at=z.duration/this.cps,lt=Q-d;n?.(z,lt,at,this.cps,Q)}})}catch(P){x(`[cyclist] error: ${P.message}`),r?.(P)}},e,.1,.1,u,a);let l=this;globalThis.__cyclist__=l}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");x("[cyclist] start"),this.clock.start(),this.setStarted(!0),globalThis.haps_from_outputs=null}pause(){x("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){x("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(e,n=!1){this.pattern=e,n&&!this.started&&await this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let Nt;function Pf(){if(!Nt)throw new Error("no time set! use setTime to define a time source");return Nt()}function St(t){Nt=t}function Jf({defaultOutput:t,onEvalError:e,beforeEval:n,beforeStart:s,afterEval:r,getTime:o,transpiler:i,onToggle:u,editPattern:a,onUpdateState:h,sync:l=!1,setInterval:d,clearInterval:b,id:w}){const v={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},M={id:w},j=q=>{Object.assign(v,q),v.isDirty=v.code!==v.activeCode,v.error=v.evalError||v.schedulerError,h?.(v)},P={onTrigger:ac({defaultOutput:t,getTime:o}),getTime:o,onToggle:q=>{j({started:q}),u?.(q)},setInterval:d,clearInterval:b,beforeStart:s},B=l&&typeof SharedWorker<"u"?new jf(P):new uc(P);let Z={},z=0,Q;const at=function(){return Z={},z=0,Q=void 0,A},lt=async(q,C=!0)=>(q=a?.(q)||q,await B.setPattern(q,C),q);St(()=>B.now());const lc=()=>B.stop(),fc=()=>B.start(),hc=()=>B.pause(),dc=()=>B.toggle(),wt=q=>B.setCps(q),Zt=q=>B.setCps(q/60),pc=function(q){return Q=q,A},mc=()=>{m.prototype.p=function(C){return C.startsWith("_")||C.endsWith("_")?A:(C==="$"&&(C=`$${z}`,z++),Z[C]=this,this)},m.prototype.q=function(C){return A};try{for(let C=1;C<10;++C)Object.defineProperty(m.prototype,`d${C}`,{get(){return this.p(C)},configurable:!0}),Object.defineProperty(m.prototype,`p${C}`,{get(){return this.p(C)},configurable:!0}),m.prototype[`q${C}`]=A}catch(C){console.warn("injectPatternMethods: error:",C)}const q=f("cpm",function(C,bt){return bt._fast(C/60/B.cps)});return ic({all:pc,hush:at,cpm:q,setCps:wt,setcps:wt,setCpm:Zt,setcpm:Zt})};return{scheduler:B,evaluate:async(q,C=!0,bt=!0)=>{if(!q)throw new Error("no code to evaluate");try{j({code:q,pending:!0}),await mc(),St(()=>B.now()),await n?.({code:q}),bt&&at();let{pattern:E,meta:vt}=await cc(q,i,M);if(Object.keys(Z).length&&(E=O(...Object.values(Z))),Q&&(E=Q(E)),!Pt(E)){const yc=`got "${typeof evaluated}" instead of pattern`;throw new Error(yc+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return x("[eval] code updated"),E=await lt(E,C),j({miniLocations:vt?.miniLocations||[],widgets:vt?.widgets||[],activeCode:q,pattern:E,evalError:void 0,schedulerError:void 0,pending:!1}),r?.({code:q,pattern:E,meta:vt}),E}catch(E){x(`[eval] error: ${E.message}`,"error"),console.error(E),j({evalError:E,pending:!1}),e?.(E)}},start:fc,stop:lc,pause:hc,setCps:wt,setPattern:lt,setCode:q=>j({code:q}),toggle:dc,state:v}}const ac=({getTime:t,defaultOutput:e})=>async(n,s,r,o,i)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,s,r,o,i),n.context.onTrigger&&await n.context.onTrigger(t()+s,n,t(),o,i)}catch(u){x(`[cyclist] error: ${u.message}`,"error")}},$f=function(t,e={}){const n=document.getElementById("code"),s="background-image:url("+t+");background-size:contain;";n.style=s;const{className:r}=n,o=(a,h)=>{({style:()=>n.style=s+";"+h,className:()=>n.className=h+" "+r})[a]()},i=Object.entries(e).filter(([a,h])=>typeof h=="function");Object.entries(e).filter(([a,h])=>typeof h=="string").forEach(([a,h])=>o(a,h)),i.length},Lf=()=>{const t=document.getElementById("code");t&&(t.style="")};x("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const Hf=Object.freeze(Object.defineProperty({__proto__:null,ClockCollator:ge,Cyclist:uc,Fraction:p,Hap:N,Pattern:m,State:nt,TimeSpan:S,__chooseWith:Kt,_brandBy:Qt,_fitslice:Ce,_irand:Ut,_match:Ne,_mod:it,_polymeterListSteps:Rt,_retime:Tt,_slices:At,accelerate:Le,activeLabel:yr,ad:Pi,add:pu,adsr:ji,almostAlways:mf,almostNever:pf,always:gf,amp:He,analyze:nn,anchor:Rr,and:zu,apply:aa,ar:$i,arrange:iu,att:De,attack:Fe,averageArray:ie,backgroundImage:$f,band:vu,bandf:hn,bandq:mn,bank:en,base64ToUnicode:me,begin:gn,binshift:Go,bite:ma,bjork:Wi,blshift:qu,bor:_u,bp:pn,bpa:ns,bpattack:es,bpd:us,bpdecay:cs,bpe:Kn,bpenv:Un,bpf:dn,bpq:yn,bpr:vs,bprelease:bs,bps:ps,bpsustain:ds,brak:Ta,brand:Ql,brandBy:Gl,brshift:Tu,bxor:ku,bypass:Qa,calculateTactus:Zc,cat:ke,ccn:Xo,ccv:Yo,ceil:$u,ch:Sn,channel:Ln,channels:Nn,choose:Kl,chooseCycles:tc,chooseInWith:Yi,chooseWith:gt,chop:hl,chord:$r,chunk:Ra,chunkBack:Fa,chunkback:Da,clamp:he,cleanupUi:Lf,clip:mi,coarse:An,code2hash:Dc,color:xi,colour:zi,comb:Fo,compose:zc,compress:Du,compressSpan:Vu,compressor:co,compressorAttack:lo,compressorKnee:uo,compressorRatio:ao,compressorRelease:fo,compressspan:Gu,constant:Ec,control:Zo,controls:kl,cosine:Bl,cosine2:xl,cpm:la,cps:pi,createClock:Ii,createParam:mt,createParams:Ei,crush:Tn,ctf:In,ctlNum:si,ctranspose:vr,curry:_,curve:vi,cut:Wn,cutoff:Rn,cycleToSeconds:_t,dec:on,decay:rn,degrade:rf,degradeBy:sf,degradeByWith:nf,degree:wr,delay:Js,delayfb:Ls,delayfeedback:$s,delayt:Is,delaytime:Rs,deltaSlide:_i,det:Vs,detune:Ds,dfb:Ws,dict:Wr,dictionary:Lr,dist:io,distort:oo,div:gu,djf:Ps,drawLine:we,drive:Cn,dry:Us,ds:Ji,dt:Hs,dur:wi,duration:gi,early:fa,echo:ja,echoWith:Ba,echowith:xa,end:wn,enhance:Io,eq:Ou,eqt:Mu,euclid:Al,euclidLegato:Sl,euclidLegatoRot:Ol,euclidRot:Nl,euclidrot:Cl,evalScope:ic,evaluate:cc,every:ua,expression:bo,fadeInTime:Xs,fadeOutTime:Zs,fadeTime:Ks,fanchor:ks,fast:ta,fastChunk:Ga,fastGap:Qu,fastcat:V,fastchunk:Va,fastgap:Uu,fft:sn,filter:Xa,filterWhen:Ya,firstOf:ca,fit:gl,flatten:K,floor:Ju,fm:Qe,fmattack:Ke,fmdecay:Ze,fmenv:Ue,fmh:Ve,fmi:Ge,fmrelease:Ye,fmsustain:Xe,fmvelocity:tn,focus:Ku,focusSpan:Zu,focusspan:Xu,fractionalArgs:jc,frameRate:ri,frames:oi,freeze:Jo,freq:Ys,freqToMidi:re,fromBipolar:Wu,fshift:Ao,fshiftnote:Co,fshiftphase:No,ftype:_s,func:ju,gain:Re,gap:rt,gat:hr,gate:fr,getEventOffsetMs:Nc,getFreq:oe,getFrequency:xc,getPerformanceTimeSeconds:Gc,getPlayableNoteValue:Bc,getSoundIndex:Mc,getTime:Pf,getTrigger:ac,gt:Cu,gte:Su,harmonic:_r,hash2code:Vc,hbrick:Qo,hcutoff:Os,hold:fn,hours:ii,hp:Bs,hpa:ts,hpattack:Yn,hpd:is,hpdecay:os,hpe:Qn,hpenv:Gn,hpf:Ms,hpq:zs,hpr:ws,hprelease:gs,hps:hs,hpsustain:fs,hresonance:xs,hsl:Za,hsla:Ka,hurry:ea,id:tt,imag:Ro,inhabit:Nf,inhabitmod:Of,inside:ra,inv:_a,invert:va,ir:Xr,irand:Ul,iresponse:Yr,isNote:pt,isNoteWithOctave:qc,isPattern:Pt,isaw:Ft,isaw2:Hi,iter:Ja,iterBack:$a,iterback:La,jux:Ma,juxBy:Sa,juxby:Oa,kcutoff:Mo,keep:hu,keepif:du,krush:Oo,label:gr,lastOf:ia,late:Te,lbrick:Uo,legato:yi,leslie:dr,lfo:Ti,linger:ya,listRange:Bt,lock:Fs,logKey:Mt,logger:x,loop:bn,loopAt:ml,loopAtCps:wl,loopBegin:vn,loopEnd:kn,loopat:yl,loopatcps:bl,loopb:_n,loope:qn,lp:Fn,lpa:Xn,lpattack:Zn,lpd:rs,lpdecay:ss,lpe:Vn,lpenv:Dn,lpf:Hn,lpq:js,lpr:ys,lprelease:ms,lps:ls,lpsustain:as,lrate:pr,lsize:mr,lt:Au,lte:Nu,mapArgs:zt,mask:uu,midi2note:Oc,midiToFreq:et,midibend:ei,midichan:Ko,midicmd:ci,miditouch:ni,minutes:ui,mod:wu,mode:Fr,mouseX:Ll,mouseY:Jl,mousex:$l,mousey:Pl,mtranspose:br,mul:yu,n:Je,nanFallback:ce,ne:Bu,net:xu,never:yf,noise:Cs,note:$e,noteToMidi:ot,nothing:L,nudge:Tr,numeralArgs:$,objectMap:ye,octave:Ar,octaveR:qr,octaves:Hr,octer:Bo,octersub:xo,octersubsub:zo,off:qa,offset:Ir,often:hf,or:Eu,orbit:Cr,outside:oa,overgain:Nr,overshape:Sr,pairs:fe,palindrome:Na,pan:Or,panchor:lr,panorient:zr,panspan:Mr,pansplay:Br,panwidth:xr,parseFractional:le,parseNumeral:xt,partials:Ho,patt:er,pattack:tr,pcurve:ar,pdec:sr,pdecay:nr,penv:ur,perlin:ef,perlinWith:sc,ph:Mn,phasdp:$n,phaser:Bn,phasercenter:En,phaserdepth:Pn,phaserrate:On,phasersweep:xn,phc:jn,phd:Jn,phs:zn,pick:rc,pickF:bf,pickOut:_f,pickReset:Af,pickRestart:qf,pickSqueeze:Sf,pickmod:oc,pickmodF:vf,pickmodOut:kf,pickmodReset:Cf,pickmodRestart:Tf,pickmodSqueeze:Mf,pipe:ae,pitchJump:ki,pitchJumpTime:qi,ply:Yu,pm:ru,polyTouch:ti,polyrhythm:nu,postgain:Ie,pow:bu,pr:su,prel:cr,prelease:ir,press:Ca,pressBy:Aa,progNum:ai,psus:or,psustain:rr,pure:D,rand:R,rand2:Vl,randcat:Zl,randrun:Zi,range:Ru,range2:Hu,rangex:Iu,rarely:df,rate:Er,ratio:Fu,rdim:Ur,real:Wo,ref:vl,register:f,registerControl:c,reify:y,rel:ln,release:an,removeUndefineds:st,repeatCycles:Wa,repeatTime:Ai,repl:Jf,resonance:Es,rev:Ae,rfade:Zr,ribbon:Ua,ring:Eo,ringdf:Po,ringf:jo,rlp:Gr,room:Dr,roomdim:Qr,roomfade:Kr,roomlp:Vr,roomsize:to,rotate:ue,round:Pu,rsize:so,run:Hl,s:ze,s_add:rl,s_alt:sl,s_cat:W,s_contract:ul,s_expand:cl,s_extend:il,s_polymeter:It,s_polymeterSteps:Se,s_sub:ol,s_taper:ll,s_taperlist:al,s_tour:fl,saw:yt,saw2:Fi,scram:Vo,scramble:Dl,seconds:li,segment:ga,semitone:Pr,seq:qe,seqPLoop:cu,sequence:F,set:fu,setStringParser:Xc,setTime:St,shape:ro,shuffle:Fl,signal:I,silence:A,sine:Di,sine2:Dt,size:eo,slice:Be,slide:jr,slow:na,slowChunk:Ha,slowcat:X,slowcatPrime:$t,slowchunk:Ia,smear:Do,sol2note:Ic,someCycles:ff,someCyclesBy:lf,sometimes:af,sometimesBy:uf,songPtr:fi,sound:Ee,source:je,sparsity:sa,speak:zf,speed:ho,splice:pl,splitAt:Et,spread:Qs,square:Vi,square2:zl,squeeze:Bf,squiz:yo,src:Pe,stack:O,stackBy:ou,stackCentre:_e,stackLeft:be,stackRight:ve,steady:Ml,steps:el,stepsPerOctave:kr,stretch:po,striate:dl,struct:au,stut:Pa,stutWith:za,stutwith:Ea,sub:mu,superimpose:lu,sus:un,sustain:cn,sustainpedal:vo,swing:ba,swingBy:wa,sz:no,time:Gi,timeCat:Oe,timecat:nl,toBipolar:Lu,tokenizeNote:se,tremdp:ko,tremolo:Mi,tremolodepth:_o,tremolorate:qo,tremr:To,tri:El,tri2:jl,triode:So,tsdelay:Lo,uid:hi,undegrade:cf,undegradeBy:of,unicodeToBase64:pe,uniq:Hc,uniqsort:Fc,uniqsortr:de,unison:Gs,unit:mo,v:As,val:di,valueToMidi:Cc,velocity:We,vib:qs,vibmod:Ns,vibrato:Ts,vmod:Ss,voice:Jr,vowel:go,waveloss:wo,wchoose:Yl,wchooseCycles:nc,when:ka,within:tl,wrandcat:tf,xfade:xe,xsdelay:$o,zcrush:Si,zdelay:Oi,zipWith:jt,zmod:Ni,znoise:Ci,zoom:ha,zoomArc:da,zoomarc:pa,zrand:bi,zzfx:Bi},Symbol.toStringTag,{value:"Module"}));export{Oe as A,ct as B,ge as C,F as D,V as E,Yi as F,R as G,Xc as H,c as I,Jf as J,Gc as K,Cc as L,ic as M,Vc as N,m as P,it as _,ro as a,Nc as b,vl as c,f as d,xc as e,pt as f,Pf as g,Dc as h,Pt as i,A as j,Ei as k,x as l,Oc as m,ot as n,D as o,xt as p,re as q,y as r,ho as s,et as t,Mc as u,Bc as v,Hf as w,he as x,O as y,p as z};
//# sourceMappingURL=index.lg0qkVDO.js.map
