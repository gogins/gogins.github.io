{"version":3,"mappings":"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","names":["__awaiter","this","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","resolveFetch","customFetch","_fetch","args","__vitePreload","browserPonyfill","FunctionsError","message","name","context","FunctionsFetchError","FunctionsRelayError","FunctionsHttpError","FunctionsClient","url","headers","token","functionName","options","_a","method","functionArgs","_headers","body","response","fetchError","isRelayError","responseType","data","error","global","__self__","F","self","exports","support","isDataView","obj","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","items","iterator","Headers","header","oldValue","callback","consumed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","promise","readBlobAsText","readArrayBufferAsText","buf","view","chars","i","bufferClone","Body","decode","methods","normalizeMethod","upcased","Request","input","form","bytes","split","parseHeaders","rawHeaders","preProcessedHeaders","line","parts","key","Response","bodyInit","redirectStatuses","status","fetch","init","request","xhr","abortXhr","ctx","module","PostgrestBuilder","builder","crossFetch","onfulfilled","onrejected","res","_b","_c","count","statusText","countHeader","contentRange","PostgrestTransformBuilder","columns","quoted","cleanedColumns","c","column","ascending","nullsFirst","foreignTable","existingOrder","from","to","keyOffset","keyLimit","signal","analyze","verbose","settings","buffers","wal","format","forMediatype","PostgrestFilterBuilder","pattern","patterns","values","cleanedValues","s","range","query","config","type","typePart","configPart","operator","filters","PostgrestQueryBuilder","schema","head","defaultToNull","prefersHeaders","acc","x","uniqueColumns","onConflict","ignoreDuplicates","version","DEFAULT_HEADERS","PostgrestClient","relation","fn","naiveFallback","require$$0","_globalThis","NativeWebSocket","websocket_version","require$$1","W3CWebSocket","uri","protocols","native_instance","prop","browser","VSN","DEFAULT_TIMEOUT","WS_CLOSE_NORMAL","SOCKET_STATES","CHANNEL_STATES","CHANNEL_EVENTS","TRANSPORTS","CONNECTION_STATE","Timer","timerCalc","Serializer","rawPayload","buffer","decoder","topicSize","eventSize","offset","topic","event","Push","channel","payload","timeout","h","REALTIME_PRESENCE_LISTEN_EVENTS","RealtimePresence","opts","events","newState","onJoin","onLeave","onSync","diff","currentPresences","newPresences","leftPresences","currentState","state","transformedState","joins","leaves","presences","newPresenceRefs","m","curPresenceRefs","joinedPresences","joinedPresenceRefs","curPresences","presenceRefsToRemove","func","presence","PostgresTypes","convertChangeData","record","skipTypes","rec_key","convertColumn","columnName","colType","convertCell","noop","dataType","toArray","toBoolean","toNumber","toJson","toTimestampString","parsedValue","lastIdx","closeBrace","arr","valTrim","val","REALTIME_POSTGRES_CHANGES_LISTEN_EVENT","REALTIME_LISTEN_TYPES","REALTIME_SUBSCRIBE_STATES","RealtimeChannel","params","socket","pushEvent","reason","ref","broadcast","accessTokenPayload","r","serverPostgresFilters","clientPostgresBindings","bindingsLen","newPostgresBindings","clientPostgresBinding","table","filter","serverPostgresFilter","push","onClose","leavePush","_event","_ref","typeLower","close","leave","join","handledPayload","bind","_d","_e","_f","bindId","bindEvent","postgresChanges","commit_timestamp","errors","binding","obj1","obj2","k","records","Transformers.convertChangeData","RealtimeClient","endPoint","w3cwebsocket","eventsPerSecond","tries","code","values_1","kind","msg","chan","newRef","dupChannel","rawMessage","prefix","eventsPerSecondLimitMs","StorageError","isStorageError","StorageApiError","StorageUnknownError","originalError","resolveResponse","_getErrorMessage","err","handleError","Res","_getRequestParams","parameters","_handleRequest","fetcher","get","post","put","remove","DEFAULT_SEARCH_OPTIONS","DEFAULT_FILE_OPTIONS","StorageFileApi","bucketId","path","fileBody","fileOptions","cleanPath","_path","fromPath","toPath","expiresIn","downloadQueryParam","paths","datum","renderPath","transformationQuery","queryString","_queryString","transform","StorageBucketApi","id","StorageClient","resolveHeadersConstructor","CrossFetchHeaders","fetchWithAuth","supabaseKey","getAccessToken","HeadersConstructor","accessToken","stripTrailingSlash","applySettingDefaults","defaults","dbOptions","authOptions","realtimeOptions","globalOptions","DEFAULT_DB_OPTIONS","DEFAULT_AUTH_OPTIONS","DEFAULT_REALTIME_OPTIONS","DEFAULT_GLOBAL_OPTIONS","expiresAt","uuid","isBrowser","localStorageWriteTests","supportsLocalStorage","randomKey","getParameterByName","regex","results","looksLikeFetchResponse","maybeResponse","setItemAsync","storage","getItemAsync","removeItemAsync","decodeBase64URL","base64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","Deferred","rej","decodeJWTPayload","base64UrlRegex","base64Url","sleep","time","accept","retryable","isRetryable","attempt","dec2hex","dec","generatePKCEVerifier","array","charSet","charSetLen","verifier","sha256","randomString","encodedData","hash","base64urlencode","str","generatePKCEChallenge","hashed","AuthError","isAuthError","AuthApiError","isAuthApiError","AuthUnknownError","CustomAuthError","AuthSessionMissingError","AuthInvalidCredentialsError","AuthImplicitGrantRedirectError","details","AuthPKCEGrantCodeExchangeError","AuthRetryableFetchError","__rest","p","NETWORK_ERROR_CODES","_request","qs","_sessionResponse","session","hasSession","user","_userResponse","_ssoResponse","_generateLinkResponse","action_link","email_otp","hashed_token","redirect_to","verification_type","rest","properties","_noResolveJsonResponse","GoTrueAdminApi","jwt","email","attributes","_g","pagination","users","total","links","link","page","rel","uid","shouldSoftDelete","factors","GOTRUE_URL","STORAGE_KEY","EXPIRY_MARGIN","localStorageAdapter","polyfillGlobalThis","DEFAULT_OPTIONS","AUTO_REFRESH_TICK_DURATION","AUTO_REFRESH_TICK_THRESHOLD","GoTrueClient","isPKCEFlow","redirectType","credentials","password","codeChallenge","codeChallengeMethod","codeVerifier","phone","authCode","provider","nonce","currentSession","maybeSession","sessionData","sessionError","userError","timeNow","hasExpired","refreshedSession","error_description","error_code","provider_token","provider_refresh_token","access_token","expires_in","refresh_token","token_type","expires_at","currentStorageContent","subscription","refreshToken","startedAt","_","ticker","now","isInitial","urlParams","flowParams","challengeData","challengeError","totp","factor","currentLevel","nextLevel","currentAuthenticationMethods","SupabaseAuthClient","SupabaseClient","supabaseUrl","_h","_supabaseUrl","urlParts","defaultStorageKey","DEFAULTS","SupabaseStorageClient","autoRefreshToken","persistSession","detectSessionInUrl","storageKey","flowType","authHeaders","source","createClient","nanoid","size","byte","XMarkIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","XMarkIcon$1","visibleFunctions","jsdocJson","docs","description","startsWith","sort","a","b","localeCompare","Reference","_jsx","map","entry","__html","examples","example","j","FilesTab","setPath","useState","useEffect","readDir","dir","recursive","then","children","catch","log","current","useMemo","length","subpath","slice","folders","files","isAudioFile","select","concat","Fragment","_jsxs","playFile","TAURI","window","__TAURI__","Footer","footerContent","useRef","setLog","activeFooter","isZen","panelPosition","useSettings","useLayoutEffect","scrollTop","scrollHeight","useLogger","useCallback","detail","l","lastLog","loadIndex","findIndex","FooterTab","label","_Fragment","setActiveFooter","cx","isActive","positions","right","bottom","WelcomeTab","ConsoleTab","SoundsTab","SettingsTab","scheduler","onTrigger","logger","linkify","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","replace","getSamples","samples","Array","isArray","Object","sounds","useStore","soundMap","soundsFilter","soundEntries","filtered","entries","prebake","tag","includes","trigRef","useEvent","t","stop","getAudioContext","currentTime","ButtonGroup","settingsMap","setKey","drums","synths","note","clip","release","onended","node","disconnect","Promise","connect","destination","fonts","Checkbox","onChange","toLowerCase","SelectInput","target","NumberSlider","Number","FormItem","themeOptions","fromEntries","keys","themes","fontFamilyOptions","monospace","BigBlueTerminal","x3270","PressStart","galactico","FiraCode","teletext","mode7","theme","keybindings","isLineNumbersDisplayed","isAutoCompletionEnabled","isLineWrappingEnabled","fontSize","fontFamily","codemirror","vim","emacs","cbEvent","checked","confirm","set","defaultSettings","AcademicCapIcon","AcademicCapIcon$1","ArrowPathIcon","ArrowPathIcon$1","LinkIcon","LinkIcon$1","PlayCircleIcon","PlayCircleIcon$1","SparklesIcon","SparklesIcon$1","StopCircleIcon","StopCircleIcon$1","Header","embedded","started","pending","isDirty","lastShared","activeCode","handleTogglePlay","handleUpdate","handleShuffle","handleShare","isEmbedded","location","parent","open","href","setIsZen","swimming","giantSteps","zeldasRescue","caverave","sampleDrums","barryHarris","blippyRhodes","wavyKalimba","festivalOfFingers","undergroundPlumber","bridgeIsOver","goodTimes","echoPiano","sml1","randomBells","waa2","hyperpop","festivalOfFingers3","meltingsubmarine","bassFuge","chop","delay","orbit","belldub","dinofunk","sampleDemo","holyflute","flatrave","amensister","juxUndTollerei","csoundDemo","loungeSponge","arpoon","Loader","active","unicodeToBase64","text","utf8Bytes","base64ToUnicode","base64String","char","code2hash","hash2code","d","w","u","n","o","isTauri","latestCode","initAudioOnFirstClick","supabase","modules","modulesLoading","evalScope","controls","settingPatterns","drawContext","clearCanvas","getDrawContext","clearRect","canvas","height","width","getTime","initCode","codeParam","eq","warn","getRandomTune","allTunes","tunes","randomItem","Math","floor","random","randomTune","ReplContext","createContext","Repl","setView","setLastShared","setPending","paintOptions","setCode","evaluate","activateCode","useStrudel","initialCode","defaultOutput","webaudioOutput","beforeEval","cleanupUi","cleanupDraw","afterEval","meta","setMiniLocations","miniLocations","setLatestCode","onEvalError","err2","onToggle","play","postMessage","decoded","ctrlKey","altKey","alert","preventDefault","flash","useHighlighting","handleChangeCode","handleSelectionChange","selection","resume","resetLoadedSounds","setCps","codeToShare","shareUrl","origin","pathname","insert","navigator","clipboard","writeText","currentTheme","strudelTheme","handleViewChanged","v","CodeMirror"],"sources":["../../../node_modules/.pnpm/@supabase+functions-js@2.1.1/node_modules/@supabase/functions-js/dist/module/helper.js","../../../node_modules/.pnpm/@supabase+functions-js@2.1.1/node_modules/@supabase/functions-js/dist/module/types.js","../../../node_modules/.pnpm/@supabase+functions-js@2.1.1/node_modules/@supabase/functions-js/dist/module/FunctionsClient.js","../../../node_modules/.pnpm/cross-fetch@3.1.5/node_modules/cross-fetch/dist/browser-ponyfill.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/PostgrestBuilder.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/PostgrestTransformBuilder.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/PostgrestFilterBuilder.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/PostgrestQueryBuilder.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/version.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/constants.js","../../../node_modules/.pnpm/@supabase+postgrest-js@1.6.0/node_modules/@supabase/postgrest-js/dist/module/PostgrestClient.js","../../../node_modules/.pnpm/es5-ext@0.10.62/node_modules/es5-ext/global.js","../../../node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/version.js","../../../node_modules/.pnpm/websocket@1.0.34/node_modules/websocket/lib/browser.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/version.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/constants.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/timer.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/serializer.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/push.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/RealtimePresence.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/lib/transformers.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/RealtimeChannel.js","../../../node_modules/.pnpm/@supabase+realtime-js@2.7.2/node_modules/@supabase/realtime-js/dist/module/RealtimeClient.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/lib/errors.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/lib/helpers.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/lib/fetch.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/packages/StorageFileApi.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/lib/version.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/lib/constants.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/packages/StorageBucketApi.js","../../../node_modules/.pnpm/@supabase+storage-js@2.5.1/node_modules/@supabase/storage-js/dist/module/StorageClient.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/lib/version.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/lib/constants.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/lib/fetch.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/lib/helpers.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/helpers.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/errors.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/fetch.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/GoTrueAdminApi.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/version.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/constants.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/local-storage.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/lib/polyfills.js","../../../node_modules/.pnpm/@supabase+gotrue-js@2.24.0/node_modules/@supabase/gotrue-js/dist/module/GoTrueClient.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/lib/SupabaseAuthClient.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/SupabaseClient.js","../../../node_modules/.pnpm/@supabase+supabase-js@2.21.0/node_modules/@supabase/supabase-js/dist/module/index.js","../../../node_modules/.pnpm/nanoid@4.0.2/node_modules/nanoid/index.browser.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/XMarkIcon.js","../../src/repl/Reference.jsx","../../src/repl/FilesTab.jsx","../../src/repl/Footer.jsx","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/AcademicCapIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/ArrowPathIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/LinkIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/PlayCircleIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/SparklesIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.0.17_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/StopCircleIcon.js","../../src/repl/Header.jsx","../../src/repl/tunes.mjs","../../src/repl/Loader.jsx","../../src/repl/helpers.mjs","../../../node_modules/.pnpm/@tauri-apps+api@1.4.0/node_modules/@tauri-apps/api/chunk-FEIY7W7S.js","../../../node_modules/.pnpm/@tauri-apps+api@1.4.0/node_modules/@tauri-apps/api/chunk-5UWJICAP.js","../../src/tauri.mjs","../../src/repl/Repl.jsx"],"sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\n//# sourceMappingURL=helper.js.map","export class FunctionsError extends Error {\n    constructor(message, name = 'FunctionsError', context) {\n        super(message);\n        super.name = name;\n        this.context = context;\n    }\n}\nexport class FunctionsFetchError extends FunctionsError {\n    constructor(context) {\n        super('Failed to send a request to the Edge Function', 'FunctionsFetchError', context);\n    }\n}\nexport class FunctionsRelayError extends FunctionsError {\n    constructor(context) {\n        super('Relay Error invoking the Edge Function', 'FunctionsRelayError', context);\n    }\n}\nexport class FunctionsHttpError extends FunctionsError {\n    constructor(context) {\n        super('Edge Function returned a non-2xx status code', 'FunctionsHttpError', context);\n    }\n}\n//# sourceMappingURL=types.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { resolveFetch } from './helper';\nimport { FunctionsFetchError, FunctionsHttpError, FunctionsRelayError, } from './types';\nexport class FunctionsClient {\n    constructor(url, { headers = {}, customFetch, } = {}) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(customFetch);\n    }\n    /**\n     * Updates the authorization header\n     * @param token - the new jwt token sent in the authorisation header\n     */\n    setAuth(token) {\n        this.headers.Authorization = `Bearer ${token}`;\n    }\n    /**\n     * Invokes a function\n     * @param functionName - The name of the Function to invoke.\n     * @param options - Options for invoking the Function.\n     */\n    invoke(functionName, options = {}) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { headers, method, body: functionArgs } = options;\n                let _headers = {};\n                let body;\n                if (functionArgs &&\n                    ((headers && !Object.prototype.hasOwnProperty.call(headers, 'Content-Type')) || !headers)) {\n                    if ((typeof Blob !== 'undefined' && functionArgs instanceof Blob) ||\n                        functionArgs instanceof ArrayBuffer) {\n                        // will work for File as File inherits Blob\n                        // also works for ArrayBuffer as it is the same underlying structure as a Blob\n                        _headers['Content-Type'] = 'application/octet-stream';\n                        body = functionArgs;\n                    }\n                    else if (typeof functionArgs === 'string') {\n                        // plain string\n                        _headers['Content-Type'] = 'text/plain';\n                        body = functionArgs;\n                    }\n                    else if (typeof FormData !== 'undefined' && functionArgs instanceof FormData) {\n                        // don't set content-type headers\n                        // Request will automatically add the right boundary value\n                        body = functionArgs;\n                    }\n                    else {\n                        // default, assume this is JSON\n                        _headers['Content-Type'] = 'application/json';\n                        body = JSON.stringify(functionArgs);\n                    }\n                }\n                const response = yield this.fetch(`${this.url}/${functionName}`, {\n                    method: method || 'POST',\n                    // headers priority is (high to low):\n                    // 1. invoke-level headers\n                    // 2. client-level headers\n                    // 3. default Content-Type header\n                    headers: Object.assign(Object.assign(Object.assign({}, _headers), this.headers), headers),\n                    body,\n                }).catch((fetchError) => {\n                    throw new FunctionsFetchError(fetchError);\n                });\n                const isRelayError = response.headers.get('x-relay-error');\n                if (isRelayError && isRelayError === 'true') {\n                    throw new FunctionsRelayError(response);\n                }\n                if (!response.ok) {\n                    throw new FunctionsHttpError(response);\n                }\n                let responseType = ((_a = response.headers.get('Content-Type')) !== null && _a !== void 0 ? _a : 'text/plain').split(';')[0].trim();\n                let data;\n                if (responseType === 'application/json') {\n                    data = yield response.json();\n                }\n                else if (responseType === 'application/octet-stream') {\n                    data = yield response.blob();\n                }\n                else if (responseType === 'multipart/form-data') {\n                    data = yield response.formData();\n                }\n                else {\n                    // default to text\n                    data = yield response.text();\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                return { data: null, error };\n            }\n        });\n    }\n}\n//# sourceMappingURL=FunctionsClient.js.map","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","import crossFetch from 'cross-fetch';\nexport default class PostgrestBuilder {\n    constructor(builder) {\n        this.shouldThrowOnError = false;\n        this.method = builder.method;\n        this.url = builder.url;\n        this.headers = builder.headers;\n        this.schema = builder.schema;\n        this.body = builder.body;\n        this.shouldThrowOnError = builder.shouldThrowOnError;\n        this.signal = builder.signal;\n        this.allowEmpty = builder.allowEmpty;\n        if (builder.fetch) {\n            this.fetch = builder.fetch;\n        }\n        else if (typeof fetch === 'undefined') {\n            this.fetch = crossFetch;\n        }\n        else {\n            this.fetch = fetch;\n        }\n    }\n    /**\n     * If there's an error with the query, throwOnError will reject the promise by\n     * throwing the error instead of returning it as part of a successful response.\n     *\n     * {@link https://github.com/supabase/supabase-js/issues/92}\n     */\n    throwOnError() {\n        this.shouldThrowOnError = true;\n        return this;\n    }\n    then(onfulfilled, onrejected) {\n        // https://postgrest.org/en/stable/api.html#switching-schemas\n        if (this.schema === undefined) {\n            // skip\n        }\n        else if (['GET', 'HEAD'].includes(this.method)) {\n            this.headers['Accept-Profile'] = this.schema;\n        }\n        else {\n            this.headers['Content-Profile'] = this.schema;\n        }\n        if (this.method !== 'GET' && this.method !== 'HEAD') {\n            this.headers['Content-Type'] = 'application/json';\n        }\n        // NOTE: Invoke w/o `this` to avoid illegal invocation error.\n        // https://github.com/supabase/postgrest-js/pull/247\n        const _fetch = this.fetch;\n        let res = _fetch(this.url.toString(), {\n            method: this.method,\n            headers: this.headers,\n            body: JSON.stringify(this.body),\n            signal: this.signal,\n        }).then(async (res) => {\n            var _a, _b, _c;\n            let error = null;\n            let data = null;\n            let count = null;\n            let status = res.status;\n            let statusText = res.statusText;\n            if (res.ok) {\n                if (this.method !== 'HEAD') {\n                    const body = await res.text();\n                    if (body === '') {\n                        // Prefer: return=minimal\n                    }\n                    else if (this.headers['Accept'] === 'text/csv') {\n                        data = body;\n                    }\n                    else if (this.headers['Accept'] &&\n                        this.headers['Accept'].includes('application/vnd.pgrst.plan+text')) {\n                        data = body;\n                    }\n                    else {\n                        data = JSON.parse(body);\n                    }\n                }\n                const countHeader = (_a = this.headers['Prefer']) === null || _a === void 0 ? void 0 : _a.match(/count=(exact|planned|estimated)/);\n                const contentRange = (_b = res.headers.get('content-range')) === null || _b === void 0 ? void 0 : _b.split('/');\n                if (countHeader && contentRange && contentRange.length > 1) {\n                    count = parseInt(contentRange[1]);\n                }\n            }\n            else {\n                const body = await res.text();\n                try {\n                    error = JSON.parse(body);\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (Array.isArray(error) && res.status === 404) {\n                        data = [];\n                        error = null;\n                        status = 200;\n                        statusText = 'OK';\n                    }\n                }\n                catch (_d) {\n                    // Workaround for https://github.com/supabase/postgrest-js/issues/295\n                    if (res.status === 404 && body === '') {\n                        status = 204;\n                        statusText = 'No Content';\n                    }\n                    else {\n                        error = {\n                            message: body,\n                        };\n                    }\n                }\n                if (error && this.allowEmpty && ((_c = error === null || error === void 0 ? void 0 : error.details) === null || _c === void 0 ? void 0 : _c.includes('Results contain 0 rows'))) {\n                    error = null;\n                    status = 200;\n                    statusText = 'OK';\n                }\n                if (error && this.shouldThrowOnError) {\n                    throw error;\n                }\n            }\n            const postgrestResponse = {\n                error,\n                data,\n                count,\n                status,\n                statusText,\n            };\n            return postgrestResponse;\n        });\n        if (!this.shouldThrowOnError) {\n            res = res.catch((fetchError) => {\n                var _a, _b, _c;\n                return ({\n                    error: {\n                        message: `${(_a = fetchError === null || fetchError === void 0 ? void 0 : fetchError.name) !== null && _a !== void 0 ? _a : 'FetchError'}: ${fetchError === null || fetchError === void 0 ? void 0 : fetchError.message}`,\n                        details: `${(_b = fetchError === null || fetchError === void 0 ? void 0 : fetchError.stack) !== null && _b !== void 0 ? _b : ''}`,\n                        hint: '',\n                        code: `${(_c = fetchError === null || fetchError === void 0 ? void 0 : fetchError.code) !== null && _c !== void 0 ? _c : ''}`,\n                    },\n                    data: null,\n                    count: null,\n                    status: 0,\n                    statusText: '',\n                });\n            });\n        }\n        return res.then(onfulfilled, onrejected);\n    }\n}\n//# sourceMappingURL=PostgrestBuilder.js.map","import PostgrestBuilder from './PostgrestBuilder';\nexport default class PostgrestTransformBuilder extends PostgrestBuilder {\n    /**\n     * Perform a SELECT on the query result.\n     *\n     * By default, `.insert()`, `.update()`, `.upsert()`, and `.delete()` do not\n     * return modified rows. By calling this method, modified rows are returned in\n     * `data`.\n     *\n     * @param columns - The columns to retrieve, separated by commas\n     */\n    select(columns) {\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (this.headers['Prefer']) {\n            this.headers['Prefer'] += ',';\n        }\n        this.headers['Prefer'] += 'return=representation';\n        return this;\n    }\n    /**\n     * Order the query result by `column`.\n     *\n     * You can call this method multiple times to order by multiple columns.\n     *\n     * You can order foreign tables, but it doesn't affect the ordering of the\n     * current table.\n     *\n     * @param column - The column to order by\n     * @param options - Named parameters\n     * @param options.ascending - If `true`, the result will be in ascending order\n     * @param options.nullsFirst - If `true`, `null`s appear first. If `false`,\n     * `null`s appear last.\n     * @param options.foreignTable - Set this to order a foreign table by foreign\n     * columns\n     */\n    order(column, { ascending = true, nullsFirst, foreignTable, } = {}) {\n        const key = foreignTable ? `${foreignTable}.order` : 'order';\n        const existingOrder = this.url.searchParams.get(key);\n        this.url.searchParams.set(key, `${existingOrder ? `${existingOrder},` : ''}${column}.${ascending ? 'asc' : 'desc'}${nullsFirst === undefined ? '' : nullsFirst ? '.nullsfirst' : '.nullslast'}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `count`.\n     *\n     * @param count - The maximum number of rows to return\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    limit(count, { foreignTable } = {}) {\n        const key = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(key, `${count}`);\n        return this;\n    }\n    /**\n     * Limit the query result by `from` and `to` inclusively.\n     *\n     * @param from - The starting index from which to limit the result\n     * @param to - The last index to which to limit the result\n     * @param options - Named parameters\n     * @param options.foreignTable - Set this to limit rows of foreign tables\n     * instead of the current table\n     */\n    range(from, to, { foreignTable } = {}) {\n        const keyOffset = typeof foreignTable === 'undefined' ? 'offset' : `${foreignTable}.offset`;\n        const keyLimit = typeof foreignTable === 'undefined' ? 'limit' : `${foreignTable}.limit`;\n        this.url.searchParams.set(keyOffset, `${from}`);\n        // Range is inclusive, so add 1\n        this.url.searchParams.set(keyLimit, `${to - from + 1}`);\n        return this;\n    }\n    /**\n     * Set the AbortSignal for the fetch request.\n     *\n     * @param signal - The AbortSignal to use for the fetch request\n     */\n    abortSignal(signal) {\n        this.signal = signal;\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be one row (e.g. using `.limit(1)`), otherwise this\n     * returns an error.\n     */\n    single() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        return this;\n    }\n    /**\n     * Return `data` as a single object instead of an array of objects.\n     *\n     * Query result must be zero or one row (e.g. using `.limit(1)`), otherwise\n     * this returns an error.\n     */\n    maybeSingle() {\n        this.headers['Accept'] = 'application/vnd.pgrst.object+json';\n        this.allowEmpty = true;\n        return this;\n    }\n    /**\n     * Return `data` as a string in CSV format.\n     */\n    csv() {\n        this.headers['Accept'] = 'text/csv';\n        return this;\n    }\n    /**\n     * Return `data` as an object in [GeoJSON](https://geojson.org) format.\n     */\n    geojson() {\n        this.headers['Accept'] = 'application/geo+json';\n        return this;\n    }\n    /**\n     * Return `data` as the EXPLAIN plan for the query.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.analyze - If `true`, the query will be executed and the\n     * actual run time will be returned\n     *\n     * @param options.verbose - If `true`, the query identifier will be returned\n     * and `data` will include the output columns of the query\n     *\n     * @param options.settings - If `true`, include information on configuration\n     * parameters that affect query planning\n     *\n     * @param options.buffers - If `true`, include information on buffer usage\n     *\n     * @param options.wal - If `true`, include information on WAL record generation\n     *\n     * @param options.format - The format of the output, can be `\"text\"` (default)\n     * or `\"json\"`\n     */\n    explain({ analyze = false, verbose = false, settings = false, buffers = false, wal = false, format = 'text', } = {}) {\n        const options = [\n            analyze ? 'analyze' : null,\n            verbose ? 'verbose' : null,\n            settings ? 'settings' : null,\n            buffers ? 'buffers' : null,\n            wal ? 'wal' : null,\n        ]\n            .filter(Boolean)\n            .join('|');\n        // An Accept header can carry multiple media types but postgrest-js always sends one\n        const forMediatype = this.headers['Accept'];\n        this.headers['Accept'] = `application/vnd.pgrst.plan+${format}; for=\"${forMediatype}\"; options=${options};`;\n        if (format === 'json')\n            return this;\n        else\n            return this;\n    }\n    /**\n     * Rollback the query.\n     *\n     * `data` will still be returned, but the query is not committed.\n     */\n    rollback() {\n        var _a;\n        if (((_a = this.headers['Prefer']) !== null && _a !== void 0 ? _a : '').trim().length > 0) {\n            this.headers['Prefer'] += ',tx=rollback';\n        }\n        else {\n            this.headers['Prefer'] = 'tx=rollback';\n        }\n        return this;\n    }\n    /**\n     * Override the type of the returned `data`.\n     *\n     * @typeParam NewResult - The new result type to override with\n     */\n    returns() {\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestTransformBuilder.js.map","import PostgrestTransformBuilder from './PostgrestTransformBuilder';\nexport default class PostgrestFilterBuilder extends PostgrestTransformBuilder {\n    /**\n     * Match only rows where `column` is equal to `value`.\n     *\n     * To check if the value of `column` is NULL, you should use `.is()` instead.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    eq(column, value) {\n        this.url.searchParams.append(column, `eq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is not equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    neq(column, value) {\n        this.url.searchParams.append(column, `neq.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gt(column, value) {\n        this.url.searchParams.append(column, `gt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is greater than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    gte(column, value) {\n        this.url.searchParams.append(column, `gte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lt(column, value) {\n        this.url.searchParams.append(column, `lt.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is less than or equal to `value`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    lte(column, value) {\n        this.url.searchParams.append(column, `lte.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    like(column, pattern) {\n        this.url.searchParams.append(column, `like.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `like(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-sensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    likeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `like(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches `pattern` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param pattern - The pattern to match with\n     */\n    ilike(column, pattern) {\n        this.url.searchParams.append(column, `ilike.${pattern}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches all of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAllOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(all).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` matches any of `patterns` case-insensitively.\n     *\n     * @param column - The column to filter on\n     * @param patterns - The patterns to match with\n     */\n    ilikeAnyOf(column, patterns) {\n        this.url.searchParams.append(column, `ilike(any).{${patterns.join(',')}}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` IS `value`.\n     *\n     * For non-boolean columns, this is only relevant for checking if the value of\n     * `column` is NULL by setting `value` to `null`.\n     *\n     * For boolean columns, you can also set `value` to `true` or `false` and it\n     * will behave the same way as `.eq()`.\n     *\n     * @param column - The column to filter on\n     * @param value - The value to filter with\n     */\n    is(column, value) {\n        this.url.searchParams.append(column, `is.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows where `column` is included in the `values` array.\n     *\n     * @param column - The column to filter on\n     * @param values - The values array to filter with\n     */\n    in(column, values) {\n        const cleanedValues = values\n            .map((s) => {\n            // handle postgrest reserved characters\n            // https://postgrest.org/en/v7.0.0/api.html#reserved-characters\n            if (typeof s === 'string' && new RegExp('[,()]').test(s))\n                return `\"${s}\"`;\n            else\n                return `${s}`;\n        })\n            .join(',');\n        this.url.searchParams.append(column, `in.(${cleanedValues})`);\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * `column` contains every element appearing in `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    contains(column, value) {\n        if (typeof value === 'string') {\n            // range types can be inclusive '[', ']' or exclusive '(', ')' so just\n            // keep it simple and accept a string\n            this.url.searchParams.append(column, `cs.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cs.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cs.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for jsonb, array, and range columns. Match only rows where\n     * every element appearing in `column` is contained by `value`.\n     *\n     * @param column - The jsonb, array, or range column to filter on\n     * @param value - The jsonb, array, or range value to filter with\n     */\n    containedBy(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `cd.${value}`);\n        }\n        else if (Array.isArray(value)) {\n            // array\n            this.url.searchParams.append(column, `cd.{${value.join(',')}}`);\n        }\n        else {\n            // json\n            this.url.searchParams.append(column, `cd.${JSON.stringify(value)}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is greater than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGt(column, range) {\n        this.url.searchParams.append(column, `sr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or greater than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeGte(column, range) {\n        this.url.searchParams.append(column, `nxl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is less than any element in `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLt(column, range) {\n        this.url.searchParams.append(column, `sl.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where every element in\n     * `column` is either contained in `range` or less than any element in\n     * `range`.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeLte(column, range) {\n        this.url.searchParams.append(column, `nxr.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for range columns. Match only rows where `column` is\n     * mutually exclusive to `range` and there can be no element between the two\n     * ranges.\n     *\n     * @param column - The range column to filter on\n     * @param range - The range to filter with\n     */\n    rangeAdjacent(column, range) {\n        this.url.searchParams.append(column, `adj.${range}`);\n        return this;\n    }\n    /**\n     * Only relevant for array and range columns. Match only rows where\n     * `column` and `value` have an element in common.\n     *\n     * @param column - The array or range column to filter on\n     * @param value - The array or range value to filter with\n     */\n    overlaps(column, value) {\n        if (typeof value === 'string') {\n            // range\n            this.url.searchParams.append(column, `ov.${value}`);\n        }\n        else {\n            // array\n            this.url.searchParams.append(column, `ov.{${value.join(',')}}`);\n        }\n        return this;\n    }\n    /**\n     * Only relevant for text and tsvector columns. Match only rows where\n     * `column` matches the query string in `query`.\n     *\n     * @param column - The text or tsvector column to filter on\n     * @param query - The query text to match with\n     * @param options - Named parameters\n     * @param options.config - The text search configuration to use\n     * @param options.type - Change how the `query` text is interpreted\n     */\n    textSearch(column, query, { config, type } = {}) {\n        let typePart = '';\n        if (type === 'plain') {\n            typePart = 'pl';\n        }\n        else if (type === 'phrase') {\n            typePart = 'ph';\n        }\n        else if (type === 'websearch') {\n            typePart = 'w';\n        }\n        const configPart = config === undefined ? '' : `(${config})`;\n        this.url.searchParams.append(column, `${typePart}fts${configPart}.${query}`);\n        return this;\n    }\n    /**\n     * Match only rows where each column in `query` keys is equal to its\n     * associated value. Shorthand for multiple `.eq()`s.\n     *\n     * @param query - The object to filter with, with column names as keys mapped\n     * to their filter values\n     */\n    match(query) {\n        Object.entries(query).forEach(([column, value]) => {\n            this.url.searchParams.append(column, `eq.${value}`);\n        });\n        return this;\n    }\n    /**\n     * Match only rows which doesn't satisfy the filter.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to be negated to filter with, following\n     * PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    not(column, operator, value) {\n        this.url.searchParams.append(column, `not.${operator}.${value}`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy at least one of the filters.\n     *\n     * Unlike most filters, `filters` is used as-is and needs to follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure it's properly sanitized.\n     *\n     * It's currently not possible to do an `.or()` filter across multiple tables.\n     *\n     * @param filters - The filters to use, following PostgREST syntax\n     * @param foreignTable - Set this to filter on foreign tables instead of the\n     * current table\n     */\n    or(filters, { foreignTable } = {}) {\n        const key = foreignTable ? `${foreignTable}.or` : 'or';\n        this.url.searchParams.append(key, `(${filters})`);\n        return this;\n    }\n    /**\n     * Match only rows which satisfy the filter. This is an escape hatch - you\n     * should use the specific filter methods wherever possible.\n     *\n     * Unlike most filters, `opearator` and `value` are used as-is and need to\n     * follow [PostgREST\n     * syntax](https://postgrest.org/en/stable/api.html#operators). You also need\n     * to make sure they are properly sanitized.\n     *\n     * @param column - The column to filter on\n     * @param operator - The operator to filter with, following PostgREST syntax\n     * @param value - The value to filter with, following PostgREST syntax\n     */\n    filter(column, operator, value) {\n        this.url.searchParams.append(column, `${operator}.${value}`);\n        return this;\n    }\n}\n//# sourceMappingURL=PostgrestFilterBuilder.js.map","import PostgrestFilterBuilder from './PostgrestFilterBuilder';\nexport default class PostgrestQueryBuilder {\n    constructor(url, { headers = {}, schema, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a SELECT query on the table or view.\n     *\n     * @param columns - The columns to retrieve, separated by commas. Columns can be renamed when returned with `customName:columnName`\n     *\n     * @param options - Named parameters\n     *\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     *\n     * @param options.count - Count algorithm to use to count rows in the table or view.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    select(columns, { head = false, count, } = {}) {\n        const method = head ? 'HEAD' : 'GET';\n        // Remove whitespaces except when quoted\n        let quoted = false;\n        const cleanedColumns = (columns !== null && columns !== void 0 ? columns : '*')\n            .split('')\n            .map((c) => {\n            if (/\\s/.test(c) && !quoted) {\n                return '';\n            }\n            if (c === '\"') {\n                quoted = !quoted;\n            }\n            return c;\n        })\n            .join('');\n        this.url.searchParams.set('select', cleanedColumns);\n        if (count) {\n            this.headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an INSERT into the table or view.\n     *\n     * By default, inserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to insert. Pass an object to insert a single row\n     * or an array to insert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count inserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column.\n     */\n    insert(values, { count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPSERT on the table or view. Depending on the column(s) passed\n     * to `onConflict`, `.upsert()` allows you to perform the equivalent of\n     * `.insert()` if a row with the corresponding `onConflict` columns doesn't\n     * exist, or if it does exist, perform an alternative action depending on\n     * `ignoreDuplicates`.\n     *\n     * By default, upserted rows are not returned. To return it, chain the call\n     * with `.select()`.\n     *\n     * @param values - The values to upsert with. Pass an object to upsert a\n     * single row or an array to upsert multiple rows.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.onConflict - Comma-separated UNIQUE column(s) to specify how\n     * duplicate rows are determined. Two rows are duplicates if all the\n     * `onConflict` columns are equal.\n     *\n     * @param options.ignoreDuplicates - If `true`, duplicate rows are ignored. If\n     * `false`, duplicate rows are merged with existing rows.\n     *\n     * @param options.count - Count algorithm to use to count upserted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     *\n     * @param options.defaultToNull - Make missing fields default to `null`.\n     * Otherwise, use the default value for the column. This only applies when\n     * inserting new rows, not when merging with existing rows under\n     * `ignoreDuplicates: false`.\n     */\n    upsert(values, { onConflict, ignoreDuplicates = false, count, defaultToNull = true, } = {}) {\n        const method = 'POST';\n        const prefersHeaders = [`resolution=${ignoreDuplicates ? 'ignore' : 'merge'}-duplicates`];\n        if (onConflict !== undefined)\n            this.url.searchParams.set('on_conflict', onConflict);\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (!defaultToNull) {\n            prefersHeaders.push('missing=default');\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        if (Array.isArray(values)) {\n            const columns = values.reduce((acc, x) => acc.concat(Object.keys(x)), []);\n            if (columns.length > 0) {\n                const uniqueColumns = [...new Set(columns)].map((column) => `\"${column}\"`);\n                this.url.searchParams.set('columns', uniqueColumns.join(','));\n            }\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform an UPDATE on the table or view.\n     *\n     * By default, updated rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param values - The values to update with\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count updated rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    update(values, { count, } = {}) {\n        const method = 'PATCH';\n        const prefersHeaders = [];\n        if (this.headers['Prefer']) {\n            prefersHeaders.push(this.headers['Prefer']);\n        }\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            body: values,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n    /**\n     * Perform a DELETE on the table or view.\n     *\n     * By default, deleted rows are not returned. To return it, chain the call\n     * with `.select()` after filters.\n     *\n     * @param options - Named parameters\n     *\n     * @param options.count - Count algorithm to use to count deleted rows.\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    delete({ count, } = {}) {\n        const method = 'DELETE';\n        const prefersHeaders = [];\n        if (count) {\n            prefersHeaders.push(`count=${count}`);\n        }\n        if (this.headers['Prefer']) {\n            prefersHeaders.unshift(this.headers['Prefer']);\n        }\n        this.headers['Prefer'] = prefersHeaders.join(',');\n        return new PostgrestFilterBuilder({\n            method,\n            url: this.url,\n            headers: this.headers,\n            schema: this.schema,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestQueryBuilder.js.map","export const version = '1.6.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `postgrest-js/${version}` };\n//# sourceMappingURL=constants.js.map","import PostgrestQueryBuilder from './PostgrestQueryBuilder';\nimport PostgrestFilterBuilder from './PostgrestFilterBuilder';\nimport { DEFAULT_HEADERS } from './constants';\n/**\n * PostgREST client.\n *\n * @typeParam Database - Types for the schema from the [type\n * generator](https://supabase.com/docs/reference/javascript/next/typescript-support)\n *\n * @typeParam SchemaName - Postgres schema to switch to. Must be a string\n * literal, the same one passed to the constructor. If the schema is not\n * `\"public\"`, this must be supplied manually.\n */\nexport default class PostgrestClient {\n    // TODO: Add back shouldThrowOnError once we figure out the typings\n    /**\n     * Creates a PostgREST client.\n     *\n     * @param url - URL of the PostgREST endpoint\n     * @param options - Named parameters\n     * @param options.headers - Custom headers\n     * @param options.schema - Postgres schema to switch to\n     * @param options.fetch - Custom fetch\n     */\n    constructor(url, { headers = {}, schema, fetch, } = {}) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.schema = schema;\n        this.fetch = fetch;\n    }\n    /**\n     * Perform a query on a table or a view.\n     *\n     * @param relation - The table or view name to query\n     */\n    from(relation) {\n        const url = new URL(`${this.url}/${relation}`);\n        return new PostgrestQueryBuilder(url, {\n            headers: Object.assign({}, this.headers),\n            schema: this.schema,\n            fetch: this.fetch,\n        });\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn - The function name to call\n     * @param args - The arguments to pass to the function call\n     * @param options - Named parameters\n     * @param options.head - When set to `true`, `data` will not be returned.\n     * Useful if you only need the count.\n     * @param options.count - Count algorithm to use to count rows returned by the\n     * function. Only applicable for [set-returning\n     * functions](https://www.postgresql.org/docs/current/functions-srf.html).\n     *\n     * `\"exact\"`: Exact but slow count algorithm. Performs a `COUNT(*)` under the\n     * hood.\n     *\n     * `\"planned\"`: Approximated but fast count algorithm. Uses the Postgres\n     * statistics under the hood.\n     *\n     * `\"estimated\"`: Uses exact count for low numbers and planned count for high\n     * numbers.\n     */\n    rpc(fn, args = {}, { head = false, count, } = {}) {\n        let method;\n        const url = new URL(`${this.url}/rpc/${fn}`);\n        let body;\n        if (head) {\n            method = 'HEAD';\n            Object.entries(args).forEach(([name, value]) => {\n                url.searchParams.append(name, `${value}`);\n            });\n        }\n        else {\n            method = 'POST';\n            body = args;\n        }\n        const headers = Object.assign({}, this.headers);\n        if (count) {\n            headers['Prefer'] = `count=${count}`;\n        }\n        return new PostgrestFilterBuilder({\n            method,\n            url,\n            headers,\n            schema: this.schema,\n            body,\n            fetch: this.fetch,\n            allowEmpty: false,\n        });\n    }\n}\n//# sourceMappingURL=PostgrestClient.js.map","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","export const version = '2.7.2';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `realtime-js/${version}` };\nexport const VSN = '1.0.0';\nexport const DEFAULT_TIMEOUT = 10000;\nexport const WS_CLOSE_NORMAL = 1000;\nexport var SOCKET_STATES;\n(function (SOCKET_STATES) {\n    SOCKET_STATES[SOCKET_STATES[\"connecting\"] = 0] = \"connecting\";\n    SOCKET_STATES[SOCKET_STATES[\"open\"] = 1] = \"open\";\n    SOCKET_STATES[SOCKET_STATES[\"closing\"] = 2] = \"closing\";\n    SOCKET_STATES[SOCKET_STATES[\"closed\"] = 3] = \"closed\";\n})(SOCKET_STATES || (SOCKET_STATES = {}));\nexport var CHANNEL_STATES;\n(function (CHANNEL_STATES) {\n    CHANNEL_STATES[\"closed\"] = \"closed\";\n    CHANNEL_STATES[\"errored\"] = \"errored\";\n    CHANNEL_STATES[\"joined\"] = \"joined\";\n    CHANNEL_STATES[\"joining\"] = \"joining\";\n    CHANNEL_STATES[\"leaving\"] = \"leaving\";\n})(CHANNEL_STATES || (CHANNEL_STATES = {}));\nexport var CHANNEL_EVENTS;\n(function (CHANNEL_EVENTS) {\n    CHANNEL_EVENTS[\"close\"] = \"phx_close\";\n    CHANNEL_EVENTS[\"error\"] = \"phx_error\";\n    CHANNEL_EVENTS[\"join\"] = \"phx_join\";\n    CHANNEL_EVENTS[\"reply\"] = \"phx_reply\";\n    CHANNEL_EVENTS[\"leave\"] = \"phx_leave\";\n    CHANNEL_EVENTS[\"access_token\"] = \"access_token\";\n})(CHANNEL_EVENTS || (CHANNEL_EVENTS = {}));\nexport var TRANSPORTS;\n(function (TRANSPORTS) {\n    TRANSPORTS[\"websocket\"] = \"websocket\";\n})(TRANSPORTS || (TRANSPORTS = {}));\nexport var CONNECTION_STATE;\n(function (CONNECTION_STATE) {\n    CONNECTION_STATE[\"Connecting\"] = \"connecting\";\n    CONNECTION_STATE[\"Open\"] = \"open\";\n    CONNECTION_STATE[\"Closing\"] = \"closing\";\n    CONNECTION_STATE[\"Closed\"] = \"closed\";\n})(CONNECTION_STATE || (CONNECTION_STATE = {}));\n//# sourceMappingURL=constants.js.map","/**\n * Creates a timer that accepts a `timerCalc` function to perform calculated timeout retries, such as exponential backoff.\n *\n * @example\n *    let reconnectTimer = new Timer(() => this.connect(), function(tries){\n *      return [1000, 5000, 10000][tries - 1] || 10000\n *    })\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n *    reconnectTimer.scheduleTimeout() // fires after 5000\n *    reconnectTimer.reset()\n *    reconnectTimer.scheduleTimeout() // fires after 1000\n */\nexport default class Timer {\n    constructor(callback, timerCalc) {\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n        this.timer = undefined;\n        this.tries = 0;\n        this.callback = callback;\n        this.timerCalc = timerCalc;\n    }\n    reset() {\n        this.tries = 0;\n        clearTimeout(this.timer);\n    }\n    // Cancels any previous scheduleTimeout and schedules callback\n    scheduleTimeout() {\n        clearTimeout(this.timer);\n        this.timer = setTimeout(() => {\n            this.tries = this.tries + 1;\n            this.callback();\n        }, this.timerCalc(this.tries + 1));\n    }\n}\n//# sourceMappingURL=timer.js.map","// This file draws heavily from https://github.com/phoenixframework/phoenix/commit/cf098e9cf7a44ee6479d31d911a97d3c7430c6fe\n// License: https://github.com/phoenixframework/phoenix/blob/master/LICENSE.md\nexport default class Serializer {\n    constructor() {\n        this.HEADER_LENGTH = 1;\n    }\n    decode(rawPayload, callback) {\n        if (rawPayload.constructor === ArrayBuffer) {\n            return callback(this._binaryDecode(rawPayload));\n        }\n        if (typeof rawPayload === 'string') {\n            return callback(JSON.parse(rawPayload));\n        }\n        return callback({});\n    }\n    _binaryDecode(buffer) {\n        const view = new DataView(buffer);\n        const decoder = new TextDecoder();\n        return this._decodeBroadcast(buffer, view, decoder);\n    }\n    _decodeBroadcast(buffer, view, decoder) {\n        const topicSize = view.getUint8(1);\n        const eventSize = view.getUint8(2);\n        let offset = this.HEADER_LENGTH + 2;\n        const topic = decoder.decode(buffer.slice(offset, offset + topicSize));\n        offset = offset + topicSize;\n        const event = decoder.decode(buffer.slice(offset, offset + eventSize));\n        offset = offset + eventSize;\n        const data = JSON.parse(decoder.decode(buffer.slice(offset, buffer.byteLength)));\n        return { ref: null, topic: topic, event: event, payload: data };\n    }\n}\n//# sourceMappingURL=serializer.js.map","import { DEFAULT_TIMEOUT } from '../lib/constants';\nexport default class Push {\n    /**\n     * Initializes the Push\n     *\n     * @param channel The Channel\n     * @param event The event, for example `\"phx_join\"`\n     * @param payload The payload, for example `{user_id: 123}`\n     * @param timeout The push timeout in milliseconds\n     */\n    constructor(channel, event, payload = {}, timeout = DEFAULT_TIMEOUT) {\n        this.channel = channel;\n        this.event = event;\n        this.payload = payload;\n        this.timeout = timeout;\n        this.sent = false;\n        this.timeoutTimer = undefined;\n        this.ref = '';\n        this.receivedResp = null;\n        this.recHooks = [];\n        this.refEvent = null;\n        this.rateLimited = false;\n    }\n    resend(timeout) {\n        this.timeout = timeout;\n        this._cancelRefEvent();\n        this.ref = '';\n        this.refEvent = null;\n        this.receivedResp = null;\n        this.sent = false;\n        this.send();\n    }\n    send() {\n        if (this._hasReceived('timeout')) {\n            return;\n        }\n        this.startTimeout();\n        this.sent = true;\n        const status = this.channel.socket.push({\n            topic: this.channel.topic,\n            event: this.event,\n            payload: this.payload,\n            ref: this.ref,\n            join_ref: this.channel._joinRef(),\n        });\n        if (status === 'rate limited') {\n            this.rateLimited = true;\n        }\n    }\n    updatePayload(payload) {\n        this.payload = Object.assign(Object.assign({}, this.payload), payload);\n    }\n    receive(status, callback) {\n        var _a;\n        if (this._hasReceived(status)) {\n            callback((_a = this.receivedResp) === null || _a === void 0 ? void 0 : _a.response);\n        }\n        this.recHooks.push({ status, callback });\n        return this;\n    }\n    startTimeout() {\n        if (this.timeoutTimer) {\n            return;\n        }\n        this.ref = this.channel.socket._makeRef();\n        this.refEvent = this.channel._replyEventName(this.ref);\n        const callback = (payload) => {\n            this._cancelRefEvent();\n            this._cancelTimeout();\n            this.receivedResp = payload;\n            this._matchReceive(payload);\n        };\n        this.channel._on(this.refEvent, {}, callback);\n        this.timeoutTimer = setTimeout(() => {\n            this.trigger('timeout', {});\n        }, this.timeout);\n    }\n    trigger(status, response) {\n        if (this.refEvent)\n            this.channel._trigger(this.refEvent, { status, response });\n    }\n    destroy() {\n        this._cancelRefEvent();\n        this._cancelTimeout();\n    }\n    _cancelRefEvent() {\n        if (!this.refEvent) {\n            return;\n        }\n        this.channel._off(this.refEvent, {});\n    }\n    _cancelTimeout() {\n        clearTimeout(this.timeoutTimer);\n        this.timeoutTimer = undefined;\n    }\n    _matchReceive({ status, response, }) {\n        this.recHooks\n            .filter((h) => h.status === status)\n            .forEach((h) => h.callback(response));\n    }\n    _hasReceived(status) {\n        return this.receivedResp && this.receivedResp.status === status;\n    }\n}\n//# sourceMappingURL=push.js.map","/*\n  This file draws heavily from https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/assets/js/phoenix/presence.js\n  License: https://github.com/phoenixframework/phoenix/blob/d344ec0a732ab4ee204215b31de69cf4be72e3bf/LICENSE.md\n*/\nexport var REALTIME_PRESENCE_LISTEN_EVENTS;\n(function (REALTIME_PRESENCE_LISTEN_EVENTS) {\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"SYNC\"] = \"sync\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"JOIN\"] = \"join\";\n    REALTIME_PRESENCE_LISTEN_EVENTS[\"LEAVE\"] = \"leave\";\n})(REALTIME_PRESENCE_LISTEN_EVENTS || (REALTIME_PRESENCE_LISTEN_EVENTS = {}));\nexport default class RealtimePresence {\n    /**\n     * Initializes the Presence.\n     *\n     * @param channel - The RealtimeChannel\n     * @param opts - The options,\n     *        for example `{events: {state: 'state', diff: 'diff'}}`\n     */\n    constructor(channel, opts) {\n        this.channel = channel;\n        this.state = {};\n        this.pendingDiffs = [];\n        this.joinRef = null;\n        this.caller = {\n            onJoin: () => { },\n            onLeave: () => { },\n            onSync: () => { },\n        };\n        const events = (opts === null || opts === void 0 ? void 0 : opts.events) || {\n            state: 'presence_state',\n            diff: 'presence_diff',\n        };\n        this.channel._on(events.state, {}, (newState) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            this.joinRef = this.channel._joinRef();\n            this.state = RealtimePresence.syncState(this.state, newState, onJoin, onLeave);\n            this.pendingDiffs.forEach((diff) => {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n            });\n            this.pendingDiffs = [];\n            onSync();\n        });\n        this.channel._on(events.diff, {}, (diff) => {\n            const { onJoin, onLeave, onSync } = this.caller;\n            if (this.inPendingSyncState()) {\n                this.pendingDiffs.push(diff);\n            }\n            else {\n                this.state = RealtimePresence.syncDiff(this.state, diff, onJoin, onLeave);\n                onSync();\n            }\n        });\n        this.onJoin((key, currentPresences, newPresences) => {\n            this.channel._trigger('presence', {\n                event: 'join',\n                key,\n                currentPresences,\n                newPresences,\n            });\n        });\n        this.onLeave((key, currentPresences, leftPresences) => {\n            this.channel._trigger('presence', {\n                event: 'leave',\n                key,\n                currentPresences,\n                leftPresences,\n            });\n        });\n        this.onSync(() => {\n            this.channel._trigger('presence', { event: 'sync' });\n        });\n    }\n    /**\n     * Used to sync the list of presences on the server with the\n     * client's state.\n     *\n     * An optional `onJoin` and `onLeave` callback can be provided to\n     * react to changes in the client's local presences across\n     * disconnects and reconnects with the server.\n     *\n     * @internal\n     */\n    static syncState(currentState, newState, onJoin, onLeave) {\n        const state = this.cloneDeep(currentState);\n        const transformedState = this.transformState(newState);\n        const joins = {};\n        const leaves = {};\n        this.map(state, (key, presences) => {\n            if (!transformedState[key]) {\n                leaves[key] = presences;\n            }\n        });\n        this.map(transformedState, (key, newPresences) => {\n            const currentPresences = state[key];\n            if (currentPresences) {\n                const newPresenceRefs = newPresences.map((m) => m.presence_ref);\n                const curPresenceRefs = currentPresences.map((m) => m.presence_ref);\n                const joinedPresences = newPresences.filter((m) => curPresenceRefs.indexOf(m.presence_ref) < 0);\n                const leftPresences = currentPresences.filter((m) => newPresenceRefs.indexOf(m.presence_ref) < 0);\n                if (joinedPresences.length > 0) {\n                    joins[key] = joinedPresences;\n                }\n                if (leftPresences.length > 0) {\n                    leaves[key] = leftPresences;\n                }\n            }\n            else {\n                joins[key] = newPresences;\n            }\n        });\n        return this.syncDiff(state, { joins, leaves }, onJoin, onLeave);\n    }\n    /**\n     * Used to sync a diff of presence join and leave events from the\n     * server, as they happen.\n     *\n     * Like `syncState`, `syncDiff` accepts optional `onJoin` and\n     * `onLeave` callbacks to react to a user joining or leaving from a\n     * device.\n     *\n     * @internal\n     */\n    static syncDiff(state, diff, onJoin, onLeave) {\n        const { joins, leaves } = {\n            joins: this.transformState(diff.joins),\n            leaves: this.transformState(diff.leaves),\n        };\n        if (!onJoin) {\n            onJoin = () => { };\n        }\n        if (!onLeave) {\n            onLeave = () => { };\n        }\n        this.map(joins, (key, newPresences) => {\n            var _a;\n            const currentPresences = (_a = state[key]) !== null && _a !== void 0 ? _a : [];\n            state[key] = this.cloneDeep(newPresences);\n            if (currentPresences.length > 0) {\n                const joinedPresenceRefs = state[key].map((m) => m.presence_ref);\n                const curPresences = currentPresences.filter((m) => joinedPresenceRefs.indexOf(m.presence_ref) < 0);\n                state[key].unshift(...curPresences);\n            }\n            onJoin(key, currentPresences, newPresences);\n        });\n        this.map(leaves, (key, leftPresences) => {\n            let currentPresences = state[key];\n            if (!currentPresences)\n                return;\n            const presenceRefsToRemove = leftPresences.map((m) => m.presence_ref);\n            currentPresences = currentPresences.filter((m) => presenceRefsToRemove.indexOf(m.presence_ref) < 0);\n            state[key] = currentPresences;\n            onLeave(key, currentPresences, leftPresences);\n            if (currentPresences.length === 0)\n                delete state[key];\n        });\n        return state;\n    }\n    /** @internal */\n    static map(obj, func) {\n        return Object.getOwnPropertyNames(obj).map((key) => func(key, obj[key]));\n    }\n    /**\n     * Remove 'metas' key\n     * Change 'phx_ref' to 'presence_ref'\n     * Remove 'phx_ref' and 'phx_ref_prev'\n     *\n     * @example\n     * // returns {\n     *  abc123: [\n     *    { presence_ref: '2', user_id: 1 },\n     *    { presence_ref: '3', user_id: 2 }\n     *  ]\n     * }\n     * RealtimePresence.transformState({\n     *  abc123: {\n     *    metas: [\n     *      { phx_ref: '2', phx_ref_prev: '1' user_id: 1 },\n     *      { phx_ref: '3', user_id: 2 }\n     *    ]\n     *  }\n     * })\n     *\n     * @internal\n     */\n    static transformState(state) {\n        state = this.cloneDeep(state);\n        return Object.getOwnPropertyNames(state).reduce((newState, key) => {\n            const presences = state[key];\n            if ('metas' in presences) {\n                newState[key] = presences.metas.map((presence) => {\n                    presence['presence_ref'] = presence['phx_ref'];\n                    delete presence['phx_ref'];\n                    delete presence['phx_ref_prev'];\n                    return presence;\n                });\n            }\n            else {\n                newState[key] = presences;\n            }\n            return newState;\n        }, {});\n    }\n    /** @internal */\n    static cloneDeep(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    }\n    /** @internal */\n    onJoin(callback) {\n        this.caller.onJoin = callback;\n    }\n    /** @internal */\n    onLeave(callback) {\n        this.caller.onLeave = callback;\n    }\n    /** @internal */\n    onSync(callback) {\n        this.caller.onSync = callback;\n    }\n    /** @internal */\n    inPendingSyncState() {\n        return !this.joinRef || this.joinRef !== this.channel._joinRef();\n    }\n}\n//# sourceMappingURL=RealtimePresence.js.map","/**\n * Helpers to convert the change Payload into native JS types.\n */\n// Adapted from epgsql (src/epgsql_binary.erl), this module licensed under\n// 3-clause BSD found here: https://raw.githubusercontent.com/epgsql/epgsql/devel/LICENSE\nexport var PostgresTypes;\n(function (PostgresTypes) {\n    PostgresTypes[\"abstime\"] = \"abstime\";\n    PostgresTypes[\"bool\"] = \"bool\";\n    PostgresTypes[\"date\"] = \"date\";\n    PostgresTypes[\"daterange\"] = \"daterange\";\n    PostgresTypes[\"float4\"] = \"float4\";\n    PostgresTypes[\"float8\"] = \"float8\";\n    PostgresTypes[\"int2\"] = \"int2\";\n    PostgresTypes[\"int4\"] = \"int4\";\n    PostgresTypes[\"int4range\"] = \"int4range\";\n    PostgresTypes[\"int8\"] = \"int8\";\n    PostgresTypes[\"int8range\"] = \"int8range\";\n    PostgresTypes[\"json\"] = \"json\";\n    PostgresTypes[\"jsonb\"] = \"jsonb\";\n    PostgresTypes[\"money\"] = \"money\";\n    PostgresTypes[\"numeric\"] = \"numeric\";\n    PostgresTypes[\"oid\"] = \"oid\";\n    PostgresTypes[\"reltime\"] = \"reltime\";\n    PostgresTypes[\"text\"] = \"text\";\n    PostgresTypes[\"time\"] = \"time\";\n    PostgresTypes[\"timestamp\"] = \"timestamp\";\n    PostgresTypes[\"timestamptz\"] = \"timestamptz\";\n    PostgresTypes[\"timetz\"] = \"timetz\";\n    PostgresTypes[\"tsrange\"] = \"tsrange\";\n    PostgresTypes[\"tstzrange\"] = \"tstzrange\";\n})(PostgresTypes || (PostgresTypes = {}));\n/**\n * Takes an array of columns and an object of string values then converts each string value\n * to its mapped type.\n *\n * @param {{name: String, type: String}[]} columns\n * @param {Object} record\n * @param {Object} options The map of various options that can be applied to the mapper\n * @param {Array} options.skipTypes The array of types that should not be converted\n *\n * @example convertChangeData([{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age:'33'}, {})\n * //=>{ first_name: 'Paul', age: 33 }\n */\nexport const convertChangeData = (columns, record, options = {}) => {\n    var _a;\n    const skipTypes = (_a = options.skipTypes) !== null && _a !== void 0 ? _a : [];\n    return Object.keys(record).reduce((acc, rec_key) => {\n        acc[rec_key] = convertColumn(rec_key, columns, record, skipTypes);\n        return acc;\n    }, {});\n};\n/**\n * Converts the value of an individual column.\n *\n * @param {String} columnName The column that you want to convert\n * @param {{name: String, type: String}[]} columns All of the columns\n * @param {Object} record The map of string values\n * @param {Array} skipTypes An array of types that should not be converted\n * @return {object} Useless information\n *\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, [])\n * //=> 33\n * @example convertColumn('age', [{name: 'first_name', type: 'text'}, {name: 'age', type: 'int4'}], {first_name: 'Paul', age: '33'}, ['int4'])\n * //=> \"33\"\n */\nexport const convertColumn = (columnName, columns, record, skipTypes) => {\n    const column = columns.find((x) => x.name === columnName);\n    const colType = column === null || column === void 0 ? void 0 : column.type;\n    const value = record[columnName];\n    if (colType && !skipTypes.includes(colType)) {\n        return convertCell(colType, value);\n    }\n    return noop(value);\n};\n/**\n * If the value of the cell is `null`, returns null.\n * Otherwise converts the string value to the correct type.\n * @param {String} type A postgres column type\n * @param {String} value The cell value\n *\n * @example convertCell('bool', 't')\n * //=> true\n * @example convertCell('int8', '10')\n * //=> 10\n * @example convertCell('_int4', '{1,2,3,4}')\n * //=> [1,2,3,4]\n */\nexport const convertCell = (type, value) => {\n    // if data type is an array\n    if (type.charAt(0) === '_') {\n        const dataType = type.slice(1, type.length);\n        return toArray(value, dataType);\n    }\n    // If not null, convert to correct type.\n    switch (type) {\n        case PostgresTypes.bool:\n            return toBoolean(value);\n        case PostgresTypes.float4:\n        case PostgresTypes.float8:\n        case PostgresTypes.int2:\n        case PostgresTypes.int4:\n        case PostgresTypes.int8:\n        case PostgresTypes.numeric:\n        case PostgresTypes.oid:\n            return toNumber(value);\n        case PostgresTypes.json:\n        case PostgresTypes.jsonb:\n            return toJson(value);\n        case PostgresTypes.timestamp:\n            return toTimestampString(value); // Format to be consistent with PostgREST\n        case PostgresTypes.abstime: // To allow users to cast it based on Timezone\n        case PostgresTypes.date: // To allow users to cast it based on Timezone\n        case PostgresTypes.daterange:\n        case PostgresTypes.int4range:\n        case PostgresTypes.int8range:\n        case PostgresTypes.money:\n        case PostgresTypes.reltime: // To allow users to cast it based on Timezone\n        case PostgresTypes.text:\n        case PostgresTypes.time: // To allow users to cast it based on Timezone\n        case PostgresTypes.timestamptz: // To allow users to cast it based on Timezone\n        case PostgresTypes.timetz: // To allow users to cast it based on Timezone\n        case PostgresTypes.tsrange:\n        case PostgresTypes.tstzrange:\n            return noop(value);\n        default:\n            // Return the value for remaining types\n            return noop(value);\n    }\n};\nconst noop = (value) => {\n    return value;\n};\nexport const toBoolean = (value) => {\n    switch (value) {\n        case 't':\n            return true;\n        case 'f':\n            return false;\n        default:\n            return value;\n    }\n};\nexport const toNumber = (value) => {\n    if (typeof value === 'string') {\n        const parsedValue = parseFloat(value);\n        if (!Number.isNaN(parsedValue)) {\n            return parsedValue;\n        }\n    }\n    return value;\n};\nexport const toJson = (value) => {\n    if (typeof value === 'string') {\n        try {\n            return JSON.parse(value);\n        }\n        catch (error) {\n            console.log(`JSON parse error: ${error}`);\n            return value;\n        }\n    }\n    return value;\n};\n/**\n * Converts a Postgres Array into a native JS array\n *\n * @example toArray('{}', 'int4')\n * //=> []\n * @example toArray('{\"[2021-01-01,2021-12-31)\",\"(2021-01-01,2021-12-32]\"}', 'daterange')\n * //=> ['[2021-01-01,2021-12-31)', '(2021-01-01,2021-12-32]']\n * @example toArray([1,2,3,4], 'int4')\n * //=> [1,2,3,4]\n */\nexport const toArray = (value, type) => {\n    if (typeof value !== 'string') {\n        return value;\n    }\n    const lastIdx = value.length - 1;\n    const closeBrace = value[lastIdx];\n    const openBrace = value[0];\n    // Confirm value is a Postgres array by checking curly brackets\n    if (openBrace === '{' && closeBrace === '}') {\n        let arr;\n        const valTrim = value.slice(1, lastIdx);\n        // TODO: find a better solution to separate Postgres array data\n        try {\n            arr = JSON.parse('[' + valTrim + ']');\n        }\n        catch (_) {\n            // WARNING: splitting on comma does not cover all edge cases\n            arr = valTrim ? valTrim.split(',') : [];\n        }\n        return arr.map((val) => convertCell(type, val));\n    }\n    return value;\n};\n/**\n * Fixes timestamp to be ISO-8601. Swaps the space between the date and time for a 'T'\n * See https://github.com/supabase/supabase/issues/18\n *\n * @example toTimestampString('2019-09-10 00:00:00')\n * //=> '2019-09-10T00:00:00'\n */\nexport const toTimestampString = (value) => {\n    if (typeof value === 'string') {\n        return value.replace(' ', 'T');\n    }\n    return value;\n};\n//# sourceMappingURL=transformers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CHANNEL_EVENTS, CHANNEL_STATES } from './lib/constants';\nimport Push from './lib/push';\nimport Timer from './lib/timer';\nimport RealtimePresence from './RealtimePresence';\nimport * as Transformers from './lib/transformers';\nexport var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;\n(function (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT) {\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"ALL\"] = \"*\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"INSERT\"] = \"INSERT\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"UPDATE\"] = \"UPDATE\";\n    REALTIME_POSTGRES_CHANGES_LISTEN_EVENT[\"DELETE\"] = \"DELETE\";\n})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT || (REALTIME_POSTGRES_CHANGES_LISTEN_EVENT = {}));\nexport var REALTIME_LISTEN_TYPES;\n(function (REALTIME_LISTEN_TYPES) {\n    REALTIME_LISTEN_TYPES[\"BROADCAST\"] = \"broadcast\";\n    REALTIME_LISTEN_TYPES[\"PRESENCE\"] = \"presence\";\n    /**\n     * listen to Postgres changes.\n     */\n    REALTIME_LISTEN_TYPES[\"POSTGRES_CHANGES\"] = \"postgres_changes\";\n})(REALTIME_LISTEN_TYPES || (REALTIME_LISTEN_TYPES = {}));\nexport var REALTIME_SUBSCRIBE_STATES;\n(function (REALTIME_SUBSCRIBE_STATES) {\n    REALTIME_SUBSCRIBE_STATES[\"SUBSCRIBED\"] = \"SUBSCRIBED\";\n    REALTIME_SUBSCRIBE_STATES[\"TIMED_OUT\"] = \"TIMED_OUT\";\n    REALTIME_SUBSCRIBE_STATES[\"CLOSED\"] = \"CLOSED\";\n    REALTIME_SUBSCRIBE_STATES[\"CHANNEL_ERROR\"] = \"CHANNEL_ERROR\";\n})(REALTIME_SUBSCRIBE_STATES || (REALTIME_SUBSCRIBE_STATES = {}));\n/** A channel is the basic building block of Realtime\n * and narrows the scope of data flow to subscribed clients.\n * You can think of a channel as a chatroom where participants are able to see who's online\n * and send and receive messages.\n **/\nexport default class RealtimeChannel {\n    constructor(\n    /** Topic name can be any string. */\n    topic, params = { config: {} }, socket) {\n        this.topic = topic;\n        this.params = params;\n        this.socket = socket;\n        this.bindings = {};\n        this.state = CHANNEL_STATES.closed;\n        this.joinedOnce = false;\n        this.pushBuffer = [];\n        this.params.config = Object.assign({\n            broadcast: { ack: false, self: false },\n            presence: { key: '' },\n        }, params.config);\n        this.timeout = this.socket.timeout;\n        this.joinPush = new Push(this, CHANNEL_EVENTS.join, this.params, this.timeout);\n        this.rejoinTimer = new Timer(() => this._rejoinUntilConnected(), this.socket.reconnectAfterMs);\n        this.joinPush.receive('ok', () => {\n            this.state = CHANNEL_STATES.joined;\n            this.rejoinTimer.reset();\n            this.pushBuffer.forEach((pushEvent) => pushEvent.send());\n            this.pushBuffer = [];\n        });\n        this._onClose(() => {\n            this.rejoinTimer.reset();\n            this.socket.log('channel', `close ${this.topic} ${this._joinRef()}`);\n            this.state = CHANNEL_STATES.closed;\n            this.socket._remove(this);\n        });\n        this._onError((reason) => {\n            if (this._isLeaving() || this._isClosed()) {\n                return;\n            }\n            this.socket.log('channel', `error ${this.topic}`, reason);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this.joinPush.receive('timeout', () => {\n            if (!this._isJoining()) {\n                return;\n            }\n            this.socket.log('channel', `timeout ${this.topic}`, this.joinPush.timeout);\n            this.state = CHANNEL_STATES.errored;\n            this.rejoinTimer.scheduleTimeout();\n        });\n        this._on(CHANNEL_EVENTS.reply, {}, (payload, ref) => {\n            this._trigger(this._replyEventName(ref), payload);\n        });\n        this.presence = new RealtimePresence(this);\n    }\n    /** Subscribe registers your client with the server */\n    subscribe(callback, timeout = this.timeout) {\n        var _a, _b;\n        if (this.joinedOnce) {\n            throw `tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance`;\n        }\n        else {\n            const { config: { broadcast, presence }, } = this.params;\n            this._onError((e) => callback && callback('CHANNEL_ERROR', e));\n            this._onClose(() => callback && callback('CLOSED'));\n            const accessTokenPayload = {};\n            const config = {\n                broadcast,\n                presence,\n                postgres_changes: (_b = (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.map((r) => r.filter)) !== null && _b !== void 0 ? _b : [],\n            };\n            if (this.socket.accessToken) {\n                accessTokenPayload.access_token = this.socket.accessToken;\n            }\n            this.updateJoinPayload(Object.assign({ config }, accessTokenPayload));\n            this.joinedOnce = true;\n            this._rejoin(timeout);\n            this.joinPush\n                .receive('ok', ({ postgres_changes: serverPostgresFilters, }) => {\n                var _a;\n                this.socket.accessToken &&\n                    this.socket.setAuth(this.socket.accessToken);\n                if (serverPostgresFilters === undefined) {\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n                else {\n                    const clientPostgresBindings = this.bindings.postgres_changes;\n                    const bindingsLen = (_a = clientPostgresBindings === null || clientPostgresBindings === void 0 ? void 0 : clientPostgresBindings.length) !== null && _a !== void 0 ? _a : 0;\n                    const newPostgresBindings = [];\n                    for (let i = 0; i < bindingsLen; i++) {\n                        const clientPostgresBinding = clientPostgresBindings[i];\n                        const { filter: { event, schema, table, filter }, } = clientPostgresBinding;\n                        const serverPostgresFilter = serverPostgresFilters && serverPostgresFilters[i];\n                        if (serverPostgresFilter &&\n                            serverPostgresFilter.event === event &&\n                            serverPostgresFilter.schema === schema &&\n                            serverPostgresFilter.table === table &&\n                            serverPostgresFilter.filter === filter) {\n                            newPostgresBindings.push(Object.assign(Object.assign({}, clientPostgresBinding), { id: serverPostgresFilter.id }));\n                        }\n                        else {\n                            this.unsubscribe();\n                            callback &&\n                                callback('CHANNEL_ERROR', new Error('mismatch between server and client bindings for postgres changes'));\n                            return;\n                        }\n                    }\n                    this.bindings.postgres_changes = newPostgresBindings;\n                    callback && callback('SUBSCRIBED');\n                    return;\n                }\n            })\n                .receive('error', (error) => {\n                callback &&\n                    callback('CHANNEL_ERROR', new Error(JSON.stringify(Object.values(error).join(', ') || 'error')));\n                return;\n            })\n                .receive('timeout', () => {\n                callback && callback('TIMED_OUT');\n                return;\n            });\n        }\n        return this;\n    }\n    presenceState() {\n        return this.presence.state;\n    }\n    track(payload, opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'track',\n                payload,\n            }, opts.timeout || this.timeout);\n        });\n    }\n    untrack(opts = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.send({\n                type: 'presence',\n                event: 'untrack',\n            }, opts);\n        });\n    }\n    on(type, filter, callback) {\n        return this._on(type, filter, callback);\n    }\n    send(payload, opts = {}) {\n        return new Promise((resolve) => {\n            var _a, _b, _c;\n            const push = this._push(payload.type, payload, opts.timeout || this.timeout);\n            if (push.rateLimited) {\n                resolve('rate limited');\n            }\n            if (payload.type === 'broadcast' &&\n                !((_c = (_b = (_a = this.params) === null || _a === void 0 ? void 0 : _a.config) === null || _b === void 0 ? void 0 : _b.broadcast) === null || _c === void 0 ? void 0 : _c.ack)) {\n                resolve('ok');\n            }\n            push.receive('ok', () => resolve('ok'));\n            push.receive('timeout', () => resolve('timed out'));\n        });\n    }\n    updateJoinPayload(payload) {\n        this.joinPush.updatePayload(payload);\n    }\n    /**\n     * Leaves the channel.\n     *\n     * Unsubscribes from server events, and instructs channel to terminate on server.\n     * Triggers onClose() hooks.\n     *\n     * To receive leave acknowledgements, use the a `receive` hook to bind to the server ack, ie:\n     * channel.unsubscribe().receive(\"ok\", () => alert(\"left!\") )\n     */\n    unsubscribe(timeout = this.timeout) {\n        this.state = CHANNEL_STATES.leaving;\n        const onClose = () => {\n            this.socket.log('channel', `leave ${this.topic}`);\n            this._trigger(CHANNEL_EVENTS.close, 'leave', this._joinRef());\n        };\n        this.rejoinTimer.reset();\n        // Destroy joinPush to avoid connection timeouts during unscription phase\n        this.joinPush.destroy();\n        return new Promise((resolve) => {\n            const leavePush = new Push(this, CHANNEL_EVENTS.leave, {}, timeout);\n            leavePush\n                .receive('ok', () => {\n                onClose();\n                resolve('ok');\n            })\n                .receive('timeout', () => {\n                onClose();\n                resolve('timed out');\n            })\n                .receive('error', () => {\n                resolve('error');\n            });\n            leavePush.send();\n            if (!this._canPush()) {\n                leavePush.trigger('ok', {});\n            }\n        });\n    }\n    /** @internal */\n    _push(event, payload, timeout = this.timeout) {\n        if (!this.joinedOnce) {\n            throw `tried to push '${event}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;\n        }\n        let pushEvent = new Push(this, event, payload, timeout);\n        if (this._canPush()) {\n            pushEvent.send();\n        }\n        else {\n            pushEvent.startTimeout();\n            this.pushBuffer.push(pushEvent);\n        }\n        return pushEvent;\n    }\n    /**\n     * Overridable message hook\n     *\n     * Receives all events for specialized message handling before dispatching to the channel callbacks.\n     * Must return the payload, modified or unmodified.\n     *\n     * @internal\n     */\n    _onMessage(_event, payload, _ref) {\n        return payload;\n    }\n    /** @internal */\n    _isMember(topic) {\n        return this.topic === topic;\n    }\n    /** @internal */\n    _joinRef() {\n        return this.joinPush.ref;\n    }\n    /** @internal */\n    _trigger(type, payload, ref) {\n        var _a, _b;\n        const typeLower = type.toLocaleLowerCase();\n        const { close, error, leave, join } = CHANNEL_EVENTS;\n        const events = [close, error, leave, join];\n        if (ref && events.indexOf(typeLower) >= 0 && ref !== this._joinRef()) {\n            return;\n        }\n        let handledPayload = this._onMessage(typeLower, payload, ref);\n        if (payload && !handledPayload) {\n            throw 'channel onMessage callbacks must return the payload, modified or unmodified';\n        }\n        if (['insert', 'update', 'delete'].includes(typeLower)) {\n            (_a = this.bindings.postgres_changes) === null || _a === void 0 ? void 0 : _a.filter((bind) => {\n                var _a, _b, _c;\n                return (((_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event) === '*' ||\n                    ((_c = (_b = bind.filter) === null || _b === void 0 ? void 0 : _b.event) === null || _c === void 0 ? void 0 : _c.toLocaleLowerCase()) === typeLower);\n            }).map((bind) => bind.callback(handledPayload, ref));\n        }\n        else {\n            (_b = this.bindings[typeLower]) === null || _b === void 0 ? void 0 : _b.filter((bind) => {\n                var _a, _b, _c, _d, _e, _f;\n                if (['broadcast', 'presence', 'postgres_changes'].includes(typeLower)) {\n                    if ('id' in bind) {\n                        const bindId = bind.id;\n                        const bindEvent = (_a = bind.filter) === null || _a === void 0 ? void 0 : _a.event;\n                        return (bindId &&\n                            ((_b = payload.ids) === null || _b === void 0 ? void 0 : _b.includes(bindId)) &&\n                            (bindEvent === '*' ||\n                                (bindEvent === null || bindEvent === void 0 ? void 0 : bindEvent.toLocaleLowerCase()) ===\n                                    ((_c = payload.data) === null || _c === void 0 ? void 0 : _c.type.toLocaleLowerCase())));\n                    }\n                    else {\n                        const bindEvent = (_e = (_d = bind === null || bind === void 0 ? void 0 : bind.filter) === null || _d === void 0 ? void 0 : _d.event) === null || _e === void 0 ? void 0 : _e.toLocaleLowerCase();\n                        return (bindEvent === '*' ||\n                            bindEvent === ((_f = payload === null || payload === void 0 ? void 0 : payload.event) === null || _f === void 0 ? void 0 : _f.toLocaleLowerCase()));\n                    }\n                }\n                else {\n                    return bind.type.toLocaleLowerCase() === typeLower;\n                }\n            }).map((bind) => {\n                if (typeof handledPayload === 'object' && 'ids' in handledPayload) {\n                    const postgresChanges = handledPayload.data;\n                    const { schema, table, commit_timestamp, type, errors } = postgresChanges;\n                    const enrichedPayload = {\n                        schema: schema,\n                        table: table,\n                        commit_timestamp: commit_timestamp,\n                        eventType: type,\n                        new: {},\n                        old: {},\n                        errors: errors,\n                    };\n                    handledPayload = Object.assign(Object.assign({}, enrichedPayload), this._getPayloadRecords(postgresChanges));\n                }\n                bind.callback(handledPayload, ref);\n            });\n        }\n    }\n    /** @internal */\n    _isClosed() {\n        return this.state === CHANNEL_STATES.closed;\n    }\n    /** @internal */\n    _isJoined() {\n        return this.state === CHANNEL_STATES.joined;\n    }\n    /** @internal */\n    _isJoining() {\n        return this.state === CHANNEL_STATES.joining;\n    }\n    /** @internal */\n    _isLeaving() {\n        return this.state === CHANNEL_STATES.leaving;\n    }\n    /** @internal */\n    _replyEventName(ref) {\n        return `chan_reply_${ref}`;\n    }\n    /** @internal */\n    _on(type, filter, callback) {\n        const typeLower = type.toLocaleLowerCase();\n        const binding = {\n            type: typeLower,\n            filter: filter,\n            callback: callback,\n        };\n        if (this.bindings[typeLower]) {\n            this.bindings[typeLower].push(binding);\n        }\n        else {\n            this.bindings[typeLower] = [binding];\n        }\n        return this;\n    }\n    /** @internal */\n    _off(type, filter) {\n        const typeLower = type.toLocaleLowerCase();\n        this.bindings[typeLower] = this.bindings[typeLower].filter((bind) => {\n            var _a;\n            return !(((_a = bind.type) === null || _a === void 0 ? void 0 : _a.toLocaleLowerCase()) === typeLower &&\n                RealtimeChannel.isEqual(bind.filter, filter));\n        });\n        return this;\n    }\n    /** @internal */\n    static isEqual(obj1, obj2) {\n        if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n            return false;\n        }\n        for (const k in obj1) {\n            if (obj1[k] !== obj2[k]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /** @internal */\n    _rejoinUntilConnected() {\n        this.rejoinTimer.scheduleTimeout();\n        if (this.socket.isConnected()) {\n            this._rejoin();\n        }\n    }\n    /**\n     * Registers a callback that will be executed when the channel closes.\n     *\n     * @internal\n     */\n    _onClose(callback) {\n        this._on(CHANNEL_EVENTS.close, {}, callback);\n    }\n    /**\n     * Registers a callback that will be executed when the channel encounteres an error.\n     *\n     * @internal\n     */\n    _onError(callback) {\n        this._on(CHANNEL_EVENTS.error, {}, (reason) => callback(reason));\n    }\n    /**\n     * Returns `true` if the socket is connected and the channel has been joined.\n     *\n     * @internal\n     */\n    _canPush() {\n        return this.socket.isConnected() && this._isJoined();\n    }\n    /** @internal */\n    _rejoin(timeout = this.timeout) {\n        if (this._isLeaving()) {\n            return;\n        }\n        this.socket._leaveOpenTopic(this.topic);\n        this.state = CHANNEL_STATES.joining;\n        this.joinPush.resend(timeout);\n    }\n    /** @internal */\n    _getPayloadRecords(payload) {\n        const records = {\n            new: {},\n            old: {},\n        };\n        if (payload.type === 'INSERT' || payload.type === 'UPDATE') {\n            records.new = Transformers.convertChangeData(payload.columns, payload.record);\n        }\n        if (payload.type === 'UPDATE' || payload.type === 'DELETE') {\n            records.old = Transformers.convertChangeData(payload.columns, payload.old_record);\n        }\n        return records;\n    }\n}\n//# sourceMappingURL=RealtimeChannel.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { w3cwebsocket } from 'websocket';\nimport { VSN, CHANNEL_EVENTS, TRANSPORTS, SOCKET_STATES, DEFAULT_TIMEOUT, WS_CLOSE_NORMAL, DEFAULT_HEADERS, CONNECTION_STATE, } from './lib/constants';\nimport Timer from './lib/timer';\nimport Serializer from './lib/serializer';\nimport RealtimeChannel from './RealtimeChannel';\nconst noop = () => { };\nexport default class RealtimeClient {\n    /**\n     * Initializes the Socket.\n     *\n     * @param endPoint The string WebSocket endpoint, ie, \"ws://example.com/socket\", \"wss://example.com\", \"/socket\" (inherited host & protocol)\n     * @param options.transport The Websocket Transport, for example WebSocket.\n     * @param options.timeout The default timeout in milliseconds to trigger push timeouts.\n     * @param options.params The optional params to pass when connecting.\n     * @param options.headers The optional headers to pass when connecting.\n     * @param options.heartbeatIntervalMs The millisec interval to send a heartbeat message.\n     * @param options.logger The optional function for specialized logging, ie: logger: (kind, msg, data) => { console.log(`${kind}: ${msg}`, data) }\n     * @param options.encode The function to encode outgoing messages. Defaults to JSON: (payload, callback) => callback(JSON.stringify(payload))\n     * @param options.decode The function to decode incoming messages. Defaults to Serializer's decode.\n     * @param options.reconnectAfterMs he optional function that returns the millsec reconnect interval. Defaults to stepped backoff off.\n     */\n    constructor(endPoint, options) {\n        var _a;\n        this.accessToken = null;\n        this.channels = [];\n        this.endPoint = '';\n        this.headers = DEFAULT_HEADERS;\n        this.params = {};\n        this.timeout = DEFAULT_TIMEOUT;\n        this.transport = w3cwebsocket;\n        this.heartbeatIntervalMs = 30000;\n        this.heartbeatTimer = undefined;\n        this.pendingHeartbeatRef = null;\n        this.ref = 0;\n        this.logger = noop;\n        this.conn = null;\n        this.sendBuffer = [];\n        this.serializer = new Serializer();\n        this.stateChangeCallbacks = {\n            open: [],\n            close: [],\n            error: [],\n            message: [],\n        };\n        this.eventsPerSecondLimitMs = 100;\n        this.inThrottle = false;\n        this.endPoint = `${endPoint}/${TRANSPORTS.websocket}`;\n        if (options === null || options === void 0 ? void 0 : options.params)\n            this.params = options.params;\n        if (options === null || options === void 0 ? void 0 : options.headers)\n            this.headers = Object.assign(Object.assign({}, this.headers), options.headers);\n        if (options === null || options === void 0 ? void 0 : options.timeout)\n            this.timeout = options.timeout;\n        if (options === null || options === void 0 ? void 0 : options.logger)\n            this.logger = options.logger;\n        if (options === null || options === void 0 ? void 0 : options.transport)\n            this.transport = options.transport;\n        if (options === null || options === void 0 ? void 0 : options.heartbeatIntervalMs)\n            this.heartbeatIntervalMs = options.heartbeatIntervalMs;\n        const eventsPerSecond = (_a = options === null || options === void 0 ? void 0 : options.params) === null || _a === void 0 ? void 0 : _a.eventsPerSecond;\n        if (eventsPerSecond)\n            this.eventsPerSecondLimitMs = Math.floor(1000 / eventsPerSecond);\n        this.reconnectAfterMs = (options === null || options === void 0 ? void 0 : options.reconnectAfterMs)\n            ? options.reconnectAfterMs\n            : (tries) => {\n                return [1000, 2000, 5000, 10000][tries - 1] || 10000;\n            };\n        this.encode = (options === null || options === void 0 ? void 0 : options.encode)\n            ? options.encode\n            : (payload, callback) => {\n                return callback(JSON.stringify(payload));\n            };\n        this.decode = (options === null || options === void 0 ? void 0 : options.decode)\n            ? options.decode\n            : this.serializer.decode.bind(this.serializer);\n        this.reconnectTimer = new Timer(() => __awaiter(this, void 0, void 0, function* () {\n            this.disconnect();\n            this.connect();\n        }), this.reconnectAfterMs);\n    }\n    /**\n     * Connects the socket, unless already connected.\n     */\n    connect() {\n        if (this.conn) {\n            return;\n        }\n        this.conn = new this.transport(this._endPointURL(), [], null, this.headers);\n        if (this.conn) {\n            this.conn.binaryType = 'arraybuffer';\n            this.conn.onopen = () => this._onConnOpen();\n            this.conn.onerror = (error) => this._onConnError(error);\n            this.conn.onmessage = (event) => this._onConnMessage(event);\n            this.conn.onclose = (event) => this._onConnClose(event);\n        }\n    }\n    /**\n     * Disconnects the socket.\n     *\n     * @param code A numeric status code to send on disconnect.\n     * @param reason A custom reason for the disconnect.\n     */\n    disconnect(code, reason) {\n        if (this.conn) {\n            this.conn.onclose = function () { }; // noop\n            if (code) {\n                this.conn.close(code, reason !== null && reason !== void 0 ? reason : '');\n            }\n            else {\n                this.conn.close();\n            }\n            this.conn = null;\n            // remove open handles\n            this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n            this.reconnectTimer.reset();\n        }\n    }\n    /**\n     * Returns all created channels\n     */\n    getChannels() {\n        return this.channels;\n    }\n    /**\n     * Unsubscribes and removes a single channel\n     * @param channel A RealtimeChannel instance\n     */\n    removeChannel(channel) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const status = yield channel.unsubscribe();\n            if (this.channels.length === 0) {\n                this.disconnect();\n            }\n            return status;\n        });\n    }\n    /**\n     * Unsubscribes and removes all channels\n     */\n    removeAllChannels() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const values_1 = yield Promise.all(this.channels.map((channel) => channel.unsubscribe()));\n            this.disconnect();\n            return values_1;\n        });\n    }\n    /**\n     * Logs the message.\n     *\n     * For customized logging, `this.logger` can be overridden.\n     */\n    log(kind, msg, data) {\n        this.logger(kind, msg, data);\n    }\n    /**\n     * Returns the current state of the socket.\n     */\n    connectionState() {\n        switch (this.conn && this.conn.readyState) {\n            case SOCKET_STATES.connecting:\n                return CONNECTION_STATE.Connecting;\n            case SOCKET_STATES.open:\n                return CONNECTION_STATE.Open;\n            case SOCKET_STATES.closing:\n                return CONNECTION_STATE.Closing;\n            default:\n                return CONNECTION_STATE.Closed;\n        }\n    }\n    /**\n     * Returns `true` is the connection is open.\n     */\n    isConnected() {\n        return this.connectionState() === CONNECTION_STATE.Open;\n    }\n    channel(topic, params = { config: {} }) {\n        if (!this.isConnected()) {\n            this.connect();\n        }\n        const chan = new RealtimeChannel(`realtime:${topic}`, params, this);\n        this.channels.push(chan);\n        return chan;\n    }\n    /**\n     * Push out a message if the socket is connected.\n     *\n     * If the socket is not connected, the message gets enqueued within a local buffer, and sent out when a connection is next established.\n     */\n    push(data) {\n        const { topic, event, payload, ref } = data;\n        let callback = () => {\n            this.encode(data, (result) => {\n                var _a;\n                (_a = this.conn) === null || _a === void 0 ? void 0 : _a.send(result);\n            });\n        };\n        this.log('push', `${topic} ${event} (${ref})`, payload);\n        if (this.isConnected()) {\n            if (['broadcast', 'presence', 'postgres_changes'].includes(event)) {\n                const isThrottled = this._throttle(callback)();\n                if (isThrottled) {\n                    return 'rate limited';\n                }\n            }\n            else {\n                callback();\n            }\n        }\n        else {\n            this.sendBuffer.push(callback);\n        }\n    }\n    /**\n     * Sets the JWT access token used for channel subscription authorization and Realtime RLS.\n     *\n     * @param token A JWT string.\n     */\n    setAuth(token) {\n        this.accessToken = token;\n        this.channels.forEach((channel) => {\n            token && channel.updateJoinPayload({ access_token: token });\n            if (channel.joinedOnce && channel._isJoined()) {\n                channel._push(CHANNEL_EVENTS.access_token, { access_token: token });\n            }\n        });\n    }\n    /**\n     * Return the next message ref, accounting for overflows\n     *\n     * @internal\n     */\n    _makeRef() {\n        let newRef = this.ref + 1;\n        if (newRef === this.ref) {\n            this.ref = 0;\n        }\n        else {\n            this.ref = newRef;\n        }\n        return this.ref.toString();\n    }\n    /**\n     * Unsubscribe from channels with the specified topic.\n     *\n     * @internal\n     */\n    _leaveOpenTopic(topic) {\n        let dupChannel = this.channels.find((c) => c.topic === topic && (c._isJoined() || c._isJoining()));\n        if (dupChannel) {\n            this.log('transport', `leaving duplicate topic \"${topic}\"`);\n            dupChannel.unsubscribe();\n        }\n    }\n    /**\n     * Removes a subscription from the socket.\n     *\n     * @param channel An open subscription.\n     *\n     * @internal\n     */\n    _remove(channel) {\n        this.channels = this.channels.filter((c) => c._joinRef() !== channel._joinRef());\n    }\n    /**\n     * Returns the URL of the websocket.\n     *\n     * @internal\n     */\n    _endPointURL() {\n        return this._appendParams(this.endPoint, Object.assign({}, this.params, { vsn: VSN }));\n    }\n    /** @internal */\n    _onConnMessage(rawMessage) {\n        this.decode(rawMessage.data, (msg) => {\n            let { topic, event, payload, ref } = msg;\n            if ((ref && ref === this.pendingHeartbeatRef) ||\n                event === (payload === null || payload === void 0 ? void 0 : payload.type)) {\n                this.pendingHeartbeatRef = null;\n            }\n            this.log('receive', `${payload.status || ''} ${topic} ${event} ${(ref && '(' + ref + ')') || ''}`, payload);\n            this.channels\n                .filter((channel) => channel._isMember(topic))\n                .forEach((channel) => channel._trigger(event, payload, ref));\n            this.stateChangeCallbacks.message.forEach((callback) => callback(msg));\n        });\n    }\n    /** @internal */\n    _onConnOpen() {\n        this.log('transport', `connected to ${this._endPointURL()}`);\n        this._flushSendBuffer();\n        this.reconnectTimer.reset();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.heartbeatTimer = setInterval(() => this._sendHeartbeat(), this.heartbeatIntervalMs);\n        this.stateChangeCallbacks.open.forEach((callback) => callback());\n    }\n    /** @internal */\n    _onConnClose(event) {\n        this.log('transport', 'close', event);\n        this._triggerChanError();\n        this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n        this.reconnectTimer.scheduleTimeout();\n        this.stateChangeCallbacks.close.forEach((callback) => callback(event));\n    }\n    /** @internal */\n    _onConnError(error) {\n        this.log('transport', error.message);\n        this._triggerChanError();\n        this.stateChangeCallbacks.error.forEach((callback) => callback(error));\n    }\n    /** @internal */\n    _triggerChanError() {\n        this.channels.forEach((channel) => channel._trigger(CHANNEL_EVENTS.error));\n    }\n    /** @internal */\n    _appendParams(url, params) {\n        if (Object.keys(params).length === 0) {\n            return url;\n        }\n        const prefix = url.match(/\\?/) ? '&' : '?';\n        const query = new URLSearchParams(params);\n        return `${url}${prefix}${query}`;\n    }\n    /** @internal */\n    _flushSendBuffer() {\n        if (this.isConnected() && this.sendBuffer.length > 0) {\n            this.sendBuffer.forEach((callback) => callback());\n            this.sendBuffer = [];\n        }\n    }\n    /** @internal */\n    _sendHeartbeat() {\n        var _a;\n        if (!this.isConnected()) {\n            return;\n        }\n        if (this.pendingHeartbeatRef) {\n            this.pendingHeartbeatRef = null;\n            this.log('transport', 'heartbeat timeout. Attempting to re-establish connection');\n            (_a = this.conn) === null || _a === void 0 ? void 0 : _a.close(WS_CLOSE_NORMAL, 'hearbeat timeout');\n            return;\n        }\n        this.pendingHeartbeatRef = this._makeRef();\n        this.push({\n            topic: 'phoenix',\n            event: 'heartbeat',\n            payload: {},\n            ref: this.pendingHeartbeatRef,\n        });\n        this.setAuth(this.accessToken);\n    }\n    /** @internal */\n    _throttle(callback, eventsPerSecondLimitMs = this.eventsPerSecondLimitMs) {\n        return () => {\n            if (this.inThrottle)\n                return true;\n            callback();\n            if (eventsPerSecondLimitMs > 0) {\n                this.inThrottle = true;\n                setTimeout(() => {\n                    this.inThrottle = false;\n                }, eventsPerSecondLimitMs);\n            }\n            return false;\n        };\n    }\n}\n//# sourceMappingURL=RealtimeClient.js.map","export class StorageError extends Error {\n    constructor(message) {\n        super(message);\n        this.__isStorageError = true;\n        this.name = 'StorageError';\n    }\n}\nexport function isStorageError(error) {\n    return typeof error === 'object' && error !== null && '__isStorageError' in error;\n}\nexport class StorageApiError extends StorageError {\n    constructor(message, status) {\n        super(message);\n        this.name = 'StorageApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class StorageUnknownError extends StorageError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'StorageUnknownError';\n        this.originalError = originalError;\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveResponse = () => __awaiter(void 0, void 0, void 0, function* () {\n    if (typeof Response === 'undefined') {\n        return (yield import('cross-fetch')).Response;\n    }\n    return Response;\n});\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { StorageApiError, StorageUnknownError } from './errors';\nimport { resolveResponse } from './helpers';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const Res = yield resolveResponse();\n    if (error instanceof Res) {\n        error\n            .json()\n            .then((err) => {\n            reject(new StorageApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((err) => {\n            reject(new StorageUnknownError(_getErrorMessage(err), err));\n        });\n    }\n    else {\n        reject(new StorageUnknownError(_getErrorMessage(error), error));\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function get(fetcher, url, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'GET', url, options, parameters);\n    });\n}\nexport function post(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'POST', url, options, parameters, body);\n    });\n}\nexport function put(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'PUT', url, options, parameters, body);\n    });\n}\nexport function remove(fetcher, url, body, options, parameters) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _handleRequest(fetcher, 'DELETE', url, options, parameters, body);\n    });\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isStorageError, StorageError } from '../lib/errors';\nimport { get, post, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nconst DEFAULT_SEARCH_OPTIONS = {\n    limit: 100,\n    offset: 0,\n    sortBy: {\n        column: 'name',\n        order: 'asc',\n    },\n};\nconst DEFAULT_FILE_OPTIONS = {\n    cacheControl: '3600',\n    contentType: 'text/plain;charset=UTF-8',\n    upsert: false,\n};\nexport default class StorageFileApi {\n    constructor(url, headers = {}, bucketId, fetch) {\n        this.url = url;\n        this.headers = headers;\n        this.bucketId = bucketId;\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Uploads a file to an existing bucket or replaces an existing file at the specified path with a new one.\n     *\n     * @param method HTTP method.\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadOrUpdate(method, path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let body;\n                const options = Object.assign(Object.assign({}, DEFAULT_FILE_OPTIONS), fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), (method === 'POST' && { 'x-upsert': String(options.upsert) }));\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const cleanPath = this._removeEmptyFolders(path);\n                const _path = this._getFinalPath(cleanPath);\n                const res = yield this.fetch(`${this.url}/object/${_path}`, Object.assign({ method, body: body, headers }, ((options === null || options === void 0 ? void 0 : options.duplex) ? { duplex: options.duplex } : {})));\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Uploads a file to an existing bucket.\n     *\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    upload(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('POST', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Upload a file with a token generated from `createSignedUploadUrl`.\n     * @param path The file path, including the file name. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to upload.\n     * @param token The token generated from `createSignedUploadUrl`\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    uploadToSignedUrl(path, token, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const cleanPath = this._removeEmptyFolders(path);\n            const _path = this._getFinalPath(cleanPath);\n            const url = new URL(this.url + `/object/upload/sign/${_path}`);\n            url.searchParams.set('token', token);\n            try {\n                let body;\n                const options = Object.assign({ upsert: DEFAULT_FILE_OPTIONS.upsert }, fileOptions);\n                const headers = Object.assign(Object.assign({}, this.headers), { 'x-upsert': String(options.upsert) });\n                if (typeof Blob !== 'undefined' && fileBody instanceof Blob) {\n                    body = new FormData();\n                    body.append('cacheControl', options.cacheControl);\n                    body.append('', fileBody);\n                }\n                else if (typeof FormData !== 'undefined' && fileBody instanceof FormData) {\n                    body = fileBody;\n                    body.append('cacheControl', options.cacheControl);\n                }\n                else {\n                    body = fileBody;\n                    headers['cache-control'] = `max-age=${options.cacheControl}`;\n                    headers['content-type'] = options.contentType;\n                }\n                const res = yield this.fetch(url.toString(), {\n                    method: 'PUT',\n                    body: body,\n                    headers,\n                });\n                if (res.ok) {\n                    return {\n                        data: { path: cleanPath },\n                        error: null,\n                    };\n                }\n                else {\n                    const error = yield res.json();\n                    return { data: null, error };\n                }\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed upload URL.\n     * Signed upload URLs can be used to upload files to the bucket without further authentication.\n     * They are valid for one minute.\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     */\n    createSignedUploadUrl(path) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                const data = yield post(this.fetch, `${this.url}/object/upload/sign/${_path}`, {}, { headers: this.headers });\n                const url = new URL(this.url + data.url);\n                const token = url.searchParams.get('token');\n                if (!token) {\n                    throw new StorageError('No token returned by API');\n                }\n                return { data: { signedUrl: url.toString(), path, token }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Replaces an existing file at the specified path with a new one.\n     *\n     * @param path The relative file path. Should be of the format `folder/subfolder/filename.png`. The bucket must already exist before attempting to update.\n     * @param fileBody The body of the file to be stored in the bucket.\n     */\n    update(path, fileBody, fileOptions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.uploadOrUpdate('PUT', path, fileBody, fileOptions);\n        });\n    }\n    /**\n     * Moves an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-new.png`.\n     */\n    move(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/move`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Copies an existing file to a new path in the same bucket.\n     *\n     * @param fromPath The original file path, including the current file name. For example `folder/image.png`.\n     * @param toPath The new file path, including the new file name. For example `folder/image-copy.png`.\n     */\n    copy(fromPath, toPath) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/copy`, { bucketId: this.bucketId, sourceKey: fromPath, destinationKey: toPath }, { headers: this.headers });\n                return { data: { path: data.Key }, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a signed URL. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param path The file path, including the current file name. For example `folder/image.png`.\n     * @param expiresIn The number of seconds until the signed URL expires. For example, `60` for a URL which is valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    createSignedUrl(path, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                let _path = this._getFinalPath(path);\n                let data = yield post(this.fetch, `${this.url}/object/sign/${_path}`, Object.assign({ expiresIn }, ((options === null || options === void 0 ? void 0 : options.transform) ? { transform: options.transform } : {})), { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                const signedUrl = encodeURI(`${this.url}${data.signedURL}${downloadQueryParam}`);\n                data = { signedUrl };\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates multiple signed URLs. Use a signed URL to share a file for a fixed amount of time.\n     *\n     * @param paths The file paths to be downloaded, including the current file names. For example `['folder/image.png', 'folder2/image2.png']`.\n     * @param expiresIn The number of seconds until the signed URLs expire. For example, `60` for URLs which are valid for one minute.\n     * @param options.download triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     */\n    createSignedUrls(paths, expiresIn, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/object/sign/${this.bucketId}`, { expiresIn, paths }, { headers: this.headers });\n                const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n                    ? `&download=${options.download === true ? '' : options.download}`\n                    : '';\n                return {\n                    data: data.map((datum) => (Object.assign(Object.assign({}, datum), { signedUrl: datum.signedURL\n                            ? encodeURI(`${this.url}${datum.signedURL}${downloadQueryParam}`)\n                            : null }))),\n                    error: null,\n                };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Downloads a file from a private bucket. For public buckets, make a request to the URL returned from `getPublicUrl` instead.\n     *\n     * @param path The full path and file name of the file to be downloaded. For example `folder/image.png`.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    download(path, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n            const renderPath = wantsTransformation ? 'render/image/authenticated' : 'object';\n            const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n            const queryString = transformationQuery ? `?${transformationQuery}` : '';\n            try {\n                const _path = this._getFinalPath(path);\n                const res = yield get(this.fetch, `${this.url}/${renderPath}/${_path}${queryString}`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                });\n                const data = yield res.blob();\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * A simple convenience function to get the URL for an asset in a public bucket. If you do not want to use this function, you can construct the public URL by concatenating the bucket URL with the path to the asset.\n     * This function does not verify if the bucket is public. If a public URL is created for a bucket which is not public, you will not be able to download the asset.\n     *\n     * @param path The path and name of the file to generate the public URL for. For example `folder/image.png`.\n     * @param options.download Triggers the file as a download if set to true. Set this parameter as the name of the file if you want to trigger the download with a different filename.\n     * @param options.transform Transform the asset before serving it to the client.\n     */\n    getPublicUrl(path, options) {\n        const _path = this._getFinalPath(path);\n        const _queryString = [];\n        const downloadQueryParam = (options === null || options === void 0 ? void 0 : options.download)\n            ? `download=${options.download === true ? '' : options.download}`\n            : '';\n        if (downloadQueryParam !== '') {\n            _queryString.push(downloadQueryParam);\n        }\n        const wantsTransformation = typeof (options === null || options === void 0 ? void 0 : options.transform) !== 'undefined';\n        const renderPath = wantsTransformation ? 'render/image' : 'object';\n        const transformationQuery = this.transformOptsToQueryString((options === null || options === void 0 ? void 0 : options.transform) || {});\n        if (transformationQuery !== '') {\n            _queryString.push(transformationQuery);\n        }\n        let queryString = _queryString.join('&');\n        if (queryString !== '') {\n            queryString = `?${queryString}`;\n        }\n        return {\n            data: { publicUrl: encodeURI(`${this.url}/${renderPath}/public/${_path}${queryString}`) },\n        };\n    }\n    /**\n     * Deletes files within the same bucket\n     *\n     * @param paths An array of files to delete, including the path and file name. For example [`'folder/image.png'`].\n     */\n    remove(paths) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/object/${this.bucketId}`, { prefixes: paths }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get file metadata\n     * @param id the file id to retrieve metadata\n     */\n    // async getMetadata(\n    //   id: string\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await get(this.fetch, `${this.url}/metadata/${id}`, { headers: this.headers })\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Update file metadata\n     * @param id the file id to update metadata\n     * @param meta the new file metadata\n     */\n    // async updateMetadata(\n    //   id: string,\n    //   meta: Metadata\n    // ): Promise<\n    //   | {\n    //       data: Metadata\n    //       error: null\n    //     }\n    //   | {\n    //       data: null\n    //       error: StorageError\n    //     }\n    // > {\n    //   try {\n    //     const data = await post(\n    //       this.fetch,\n    //       `${this.url}/metadata/${id}`,\n    //       { ...meta },\n    //       { headers: this.headers }\n    //     )\n    //     return { data, error: null }\n    //   } catch (error) {\n    //     if (isStorageError(error)) {\n    //       return { data: null, error }\n    //     }\n    //     throw error\n    //   }\n    // }\n    /**\n     * Lists all the files within a bucket.\n     * @param path The folder path.\n     */\n    list(path, options, parameters) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const body = Object.assign(Object.assign(Object.assign({}, DEFAULT_SEARCH_OPTIONS), options), { prefix: path || '' });\n                const data = yield post(this.fetch, `${this.url}/object/list/${this.bucketId}`, body, { headers: this.headers }, parameters);\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _getFinalPath(path) {\n        return `${this.bucketId}/${path}`;\n    }\n    _removeEmptyFolders(path) {\n        return path.replace(/^\\/|\\/$/g, '').replace(/\\/+/g, '/');\n    }\n    transformOptsToQueryString(transform) {\n        const params = [];\n        if (transform.width) {\n            params.push(`width=${transform.width}`);\n        }\n        if (transform.height) {\n            params.push(`height=${transform.height}`);\n        }\n        if (transform.resize) {\n            params.push(`resize=${transform.resize}`);\n        }\n        if (transform.format) {\n            params.push(`format=${transform.format}`);\n        }\n        if (transform.quality) {\n            params.push(`quality=${transform.quality}`);\n        }\n        return params.join('&');\n    }\n}\n//# sourceMappingURL=StorageFileApi.js.map","// generated by genversion\nexport const version = '2.5.1';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `storage-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DEFAULT_HEADERS } from '../lib/constants';\nimport { isStorageError } from '../lib/errors';\nimport { get, post, put, remove } from '../lib/fetch';\nimport { resolveFetch } from '../lib/helpers';\nexport default class StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        this.url = url;\n        this.headers = Object.assign(Object.assign({}, DEFAULT_HEADERS), headers);\n        this.fetch = resolveFetch(fetch);\n    }\n    /**\n     * Retrieves the details of all Storage buckets within an existing project.\n     */\n    listBuckets() {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Retrieves the details of an existing Storage bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to retrieve.\n     */\n    getBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield get(this.fetch, `${this.url}/bucket/${id}`, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Creates a new Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are creating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations. By default, buckets are private.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     * @returns newly created bucket id\n     */\n    createBucket(id, options = {\n        public: false,\n    }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates a Storage bucket\n     *\n     * @param id A unique identifier for the bucket you are updating.\n     * @param options.public The visibility of the bucket. Public buckets don't require an authorization token to download objects, but still require a valid token for all other operations.\n     * @param options.fileSizeLimit specifies the max file size in bytes that can be uploaded to this bucket.\n     * The global file size limit takes precedence over this value.\n     * The default value is null, which doesn't set a per bucket file size limit.\n     * @param options.allowedMimeTypes specifies the allowed mime types that this bucket can accept during upload.\n     * The default value is null, which allows files with all mime types to be uploaded.\n     * Each mime type specified can be a wildcard, e.g. image/*, or a specific mime type, e.g. image/png.\n     */\n    updateBucket(id, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield put(this.fetch, `${this.url}/bucket/${id}`, {\n                    id,\n                    name: id,\n                    public: options.public,\n                    file_size_limit: options.fileSizeLimit,\n                    allowed_mime_types: options.allowedMimeTypes,\n                }, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Removes all objects inside a single bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to empty.\n     */\n    emptyBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield post(this.fetch, `${this.url}/bucket/${id}/empty`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Deletes an existing bucket. A bucket can't be deleted with existing objects inside it.\n     * You must first `empty()` the bucket.\n     *\n     * @param id The unique identifier of the bucket you would like to delete.\n     */\n    deleteBucket(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield remove(this.fetch, `${this.url}/bucket/${id}`, {}, { headers: this.headers });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isStorageError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=StorageBucketApi.js.map","import StorageFileApi from './packages/StorageFileApi';\nimport StorageBucketApi from './packages/StorageBucketApi';\nexport class StorageClient extends StorageBucketApi {\n    constructor(url, headers = {}, fetch) {\n        super(url, headers, fetch);\n    }\n    /**\n     * Perform file operation in a bucket.\n     *\n     * @param id The bucket id to operate on.\n     */\n    from(id) {\n        return new StorageFileApi(this.url, this.headers, id, this.fetch);\n    }\n}\n//# sourceMappingURL=StorageClient.js.map","export const version = '2.21.0';\n//# sourceMappingURL=version.js.map","// constants.ts\nimport { version } from './version';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `supabase-js/${version}` };\n//# sourceMappingURL=constants.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport crossFetch, { Headers as CrossFetchHeaders } from 'cross-fetch';\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = crossFetch;\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const resolveHeadersConstructor = () => {\n    if (typeof Headers === 'undefined') {\n        return CrossFetchHeaders;\n    }\n    return Headers;\n};\nexport const fetchWithAuth = (supabaseKey, getAccessToken, customFetch) => {\n    const fetch = resolveFetch(customFetch);\n    const HeadersConstructor = resolveHeadersConstructor();\n    return (input, init) => __awaiter(void 0, void 0, void 0, function* () {\n        var _a;\n        const accessToken = (_a = (yield getAccessToken())) !== null && _a !== void 0 ? _a : supabaseKey;\n        let headers = new HeadersConstructor(init === null || init === void 0 ? void 0 : init.headers);\n        if (!headers.has('apikey')) {\n            headers.set('apikey', supabaseKey);\n        }\n        if (!headers.has('Authorization')) {\n            headers.set('Authorization', `Bearer ${accessToken}`);\n        }\n        return fetch(input, Object.assign(Object.assign({}, init), { headers }));\n    });\n};\n//# sourceMappingURL=fetch.js.map","export function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport function stripTrailingSlash(url) {\n    return url.replace(/\\/$/, '');\n}\nexport const isBrowser = () => typeof window !== 'undefined';\nexport function applySettingDefaults(options, defaults) {\n    const { db: dbOptions, auth: authOptions, realtime: realtimeOptions, global: globalOptions, } = options;\n    const { db: DEFAULT_DB_OPTIONS, auth: DEFAULT_AUTH_OPTIONS, realtime: DEFAULT_REALTIME_OPTIONS, global: DEFAULT_GLOBAL_OPTIONS, } = defaults;\n    return {\n        db: Object.assign(Object.assign({}, DEFAULT_DB_OPTIONS), dbOptions),\n        auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), authOptions),\n        realtime: Object.assign(Object.assign({}, DEFAULT_REALTIME_OPTIONS), realtimeOptions),\n        global: Object.assign(Object.assign({}, DEFAULT_GLOBAL_OPTIONS), globalOptions),\n    };\n}\n//# sourceMappingURL=helpers.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport function expiresAt(expiresIn) {\n    const timeNow = Math.round(Date.now() / 1000);\n    return timeNow + expiresIn;\n}\nexport function uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        const r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n}\nexport const isBrowser = () => typeof document !== 'undefined';\nconst localStorageWriteTests = {\n    tested: false,\n    writable: false,\n};\n/**\n * Checks whether localStorage is supported on this browser.\n */\nexport const supportsLocalStorage = () => {\n    if (!isBrowser()) {\n        return false;\n    }\n    try {\n        if (typeof globalThis.localStorage !== 'object') {\n            return false;\n        }\n    }\n    catch (e) {\n        // DOM exception when accessing `localStorage`\n        return false;\n    }\n    if (localStorageWriteTests.tested) {\n        return localStorageWriteTests.writable;\n    }\n    const randomKey = `lswt-${Math.random()}${Math.random()}`;\n    try {\n        globalThis.localStorage.setItem(randomKey, randomKey);\n        globalThis.localStorage.removeItem(randomKey);\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = true;\n    }\n    catch (e) {\n        // localStorage can't be written to\n        // https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document\n        localStorageWriteTests.tested = true;\n        localStorageWriteTests.writable = false;\n    }\n    return localStorageWriteTests.writable;\n};\nexport function getParameterByName(name, url) {\n    var _a;\n    if (!url)\n        url = ((_a = window === null || window === void 0 ? void 0 : window.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n    // eslint-disable-next-line no-useless-escape\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp('[?&#]' + name + '(=([^&#]*)|&|#|$)'), results = regex.exec(url);\n    if (!results)\n        return null;\n    if (!results[2])\n        return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n}\nexport const resolveFetch = (customFetch) => {\n    let _fetch;\n    if (customFetch) {\n        _fetch = customFetch;\n    }\n    else if (typeof fetch === 'undefined') {\n        _fetch = (...args) => __awaiter(void 0, void 0, void 0, function* () { return yield (yield import('cross-fetch')).fetch(...args); });\n    }\n    else {\n        _fetch = fetch;\n    }\n    return (...args) => _fetch(...args);\n};\nexport const looksLikeFetchResponse = (maybeResponse) => {\n    return (typeof maybeResponse === 'object' &&\n        maybeResponse !== null &&\n        'status' in maybeResponse &&\n        'ok' in maybeResponse &&\n        'json' in maybeResponse &&\n        typeof maybeResponse.json === 'function');\n};\n// Storage helpers\nexport const setItemAsync = (storage, key, data) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.setItem(key, JSON.stringify(data));\n});\nexport const getItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    const value = yield storage.getItem(key);\n    if (!value) {\n        return null;\n    }\n    try {\n        return JSON.parse(value);\n    }\n    catch (_a) {\n        return value;\n    }\n});\nexport const removeItemAsync = (storage, key) => __awaiter(void 0, void 0, void 0, function* () {\n    yield storage.removeItem(key);\n});\nexport function decodeBase64URL(value) {\n    const key = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    let base64 = '';\n    let chr1, chr2, chr3;\n    let enc1, enc2, enc3, enc4;\n    let i = 0;\n    value = value.replace('-', '+').replace('_', '/');\n    while (i < value.length) {\n        enc1 = key.indexOf(value.charAt(i++));\n        enc2 = key.indexOf(value.charAt(i++));\n        enc3 = key.indexOf(value.charAt(i++));\n        enc4 = key.indexOf(value.charAt(i++));\n        chr1 = (enc1 << 2) | (enc2 >> 4);\n        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n        chr3 = ((enc3 & 3) << 6) | enc4;\n        base64 = base64 + String.fromCharCode(chr1);\n        if (enc3 != 64 && chr2 != 0) {\n            base64 = base64 + String.fromCharCode(chr2);\n        }\n        if (enc4 != 64 && chr3 != 0) {\n            base64 = base64 + String.fromCharCode(chr3);\n        }\n    }\n    return base64;\n}\n/**\n * A deferred represents some asynchronous work that is not yet finished, which\n * may or may not culminate in a value.\n * Taken from: https://github.com/mike-north/types/blob/master/src/async.ts\n */\nexport class Deferred {\n    constructor() {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        this.promise = new Deferred.promiseConstructor((res, rej) => {\n            // eslint-disable-next-line @typescript-eslint/no-extra-semi\n            ;\n            this.resolve = res;\n            this.reject = rej;\n        });\n    }\n}\nDeferred.promiseConstructor = Promise;\n// Taken from: https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript-without-using-a-library\nexport function decodeJWTPayload(token) {\n    // Regex checks for base64url format\n    const base64UrlRegex = /^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i;\n    const parts = token.split('.');\n    if (parts.length !== 3) {\n        throw new Error('JWT is not valid: not a JWT structure');\n    }\n    if (!base64UrlRegex.test(parts[1])) {\n        throw new Error('JWT is not valid: payload is not in base64url format');\n    }\n    const base64Url = parts[1];\n    return JSON.parse(decodeBase64URL(base64Url));\n}\n/**\n * Creates a promise that resolves to null after some time.\n */\nexport function sleep(time) {\n    return new Promise((accept) => {\n        setTimeout(() => accept(null), time);\n    });\n}\n/**\n * Converts the provided async function into a retryable function. Each result\n * or thrown error is sent to the isRetryable function which should return true\n * if the function should run again.\n */\nexport function retryable(fn, isRetryable) {\n    const promise = new Promise((accept, reject) => {\n        // eslint-disable-next-line @typescript-eslint/no-extra-semi\n        ;\n        (() => __awaiter(this, void 0, void 0, function* () {\n            for (let attempt = 0; attempt < Infinity; attempt++) {\n                try {\n                    const result = yield fn(attempt);\n                    if (!isRetryable(attempt, null, result)) {\n                        accept(result);\n                        return;\n                    }\n                }\n                catch (e) {\n                    if (!isRetryable(attempt, e)) {\n                        reject(e);\n                        return;\n                    }\n                }\n            }\n        }))();\n    });\n    return promise;\n}\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\n// Functions below taken from: https://stackoverflow.com/questions/63309409/creating-a-code-verifier-and-challenge-for-pkce-auth-on-spotify-api-in-reactjs\nexport function generatePKCEVerifier() {\n    const verifierLength = 56;\n    const array = new Uint32Array(verifierLength);\n    if (typeof crypto === 'undefined') {\n        const charSet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~';\n        const charSetLen = charSet.length;\n        let verifier = '';\n        for (let i = 0; i < verifierLength; i++) {\n            verifier += charSet.charAt(Math.floor(Math.random() * charSetLen));\n        }\n        return verifier;\n    }\n    crypto.getRandomValues(array);\n    return Array.from(array, dec2hex).join('');\n}\nfunction sha256(randomString) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const encoder = new TextEncoder();\n        const encodedData = encoder.encode(randomString);\n        const hash = yield crypto.subtle.digest('SHA-256', encodedData);\n        const bytes = new Uint8Array(hash);\n        return Array.from(bytes)\n            .map((c) => String.fromCharCode(c))\n            .join('');\n    });\n}\nfunction base64urlencode(str) {\n    return btoa(str).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\nexport function generatePKCEChallenge(verifier) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof crypto === 'undefined') {\n            console.warn('WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256.');\n            return verifier;\n        }\n        const hashed = yield sha256(verifier);\n        return base64urlencode(hashed);\n    });\n}\n//# sourceMappingURL=helpers.js.map","export class AuthError extends Error {\n    constructor(message, status) {\n        super(message);\n        this.__isAuthError = true;\n        this.name = 'AuthError';\n        this.status = status;\n    }\n}\nexport function isAuthError(error) {\n    return typeof error === 'object' && error !== null && '__isAuthError' in error;\n}\nexport class AuthApiError extends AuthError {\n    constructor(message, status) {\n        super(message, status);\n        this.name = 'AuthApiError';\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport function isAuthApiError(error) {\n    return isAuthError(error) && error.name === 'AuthApiError';\n}\nexport class AuthUnknownError extends AuthError {\n    constructor(message, originalError) {\n        super(message);\n        this.name = 'AuthUnknownError';\n        this.originalError = originalError;\n    }\n}\nexport class CustomAuthError extends AuthError {\n    constructor(message, name, status) {\n        super(message);\n        this.name = name;\n        this.status = status;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n        };\n    }\n}\nexport class AuthSessionMissingError extends CustomAuthError {\n    constructor() {\n        super('Auth session missing!', 'AuthSessionMissingError', 400);\n    }\n}\nexport class AuthInvalidCredentialsError extends CustomAuthError {\n    constructor(message) {\n        super(message, 'AuthInvalidCredentialsError', 400);\n    }\n}\nexport class AuthImplicitGrantRedirectError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthImplicitGrantRedirectError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthPKCEGrantCodeExchangeError extends CustomAuthError {\n    constructor(message, details = null) {\n        super(message, 'AuthPKCEGrantCodeExchangeError', 500);\n        this.details = null;\n        this.details = details;\n    }\n    toJSON() {\n        return {\n            name: this.name,\n            message: this.message,\n            status: this.status,\n            details: this.details,\n        };\n    }\n}\nexport class AuthRetryableFetchError extends CustomAuthError {\n    constructor(message, status) {\n        super(message, 'AuthRetryableFetchError', status);\n    }\n}\n//# sourceMappingURL=errors.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { expiresAt, looksLikeFetchResponse } from './helpers';\nimport { AuthApiError, AuthRetryableFetchError, AuthUnknownError } from './errors';\nconst _getErrorMessage = (err) => err.msg || err.message || err.error_description || err.error || JSON.stringify(err);\nconst handleError = (error, reject) => __awaiter(void 0, void 0, void 0, function* () {\n    const NETWORK_ERROR_CODES = [502, 503, 504];\n    if (!looksLikeFetchResponse(error)) {\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), 0));\n    }\n    else if (NETWORK_ERROR_CODES.includes(error.status)) {\n        // status in 500...599 range - server had an error, request might be retryed.\n        reject(new AuthRetryableFetchError(_getErrorMessage(error), error.status));\n    }\n    else {\n        // got a response from server that is not in the 500...599 range - should not retry\n        error\n            .json()\n            .then((err) => {\n            reject(new AuthApiError(_getErrorMessage(err), error.status || 500));\n        })\n            .catch((e) => {\n            // not a valid json response\n            reject(new AuthUnknownError(_getErrorMessage(e), e));\n        });\n    }\n});\nconst _getRequestParams = (method, options, parameters, body) => {\n    const params = { method, headers: (options === null || options === void 0 ? void 0 : options.headers) || {} };\n    if (method === 'GET') {\n        return params;\n    }\n    params.headers = Object.assign({ 'Content-Type': 'application/json;charset=UTF-8' }, options === null || options === void 0 ? void 0 : options.headers);\n    params.body = JSON.stringify(body);\n    return Object.assign(Object.assign({}, params), parameters);\n};\nexport function _request(fetcher, method, url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const headers = Object.assign({}, options === null || options === void 0 ? void 0 : options.headers);\n        if (options === null || options === void 0 ? void 0 : options.jwt) {\n            headers['Authorization'] = `Bearer ${options.jwt}`;\n        }\n        const qs = (_a = options === null || options === void 0 ? void 0 : options.query) !== null && _a !== void 0 ? _a : {};\n        if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n            qs['redirect_to'] = options.redirectTo;\n        }\n        const queryString = Object.keys(qs).length ? '?' + new URLSearchParams(qs).toString() : '';\n        const data = yield _handleRequest(fetcher, method, url + queryString, { headers, noResolveJson: options === null || options === void 0 ? void 0 : options.noResolveJson }, {}, options === null || options === void 0 ? void 0 : options.body);\n        return (options === null || options === void 0 ? void 0 : options.xform) ? options === null || options === void 0 ? void 0 : options.xform(data) : { data: Object.assign({}, data), error: null };\n    });\n}\nfunction _handleRequest(fetcher, method, url, options, parameters, body) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return new Promise((resolve, reject) => {\n            fetcher(url, _getRequestParams(method, options, parameters, body))\n                .then((result) => {\n                if (!result.ok)\n                    throw result;\n                if (options === null || options === void 0 ? void 0 : options.noResolveJson)\n                    return result;\n                return result.json();\n            })\n                .then((data) => resolve(data))\n                .catch((error) => handleError(error, reject));\n        });\n    });\n}\nexport function _sessionResponse(data) {\n    var _a;\n    let session = null;\n    if (hasSession(data)) {\n        session = Object.assign({}, data);\n        session.expires_at = expiresAt(data.expires_in);\n    }\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { session, user }, error: null };\n}\nexport function _userResponse(data) {\n    var _a;\n    const user = (_a = data.user) !== null && _a !== void 0 ? _a : data;\n    return { data: { user }, error: null };\n}\nexport function _ssoResponse(data) {\n    return { data, error: null };\n}\nexport function _generateLinkResponse(data) {\n    const { action_link, email_otp, hashed_token, redirect_to, verification_type } = data, rest = __rest(data, [\"action_link\", \"email_otp\", \"hashed_token\", \"redirect_to\", \"verification_type\"]);\n    const properties = {\n        action_link,\n        email_otp,\n        hashed_token,\n        redirect_to,\n        verification_type,\n    };\n    const user = Object.assign({}, rest);\n    return {\n        data: {\n            properties,\n            user,\n        },\n        error: null,\n    };\n}\nexport function _noResolveJsonResponse(data) {\n    return data;\n}\n/**\n * hasSession checks if the response object contains a valid session\n * @param data A response object\n * @returns true if a session is in the response\n */\nfunction hasSession(data) {\n    return data.access_token && data.refresh_token && data.expires_in;\n}\n//# sourceMappingURL=fetch.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { _generateLinkResponse, _noResolveJsonResponse, _request, _userResponse, } from './lib/fetch';\nimport { resolveFetch } from './lib/helpers';\nimport { isAuthError } from './lib/errors';\nexport default class GoTrueAdminApi {\n    constructor({ url = '', headers = {}, fetch, }) {\n        this.url = url;\n        this.headers = headers;\n        this.fetch = resolveFetch(fetch);\n        this.mfa = {\n            listFactors: this._listFactors.bind(this),\n            deleteFactor: this._deleteFactor.bind(this),\n        };\n    }\n    /**\n     * Removes a logged-in session.\n     * @param jwt A valid, logged-in JWT.\n     */\n    signOut(jwt) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield _request(this.fetch, 'POST', `${this.url}/logout`, {\n                    headers: this.headers,\n                    jwt,\n                    noResolveJson: true,\n                });\n                return { data: null, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Sends an invite link to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo A URL or mobile deeplink to send the user to after they are confirmed.\n     * @param options.data Optional user metadata\n     */\n    inviteUserByEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/invite`, {\n                    body: { email, data: options.data },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates email links and OTPs to be sent via a custom email provider.\n     * @param email The user's email.\n     * @param options.password User password. For signup only.\n     * @param options.data Optional user metadata. For signup only.\n     * @param options.redirectTo The redirect url which should be appended to the generated link\n     */\n    generateLink(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { options } = params, rest = __rest(params, [\"options\"]);\n                const body = Object.assign(Object.assign({}, rest), options);\n                if ('newEmail' in rest) {\n                    // replace newEmail with new_email in request body\n                    body.new_email = rest === null || rest === void 0 ? void 0 : rest.newEmail;\n                    delete body['newEmail'];\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/generate_link`, {\n                    body: body,\n                    headers: this.headers,\n                    xform: _generateLinkResponse,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return {\n                        data: {\n                            properties: null,\n                            user: null,\n                        },\n                        error,\n                    };\n                }\n                throw error;\n            }\n        });\n    }\n    // User Admin API\n    /**\n     * Creates a new user.\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    createUser(attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/admin/users`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get a list of users.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     * @param params An object which supports `page` and `perPage` as numbers, to alter the paginated results.\n     */\n    listUsers(params) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const pagination = { nextPage: null, lastPage: 0, total: 0 };\n                const response = yield _request(this.fetch, 'GET', `${this.url}/admin/users`, {\n                    headers: this.headers,\n                    noResolveJson: true,\n                    query: {\n                        page: (_b = (_a = params === null || params === void 0 ? void 0 : params.page) === null || _a === void 0 ? void 0 : _a.toString()) !== null && _b !== void 0 ? _b : '',\n                        per_page: (_d = (_c = params === null || params === void 0 ? void 0 : params.perPage) === null || _c === void 0 ? void 0 : _c.toString()) !== null && _d !== void 0 ? _d : '',\n                    },\n                    xform: _noResolveJsonResponse,\n                });\n                if (response.error)\n                    throw response.error;\n                const users = yield response.json();\n                const total = (_e = response.headers.get('x-total-count')) !== null && _e !== void 0 ? _e : 0;\n                const links = (_g = (_f = response.headers.get('link')) === null || _f === void 0 ? void 0 : _f.split(',')) !== null && _g !== void 0 ? _g : [];\n                if (links.length > 0) {\n                    links.forEach((link) => {\n                        const page = parseInt(link.split(';')[0].split('=')[1].substring(0, 1));\n                        const rel = JSON.parse(link.split(';')[1].split('=')[1]);\n                        pagination[`${rel}Page`] = page;\n                    });\n                    pagination.total = parseInt(total);\n                }\n                return { data: Object.assign(Object.assign({}, users), pagination), error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { users: [] }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Get user by id.\n     *\n     * @param uid The user's unique identifier\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    getUserById(uid) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'GET', `${this.url}/admin/users/${uid}`, {\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates the user data.\n     *\n     * @param attributes The data you want to update.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    updateUserById(uid, attributes) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'PUT', `${this.url}/admin/users/${uid}`, {\n                    body: attributes,\n                    headers: this.headers,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Delete a user. Requires a `service_role` key.\n     *\n     * @param id The user id you want to remove.\n     * @param shouldSoftDelete If true, then the user will be soft-deleted from the auth schema.\n     * Defaults to false for backward compatibility.\n     *\n     * This function should only be called on a server. Never expose your `service_role` key in the browser.\n     */\n    deleteUser(id, shouldSoftDelete = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${id}`, {\n                    headers: this.headers,\n                    body: {\n                        should_soft_delete: shouldSoftDelete,\n                    },\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _listFactors(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data, error } = yield _request(this.fetch, 'GET', `${this.url}/admin/users/${params.userId}/factors`, {\n                    headers: this.headers,\n                    xform: (factors) => {\n                        return { data: { factors }, error: null };\n                    },\n                });\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _deleteFactor(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const data = yield _request(this.fetch, 'DELETE', `${this.url}/admin/users/${params.userId}/factors/${params.id}`, {\n                    headers: this.headers,\n                });\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n}\n//# sourceMappingURL=GoTrueAdminApi.js.map","// Generated by genversion.\nexport const version = '2.24.0';\n//# sourceMappingURL=version.js.map","import { version } from './version';\nexport const GOTRUE_URL = 'http://localhost:9999';\nexport const STORAGE_KEY = 'supabase.auth.token';\nexport const AUDIENCE = '';\nexport const DEFAULT_HEADERS = { 'X-Client-Info': `gotrue-js/${version}` };\nexport const EXPIRY_MARGIN = 10; // in seconds\nexport const NETWORK_FAILURE = {\n    MAX_RETRIES: 10,\n    RETRY_INTERVAL: 2, // in deciseconds\n};\n//# sourceMappingURL=constants.js.map","import { supportsLocalStorage } from './helpers';\nconst localStorageAdapter = {\n    getItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return null;\n        }\n        return globalThis.localStorage.getItem(key);\n    },\n    setItem: (key, value) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.setItem(key, value);\n    },\n    removeItem: (key) => {\n        if (!supportsLocalStorage()) {\n            return;\n        }\n        globalThis.localStorage.removeItem(key);\n    },\n};\nexport default localStorageAdapter;\n//# sourceMappingURL=local-storage.js.map","/**\n * https://mathiasbynens.be/notes/globalthis\n */\nexport function polyfillGlobalThis() {\n    if (typeof globalThis === 'object')\n        return;\n    try {\n        Object.defineProperty(Object.prototype, '__magic__', {\n            get: function () {\n                return this;\n            },\n            configurable: true,\n        });\n        // @ts-expect-error 'Allow access to magic'\n        __magic__.globalThis = __magic__;\n        // @ts-expect-error 'Allow access to magic'\n        delete Object.prototype.__magic__;\n    }\n    catch (e) {\n        if (typeof self !== 'undefined') {\n            // @ts-expect-error 'Allow access to globals'\n            self.globalThis = self;\n        }\n    }\n}\n//# sourceMappingURL=polyfills.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport GoTrueAdminApi from './GoTrueAdminApi';\nimport { DEFAULT_HEADERS, EXPIRY_MARGIN, GOTRUE_URL, STORAGE_KEY } from './lib/constants';\nimport { AuthImplicitGrantRedirectError, AuthPKCEGrantCodeExchangeError, AuthInvalidCredentialsError, AuthRetryableFetchError, AuthSessionMissingError, AuthUnknownError, isAuthApiError, isAuthError, } from './lib/errors';\nimport { _request, _sessionResponse, _userResponse, _ssoResponse } from './lib/fetch';\nimport { decodeJWTPayload, Deferred, getItemAsync, getParameterByName, isBrowser, removeItemAsync, resolveFetch, setItemAsync, uuid, retryable, sleep, generatePKCEVerifier, generatePKCEChallenge, } from './lib/helpers';\nimport localStorageAdapter from './lib/local-storage';\nimport { polyfillGlobalThis } from './lib/polyfills';\npolyfillGlobalThis(); // Make \"globalThis\" available\nconst DEFAULT_OPTIONS = {\n    url: GOTRUE_URL,\n    storageKey: STORAGE_KEY,\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    headers: DEFAULT_HEADERS,\n    flowType: 'implicit',\n};\n/** Current session will be checked for refresh at this interval. */\nconst AUTO_REFRESH_TICK_DURATION = 30 * 1000;\n/**\n * A token refresh will be attempted this many ticks before the current session expires. */\nconst AUTO_REFRESH_TICK_THRESHOLD = 3;\nexport default class GoTrueClient {\n    /**\n     * Create a new client for use in the browser.\n     */\n    constructor(options) {\n        var _a;\n        this.stateChangeEmitters = new Map();\n        this.autoRefreshTicker = null;\n        this.visibilityChangedCallback = null;\n        this.refreshingDeferred = null;\n        /**\n         * Keeps track of the async client initialization.\n         * When null or not yet resolved the auth state is `unknown`\n         * Once resolved the the auth state is known and it's save to call any further client methods.\n         * Keep extra care to never reject or throw uncaught errors\n         */\n        this.initializePromise = null;\n        this.detectSessionInUrl = true;\n        /**\n         * Used to broadcast state change events to other tabs listening.\n         */\n        this.broadcastChannel = null;\n        const settings = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        this.inMemorySession = null;\n        this.storageKey = settings.storageKey;\n        this.autoRefreshToken = settings.autoRefreshToken;\n        this.persistSession = settings.persistSession;\n        this.storage = settings.storage || localStorageAdapter;\n        this.admin = new GoTrueAdminApi({\n            url: settings.url,\n            headers: settings.headers,\n            fetch: settings.fetch,\n        });\n        this.url = settings.url;\n        this.headers = settings.headers;\n        this.fetch = resolveFetch(settings.fetch);\n        this.detectSessionInUrl = settings.detectSessionInUrl;\n        this.flowType = settings.flowType;\n        this.mfa = {\n            verify: this._verify.bind(this),\n            enroll: this._enroll.bind(this),\n            unenroll: this._unenroll.bind(this),\n            challenge: this._challenge.bind(this),\n            listFactors: this._listFactors.bind(this),\n            challengeAndVerify: this._challengeAndVerify.bind(this),\n            getAuthenticatorAssuranceLevel: this._getAuthenticatorAssuranceLevel.bind(this),\n        };\n        if (isBrowser() && globalThis.BroadcastChannel && this.persistSession && this.storageKey) {\n            try {\n                this.broadcastChannel = new globalThis.BroadcastChannel(this.storageKey);\n            }\n            catch (e) {\n                console.error('Failed to create a new BroadcastChannel, multi-tab state changes will not be available', e);\n            }\n            (_a = this.broadcastChannel) === null || _a === void 0 ? void 0 : _a.addEventListener('message', (event) => {\n                this._notifyAllSubscribers(event.data.event, event.data.session, false); // broadcast = false so we don't get an endless loop of messages\n            });\n        }\n        this.initialize();\n    }\n    /**\n     * Initializes the client session either from the url or from storage.\n     * This method is automatically called when instantiating the client, but should also be called\n     * manually when checking for an error from an auth redirect (oauth, magiclink, password recovery, etc).\n     */\n    initialize() {\n        if (!this.initializePromise) {\n            this.initializePromise = this._initialize();\n        }\n        return this.initializePromise;\n    }\n    /**\n     * IMPORTANT:\n     * 1. Never throw in this method, as it is called from the constructor\n     * 2. Never return a session from this method as it would be cached over\n     *    the whole lifetime of the client\n     */\n    _initialize() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.initializePromise) {\n                return this.initializePromise;\n            }\n            try {\n                const isPKCEFlow = yield this._isPKCEFlow();\n                if ((this.detectSessionInUrl && this._isImplicitGrantFlow()) || isPKCEFlow) {\n                    const { data, error } = yield this._getSessionFromUrl(isPKCEFlow);\n                    if (error) {\n                        // failed login attempt via url,\n                        // remove old session as in verifyOtp, signUp and signInWith*\n                        yield this._removeSession();\n                        return { error };\n                    }\n                    const { session, redirectType } = data;\n                    yield this._saveSession(session);\n                    setTimeout(() => {\n                        if (redirectType === 'recovery') {\n                            this._notifyAllSubscribers('PASSWORD_RECOVERY', session);\n                        }\n                        else {\n                            this._notifyAllSubscribers('SIGNED_IN', session);\n                        }\n                    }, 0);\n                    return { error: null };\n                }\n                // no login attempt via callback url try to recover session from storage\n                yield this._recoverAndRefresh();\n                return { error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { error };\n                }\n                return {\n                    error: new AuthUnknownError('Unexpected error during initialization', error),\n                };\n            }\n            finally {\n                yield this._handleVisibilityChange();\n            }\n        });\n    }\n    /**\n     * Creates a new user.\n     *\n     * Be aware that if a user account exists in the system you may get back an\n     * error message that attempts to hide this information from the user.\n     *\n     * @returns A logged-in session if the server has \"autoconfirm\" ON\n     * @returns A user if the server has \"autoconfirm\" OFF\n     */\n    signUp(credentials) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    let codeChallenge = null;\n                    let codeChallengeMethod = null;\n                    if (this.flowType === 'pkce') {\n                        const codeVerifier = generatePKCEVerifier();\n                        yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                        codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                        codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                    }\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                        body: {\n                            email,\n                            password,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            code_challenge: codeChallenge,\n                            code_challenge_method: codeChallengeMethod,\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/signup`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            data: (_b = options === null || options === void 0 ? void 0 : options.data) !== null && _b !== void 0 ? _b : {},\n                            channel: (_c = options === null || options === void 0 ? void 0 : options.channel) !== null && _c !== void 0 ? _c : 'sms',\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                const session = data.session;\n                const user = data.user;\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user with an email and password or phone and password.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or that the\n     * email/phone and password combination is wrong or that the account can only\n     * be accessed via social login.\n     */\n    signInWithPassword(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                let res;\n                if ('email' in credentials) {\n                    const { email, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            password,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else if ('phone' in credentials) {\n                    const { phone, password, options } = credentials;\n                    res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=password`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            password,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                        },\n                        xform: _sessionResponse,\n                    });\n                }\n                else {\n                    throw new AuthInvalidCredentialsError('You must provide either an email or phone number and a password');\n                }\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    signInWithOAuth(credentials) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            return yield this._handleProviderSignIn(credentials.provider, {\n                redirectTo: (_a = credentials.options) === null || _a === void 0 ? void 0 : _a.redirectTo,\n                scopes: (_b = credentials.options) === null || _b === void 0 ? void 0 : _b.scopes,\n                queryParams: (_c = credentials.options) === null || _c === void 0 ? void 0 : _c.queryParams,\n                skipBrowserRedirect: (_d = credentials.options) === null || _d === void 0 ? void 0 : _d.skipBrowserRedirect,\n            });\n        });\n    }\n    /**\n     * Log in an existing user via a third-party provider.\n     */\n    exchangeCodeForSession(authCode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const codeVerifier = yield getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=pkce`, {\n                headers: this.headers,\n                body: {\n                    auth_code: authCode,\n                    code_verifier: codeVerifier,\n                },\n                xform: _sessionResponse,\n            });\n            yield removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            if (error || !data)\n                return { data: { user: null, session: null }, error };\n            if (data.session) {\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('SIGNED_IN', data.session);\n            }\n            return { data, error };\n        });\n    }\n    /**\n     * Allows signing in with an ID token issued by certain supported providers.\n     * The ID token is verified for validity and a new session is established.\n     *\n     * @experimental\n     */\n    signInWithIdToken(credentials) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._removeSession();\n            try {\n                const { options, provider, token, nonce } = credentials;\n                const res = yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=id_token`, {\n                    headers: this.headers,\n                    body: {\n                        provider,\n                        id_token: token,\n                        nonce,\n                        gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                    },\n                    xform: _sessionResponse,\n                });\n                const { data, error } = res;\n                if (error || !data)\n                    return { data: { user: null, session: null }, error };\n                if (data.session) {\n                    yield this._saveSession(data.session);\n                    this._notifyAllSubscribers('SIGNED_IN', data.session);\n                }\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user using magiclink or a one-time password (OTP).\n     *\n     * If the `{{ .ConfirmationURL }}` variable is specified in the email template, a magiclink will be sent.\n     * If the `{{ .Token }}` variable is specified in the email template, an OTP will be sent.\n     * If you're using phone sign-ins, only an OTP will be sent. You won't be able to send a magiclink for phone sign-ins.\n     *\n     * Be aware that you may get back an error message that will not distinguish\n     * between the cases where the account does not exist or, that the account\n     * can only be accessed via social login.\n     *\n     * Do note that you will need to configure a Whatsapp sender on Twilio\n     * if you are using phone sign in with the 'whatsapp' channel. The whatsapp\n     * channel is not supported on other providers\n     * at this time.\n     */\n    signInWithOtp(credentials) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                if ('email' in credentials) {\n                    const { email, options } = credentials;\n                    let codeChallenge = null;\n                    let codeChallengeMethod = null;\n                    if (this.flowType === 'pkce') {\n                        const codeVerifier = generatePKCEVerifier();\n                        yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                        codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                        codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                    }\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            email,\n                            data: (_a = options === null || options === void 0 ? void 0 : options.data) !== null && _a !== void 0 ? _a : {},\n                            create_user: (_b = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _b !== void 0 ? _b : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            code_challenge: codeChallenge,\n                            code_challenge_method: codeChallengeMethod,\n                        },\n                        redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                if ('phone' in credentials) {\n                    const { phone, options } = credentials;\n                    const { error } = yield _request(this.fetch, 'POST', `${this.url}/otp`, {\n                        headers: this.headers,\n                        body: {\n                            phone,\n                            data: (_c = options === null || options === void 0 ? void 0 : options.data) !== null && _c !== void 0 ? _c : {},\n                            create_user: (_d = options === null || options === void 0 ? void 0 : options.shouldCreateUser) !== null && _d !== void 0 ? _d : true,\n                            gotrue_meta_security: { captcha_token: options === null || options === void 0 ? void 0 : options.captchaToken },\n                            channel: (_e = options === null || options === void 0 ? void 0 : options.channel) !== null && _e !== void 0 ? _e : 'sms',\n                        },\n                    });\n                    return { data: { user: null, session: null }, error };\n                }\n                throw new AuthInvalidCredentialsError('You must provide either an email or phone number.');\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Log in a user given a User supplied OTP received via mobile.\n     */\n    verifyOtp(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/verify`, {\n                    headers: this.headers,\n                    body: Object.assign(Object.assign({}, params), { gotrue_meta_security: { captcha_token: (_a = params.options) === null || _a === void 0 ? void 0 : _a.captchaToken } }),\n                    redirectTo: (_b = params.options) === null || _b === void 0 ? void 0 : _b.redirectTo,\n                    xform: _sessionResponse,\n                });\n                if (error) {\n                    throw error;\n                }\n                if (!data) {\n                    throw new Error('An error occurred on token verification.');\n                }\n                const session = data.session;\n                const user = data.user;\n                if (session === null || session === void 0 ? void 0 : session.access_token) {\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Attempts a single-sign on using an enterprise Identity Provider. A\n     * successful SSO attempt will redirect the current page to the identity\n     * provider authorization page. The redirect URL is implementation and SSO\n     * protocol specific.\n     *\n     * You can use it by providing a SSO domain. Typically you can extract this\n     * domain by asking users for their email address. If this domain is\n     * registered on the Auth instance the redirect will use that organization's\n     * currently active SSO Identity Provider for the login.\n     *\n     * If you have built an organization-specific login page, you can use the\n     * organization's SSO Identity Provider UUID directly instead.\n     */\n    signInWithSSO(params) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._removeSession();\n                return yield _request(this.fetch, 'POST', `${this.url}/sso`, {\n                    body: Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, ('providerId' in params ? { provider_id: params.providerId } : null)), ('domain' in params ? { domain: params.domain } : null)), { redirect_to: (_b = (_a = params.options) === null || _a === void 0 ? void 0 : _a.redirectTo) !== null && _b !== void 0 ? _b : undefined }), (((_c = params === null || params === void 0 ? void 0 : params.options) === null || _c === void 0 ? void 0 : _c.captchaToken)\n                        ? { gotrue_meta_security: { captcha_token: params.options.captchaToken } }\n                        : null)), { skip_http_redirect: true }),\n                    headers: this.headers,\n                    xform: _ssoResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns the session, refreshing it if necessary.\n     * The session returned can be null if the session is not detected which can happen in the event a user is not signed-in or has logged out.\n     */\n    getSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure we've read the session from the url if there is one\n            // save to just await, as long we make sure _initialize() never throws\n            yield this.initializePromise;\n            let currentSession = null;\n            if (this.persistSession) {\n                const maybeSession = yield getItemAsync(this.storage, this.storageKey);\n                if (maybeSession !== null) {\n                    if (this._isValidSession(maybeSession)) {\n                        currentSession = maybeSession;\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n            }\n            else {\n                currentSession = this.inMemorySession;\n            }\n            if (!currentSession) {\n                return { data: { session: null }, error: null };\n            }\n            const hasExpired = currentSession.expires_at\n                ? currentSession.expires_at <= Date.now() / 1000\n                : false;\n            if (!hasExpired) {\n                return { data: { session: currentSession }, error: null };\n            }\n            const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n            if (error) {\n                return { data: { session: null }, error };\n            }\n            return { data: { session }, error: null };\n        });\n    }\n    /**\n     * Gets the current user details if there is an existing session.\n     * @param jwt Takes in an optional access token jwt. If no jwt is provided, getUser() will attempt to get the jwt from the current session.\n     */\n    getUser(jwt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!jwt) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    // Default to Authorization header if there is no existing session\n                    jwt = (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : undefined;\n                }\n                return yield _request(this.fetch, 'GET', `${this.url}/user`, {\n                    headers: this.headers,\n                    jwt: jwt,\n                    xform: _userResponse,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Updates user data for a logged in user.\n     */\n    updateUser(attributes, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    throw sessionError;\n                }\n                if (!sessionData.session) {\n                    throw new AuthSessionMissingError();\n                }\n                const session = sessionData.session;\n                const { data, error: userError } = yield _request(this.fetch, 'PUT', `${this.url}/user`, {\n                    headers: this.headers,\n                    redirectTo: options === null || options === void 0 ? void 0 : options.emailRedirectTo,\n                    body: attributes,\n                    jwt: session.access_token,\n                    xform: _userResponse,\n                });\n                if (userError)\n                    throw userError;\n                session.user = data.user;\n                yield this._saveSession(session);\n                this._notifyAllSubscribers('USER_UPDATED', session);\n                return { data: { user: session.user }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Decodes a JWT (without performing any validation).\n     */\n    _decodeJWT(jwt) {\n        return decodeJWTPayload(jwt);\n    }\n    /**\n     * Sets the session data from the current session. If the current session is expired, setSession will take care of refreshing it to obtain a new session.\n     * If the refresh token or access token in the current session is invalid, an error will be thrown.\n     * @param currentSession The current session that minimally contains an access token and refresh token.\n     */\n    setSession(currentSession) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession.access_token || !currentSession.refresh_token) {\n                    throw new AuthSessionMissingError();\n                }\n                const timeNow = Date.now() / 1000;\n                let expiresAt = timeNow;\n                let hasExpired = true;\n                let session = null;\n                const payload = decodeJWTPayload(currentSession.access_token);\n                if (payload.exp) {\n                    expiresAt = payload.exp;\n                    hasExpired = expiresAt <= timeNow;\n                }\n                if (hasExpired) {\n                    const { session: refreshedSession, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                    if (error) {\n                        return { data: { user: null, session: null }, error: error };\n                    }\n                    if (!refreshedSession) {\n                        return { data: { user: null, session: null }, error: null };\n                    }\n                    session = refreshedSession;\n                }\n                else {\n                    const { data, error } = yield this.getUser(currentSession.access_token);\n                    if (error) {\n                        throw error;\n                    }\n                    session = {\n                        access_token: currentSession.access_token,\n                        refresh_token: currentSession.refresh_token,\n                        user: data.user,\n                        token_type: 'bearer',\n                        expires_in: expiresAt - timeNow,\n                        expires_at: expiresAt,\n                    };\n                    yield this._saveSession(session);\n                    this._notifyAllSubscribers('SIGNED_IN', session);\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Returns a new session, regardless of expiry status.\n     * Takes in an optional current session. If not passed in, then refreshSession() will attempt to retrieve it from getSession().\n     * If the current session's refresh token is invalid, an error will be thrown.\n     * @param currentSession The current session. If passed in, it must contain a refresh token.\n     */\n    refreshSession(currentSession) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!currentSession) {\n                    const { data, error } = yield this.getSession();\n                    if (error) {\n                        throw error;\n                    }\n                    currentSession = (_a = data.session) !== null && _a !== void 0 ? _a : undefined;\n                }\n                if (!(currentSession === null || currentSession === void 0 ? void 0 : currentSession.refresh_token)) {\n                    throw new AuthSessionMissingError();\n                }\n                const { session, error } = yield this._callRefreshToken(currentSession.refresh_token);\n                if (error) {\n                    return { data: { user: null, session: null }, error: error };\n                }\n                if (!session) {\n                    return { data: { user: null, session: null }, error: null };\n                }\n                return { data: { user: session.user, session }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { user: null, session: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Gets the session data from a URL string\n     */\n    _getSessionFromUrl(isPKCEFlow) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (!isBrowser())\n                    throw new AuthImplicitGrantRedirectError('No browser detected.');\n                if (this.flowType === 'implicit' && !this._isImplicitGrantFlow()) {\n                    throw new AuthImplicitGrantRedirectError('Not a valid implicit grant flow url.');\n                }\n                else if (this.flowType == 'pkce' && !isPKCEFlow) {\n                    throw new AuthPKCEGrantCodeExchangeError('Not a valid PKCE flow url.');\n                }\n                if (isPKCEFlow) {\n                    const authCode = getParameterByName('code');\n                    if (!authCode)\n                        throw new AuthPKCEGrantCodeExchangeError('No code detected.');\n                    const { data, error } = yield this.exchangeCodeForSession(authCode);\n                    if (error)\n                        throw error;\n                    if (!data.session)\n                        throw new AuthPKCEGrantCodeExchangeError('No session detected.');\n                    return { data: { session: data.session, redirectType: null }, error: null };\n                }\n                const error_description = getParameterByName('error_description');\n                if (error_description) {\n                    const error_code = getParameterByName('error_code');\n                    if (!error_code)\n                        throw new AuthImplicitGrantRedirectError('No error_code detected.');\n                    const error = getParameterByName('error');\n                    if (!error)\n                        throw new AuthImplicitGrantRedirectError('No error detected.');\n                    throw new AuthImplicitGrantRedirectError(error_description, { error, code: error_code });\n                }\n                const provider_token = getParameterByName('provider_token');\n                const provider_refresh_token = getParameterByName('provider_refresh_token');\n                const access_token = getParameterByName('access_token');\n                if (!access_token)\n                    throw new AuthImplicitGrantRedirectError('No access_token detected.');\n                const expires_in = getParameterByName('expires_in');\n                if (!expires_in)\n                    throw new AuthImplicitGrantRedirectError('No expires_in detected.');\n                const refresh_token = getParameterByName('refresh_token');\n                if (!refresh_token)\n                    throw new AuthImplicitGrantRedirectError('No refresh_token detected.');\n                const token_type = getParameterByName('token_type');\n                if (!token_type)\n                    throw new AuthImplicitGrantRedirectError('No token_type detected.');\n                const timeNow = Math.round(Date.now() / 1000);\n                const expires_at = timeNow + parseInt(expires_in);\n                const { data, error } = yield this.getUser(access_token);\n                if (error)\n                    throw error;\n                const user = data.user;\n                const session = {\n                    provider_token,\n                    provider_refresh_token,\n                    access_token,\n                    expires_in: parseInt(expires_in),\n                    expires_at,\n                    refresh_token,\n                    token_type,\n                    user,\n                };\n                const redirectType = getParameterByName('type');\n                // Remove tokens from URL\n                window.location.hash = '';\n                return { data: { session, redirectType }, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, redirectType: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Checks if the current URL contains parameters given by an implicit oauth grant flow (https://www.rfc-editor.org/rfc/rfc6749.html#section-4.2)\n     */\n    _isImplicitGrantFlow() {\n        return (isBrowser() &&\n            (Boolean(getParameterByName('access_token')) ||\n                Boolean(getParameterByName('error_description'))));\n    }\n    /**\n     * Checks if the current URL and backing storage contain parameters given by a PKCE flow\n     */\n    _isPKCEFlow() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const currentStorageContent = yield getItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            return isBrowser() && Boolean(getParameterByName('code')) && Boolean(currentStorageContent);\n        });\n    }\n    /**\n     * Inside a browser context, `signOut()` will remove the logged in user from the browser session\n     * and log them out - removing all items from localstorage and then trigger a `\"SIGNED_OUT\"` event.\n     *\n     * For server-side management, you can revoke all refresh tokens for a user by passing a user's JWT through to `auth.api.signOut(JWT: string)`.\n     * There is no way to revoke a user's access token jwt until it expires. It is recommended to set a shorter expiry on the jwt for this reason.\n     */\n    signOut() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data, error: sessionError } = yield this.getSession();\n            if (sessionError) {\n                return { error: sessionError };\n            }\n            const accessToken = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token;\n            if (accessToken) {\n                const { error } = yield this.admin.signOut(accessToken);\n                if (error) {\n                    // ignore 404s since user might not exist anymore\n                    // ignore 401s since an invalid or expired JWT should sign out the current session\n                    if (!(isAuthApiError(error) && (error.status === 404 || error.status === 401))) {\n                        return { error };\n                    }\n                }\n            }\n            yield this._removeSession();\n            yield removeItemAsync(this.storage, `${this.storageKey}-code-verifier`);\n            this._notifyAllSubscribers('SIGNED_OUT', null);\n            return { error: null };\n        });\n    }\n    /**\n     * Receive a notification every time an auth event happens.\n     * @param callback A callback function to be invoked when an auth event happens.\n     */\n    onAuthStateChange(callback) {\n        const id = uuid();\n        const subscription = {\n            id,\n            callback,\n            unsubscribe: () => {\n                this.stateChangeEmitters.delete(id);\n            },\n        };\n        this.stateChangeEmitters.set(id, subscription);\n        this.emitInitialSession(id);\n        return { data: { subscription } };\n    }\n    emitInitialSession(id) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: { session }, error, } = yield this.getSession();\n                if (error)\n                    throw error;\n                (_a = this.stateChangeEmitters.get(id)) === null || _a === void 0 ? void 0 : _a.callback('INITIAL_SESSION', session);\n            }\n            catch (err) {\n                (_b = this.stateChangeEmitters.get(id)) === null || _b === void 0 ? void 0 : _b.callback('INITIAL_SESSION', null);\n                console.error(err);\n            }\n        });\n    }\n    /**\n     * Sends a password reset request to an email address.\n     * @param email The email address of the user.\n     * @param options.redirectTo The URL to send the user to after they click the password reset link.\n     * @param options.captchaToken Verification token received when the user completes the captcha on the site.\n     */\n    resetPasswordForEmail(email, options = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let codeChallenge = null;\n            let codeChallengeMethod = null;\n            if (this.flowType === 'pkce') {\n                const codeVerifier = generatePKCEVerifier();\n                yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n            }\n            try {\n                return yield _request(this.fetch, 'POST', `${this.url}/recover`, {\n                    body: {\n                        email,\n                        code_challenge: codeChallenge,\n                        code_challenge_method: codeChallengeMethod,\n                        gotrue_meta_security: { captcha_token: options.captchaToken },\n                    },\n                    headers: this.headers,\n                    redirectTo: options.redirectTo,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Generates a new JWT.\n     * @param refreshToken A valid refresh token that was returned on login.\n     */\n    _refreshAccessToken(refreshToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const startedAt = Date.now();\n                // will attempt to refresh the token with exponential backoff\n                return yield retryable((attempt) => __awaiter(this, void 0, void 0, function* () {\n                    yield sleep(attempt * 200); // 0, 200, 400, 800, ...\n                    return yield _request(this.fetch, 'POST', `${this.url}/token?grant_type=refresh_token`, {\n                        body: { refresh_token: refreshToken },\n                        headers: this.headers,\n                        xform: _sessionResponse,\n                    });\n                }), (attempt, _, result) => result &&\n                    result.error &&\n                    result.error instanceof AuthRetryableFetchError &&\n                    // retryable only if the request can be sent before the backoff overflows the tick duration\n                    Date.now() + (attempt + 1) * 200 - startedAt < AUTO_REFRESH_TICK_DURATION);\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: { session: null, user: null }, error };\n                }\n                throw error;\n            }\n        });\n    }\n    _isValidSession(maybeSession) {\n        const isValidSession = typeof maybeSession === 'object' &&\n            maybeSession !== null &&\n            'access_token' in maybeSession &&\n            'refresh_token' in maybeSession &&\n            'expires_at' in maybeSession;\n        return isValidSession;\n    }\n    _handleProviderSignIn(provider, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = yield this._getUrlForProvider(provider, {\n                redirectTo: options.redirectTo,\n                scopes: options.scopes,\n                queryParams: options.queryParams,\n            });\n            // try to open on the browser\n            if (isBrowser() && !options.skipBrowserRedirect) {\n                window.location.assign(url);\n            }\n            return { data: { provider, url }, error: null };\n        });\n    }\n    /**\n     * Recovers the session from LocalStorage and refreshes\n     * Note: this method is async to accommodate for AsyncStorage e.g. in React native.\n     */\n    _recoverAndRefresh() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const currentSession = yield getItemAsync(this.storage, this.storageKey);\n                if (!this._isValidSession(currentSession)) {\n                    if (currentSession !== null) {\n                        yield this._removeSession();\n                    }\n                    return;\n                }\n                const timeNow = Math.round(Date.now() / 1000);\n                if (((_a = currentSession.expires_at) !== null && _a !== void 0 ? _a : Infinity) < timeNow + EXPIRY_MARGIN) {\n                    if (this.autoRefreshToken && currentSession.refresh_token) {\n                        const { error } = yield this._callRefreshToken(currentSession.refresh_token);\n                        if (error) {\n                            console.log(error.message);\n                            yield this._removeSession();\n                        }\n                    }\n                    else {\n                        yield this._removeSession();\n                    }\n                }\n                else {\n                    if (this.persistSession) {\n                        yield this._saveSession(currentSession);\n                    }\n                    this._notifyAllSubscribers('SIGNED_IN', currentSession);\n                }\n            }\n            catch (err) {\n                console.error(err);\n                return;\n            }\n        });\n    }\n    _callRefreshToken(refreshToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // refreshing is already in progress\n            if (this.refreshingDeferred) {\n                return this.refreshingDeferred.promise;\n            }\n            try {\n                this.refreshingDeferred = new Deferred();\n                if (!refreshToken) {\n                    throw new AuthSessionMissingError();\n                }\n                const { data, error } = yield this._refreshAccessToken(refreshToken);\n                if (error)\n                    throw error;\n                if (!data.session)\n                    throw new AuthSessionMissingError();\n                yield this._saveSession(data.session);\n                this._notifyAllSubscribers('TOKEN_REFRESHED', data.session);\n                const result = { session: data.session, error: null };\n                this.refreshingDeferred.resolve(result);\n                return result;\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    const result = { session: null, error };\n                    (_a = this.refreshingDeferred) === null || _a === void 0 ? void 0 : _a.resolve(result);\n                    return result;\n                }\n                (_b = this.refreshingDeferred) === null || _b === void 0 ? void 0 : _b.reject(error);\n                throw error;\n            }\n            finally {\n                this.refreshingDeferred = null;\n            }\n        });\n    }\n    _notifyAllSubscribers(event, session, broadcast = true) {\n        if (this.broadcastChannel && broadcast) {\n            this.broadcastChannel.postMessage({ event, session });\n        }\n        this.stateChangeEmitters.forEach((x) => x.callback(event, session));\n    }\n    /**\n     * set currentSession and currentUser\n     * process to _startAutoRefreshToken if possible\n     */\n    _saveSession(session) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.persistSession) {\n                this.inMemorySession = session;\n            }\n            if (this.persistSession && session.expires_at) {\n                yield this._persistSession(session);\n            }\n        });\n    }\n    _persistSession(currentSession) {\n        return setItemAsync(this.storage, this.storageKey, currentSession);\n    }\n    _removeSession() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.persistSession) {\n                yield removeItemAsync(this.storage, this.storageKey);\n            }\n            else {\n                this.inMemorySession = null;\n            }\n        });\n    }\n    /**\n     * Removes any registered visibilitychange callback.\n     *\n     * {@see #startAutoRefresh}\n     * {@see #stopAutoRefresh}\n     */\n    _removeVisibilityChangedCallback() {\n        const callback = this.visibilityChangedCallback;\n        this.visibilityChangedCallback = null;\n        try {\n            if (callback && isBrowser() && (window === null || window === void 0 ? void 0 : window.removeEventListener)) {\n                window.removeEventListener('visibilitychange', callback);\n            }\n        }\n        catch (e) {\n            console.error('removing visibilitychange callback failed', e);\n        }\n    }\n    /**\n     * This is the private implementation of {@link #startAutoRefresh}. Use this\n     * within the library.\n     */\n    _startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._stopAutoRefresh();\n            const ticker = setInterval(() => this._autoRefreshTokenTick(), AUTO_REFRESH_TICK_DURATION);\n            this.autoRefreshTicker = ticker;\n            if (ticker && typeof ticker === 'object' && typeof ticker.unref === 'function') {\n                // ticker is a NodeJS Timeout object that has an `unref` method\n                // https://nodejs.org/api/timers.html#timeoutunref\n                // When auto refresh is used in NodeJS (like for testing) the\n                // `setInterval` is preventing the process from being marked as\n                // finished and tests run endlessly. This can be prevented by calling\n                // `unref()` on the returned object.\n                ticker.unref();\n                // @ts-ignore\n            }\n            else if (typeof Deno !== 'undefined' && typeof Deno.unrefTimer === 'function') {\n                // similar like for NodeJS, but with the Deno API\n                // https://deno.land/api@latest?unstable&s=Deno.unrefTimer\n                // @ts-ignore\n                Deno.unrefTimer(ticker);\n            }\n            // run the tick immediately\n            yield this._autoRefreshTokenTick();\n        });\n    }\n    /**\n     * This is the private implementation of {@link #stopAutoRefresh}. Use this\n     * within the library.\n     */\n    _stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const ticker = this.autoRefreshTicker;\n            this.autoRefreshTicker = null;\n            if (ticker) {\n                clearInterval(ticker);\n            }\n        });\n    }\n    /**\n     * Starts an auto-refresh process in the background. The session is checked\n     * every few seconds. Close to the time of expiration a process is started to\n     * refresh the session. If refreshing fails it will be retried for as long as\n     * necessary.\n     *\n     * If you set the {@link GoTrueClientOptions#autoRefreshToken} you don't need\n     * to call this function, it will be called for you.\n     *\n     * On browsers the refresh process works only when the tab/window is in the\n     * foreground to conserve resources as well as prevent race conditions and\n     * flooding auth with requests. If you call this method any managed\n     * visibility change callback will be removed and you must manage visibility\n     * changes on your own.\n     *\n     * On non-browser platforms the refresh process works *continuously* in the\n     * background, which may not be desireable. You should hook into your\n     * platform's foreground indication mechanism and call these methods\n     * appropriately to conserve resources.\n     *\n     * {@see #stopAutoRefresh}\n     */\n    startAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._startAutoRefresh();\n        });\n    }\n    /**\n     * Stops an active auto refresh process running in the background (if any).\n     *\n     * If you call this method any managed visibility change callback will be\n     * removed and you must manage visibility changes on your own.\n     *\n     * See {@link #startAutoRefresh} for more details.\n     */\n    stopAutoRefresh() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._removeVisibilityChangedCallback();\n            yield this._stopAutoRefresh();\n        });\n    }\n    /**\n     * Runs the auto refresh token tick.\n     */\n    _autoRefreshTokenTick() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const now = Date.now();\n            try {\n                const { data: { session }, } = yield this.getSession();\n                if (!session || !session.refresh_token || !session.expires_at) {\n                    return;\n                }\n                // session will expire in this many ticks (or has already expired if <= 0)\n                const expiresInTicks = Math.floor((session.expires_at * 1000 - now) / AUTO_REFRESH_TICK_DURATION);\n                if (expiresInTicks < AUTO_REFRESH_TICK_THRESHOLD) {\n                    yield this._callRefreshToken(session.refresh_token);\n                }\n            }\n            catch (e) {\n                console.error('Auto refresh tick failed with error. This is likely a transient error.', e);\n            }\n        });\n    }\n    /**\n     * Registers callbacks on the browser / platform, which in-turn run\n     * algorithms when the browser window/tab are in foreground. On non-browser\n     * platforms it assumes always foreground.\n     */\n    _handleVisibilityChange() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!isBrowser() || !(window === null || window === void 0 ? void 0 : window.addEventListener)) {\n                if (this.autoRefreshToken) {\n                    // in non-browser environments the refresh token ticker runs always\n                    this.startAutoRefresh();\n                }\n                return false;\n            }\n            try {\n                this.visibilityChangedCallback = () => __awaiter(this, void 0, void 0, function* () { return yield this._onVisibilityChanged(false); });\n                window === null || window === void 0 ? void 0 : window.addEventListener('visibilitychange', this.visibilityChangedCallback);\n                // now immediately call the visbility changed callback to setup with the\n                // current visbility state\n                yield this._onVisibilityChanged(true); // initial call\n            }\n            catch (error) {\n                console.error('_handleVisibilityChange', error);\n            }\n        });\n    }\n    /**\n     * Callback registered with `window.addEventListener('visibilitychange')`.\n     */\n    _onVisibilityChanged(isInitial) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (document.visibilityState === 'visible') {\n                if (!isInitial) {\n                    // initial visibility change setup is handled in another flow under #initialize()\n                    yield this.initializePromise;\n                    yield this._recoverAndRefresh();\n                }\n                if (this.autoRefreshToken) {\n                    // in browser environments the refresh token ticker runs only on focused tabs\n                    // which prevents race conditions\n                    this._startAutoRefresh();\n                }\n            }\n            else if (document.visibilityState === 'hidden') {\n                if (this.autoRefreshToken) {\n                    this._stopAutoRefresh();\n                }\n            }\n        });\n    }\n    /**\n     * Generates the relevant login URL for a third-party provider.\n     * @param options.redirectTo A URL or mobile address to send the user to after they are confirmed.\n     * @param options.scopes A space-separated list of scopes granted to the OAuth application.\n     * @param options.queryParams An object of key-value pairs containing query parameters granted to the OAuth application.\n     */\n    _getUrlForProvider(provider, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlParams = [`provider=${encodeURIComponent(provider)}`];\n            if (options === null || options === void 0 ? void 0 : options.redirectTo) {\n                urlParams.push(`redirect_to=${encodeURIComponent(options.redirectTo)}`);\n            }\n            if (options === null || options === void 0 ? void 0 : options.scopes) {\n                urlParams.push(`scopes=${encodeURIComponent(options.scopes)}`);\n            }\n            if (this.flowType === 'pkce') {\n                const codeVerifier = generatePKCEVerifier();\n                yield setItemAsync(this.storage, `${this.storageKey}-code-verifier`, codeVerifier);\n                const codeChallenge = yield generatePKCEChallenge(codeVerifier);\n                const codeChallengeMethod = codeVerifier === codeChallenge ? 'plain' : 's256';\n                const flowParams = new URLSearchParams({\n                    code_challenge: `${encodeURIComponent(codeChallenge)}`,\n                    code_challenge_method: `${encodeURIComponent(codeChallengeMethod)}`,\n                });\n                urlParams.push(flowParams.toString());\n            }\n            if (options === null || options === void 0 ? void 0 : options.queryParams) {\n                const query = new URLSearchParams(options.queryParams);\n                urlParams.push(query.toString());\n            }\n            return `${this.url}/authorize?${urlParams.join('&')}`;\n        });\n    }\n    _unenroll(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'DELETE', `${this.url}/factors/${params.factorId}`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#enroll}\n     */\n    _enroll(params) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors`, {\n                    body: {\n                        friendly_name: params.friendlyName,\n                        factor_type: params.factorType,\n                        issuer: params.issuer,\n                    },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                if ((_b = data === null || data === void 0 ? void 0 : data.totp) === null || _b === void 0 ? void 0 : _b.qr_code) {\n                    data.totp.qr_code = `data:image/svg+xml;utf-8,${data.totp.qr_code}`;\n                }\n                return { data, error: null };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#verify}\n     */\n    _verify(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                const { data, error } = yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/verify`, {\n                    body: { code: params.code, challenge_id: params.challengeId },\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n                if (error) {\n                    return { data: null, error };\n                }\n                yield this._saveSession(Object.assign({ expires_at: Math.round(Date.now() / 1000) + data.expires_in }, data));\n                this._notifyAllSubscribers('MFA_CHALLENGE_VERIFIED', data);\n                return { data, error };\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challenge}\n     */\n    _challenge(params) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const { data: sessionData, error: sessionError } = yield this.getSession();\n                if (sessionError) {\n                    return { data: null, error: sessionError };\n                }\n                return yield _request(this.fetch, 'POST', `${this.url}/factors/${params.factorId}/challenge`, {\n                    headers: this.headers,\n                    jwt: (_a = sessionData === null || sessionData === void 0 ? void 0 : sessionData.session) === null || _a === void 0 ? void 0 : _a.access_token,\n                });\n            }\n            catch (error) {\n                if (isAuthError(error)) {\n                    return { data: null, error };\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#challengeAndVerify}\n     */\n    _challengeAndVerify(params) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: challengeData, error: challengeError } = yield this._challenge({\n                factorId: params.factorId,\n            });\n            if (challengeError) {\n                return { data: null, error: challengeError };\n            }\n            return yield this._verify({\n                factorId: params.factorId,\n                challengeId: challengeData.id,\n                code: params.code,\n            });\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#listFactors}\n     */\n    _listFactors() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { user }, error: userError, } = yield this.getUser();\n            if (userError) {\n                return { data: null, error: userError };\n            }\n            const factors = (user === null || user === void 0 ? void 0 : user.factors) || [];\n            const totp = factors.filter((factor) => factor.factor_type === 'totp' && factor.status === 'verified');\n            return {\n                data: {\n                    all: factors,\n                    totp,\n                },\n                error: null,\n            };\n        });\n    }\n    /**\n     * {@see GoTrueMFAApi#getAuthenticatorAssuranceLevel}\n     */\n    _getAuthenticatorAssuranceLevel() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data: { session }, error: sessionError, } = yield this.getSession();\n            if (sessionError) {\n                return { data: null, error: sessionError };\n            }\n            if (!session) {\n                return {\n                    data: { currentLevel: null, nextLevel: null, currentAuthenticationMethods: [] },\n                    error: null,\n                };\n            }\n            const payload = this._decodeJWT(session.access_token);\n            let currentLevel = null;\n            if (payload.aal) {\n                currentLevel = payload.aal;\n            }\n            let nextLevel = currentLevel;\n            const verifiedFactors = (_b = (_a = session.user.factors) === null || _a === void 0 ? void 0 : _a.filter((factor) => factor.status === 'verified')) !== null && _b !== void 0 ? _b : [];\n            if (verifiedFactors.length > 0) {\n                nextLevel = 'aal2';\n            }\n            const currentAuthenticationMethods = payload.amr || [];\n            return { data: { currentLevel, nextLevel, currentAuthenticationMethods }, error: null };\n        });\n    }\n}\n//# sourceMappingURL=GoTrueClient.js.map","import { GoTrueClient } from '@supabase/gotrue-js';\nexport class SupabaseAuthClient extends GoTrueClient {\n    constructor(options) {\n        super(options);\n    }\n}\n//# sourceMappingURL=SupabaseAuthClient.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { FunctionsClient } from '@supabase/functions-js';\nimport { PostgrestClient, } from '@supabase/postgrest-js';\nimport { RealtimeClient, } from '@supabase/realtime-js';\nimport { StorageClient as SupabaseStorageClient } from '@supabase/storage-js';\nimport { DEFAULT_HEADERS } from './lib/constants';\nimport { fetchWithAuth } from './lib/fetch';\nimport { stripTrailingSlash, applySettingDefaults } from './lib/helpers';\nimport { SupabaseAuthClient } from './lib/SupabaseAuthClient';\nconst DEFAULT_GLOBAL_OPTIONS = {\n    headers: DEFAULT_HEADERS,\n};\nconst DEFAULT_DB_OPTIONS = {\n    schema: 'public',\n};\nconst DEFAULT_AUTH_OPTIONS = {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: true,\n    flowType: 'implicit',\n};\nconst DEFAULT_REALTIME_OPTIONS = {};\n/**\n * Supabase Client.\n *\n * An isomorphic Javascript client for interacting with Postgres.\n */\nexport default class SupabaseClient {\n    /**\n     * Create a new client for use in the browser.\n     * @param supabaseUrl The unique Supabase URL which is supplied when you create a new project in your project dashboard.\n     * @param supabaseKey The unique Supabase Key which is supplied when you create a new project in your project dashboard.\n     * @param options.db.schema You can switch in between schemas. The schema needs to be on the list of exposed schemas inside Supabase.\n     * @param options.auth.autoRefreshToken Set to \"true\" if you want to automatically refresh the token before expiring.\n     * @param options.auth.persistSession Set to \"true\" if you want to automatically save the user session into local storage.\n     * @param options.auth.detectSessionInUrl Set to \"true\" if you want to automatically detects OAuth grants in the URL and signs in the user.\n     * @param options.realtime Options passed along to realtime-js constructor.\n     * @param options.global.fetch A custom fetch implementation.\n     * @param options.global.headers Any additional headers to send with each network request.\n     */\n    constructor(supabaseUrl, supabaseKey, options) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        this.supabaseUrl = supabaseUrl;\n        this.supabaseKey = supabaseKey;\n        if (!supabaseUrl)\n            throw new Error('supabaseUrl is required.');\n        if (!supabaseKey)\n            throw new Error('supabaseKey is required.');\n        const _supabaseUrl = stripTrailingSlash(supabaseUrl);\n        this.realtimeUrl = `${_supabaseUrl}/realtime/v1`.replace(/^http/i, 'ws');\n        this.authUrl = `${_supabaseUrl}/auth/v1`;\n        this.storageUrl = `${_supabaseUrl}/storage/v1`;\n        const isPlatform = _supabaseUrl.match(/(supabase\\.co)|(supabase\\.in)/);\n        if (isPlatform) {\n            const urlParts = _supabaseUrl.split('.');\n            this.functionsUrl = `${urlParts[0]}.functions.${urlParts[1]}.${urlParts[2]}`;\n        }\n        else {\n            this.functionsUrl = `${_supabaseUrl}/functions/v1`;\n        }\n        // default storage key uses the supabase project ref as a namespace\n        const defaultStorageKey = `sb-${new URL(this.authUrl).hostname.split('.')[0]}-auth-token`;\n        const DEFAULTS = {\n            db: DEFAULT_DB_OPTIONS,\n            realtime: DEFAULT_REALTIME_OPTIONS,\n            auth: Object.assign(Object.assign({}, DEFAULT_AUTH_OPTIONS), { storageKey: defaultStorageKey }),\n            global: DEFAULT_GLOBAL_OPTIONS,\n        };\n        const settings = applySettingDefaults(options !== null && options !== void 0 ? options : {}, DEFAULTS);\n        this.storageKey = (_b = (_a = settings.auth) === null || _a === void 0 ? void 0 : _a.storageKey) !== null && _b !== void 0 ? _b : '';\n        this.headers = (_d = (_c = settings.global) === null || _c === void 0 ? void 0 : _c.headers) !== null && _d !== void 0 ? _d : {};\n        this.auth = this._initSupabaseAuthClient((_e = settings.auth) !== null && _e !== void 0 ? _e : {}, this.headers, (_f = settings.global) === null || _f === void 0 ? void 0 : _f.fetch);\n        this.fetch = fetchWithAuth(supabaseKey, this._getAccessToken.bind(this), (_g = settings.global) === null || _g === void 0 ? void 0 : _g.fetch);\n        this.realtime = this._initRealtimeClient(Object.assign({ headers: this.headers }, settings.realtime));\n        this.rest = new PostgrestClient(`${_supabaseUrl}/rest/v1`, {\n            headers: this.headers,\n            schema: (_h = settings.db) === null || _h === void 0 ? void 0 : _h.schema,\n            fetch: this.fetch,\n        });\n        this._listenForAuthEvents();\n    }\n    /**\n     * Supabase Functions allows you to deploy and invoke edge functions.\n     */\n    get functions() {\n        return new FunctionsClient(this.functionsUrl, {\n            headers: this.headers,\n            customFetch: this.fetch,\n        });\n    }\n    /**\n     * Supabase Storage allows you to manage user-generated content, such as photos or videos.\n     */\n    get storage() {\n        return new SupabaseStorageClient(this.storageUrl, this.headers, this.fetch);\n    }\n    from(relation) {\n        return this.rest.from(relation);\n    }\n    /**\n     * Perform a function call.\n     *\n     * @param fn  The function name to call.\n     * @param args  The parameters to pass to the function call.\n     * @param options.head   When set to true, no data will be returned.\n     * @param options.count  Count algorithm to use to count rows in a table.\n     *\n     */\n    rpc(fn, args = {}, options) {\n        return this.rest.rpc(fn, args, options);\n    }\n    /**\n     * Creates a Realtime channel with Broadcast, Presence, and Postgres Changes.\n     *\n     * @param {string} name - The name of the Realtime channel.\n     * @param {Object} opts - The options to pass to the Realtime channel.\n     *\n     */\n    channel(name, opts = { config: {} }) {\n        return this.realtime.channel(name, opts);\n    }\n    /**\n     * Returns all Realtime channels.\n     */\n    getChannels() {\n        return this.realtime.getChannels();\n    }\n    /**\n     * Unsubscribes and removes Realtime channel from Realtime client.\n     *\n     * @param {RealtimeChannel} channel - The name of the Realtime channel.\n     *\n     */\n    removeChannel(channel) {\n        return this.realtime.removeChannel(channel);\n    }\n    /**\n     * Unsubscribes and removes all Realtime channels from Realtime client.\n     */\n    removeAllChannels() {\n        return this.realtime.removeAllChannels();\n    }\n    _getAccessToken() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { data } = yield this.auth.getSession();\n            return (_b = (_a = data.session) === null || _a === void 0 ? void 0 : _a.access_token) !== null && _b !== void 0 ? _b : null;\n        });\n    }\n    _initSupabaseAuthClient({ autoRefreshToken, persistSession, detectSessionInUrl, storage, storageKey, flowType, }, headers, fetch) {\n        const authHeaders = {\n            Authorization: `Bearer ${this.supabaseKey}`,\n            apikey: `${this.supabaseKey}`,\n        };\n        return new SupabaseAuthClient({\n            url: this.authUrl,\n            headers: Object.assign(Object.assign({}, authHeaders), headers),\n            storageKey: storageKey,\n            autoRefreshToken,\n            persistSession,\n            detectSessionInUrl,\n            storage,\n            flowType,\n            fetch,\n        });\n    }\n    _initRealtimeClient(options) {\n        return new RealtimeClient(this.realtimeUrl, Object.assign(Object.assign({}, options), { params: Object.assign({ apikey: this.supabaseKey }, options === null || options === void 0 ? void 0 : options.params) }));\n    }\n    _listenForAuthEvents() {\n        let data = this.auth.onAuthStateChange((event, session) => {\n            this._handleTokenChanged(event, session === null || session === void 0 ? void 0 : session.access_token, 'CLIENT');\n        });\n        return data;\n    }\n    _handleTokenChanged(event, token, source) {\n        if ((event === 'TOKEN_REFRESHED' || event === 'SIGNED_IN') &&\n            this.changedAccessToken !== token) {\n            // Token has changed\n            this.realtime.setAuth(token !== null && token !== void 0 ? token : null);\n            this.changedAccessToken = token;\n        }\n        else if (event === 'SIGNED_OUT') {\n            // Token is removed\n            this.realtime.setAuth(this.supabaseKey);\n            if (source == 'STORAGE')\n                this.auth.signOut();\n            this.changedAccessToken = undefined;\n        }\n    }\n}\n//# sourceMappingURL=SupabaseClient.js.map","import SupabaseClient from './SupabaseClient';\nexport * from '@supabase/gotrue-js';\nexport { FunctionsHttpError, FunctionsFetchError, FunctionsRelayError, FunctionsError, } from '@supabase/functions-js';\nexport * from '@supabase/realtime-js';\nexport { default as SupabaseClient } from './SupabaseClient';\n/**\n * Creates a new Supabase Client.\n */\nexport const createClient = (supabaseUrl, supabaseKey, options) => {\n    return new SupabaseClient(supabaseUrl, supabaseKey, options);\n};\n//# sourceMappingURL=index.js.map","export { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) =>\n  crypto.getRandomValues(new Uint8Array(size)).reduce((id, byte) => {\n    byte &= 63\n    if (byte < 36) {\n      id += byte.toString(36)\n    } else if (byte < 62) {\n      id += (byte - 26).toString(36).toUpperCase()\n    } else if (byte > 62) {\n      id += '-'\n    } else {\n      id += '_'\n    }\n    return id\n  }, '')\n","import * as React from \"react\";\n\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import jsdocJson from '../../../doc.json';\nconst visibleFunctions = jsdocJson.docs\n  .filter(({ name, description }) => name && !name.startsWith('_') && !!description)\n  .sort((a, b) => /* a.meta.filename.localeCompare(b.meta.filename) +  */ a.name.localeCompare(b.name));\n\nexport function Reference() {\n  return (\n    <div className=\"flex h-full w-full pt-2 text-foreground overflow-hidden\">\n      <div className=\"w-42 flex-none h-full overflow-y-auto overflow-x-hidden pr-4\">\n        {visibleFunctions.map((entry, i) => (\n          <a key={i} className=\"cursor-pointer block hover:bg-lineHighlight py-1 px-4\" href={`#doc-${i}`}>\n            {entry.name} {/* <span className=\"text-gray-600\">{entry.meta.filename}</span> */}\n          </a>\n        ))}\n      </div>\n      <div className=\"break-normal w-full h-full overflow-auto pl-4 flex relative\">\n        <div className=\"prose dark:prose-invert max-w-full pr-4\">\n          <h2>API Reference</h2>\n          <p>\n            This is the long list functions you can use! Remember that you don't need to remember all of those and that\n            you can already make music with a small set of functions!\n          </p>\n          {visibleFunctions.map((entry, i) => (\n            <section key={i}>\n              <h3 id={`doc-${i}`}>{entry.name}</h3>\n              {/* <small>{entry.meta.filename}</small> */}\n\n              <p dangerouslySetInnerHTML={{ __html: entry.description }}></p>\n              {entry.examples?.map((example, j) => (\n                <pre key={j}>{example}</pre>\n              ))}\n            </section>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Fragment, useEffect } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { isAudioFile, readDir, dir, playFile } from './files.mjs';\n\nexport function FilesTab() {\n  const [path, setPath] = useState([]);\n  useEffect(() => {\n    let init = false;\n    readDir('', { dir, recursive: true })\n      .then((children) => setPath([{ name: '~/music', children }]))\n      .catch((err) => {\n        console.log('error loadin files', err);\n      });\n    return () => {\n      init = true;\n    };\n  }, []);\n  const current = useMemo(() => path[path.length - 1], [path]);\n  const subpath = useMemo(\n    () =>\n      path\n        .slice(1)\n        .map((p) => p.name)\n        .join('/'),\n    [path],\n  );\n  const folders = useMemo(() => current?.children.filter((e) => !!e.children), [current]);\n  const files = useMemo(() => current?.children.filter((e) => !e.children && isAudioFile(e.name)), [current]);\n  const select = (e) => setPath((p) => p.concat([e]));\n  return (\n    <div className=\"px-4 flex flex-col h-full\">\n      <div className=\"flex justify-between font-mono pb-1\">\n        <div>\n          <span>{`samples('`}</span>\n          {path?.map((p, i) => {\n            if (i < path.length - 1) {\n              return (\n                <Fragment key={i}>\n                  <span className=\"cursor-pointer underline\" onClick={() => setPath((p) => p.slice(0, i + 1))}>\n                    {p.name}\n                  </span>\n                  <span>/</span>\n                </Fragment>\n              );\n            } else {\n              return (\n                <span className=\"cursor-pointer underline\" key={i}>\n                  {p.name}\n                </span>\n              );\n            }\n          })}\n          <span>{`')`}</span>\n        </div>\n      </div>\n      <div className=\"overflow-auto\">\n        {!folders?.length && !files?.length && <span className=\"text-gray-500\">Nothing here</span>}\n        {folders?.map((e, i) => (\n          <div className=\"cursor-pointer\" key={i} onClick={() => select(e)}>\n            {e.name}\n          </div>\n        ))}\n        {files?.map((e, i) => (\n          <div\n            className=\"text-gray-500 cursor-pointer select-none\"\n            key={i}\n            onClick={async () => playFile(`${subpath}/${e.name}`)}\n          >\n            {e.name}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import XMarkIcon from '@heroicons/react/20/solid/XMarkIcon';\nimport { logger } from '@strudel.cycles/core';\nimport { useEvent, cx } from '@strudel.cycles/react';\n// import { cx } from '@strudel.cycles/react';\nimport { nanoid } from 'nanoid';\nimport React, { useMemo, useCallback, useLayoutEffect, useRef, useState } from 'react';\nimport { Reference } from './Reference';\nimport { themes } from './themes.mjs';\nimport { useSettings, settingsMap, setActiveFooter, defaultSettings } from '../settings.mjs';\nimport { getAudioContext, soundMap } from '@strudel.cycles/webaudio';\nimport { useStore } from '@nanostores/react';\nimport { FilesTab } from './FilesTab';\n\nconst TAURI = window.__TAURI__;\n\nexport function Footer({ context }) {\n  const footerContent = useRef();\n  const [log, setLog] = useState([]);\n  const { activeFooter, isZen, panelPosition } = useSettings();\n\n  useLayoutEffect(() => {\n    if (footerContent.current && activeFooter === 'console') {\n      // scroll log box to bottom when log changes\n      footerContent.current.scrollTop = footerContent.current?.scrollHeight;\n    }\n  }, [log, activeFooter]);\n  useLayoutEffect(() => {\n    if (!footerContent.current) {\n    } else if (activeFooter === 'console') {\n      footerContent.current.scrollTop = footerContent.current?.scrollHeight;\n    } else {\n      footerContent.current.scrollTop = 0;\n    }\n  }, [activeFooter]);\n\n  useLogger(\n    useCallback((e) => {\n      const { message, type, data } = e.detail;\n      setLog((l) => {\n        const lastLog = l.length ? l[l.length - 1] : undefined;\n        const id = nanoid(12);\n        // if (type === 'loaded-sample' && lastLog.type === 'load-sample' && lastLog.url === data.url) {\n        if (type === 'loaded-sample') {\n          // const loadIndex = l.length - 1;\n          const loadIndex = l.findIndex(({ data: { url }, type }) => type === 'load-sample' && url === data.url);\n          l[loadIndex] = { message, type, id, data };\n        } else if (lastLog && lastLog.message === message) {\n          l = l.slice(0, -1).concat([{ message, type, count: (lastLog.count ?? 1) + 1, id, data }]);\n        } else {\n          l = l.concat([{ message, type, id, data }]);\n        }\n        return l.slice(-20);\n      });\n    }, []),\n  );\n\n  const FooterTab = ({ children, name, label }) => (\n    <>\n      <div\n        onClick={() => setActiveFooter(name)}\n        className={cx(\n          'h-8 px-2 text-foreground cursor-pointer hover:opacity-50 flex items-center space-x-1 border-b',\n          activeFooter === name ? 'border-foreground' : 'border-transparent',\n        )}\n      >\n        {label || name}\n      </div>\n      {activeFooter === name && <>{children}</>}\n    </>\n  );\n  if (isZen) {\n    return null;\n  }\n\n  const isActive = activeFooter !== '';\n\n  let positions = {\n    right: cx('max-w-full flex-grow-0 flex-none overflow-hidden', isActive ? 'w-[600px] h-full' : 'absolute right-0'),\n    bottom: cx('relative', isActive ? 'h-[360px] min-h-[360px]' : ''),\n  };\n  return (\n    <nav className={cx('bg-lineHighlight z-[10] flex flex-col', positions[panelPosition])}>\n      <div className=\"flex justify-between px-2\">\n        <div className={cx('flex select-none max-w-full overflow-auto', activeFooter && 'pb-2')}>\n          <FooterTab name=\"intro\" label=\"welcome\" />\n          <FooterTab name=\"sounds\" />\n          <FooterTab name=\"console\" />\n          <FooterTab name=\"reference\" />\n          <FooterTab name=\"settings\" />\n          {TAURI && <FooterTab name=\"files\" />}\n        </div>\n        {activeFooter !== '' && (\n          <button onClick={() => setActiveFooter('')} className=\"text-foreground px-2\" aria-label=\"Close Panel\">\n            <XMarkIcon className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n      {activeFooter !== '' && (\n        <div className=\"relative overflow-hidden\">\n          <div className=\"text-white overflow-auto h-full max-w-full\" ref={footerContent}>\n            {activeFooter === 'intro' && <WelcomeTab />}\n            {activeFooter === 'console' && <ConsoleTab log={log} />}\n            {activeFooter === 'sounds' && <SoundsTab />}\n            {activeFooter === 'reference' && <Reference />}\n            {activeFooter === 'settings' && <SettingsTab scheduler={context.scheduler} />}\n            {activeFooter === 'files' && <FilesTab />}\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n}\n\nfunction useLogger(onTrigger) {\n  useEvent(logger.key, onTrigger);\n}\n\nfunction linkify(inputText) {\n  var replacedText, replacePattern1, replacePattern2, replacePattern3;\n\n  //URLs starting with http://, https://, or ftp://\n  replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n  replacedText = inputText.replace(replacePattern1, '<a class=\"underline\" href=\"$1\" target=\"_blank\">$1</a>');\n\n  //URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n  replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n  replacedText = replacedText.replace(\n    replacePattern2,\n    '$1<a class=\"underline\" href=\"http://$2\" target=\"_blank\">$2</a>',\n  );\n\n  //Change email addresses to mailto:: links.\n  replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n  replacedText = replacedText.replace(replacePattern3, '<a class=\"underline\" href=\"mailto:$1\">$1</a>');\n\n  return replacedText;\n}\n\nfunction WelcomeTab() {\n  return (\n    <div className=\"prose dark:prose-invert max-w-[600px] pt-2 font-sans pb-8 px-4\">\n      <h3>\n        <span className={cx('animate-spin inline-block select-none')}></span> welcome\n      </h3>\n      <p>\n        You have found <span className=\"underline\">strudel</span>, a new live coding platform to write dynamic music\n        pieces in the browser! It is free and open-source and made for beginners and experts alike. To get started:\n        <br />\n        <br />\n        <span className=\"underline\">1. hit play</span> - <span className=\"underline\">2. change something</span> -{' '}\n        <span className=\"underline\">3. hit update</span>\n        <br />\n        If you don't like what you hear, try <span className=\"underline\">shuffle</span>!\n      </p>\n      <p>\n        To learn more about what this all means, check out the{' '}\n        <a href=\"./workshop/getting-started\" target=\"_blank\">\n          interactive tutorial\n        </a>\n        . Also feel free to join the{' '}\n        <a href=\"https://discord.com/invite/HGEdXmRkzT\" target=\"_blank\">\n          tidalcycles discord channel\n        </a>{' '}\n        to ask any questions, give feedback or just say hello.\n      </p>\n      <h3>about</h3>\n      <p>\n        strudel is a JavaScript version of{' '}\n        <a href=\"https://tidalcycles.org/\" target=\"_blank\">\n          tidalcycles\n        </a>\n        , which is a popular live coding language for music, written in Haskell. You can find the source code at{' '}\n        <a href=\"https://github.com/tidalcycles/strudel\" target=\"_blank\">\n          github\n        </a>\n        . Please consider to{' '}\n        <a href=\"https://opencollective.com/tidalcycles\" target=\"_blank\">\n          support this project\n        </a>{' '}\n        to ensure ongoing development \n      </p>\n    </div>\n  );\n}\n\nfunction ConsoleTab({ log }) {\n  return (\n    <div id=\"console-tab\" className=\"break-all px-4 dark:text-white text-stone-900 text-sm\">\n      <pre>{`          \n        \n                  \n                  \n        \n           `}</pre>\n      {log.map((l, i) => {\n        const message = linkify(l.message);\n        return (\n          <div key={l.id} className={cx(l.type === 'error' && 'text-red-500', l.type === 'highlight' && 'underline')}>\n            <span dangerouslySetInnerHTML={{ __html: message }} />\n            {l.count ? ` (${l.count})` : ''}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nconst getSamples = (samples) =>\n  Array.isArray(samples) ? samples.length : typeof samples === 'object' ? Object.values(samples).length : 1;\n\nfunction SoundsTab() {\n  const sounds = useStore(soundMap);\n  const { soundsFilter } = useSettings();\n  const soundEntries = useMemo(() => {\n    let filtered = Object.entries(sounds).filter(([key]) => !key.startsWith('_'));\n    if (!sounds) {\n      return [];\n    }\n    if (soundsFilter === 'user') {\n      return filtered.filter(([key, { data }]) => !data.prebake);\n    }\n    if (soundsFilter === 'drums') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag === 'drum-machines');\n    }\n    if (soundsFilter === 'samples') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag !== 'drum-machines');\n    }\n    if (soundsFilter === 'synths') {\n      return filtered.filter(([_, { data }]) => ['synth', 'soundfont'].includes(data.type));\n    }\n    return filtered;\n  }, [sounds, soundsFilter]);\n  // holds mutable ref to current triggered sound\n  const trigRef = useRef();\n  // stop current sound on mouseup\n  useEvent('mouseup', () => {\n    const t = trigRef.current;\n    trigRef.current = undefined;\n    t?.then((ref) => {\n      ref?.stop(getAudioContext().currentTime + 0.01);\n    });\n  });\n  return (\n    <div id=\"sounds-tab\" className=\"flex flex-col w-full h-full dark:text-white text-stone-900\">\n      <div className=\"px-2 pb-2 flex-none\">\n        <ButtonGroup\n          value={soundsFilter}\n          onChange={(value) => settingsMap.setKey('soundsFilter', value)}\n          items={{\n            samples: 'samples',\n            drums: 'drum-machines',\n            synths: 'Synths',\n            user: 'User',\n          }}\n        ></ButtonGroup>\n      </div>\n      <div className=\"p-2 min-h-0 max-h-full grow overflow-auto font-mono text-sm break-normal\">\n        {soundEntries.map(([name, { data, onTrigger }]) => (\n          <span\n            key={name}\n            className=\"cursor-pointer hover:opacity-50\"\n            onMouseDown={async () => {\n              const ctx = getAudioContext();\n              const params = {\n                note: ['synth', 'soundfont'].includes(data.type) ? 'a3' : undefined,\n                s: name,\n                clip: 1,\n                release: 0.5,\n              };\n              const time = ctx.currentTime + 0.05;\n              const onended = () => trigRef.current?.node?.disconnect();\n              trigRef.current = Promise.resolve(onTrigger(time, params, onended));\n              trigRef.current.then((ref) => {\n                ref?.node.connect(ctx.destination);\n              });\n            }}\n          >\n            {' '}\n            {name}\n            {data?.type === 'sample' ? `(${getSamples(data.samples)})` : ''}\n            {data?.type === 'soundfont' ? `(${data.fonts.length})` : ''}\n          </span>\n        ))}\n        {!soundEntries.length ? 'No custom sounds loaded in this pattern (yet).' : ''}\n      </div>\n    </div>\n  );\n}\n\nfunction Checkbox({ label, value, onChange }) {\n  return (\n    <label>\n      <input type=\"checkbox\" checked={value} onChange={onChange} />\n      {' ' + label}\n    </label>\n  );\n}\n\nfunction ButtonGroup({ value, onChange, items }) {\n  return (\n    <div className=\"flex max-w-lg\">\n      {Object.entries(items).map(([key, label], i, arr) => (\n        <button\n          key={key}\n          onClick={() => onChange(key)}\n          className={cx(\n            'px-2 border-b h-8',\n            // i === 0 && 'rounded-l-md',\n            // i === arr.length - 1 && 'rounded-r-md',\n            // value === key ? 'bg-background' : 'bg-lineHighlight',\n            value === key ? 'border-foreground' : 'border-transparent',\n          )}\n        >\n          {label.toLowerCase()}\n        </button>\n      ))}\n    </div>\n  );\n}\n\nfunction SelectInput({ value, options, onChange }) {\n  return (\n    <select\n      className=\"p-2 bg-background rounded-md text-foreground\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    >\n      {Object.entries(options).map(([k, label]) => (\n        <option key={k} className=\"bg-background\" value={k}>\n          {label}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction NumberSlider({ value, onChange, step = 1, ...rest }) {\n  return (\n    <div className=\"flex space-x-2 gap-1\">\n      <input\n        className=\"p-2 grow\"\n        type=\"range\"\n        value={value}\n        step={step}\n        onChange={(e) => onChange(Number(e.target.value))}\n        {...rest}\n      />\n      <input\n        type=\"number\"\n        value={value}\n        step={step}\n        className=\"w-16 bg-background rounded-md\"\n        onChange={(e) => onChange(Number(e.target.value))}\n      />\n    </div>\n  );\n}\n\nfunction FormItem({ label, children }) {\n  return (\n    <div className=\"grid gap-2\">\n      <label>{label}</label>\n      {children}\n    </div>\n  );\n}\n\nconst themeOptions = Object.fromEntries(Object.keys(themes).map((k) => [k, k]));\nconst fontFamilyOptions = {\n  monospace: 'monospace',\n  BigBlueTerminal: 'BigBlueTerminal',\n  x3270: 'x3270',\n  PressStart: 'PressStart2P',\n  galactico: 'galactico',\n  'we-come-in-peace': 'we-come-in-peace',\n  FiraCode: 'FiraCode',\n  'FiraCode-SemiBold': 'FiraCode SemiBold',\n  teletext: 'teletext',\n  mode7: 'mode7',\n};\n\nfunction SettingsTab({ scheduler }) {\n  const {\n    theme,\n    keybindings,\n    isLineNumbersDisplayed,\n    isAutoCompletionEnabled,\n    isLineWrappingEnabled,\n    fontSize,\n    fontFamily,\n    panelPosition,\n  } = useSettings();\n\n  return (\n    <div className=\"text-foreground p-4 space-y-4\">\n      {/* <FormItem label=\"Tempo\">\n        <div className=\"space-x-4\">\n          <button\n            onClick={() => {\n              scheduler.setCps(scheduler.cps - 0.1);\n            }}\n          >\n            slower\n          </button>\n          <button\n            onClick={() => {\n              scheduler.setCps(scheduler.cps + 0.1);\n            }}\n          >\n            faster\n          </button>\n        </div>\n      </FormItem> */}\n      <FormItem label=\"Theme\">\n        <SelectInput options={themeOptions} value={theme} onChange={(theme) => settingsMap.setKey('theme', theme)} />\n      </FormItem>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <FormItem label=\"Font Family\">\n          <SelectInput\n            options={fontFamilyOptions}\n            value={fontFamily}\n            onChange={(fontFamily) => settingsMap.setKey('fontFamily', fontFamily)}\n          />\n        </FormItem>\n        <FormItem label=\"Font Size\">\n          <NumberSlider\n            value={fontSize}\n            onChange={(fontSize) => settingsMap.setKey('fontSize', fontSize)}\n            min={10}\n            max={40}\n            step={2}\n          />\n        </FormItem>\n      </div>\n      <FormItem label=\"Keybindings\">\n        <ButtonGroup\n          value={keybindings}\n          onChange={(keybindings) => settingsMap.setKey('keybindings', keybindings)}\n          items={{ codemirror: 'Codemirror', vim: 'Vim', emacs: 'Emacs' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Panel Position\">\n        <ButtonGroup\n          value={panelPosition}\n          onChange={(value) => settingsMap.setKey('panelPosition', value)}\n          items={{ bottom: 'Bottom', right: 'Right' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Code Settings\">\n        <Checkbox\n          label=\"Display line numbers\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineNumbersDisplayed', cbEvent.target.checked)}\n          value={isLineNumbersDisplayed}\n        />\n        <Checkbox\n          label=\"Enable auto-completion\"\n          onChange={(cbEvent) => settingsMap.setKey('isAutoCompletionEnabled', cbEvent.target.checked)}\n          value={isAutoCompletionEnabled}\n        />\n        <Checkbox\n          label=\"Enable line wrapping\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineWrappingEnabled', cbEvent.target.checked)}\n          value={isLineWrappingEnabled}\n        />\n      </FormItem>\n      <FormItem label=\"Zen Mode\">Try clicking the logo in the top left!</FormItem>\n      <FormItem label=\"Reset Settings\">\n        <button\n          className=\"bg-background p-2 max-w-[300px] rounded-md hover:opacity-50\"\n          onClick={() => {\n            if (confirm('Sure?')) {\n              settingsMap.set(defaultSettings);\n            }\n          }}\n        >\n          restore default settings\n        </button>\n      </FormItem>\n    </div>\n  );\n}\n","import * as React from \"react\";\n\nfunction AcademicCapIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.664 1.319a.75.75 0 01.672 0 41.059 41.059 0 018.198 5.424.75.75 0 01-.254 1.285 31.372 31.372 0 00-7.86 3.83.75.75 0 01-.84 0 31.508 31.508 0 00-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 013.305-2.033.75.75 0 00-.714-1.319 37 37 0 00-3.446 2.12A2.216 2.216 0 006 9.393v.38a31.293 31.293 0 00-4.28-1.746.75.75 0 01-.254-1.285 41.059 41.059 0 018.198-5.424zM6 11.459a29.848 29.848 0 00-2.455-1.158 41.029 41.029 0 00-.39 3.114.75.75 0 00.419.74c.528.256 1.046.53 1.554.82-.21.324-.455.63-.739.914a.75.75 0 101.06 1.06c.37-.369.69-.77.96-1.193a26.61 26.61 0 013.095 2.348.75.75 0 00.992 0 26.547 26.547 0 015.93-3.95.75.75 0 00.42-.739 41.053 41.053 0 00-.39-3.114 29.925 29.925 0 00-5.199 2.801 2.25 2.25 0 01-2.514 0c-.41-.275-.826-.541-1.25-.797a6.985 6.985 0 01-1.084 3.45 26.503 26.503 0 00-1.281-.78A5.487 5.487 0 006 12v-.54z\",\n    clipRule: \"evenodd\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(AcademicCapIcon);\nexport default ForwardRef;","import * as React from \"react\";\n\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z\",\n    clipRule: \"evenodd\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\n\nfunction LinkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.667l3-3z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.603 7.963a.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.667l-3 3a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 105.656 5.656l3-3a4 4 0 00-.225-5.865z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(LinkIcon);\nexport default ForwardRef;","import * as React from \"react\";\n\nfunction PlayCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.39-2.908a.75.75 0 01.766.027l3.5 2.25a.75.75 0 010 1.262l-3.5 2.25A.75.75 0 018 12.25v-4.5a.75.75 0 01.39-.658z\",\n    clipRule: \"evenodd\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(PlayCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\n\nfunction SparklesIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.98 1.804a1 1 0 00-1.96 0l-.24 1.192a1 1 0 01-.784.785l-1.192.238a1 1 0 000 1.962l1.192.238a1 1 0 01.785.785l.238 1.192a1 1 0 001.962 0l.238-1.192a1 1 0 01.785-.785l1.192-.238a1 1 0 000-1.962l-1.192-.238a1 1 0 01-.785-.785l-.238-1.192zM6.949 5.684a1 1 0 00-1.898 0l-.683 2.051a1 1 0 01-.633.633l-2.051.683a1 1 0 000 1.898l2.051.684a1 1 0 01.633.632l.683 2.051a1 1 0 001.898 0l.683-2.051a1 1 0 01.633-.633l2.051-.683a1 1 0 000-1.898l-2.051-.683a1 1 0 01-.633-.633L6.95 5.684zM13.949 13.684a1 1 0 00-1.898 0l-.184.551a1 1 0 01-.632.633l-.551.183a1 1 0 000 1.898l.551.183a1 1 0 01.633.633l.183.551a1 1 0 001.898 0l.184-.551a1 1 0 01.632-.633l.551-.183a1 1 0 000-1.898l-.551-.184a1 1 0 01-.633-.632l-.183-.551z\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(SparklesIcon);\nexport default ForwardRef;","import * as React from \"react\";\n\nfunction StopCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm5-2.25A.75.75 0 017.75 7h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 01-.75-.75v-4.5z\",\n    clipRule: \"evenodd\"\n  }));\n}\n\nconst ForwardRef = React.forwardRef(StopCircleIcon);\nexport default ForwardRef;","import AcademicCapIcon from '@heroicons/react/20/solid/AcademicCapIcon';\nimport ArrowPathIcon from '@heroicons/react/20/solid/ArrowPathIcon';\nimport LinkIcon from '@heroicons/react/20/solid/LinkIcon';\nimport PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\nimport SparklesIcon from '@heroicons/react/20/solid/SparklesIcon';\nimport StopCircleIcon from '@heroicons/react/20/solid/StopCircleIcon';\nimport { cx } from '@strudel.cycles/react';\nimport React, { useContext } from 'react';\nimport { useSettings, setIsZen } from '../settings.mjs';\n// import { ReplContext } from './Repl';\nimport './Repl.css';\n\nexport function Header({ context }) {\n  const {\n    embedded,\n    started,\n    pending,\n    isDirty,\n    lastShared,\n    activeCode,\n    handleTogglePlay,\n    handleUpdate,\n    handleShuffle,\n    handleShare,\n  } = context;\n  const isEmbedded = embedded || window.location !== window.parent.location;\n  const { isZen } = useSettings();\n\n  return (\n    <header\n      id=\"header\"\n      className={cx(\n        'flex-none text-black  z-[100] text-lg select-none',\n        !isZen && !isEmbedded && 'bg-lineHighlight',\n        isZen ? 'h-12 w-8 fixed top-0 left-0' : 'sticky top-0 w-full py-1 justify-between',\n        isEmbedded ? 'flex' : 'md:flex',\n      )}\n    >\n      <div className=\"px-4 flex space-x-2 md:pt-0 select-none\">\n        {/*             <img\n    src={logo}\n    className={cx('Tidal-logo', isEmbedded ? 'w-8 h-8' : 'w-10 h-10', started && 'animate-pulse')} // 'bg-[#ffffff80] rounded-full'\n    alt=\"logo\"\n  /> */}\n        <h1\n          onClick={() => {\n            if (isEmbedded) window.open(window.location.href.replace('embed', ''));\n          }}\n          className={cx(\n            isEmbedded ? 'text-l cursor-pointer' : 'text-xl',\n            'text-foreground font-bold flex space-x-2 items-center',\n          )}\n        >\n          <div\n            className={cx('mt-[1px]', started && 'animate-spin', 'cursor-pointer')}\n            onClick={() => {\n              if (!isEmbedded) {\n                setIsZen(!isZen);\n              }\n            }}\n          >\n            \n          </div>\n          {!isZen && (\n            <div className={cx(started && 'animate-pulse')}>\n              <span className=\"\">strudel</span> <span className=\"text-sm\">REPL</span>\n            </div>\n          )}\n        </h1>\n      </div>\n      {!isZen && (\n        <div className=\"flex max-w-full overflow-auto text-foreground\">\n          <button\n            onClick={handleTogglePlay}\n            title={started ? 'stop' : 'play'}\n            className={cx(!isEmbedded ? 'p-2' : 'px-2', 'hover:opacity-50', !started && 'animate-pulse')}\n          >\n            {!pending ? (\n              <span className={cx('flex items-center space-x-1', isEmbedded ? '' : 'w-16')}>\n                {started ? <StopCircleIcon className=\"w-6 h-6\" /> : <PlayCircleIcon className=\"w-6 h-6\" />}\n                {!isEmbedded && <span>{started ? 'stop' : 'play'}</span>}\n              </span>\n            ) : (\n              <>loading...</>\n            )}\n          </button>\n          <button\n            onClick={handleUpdate}\n            title=\"update\"\n            className={cx(\n              'flex items-center space-x-1',\n              !isEmbedded ? 'p-2' : 'px-2',\n              !isDirty || !activeCode ? 'opacity-50' : 'hover:opacity-50',\n            )}\n          >\n            {/*             <CommandLineIcon className=\"w-6 h-6\" /> */}\n            <ArrowPathIcon className=\"w-6 h-6\" />\n            {!isEmbedded && <span>update</span>}\n          </button>\n          {!isEmbedded && (\n            <button\n              title=\"shuffle\"\n              className=\"hover:opacity-50 p-2 flex items-center space-x-1\"\n              onClick={handleShuffle}\n            >\n              <SparklesIcon className=\"w-6 h-6\" />\n              <span> shuffle</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <button\n              title=\"share\"\n              className={cx(\n                'cursor-pointer hover:opacity-50 flex items-center space-x-1',\n                !isEmbedded ? 'p-2' : 'px-2',\n              )}\n              onClick={handleShare}\n            >\n              <LinkIcon className=\"w-6 h-6\" />\n              <span>share{lastShared && lastShared === (activeCode || code) ? 'd!' : ''}</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <a\n              title=\"learn\"\n              href=\"./workshop/getting-started\"\n              className={cx('hover:opacity-50 flex items-center space-x-1', !isEmbedded ? 'p-2' : 'px-2')}\n            >\n              <AcademicCapIcon className=\"w-6 h-6\" />\n              <span>learn</span>\n            </a>\n          )}\n          {/* {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a href={window.location.href} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Open in REPL\">\n                \n              </a>\n            </button>\n          )}\n          {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a\n                onClick={() => {\n                  window.location.href = initialUrl;\n                  window.location.reload();\n                }}\n                title=\"Reset\"\n              >\n                \n              </a>\n            </button>\n          )} */}\n        </div>\n      )}\n    </header>\n  );\n}\n","/*\ntunes.mjs - <short description TODO>\nCopyright (C) 2022 Strudel contributors - see <https://github.com/tidalcycles/strudel/blob/main/repl/src/tunes.mjs>\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nexport const swimming = `// Koji Kondo - Swimming (Super Mario World)\nstack(\n  seq(\n    \"~\",\n    \"~\",\n    \"~\",\n    \"A5 [F5@2 C5] [D5@2 F5] F5\",\n    \"[C5@2 F5] [F5@2 C6] A5 G5\",\n    \"A5 [F5@2 C5] [D5@2 F5] F5\",\n    \"[C5@2 F5] [Bb5 A5 G5] F5@2\",\n    \"A5 [F5@2 C5] [D5@2 F5] F5\",\n    \"[C5@2 F5] [F5@2 C6] A5 G5\",\n    \"A5 [F5@2 C5] [D5@2 F5] F5\",\n    \"[C5@2 F5] [Bb5 A5 G5] F5@2\",\n    \"A5 [F5@2 C5] A5 F5\",\n    \"Ab5 [F5@2 Ab5] G5@2\",\n    \"A5 [F5@2 C5] A5 F5\",\n    \"Ab5 [F5@2 C5] C6@2\",\n    \"A5 [F5@2 C5] [D5@2 F5] F5\",\n    \"[C5@2 F5] [Bb5 A5 G5] F5@2\"\n  ).color('#FFEBB5'),\n  seq(\n    \"[F4,Bb4,D5] [[D4,G4,Bb4]@2 [Bb3,D4,F4]] [[G3,C4,E4]@2 [[Ab3,F4] [A3,Gb4]]] [Bb3,E4,G4]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, Bb3, Db3] [F3, Bb3, Db3]]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [A3, C4, E4] [A3, C4, E4]] [~ [Ab3, C4, Eb4] [Ab3, C4, Eb4]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [G3, C4, E4] [G3, C4, E4]]\",\n    \"[~ [F3, A3, C4] [F3, A3, C4]] [~ [F3, A3, C4] [F3, A3, C4]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [F3, Bb3, D4] [F3, Bb3, D4]] [~ [F3, Bb3, C4] [F3, Bb3, C4]] [~ [F3, A3, C4] [F3, A3, C4]] [~ [F3, A3, C4] [F3, A3, C4]]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [A3, C4, E4] [A3, C4, E4]] [~ [Ab3, C4, Eb4] [Ab3, C4, Eb4]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [G3, C4, E4] [G3, C4, E4]]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [F3, Bb3, D4] [F3, Bb3, D4]] [~ [F3, Bb3, C4] [F3, Bb3, C4]] [~ [F3, A3, C4] [F3, A3, C4]] [~ [F3, A3, C4] [F3, A3, C4]]\",\n    \"[~ [Bb3, D3, F4] [Bb3, D3, F4]] [~ [Bb3, D3, F4] [Bb3, D3, F4]] [~ [A3, C4, F4] [A3, C4, F4]] [~ [A3, C4, F4] [A3, C4, F4]]\",\n    \"[~ [Ab3, B3, F4] [Ab3, B3, F4]] [~ [Ab3, B3, F4] [Ab3, B3, F4]] [~ [G3, Bb3, F4] [G3, Bb3, F4]] [~ [G3, Bb3, E4] [G3, Bb3, E4]]\",\n    \"[~ [Bb3, D3, F4] [Bb3, D3, F4]] [~ [Bb3, D3, F4] [Bb3, D3, F4]] [~ [A3, C4, F4] [A3, C4, F4]] [~ [A3, C4, F4] [A3, C4, F4]]\",\n    \"[~ [Ab3, B3, F4] [Ab3, B3, F4]] [~ [Ab3, B3, F4] [Ab3, B3, F4]] [~ [G3, Bb3, F4] [G3, Bb3, F4]] [~ [G3, Bb3, E4] [G3, Bb3, E4]]\",\n    \"[~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, A3, C3] [F3, A3, C3]] [~ [F3, Bb3, D3] [F3, Bb3, D3]] [~ [F3, B3, D3] [F3, B3, D3]]\",\n    \"[~ [F3, Bb3, D4] [F3, Bb3, D4]] [~ [F3, Bb3, C4] [F3, Bb3, C4]] [~ [F3, A3, C4] [F3, A3, C4]] [~ [F3, A3, C4] [F3, A3, C4]]\"\n  ).color('#54C571'),\n  seq(\n    \"[G3 G3 C3 E3]\",\n    \"[F2 D2 G2 C2]\",\n    \"[F2 D2 G2 C2]\",\n    \"[F2 A2 Bb2 B2]\",\n    \"[A2 Ab2 G2 C2]\",\n    \"[F2 A2 Bb2 B2]\",\n    \"[G2 C2 F2 F2]\",\n    \"[F2 A2 Bb2 B2]\",\n    \"[A2 Ab2 G2 C2]\",\n    \"[F2 A2 Bb2 B2]\",\n    \"[G2 C2 F2 F2]\",\n    \"[Bb2 Bb2 A2 A2]\",\n    \"[Ab2 Ab2 G2 [C2 D2 E2]]\",\n    \"[Bb2 Bb2 A2 A2]\",\n    \"[Ab2 Ab2 G2 [C2 D2 E2]]\",\n    \"[F2 A2 Bb2 B2]\",\n    \"[G2 C2 F2 F2]\"\n  ).color('#0077C9')\n).note().slow(51)\n//.pianoroll({fold:1})\n`;\n\nexport const giantSteps = `// John Coltrane - Giant Steps\n\nlet melody = note(\n  \"[F#5 D5] [B4 G4] Bb4 [B4 A4]\",\n  \"[D5 Bb4] [G4 Eb4] F#4 [G4 F4]\",\n  \"Bb4 [B4 A4] D5 [D#5 C#5]\",\n  \"F#5 [G5 F5] Bb5 [F#5 F#5]\",\n)\n\nstack(\n  // melody\n  melody.color('#F8E71C'),\n  // chords\n  chord(\n    \"[B^7 D7] [G^7 Bb7] Eb^7 [Am7 D7]\",\n    \"[G^7 Bb7] [Eb^7 F#7] B^7 [Fm7 Bb7]\",\n    \"Eb^7 [Am7 D7] G^7 [C#m7 F#7]\",\n    \"B^7 [Fm7 Bb7] Eb^7 [C#m7 F#7]\"\n  ).dict('lefthand')\n  .anchor(melody).mode('duck')\n  .voicing().color('#7ED321'),\n  // bass\n  note(\n    \"[B2 D2] [G2 Bb2] [Eb2 Bb3] [A2 D2]\",\n    \"[G2 Bb2] [Eb2 F#2] [B2 F#2] [F2 Bb2]\",\n    \"[Eb2 Bb2] [A2 D2] [G2 D2] [C#2 F#2]\",\n    \"[B2 F#2] [F2 Bb2] [Eb2 Bb3] [C#2 F#2]\"\n  ).color('#00B8D4')\n).slow(20)\n.pianoroll({fold:1})`;\n\nexport const zeldasRescue = `// Koji Kondo - Princess Zelda's Rescue\nstack(\n  // melody\n  \\`[B3@2 D4] [A3@2 [G3 A3]] [B3@2 D4] [A3] \n  [B3@2 D4] [A4@2 G4] [D4@2 [C4 B3]] [A3]\n  [B3@2 D4] [A3@2 [G3 A3]] [B3@2 D4] [A3]\n  [B3@2 D4] [A4@2 G4] D5@2 \n  [D5@2 [C5 B4]] [[C5 B4] G4@2] [C5@2 [B4 A4]] [[B4 A4] E4@2]\n  [D5@2 [C5 B4]] [[C5 B4] G4 C5] [G5] [~ ~ B3]\\`\n  .color('#9C7C38'),\n  // bass\n  \\`[[C2 G2] E3@2] [[C2 G2] F#3@2] [[C2 G2] E3@2] [[C2 G2] F#3@2]\n  [[B1 D3] G3@2] [[Bb1 Db3] G3@2] [[A1 C3] G3@2] [[D2 C3] F#3@2]\n  [[C2 G2] E3@2] [[C2 G2] F#3@2] [[C2 G2] E3@2] [[C2 G2] F#3@2]\n  [[B1 D3] G3@2] [[Bb1 Db3] G3@2] [[A1 C3] G3@2] [[D2 C3] F#3@2]\n  [[F2 C3] E3@2] [[E2 B2] D3@2] [[D2 A2] C3@2] [[C2 G2] B2@2]\n  [[F2 C3] E3@2] [[E2 B2] D3@2] [[Eb2 Bb2] Db3@2] [[D2 A2] C3 [F3,G2]]\\`\n  .color('#4C4646')\n).transpose(12).slow(48)\n  .superimpose(x=>x.add(0.06)) // add slightly detuned voice\n  .note()\n  .gain(.1)\n  .s('triangle')\n  .room(1)\n  //.pianoroll({fold:1})`;\n\nexport const caverave = `// \"Caverave\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nconst keys = x => x.s('sawtooth').cutoff(1200).gain(.5)\n  .attack(0).decay(.16).sustain(.3).release(.1);\n\nconst drums = stack(\n  s(\"bd*2\").mask(\"<x@7 ~>/8\").gain(.8),\n  s(\"~ <sd!7 [sd@3 ~]>\").mask(\"<x@7 ~>/4\").gain(.5),\n  s(\"[~ hh]*2\").delay(.3).delayfeedback(.5).delaytime(.125).gain(.4)\n);\n\nconst synths = stack(\n  \n  \"<eb4 d4 c4 b3>/2\"\n  .scale(\"<C:minor!3 C:melodic:minor>/2\")\n  .struct(\"[~ x]*2\")\n  .layer(\n    x=>x.scaleTranspose(0).early(0),\n    x=>x.scaleTranspose(2).early(1/8),\n    x=>x.scaleTranspose(7).early(1/4),\n    x=>x.scaleTranspose(8).early(3/8)\n  ).note().apply(keys).mask(\"<~ x>/16\")\n  .color('darkseagreen'),\n  \n  note(\"<C2 Bb1 Ab1 [G1 [G2 G1]]>/2\")\n  .struct(\"[x [~ x] <[~ [~ x]]!3 [x x]>@2]/2\".fast(2))\n  .s('sawtooth').attack(0.001).decay(0.2).sustain(1).cutoff(500)\n  .color('brown'),\n  chord(\"<Cm7 Bb7 Fm7 G7b13>/2\")\n  .struct(\"~ [x@0.2 ~]\".fast(2))\n  .dict('lefthand').voicing()\n  .every(2, early(1/8))\n  .apply(keys).sustain(0)\n  .delay(.4).delaytime(.12)\n  .mask(\"<x@7 ~>/8\".early(1/4))\n).add(note(\"<-1 0>/8\"))\nstack(\n  drums.fast(2).color('tomato'), \n  synths\n).slow(2)\n  //.pianoroll({fold:1})`;\n\nexport const sampleDrums = `samples({\n  bd: 'bd/BT0A0D0.wav',\n  sn: 'sn/ST0T0S3.wav',\n  hh: 'hh/000_hh3closedhh.wav'\n}, 'https://loophole-letters.vercel.app/samples/tidal/')\n\nstack(\n  \"<bd!3 bd(3,4,3)>\".color('#F5A623'),\n  \"hh*4\".color('#673AB7'),\n  \"~ <sn!3 sn(3,4,2)>\".color('#4CAF50')\n).s()\n.pianoroll({fold:1})\n`;\n\nexport const barryHarris = `// adapted from a Barry Harris excercise\n\"0,2,[7 6]\"\n  .add(\"<0 1 2 3 4 5 7 8>\")\n  .scale('C bebop major')\n  .transpose(\"<0 1 2 1>/8\")\n  .slow(2)\n  .note().piano()\n  .color('#00B8D4')\n`;\n\nexport const blippyRhodes = `// \"Blippy Rhodes\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({\n  bd: 'samples/tidal/bd/BT0A0D0.wav',\n  sn: 'samples/tidal/sn/ST0T0S3.wav',\n  hh: 'samples/tidal/hh/000_hh3closedhh.wav',\n  rhodes: {\n  E1: 'samples/rhodes/MK2Md2000.mp3',\n  E2: 'samples/rhodes/MK2Md2012.mp3',\n  E3: 'samples/rhodes/MK2Md2024.mp3',\n  E4: 'samples/rhodes/MK2Md2036.mp3',\n  E5: 'samples/rhodes/MK2Md2048.mp3',\n  E6: 'samples/rhodes/MK2Md2060.mp3',\n  E7: 'samples/rhodes/MK2Md2072.mp3'\n  }\n}, 'https://loophole-letters.vercel.app/')\n\nstack(\n  s(\"<bd sn> <hh hh*2 hh*3>\").color('#00B8D4'),\n  \"<g4 c5 a4 [ab4 <eb5 f5>]>\"\n  .scale(\"<C:major C:mixolydian F:lydian [F:minor <Db:major Db:mixolydian>]>\")\n  .struct(\"x*8\")\n  .scaleTranspose(\"0 [-5,-2] -7 [-9,-2]\")\n  .slow(2)\n  .note()\n  .clip(.3)\n  .s('rhodes')\n  .room(.5)\n  .delay(.3)\n  .delayfeedback(.4)\n  .delaytime(1/12).gain(.5).color('#7ED321'),\n  \"<c2 c3 f2 [[F2 C2] db2]>/2\"\n  .add(\"0,.02\")\n  .note().gain(.3)\n  .clip(\"<1@3 [.3 1]>/2\")\n  .cutoff(600)\n  .lpa(.2).lpenv(-4)\n  .s('sawtooth').color('#F8E71C'),\n).fast(3/2)\n//.pianoroll({fold:1})`;\n\nexport const wavyKalimba = `// \"Wavy kalimba\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({\n  'kalimba': { c5:'https://freesound.org/data/previews/536/536549_11935698-lq.mp3' }\n})\nconst scales = \"<C:major C:mixolydian F:lydian [F:minor Db:major]>\"\n\nstack(\n  \"[0 2 4 6 9 2 0 -2]*3\"\n  .add(\"<0 2>/4\")\n  .scale(scales)\n  .struct(\"x*8\")\n  .velocity(\"<.8 .3 .6>*8\")\n  .slow(2),\n  \"<c2 c2 f2 [[F2 C2] db2]>\"\n  .scale(scales)\n  .scaleTranspose(\"[0 <2 4>]*2\")\n  .struct(\"x*4\")\n  .velocity(\"<.8 .5>*4\")\n  .velocity(0.8)\n  .slow(2)\n)\n  .fast(1)\n  .note()\n  .clip(\"<.4 .8 1 1.2 1.4 1.6 1.8 2>/8\")\n  .s('kalimba')\n  .delay(.2)`;\n\nexport const festivalOfFingers = `// \"Festival of fingers\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nconst chords = \"<Cm7 Fm7 G7 F#7>\";\nstack(\n  chord(chords).dict('lefthand').voicing().struct(\"x(3,8,-1)\")\n  .velocity(.5).off(1/7,x=>x.add(note(12)).velocity(.2)),\n  \n  chords.rootNotes(2).struct(\"x(4,8,-2)\").note(),\n  \n  chords.rootNotes(4)\n  .scale(cat('C minor','F dorian','G dorian','F# mixolydian'))\n  .struct(\"x(3,8,-2)\".fast(2))\n  .scaleTranspose(\"0 4 0 6\".early(\".125 .5\")).layer(scaleTranspose(\"0,<2 [4,6] [5,7]>/4\"))\n  .note()\n  \n).slow(2)\n .velocity(sine.struct(\"x*8\").add(3/5).mul(2/5).fast(8))\n .piano()`;\n\n// iter, echo, echoWith\nexport const undergroundPlumber = `// \"Underground plumber\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n// @details inspired by Friendship - Let's not talk about it (1979) :)\n\nsamples({ bd: 'bd/BT0A0D0.wav', sn: 'sn/ST0T0S3.wav', hh: 'hh/000_hh3closedhh.wav', cp: 'cp/HANDCLP0.wav',\n}, 'https://loophole-letters.vercel.app/samples/tidal/')\n\nconst h = x=>x.transpose(\"<0@2 5 0 7 5 0 -5>/2\")\n\nstack(\n  s(\"<<bd*2 bd> sn> hh\").fast(2).gain(.7),\n  \"[c2 a1 bb1 ~] ~\"\n  .echo(2, 1/16, 1)\n  .slow(2)\n  .layer(h)\n  .note().s('square')\n  .clip(.4)\n  .cutoff(400).decay(.12).sustain(0)\n  ,\n  \"[g2,[c3 eb3]]\".iter(4)\n  .echoWith(4, 1/8, (x,n)=>x.transpose(n*12).velocity(Math.pow(.4,n)))\n  .layer(h).note()\n  .clip(.1)\n)\n  .fast(2/3)\n  .pianoroll()`;\n\nexport const bridgeIsOver = `// \"Bridge is over\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos, bassline by BDP - The Bridge Is Over\n\nsamples({mad:'https://freesound.org/data/previews/22/22274_109943-lq.mp3'})\nstack(\n  stack(\n  note(\"c3*2 [[c3@1.4 bb2] ab2] gb2*2 <[[gb2@1.4 ab2] bb2] gb2>\")\n    .gain(.8).clip(\"[.5 1]*2\"),\n  n(\"<0 1 2 3 4 3 2 1>\")\n    .clip(.5)\n    .echoWith(8, 1/32, (x,i)=>x.add(n(i)).velocity(Math.pow(.7,i)))\n    .scale('c4 whole tone')\n    .echo(3, 1/8, .5)\n  ).piano(),\n  s(\"mad\").slow(2)\n).cpm(78).slow(4)\n  .pianoroll()\n`;\n\nexport const goodTimes = `// \"Good times\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nconst scale = cat('C3 dorian','Bb2 major').slow(4);\nstack(\n  n(\"2*4\".add(12)).off(1/8, add(2))\n  .scale(scale)\n  .fast(2)\n  .add(\"<0 1 2 1>\").hush(),\n  \"<0 1 2 3>(3,8,2)\".off(1/4, add(\"2,4\"))\n  .n().scale(scale),\n  n(\"<0 4>(5,8,-1)\").scale(scale).sub(note(12))\n)\n  .velocity(\".6 .7\".fast(4))\n  .add(note(4))\n  .piano()\n  .clip(2)\n  .velocity(.8)\n  .slow(2)\n  .pianoroll()`;\n\nexport const echoPiano = `// \"Echo piano\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nn(\"<0 2 [4 6](3,4,2) 3*2>\").color('salmon')\n.off(1/4, x=>x.add(2).color('green'))\n.off(1/2, x=>x.add(6).color('steelblue'))\n.scale('D minor')\n.echo(4, 1/8, .5)\n.clip(.5)\n.piano()\n.pianoroll()`;\n\nexport const sml1 = `// Hirokazu Tanaka - World 1-1\nstack(\n  // melody\n  note(\\`<\n  [e5 ~] [[d5@2 c5] [~@2 e5]] ~ [~ [c5@2 d5]] [e5 e5] [d5 c5] [e5 f5] [g5 a5]\n  [~ c5] [c5 d5] [e5 [c5@2 c5]] [~ c5] [f5 e5] [c5 d5] [~ g6] [g6 ~]\n  [e5 ~] [[d5@2 c5] [~@2 e5]] ~ [~ [c5@2 d5]] [e5 e5] [d5 c5] [a5 g5] [c6 [e5@2 d5]]\n  [~ c5] [c5 d5] [e5 [c5@2 c5]] [~ c5] [f5 e5] [c5 d5] [~ [g6@2 ~] ~@2] [g5 ~] \n  [~ a5] [b5 c6] [b5@2 ~@2 g5] ~\n  [f5 ~] [[g5@2 f5] ~] [[e5 ~] [f5 ~]] [[f#5 ~] [g5 ~]]\n  [~ a5] [b5 c6] [b5@2 ~@2 g5] ~\n  [eb6 d6] [~ c6] ~!2\n  >\\`)\n  .clip(.95),\n  // sub melody\n  note(\\`<\n  [~ g4]!2 [~ ab4]!2 [~ a4]!2 [~ bb4]!2 \n  [~ a4]!2 [~ g4]!2 [d4 e4] [f4 gb4] ~!2\n  [~ g4]!2 [~ ab4]!2 [~ a4]!2 [~ bb4]!2 \n  [~ a4]!2 [~ g4]!2 [d4 e4] [f4 gb4] ~!2\n  [~ c5]!4 [~ a4]!2 [[c4 ~] [d4 ~]] [[eb4 ~] [e4 ~]]\n  [~ c5]!4 [~ eb5]!2 [g4*2 [f4 ~]] [[e4 ~] [d4 ~]]\n  >\\`),\n  // bass\n  note(\\`<\n  c3!7 a3 f3!2\n  e3!2 ~!4\n  c3!7 a3 f3!2\n  e3!2 ~!4\n  f3!2 e3!2 d3!2 ~!2\n  f3!2 e3!2 ab3!2 ~!2\n  >\\`)\n  .clip(.5)\n).fast(2)`;\n\nexport const randomBells = `// \"Random bells\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({\n  bell: { c6: 'https://freesound.org/data/previews/411/411089_5121236-lq.mp3' },\n  bass: { d2: 'https://freesound.org/data/previews/608/608286_13074022-lq.mp3' }\n})\n\nstack(\n  // bells\n  \"0\".euclidLegato(3,8)\n  .echo(3, 1/16, .5)\n  .add(rand.range(0,12))\n  .scale(\"D:minor:pentatonic\").note()\n  .velocity(rand.range(.5,1))\n  .s('bell').gain(.6).delay(.2).delaytime(1/3).delayfeedback(.8),\n  // bass\n  note(\"<D2 A2 G2 F2>\").euclidLegatoRot(6,8,4).s('bass').clip(1).gain(.8)\n)\n  .slow(6)\n  .pianoroll({vertical:1})`;\n\nexport const waa2 = `// \"Waa2\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nnote(\n  \"a4 [a3 c3] a3 c3\"\n  .sub(\"<7 12 5 12>\".slow(2))\n  .off(1/4,x=>x.add(7))\n  .off(1/8,x=>x.add(12))\n)\n  .slow(2)\n  .clip(sine.range(0.3, 2).slow(28))\n  .s(\"sawtooth square\".fast(2))\n  .cutoff(cosine.range(500,4000).slow(16))\n  .gain(.5)\n  .room(.5)\n  .lpa(.125).lpenv(-2).v(\"8:.125\").fanchor(.25)`;\n\nexport const hyperpop = `// \"Hyperpop\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nconst lfo = cosine.slow(15);\nconst lfo2 = sine.slow(16);\nconst filter1 = x=>x.cutoff(lfo2.range(300,3000));\nconst filter2 = x=>x.hcutoff(lfo.range(1000,6000)).cutoff(4000)\nconst scales = cat('D3 major', 'G3 major').slow(8)\n\nsamples({\n  bd: '344/344757_1676145-lq.mp3',\n  sn: '387/387186_7255534-lq.mp3',\n  hh: '561/561241_12517458-lq.mp3',\n  hh2:'44/44944_236326-lq.mp3',\n  hh3: '44/44944_236326-lq.mp3',\n}, 'https://freesound.org/data/previews/')\n\nstack(\n  \"-7 0 -7 7\".struct(\"x(5,8,1)\").fast(2).sub(7)\n  .scale(scales)\n  .note()\n  .s(\"sawtooth,square\")\n  .gain(.3).attack(0.01).decay(0.1).sustain(.5)\n  .apply(filter1)\n  .lpa(.1).lpenv(2).ftype('24db')\n  ,\n  \"~@3 [<2 3>,<4 5>]\"\n  .echo(4,1/16,.7)\n  .scale(scales)\n  .note()\n  .s('square').gain(.7)\n  .attack(0.01).decay(0.1).sustain(0)\n  .apply(filter1),\n  \"6 4 2\".add(14)\n  .superimpose(sub(\"5\"))\n  .fast(1).euclidLegato(3,8)\n  .mask(\"<1 0@7>\")\n  .fast(2)\n  .echo(32, 1/8, .8)\n  .scale(scales)\n  .note()\n  .s(\"sawtooth\")\n  .gain(sine.range(.1,.4).slow(8))\n  .attack(.001).decay(.2).sustain(0)\n  .apply(filter2)\n).stack(\n  stack(\n    \"bd <~@7 [~ bd]>\".fast(2),\n    \"~ sn\",\n    \"[~ hh3]*2\"\n  ).s().fast(2).gain(.7)\n).slow(2)\n// strudel disable-highlighting`;\n\nexport const festivalOfFingers3 = `// \"Festival of fingers 3\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nn(\"[-7*3],0,2,6,[8 7]\")\n  .echoWith(\n    4, // echo 4 times\n    1/4, // 1/4s between echos\n    (x,i)=>x\n      .add(n(i*7)) // add octaves\n      .gain(1/(i+1)) // reduce gain\n      .clip(1/(i+1))\n    )\n  .velocity(perlin.range(.5,.9).slow(8))\n  .stack(n(\"[22 25]*3\")\n         .clip(sine.range(.5,2).slow(8))\n         .gain(sine.range(.4,.8).slow(5))\n         .echo(4,1/12,.5))\n  .scale(\"<D:dorian G:mixolydian C:dorian F:mixolydian>\")\n  .slow(2).piano()\n//.pianoroll({maxMidi:160})`;\n\nexport const meltingsubmarine = `// \"Melting submarine\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nawait samples('github:tidalcycles/Dirt-Samples/master/')\nstack(\n  s(\"bd:5,[~ <sd:1!3 sd:1(3,4,3)>],hh27(3,4,1)\") // drums\n  .speed(perlin.range(.7,.9)) // random sample speed variation\n  //.hush()\n  ,\"<a1 b1*2 a1(3,8) e2>\" // bassline\n  .off(1/8,x=>x.add(12).degradeBy(.5)) // random octave jumps\n  .add(perlin.range(0,.5)) // random pitch variation\n  .superimpose(add(.05)) // add second, slightly detuned voice\n  .note() // wrap in \"note\"\n  .decay(.15).sustain(0) // make each note of equal length\n  .s('sawtooth') // waveform\n  .gain(.4) // turn down\n  .cutoff(sine.slow(7).range(300,5000)) // automate cutoff\n  .lpa(.1).lpenv(-2)\n  //.hush()\n  ,chord(\"<Am7!3 <Em7 E7b13 Em7 Ebm7b5>>\")\n  .dict('lefthand').voicing() // chords\n  .add(note(\"0,.04\")) // add second, slightly detuned voice\n  .add(note(perlin.range(0,.5))) // random pitch variation\n  .s('sawtooth') // waveform\n  .gain(.16) // turn down\n  .cutoff(500) // fixed cutoff\n  .attack(1) // slowly fade in\n  //.hush()\n  ,\"a4 c5 <e6 a6>\".struct(\"x(5,8,-1)\")\n  .superimpose(x=>x.add(.04)) // add second, slightly detuned voice\n  .add(perlin.range(0,.5)) // random pitch variation\n  .note() // wrap in \"note\"\n  .decay(.1).sustain(0) // make notes short\n  .s('triangle') // waveform\n  .degradeBy(perlin.range(0,.5)) // randomly controlled random removal :)\n  .echoWith(4,.125,(x,n)=>x.gain(.15*1/(n+1))) // echo notes\n  //.hush()\n)\n  .slow(3/2)`;\n\n/* \nexport const outroMusic = `// \"Outro music\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({\n  bd: ['bd/BT0AADA.wav','bd/BT0AAD0.wav','bd/BT0A0DA.wav','bd/BT0A0D3.wav','bd/BT0A0D0.wav','bd/BT0A0A7.wav'],\n  sd: ['sd/rytm-01-classic.wav','sd/rytm-00-hard.wav'],\n  hh: ['hh27/000_hh27closedhh.wav','hh/000_hh3closedhh.wav'],\n  perc: ['perc/002_perc2.wav'],\n}, 'github:tidalcycles/Dirt-Samples/master/');\n\nchord(\"<C^7 Am7 Dm7 G7>*2\").dict('lefthand').anchor(\"G4\").voicing()\n  .stack(n(\"0@6 [<1 2> <2 0> 1]@2\").scale('C5 major'))\n  .slow(4)\n  .s(\"gm_epiano1:1\")\n  .color('steelblue')\n  .stack(\n   \"<-7 ~@2 [~@2 -7] -9 ~@2 [~@2 -9] -10!2 ~ [~@2 -10] -5 ~ [-3 -2 -10]@2>*2\"\n    .scale('C3 major').note()\n    .s('sawtooth').color('brown')\n  )\n  .attack(0.05).decay(.1).sustain(.7)\n  .cutoff(perlin.range(800,2000))\n  .gain(.3)\n  .stack(\n    s(\"<bd!3 [bd ~ bd]> sd,hh*3,~@5 <perc perc*3>\")\n    .speed(perlin.range(.9,1.1))\n    .n(3).color('gray')\n  ).slow(3/2)\n  //.pianoroll({autorange:1,vertical:1,fold:0})\n  `; \n*/\n\nexport const bassFuge = `// \"Bass fuge\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({ flbass: ['00_c2_finger_long_neck.wav','01_c2_finger_short_neck.wav','02_c2_finger_long_bridge.wav','03_c2_finger_short_bridge.wav','04_c2_pick_long.wav','05_c2_pick_short.wav','06_c2_palm_mute.wav'] }, \n  'github:cleary/samples-flbass/main/')\nsamples({\nbd: ['bd/BT0AADA.wav','bd/BT0AAD0.wav','bd/BT0A0DA.wav','bd/BT0A0D3.wav','bd/BT0A0D0.wav','bd/BT0A0A7.wav'],\nsd: ['sd/rytm-01-classic.wav','sd/rytm-00-hard.wav'],\nhh: ['hh27/000_hh27closedhh.wav','hh/000_hh3closedhh.wav'],\n}, 'github:tidalcycles/Dirt-Samples/master/');\n\nnote(\"<8(3,8) <7 7*2> [4 5@3] 8>\".sub(1) // sub 1 -> 1-indexed\n.layer(\nx=>x,\nx=>x.add(7).color('steelblue')\n.off(1/8,x=>x.add(\"2,4\").off(1/8,x=>x.add(5).echo(4,.125,.5)))\n.slow(2),\n).scale('A1 minor'))\n.s(\"flbass\").n(0)\n.gain(.3)\n.cutoff(sine.slow(7).range(200,4000))\n.resonance(10)\n//.hcutoff(400)\n.clip(1)\n.stack(s(\"bd:1*2,~ sd:0,[~ hh:0]*2\"))\n.pianoroll({vertical:1})`;\n\nexport const chop = `// \"Chop\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({ p: 'https://cdn.freesound.org/previews/648/648433_11943129-lq.mp3' })\n\ns(\"p\")\n  .loopAt(32)\n  .chop(128)\n  .jux(rev)\n  .shape(.4)\n  .decay(.1)\n  .sustain(.6)\n  `;\n\nexport const delay = `// \"Delay\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nstack(\n    s(\"bd <sd cp>\")\n    .delay(\"<0 .5>\")\n    .delaytime(\".16 | .33\")\n    .delayfeedback(\".6 | .8\")\n  ).sometimes(x=>x.speed(\"-1\"))`;\n\nexport const orbit = `// \"Orbit\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nstack(\n    s(\"bd <sd cp>\")\n    .delay(.5)\n    .delaytime(.33)\n    .delayfeedback(.6),\n    s(\"hh*2\")\n    .delay(.8)\n    .delaytime(.08)\n    .delayfeedback(.7)\n    .orbit(2)\n  ).sometimes(x=>x.speed(\"-1\"))`;\n\nexport const belldub = `// \"Belldub\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({ bell: {b4:'https://cdn.freesound.org/previews/339/339809_5121236-lq.mp3'}})\n// \"Hand Bells, B, Single.wav\" by InspectorJ (www.jshaw.co.uk) of Freesound.org\nstack(\n  // bass\n  note(\"[0 ~] [2 [0 2]] [4 4*2] [[4 ~] [2 ~] 0@2]\".scale('g1 dorian').superimpose(x=>x.add(.02)))\n  .s('sawtooth').cutoff(200).resonance(20).gain(.15).shape(.6).release(.05),\n  // perc\n  s(\"[~ hh]*4\").room(\"0 0.5\".fast(2)).end(perlin.range(0.02,1)),\n  s(\"mt lt ht\").struct(\"x(3,8)\").fast(2).gain(.5).room(.5).sometimes(x=>x.speed(\".5\")),\n  s(\"misc:2\").speed(1).delay(.5).delaytime(1/3).gain(.4),\n  // chords\n  chord(\"[~ Gm7] ~ [~ Dm7] ~\")\n  .dict('lefthand').voicing()\n  .add(note(\"0,.1\"))\n  .s('sawtooth').gain(.8)\n  .cutoff(perlin.range(400,3000).slow(8))\n  .decay(perlin.range(0.05,.2)).sustain(0)\n  .delay(.9).room(1),\n  // blips\n  note(\n    \"0 5 4 2\".iter(4)\n    .off(1/3, add(7))\n    .scale('g4 dorian')\n  ).s('square').cutoff(2000).decay(.03).sustain(0)\n  .degradeBy(.2)\n  .orbit(2).delay(.2).delaytime(\".33 | .6 | .166 | .25\")\n  .room(1).gain(.5).mask(\"<0 1>/8\"),\n  // bell\n  note(rand.range(0,12).struct(\"x(5,8,-1)\").scale('g2 minor pentatonic')).s('bell').begin(.05)\n  .delay(.2).degradeBy(.4).gain(.4)\n  .mask(\"<1 0>/8\")\n).slow(5)`;\n\nexport const dinofunk = `// \"Dinofunk\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nsamples({bass:'https://cdn.freesound.org/previews/614/614637_2434927-hq.mp3',\ndino:{b4:'https://cdn.freesound.org/previews/316/316403_5123851-hq.mp3'}})\nsetVoicingRange('lefthand', ['c3','a4'])\n\nstack(\ns('bass').loopAt(8).clip(1),\ns(\"bd*2, ~ sd,hh*4\"),\nchord(\"Abm7\")\n  .mode(\"below:G4\")\n  .dict('lefthand')\n  .voicing()\n  .struct(\"x(3,8,1)\".slow(2)),\n\"0 1 2 3\".scale('ab4 minor pentatonic')\n.superimpose(x=>x.add(.1))\n.sometimes(x=>x.add(12))\n.note().s('sawtooth')\n.cutoff(sine.range(400,2000).slow(16)).gain(.8)\n.decay(perlin.range(.05,.2)).sustain(0)\n.delay(sine.range(0,.5).slow(32))\n.degradeBy(.4).room(1),\nnote(\"<b4 eb4>\").s('dino').delay(.8).slow(8).room(.5)\n)`;\n\nexport const sampleDemo = `// \"Sample demo\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nstack(\n  // percussion\n  s(\"[woodblock:1 woodblock:2*2] snare_rim:0,gong/8,brakedrum:1(3,8),~@3 cowbell:3\")\n  .sometimes(x=>x.speed(2)),\n  // melody\n  note(\"<0 4 1 3 2>\".off(\".25 | .125\",add(2)).scale('D3 hirajoshi'))\n  .s(\"clavisynth\").gain(.2).delay(.25).jux(rev)\n  .degradeBy(sine.range(0,.5).slow(32)),\n  // bass\n  note(\"<0@3 <2(3,8) 3(3,8)>>\".scale('D1 hirajoshi'))\n  .s('psaltery_pluck').gain(.6).clip(1)\n  .release(.1).room(.5)\n)`;\n\nexport const holyflute = `// \"Holy flute\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\n\"c3 eb3(3,8) c4/2 g3*2\"\n.superimpose(\n  x=>x.slow(2).add(12),\n  x=>x.slow(4).sub(5)\n).add(\"<0 1>/16\")\n.note().s('ocarina_vib').clip(1)\n.release(.1).room(1).gain(.2)\n.color(\"salmon | orange | darkseagreen\")\n.pianoroll({fold:0,autorange:0,vertical:0,cycles:12,smear:0,minMidi:40})\n`;\n\nexport const flatrave = `// \"Flatrave\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nstack(\n  s(\"bd*2,~ [cp,sd]\").bank('RolandTR909'),\n  \n  s(\"hh:1*4\").sometimes(fast(\"2\"))\n  .rarely(x=>x.speed(\".5\").delay(.5))\n  .end(perlin.range(0.02,.05).slow(8))\n  .bank('RolandTR909').room(.5)\n  .gain(\"0.4,0.4(5,8,-1)\"),\n  \n  note(\"<0 2 5 3>\".scale('G1 minor')).struct(\"x(5,8,-1)\")\n  .s('sawtooth').decay(.1).sustain(0)\n  .lpa(.1).lpenv(-4).lpf(800).lpq(8),\n  \n  note(\"<G4 A4 Bb4 A4>,Bb3,D3\").struct(\"~ x*2\").s('square').clip(1)\n  .cutoff(sine.range(500,4000).slow(16)).resonance(10)\n  .decay(sine.slow(15).range(.05,.2)).sustain(0)\n  .room(.5).gain(.3).delay(.2).mask(\"<0 1@3>/8\"),\n  \n  \"0 5 3 2\".sometimes(slow(2)).off(1/8,add(5)).scale('G4 minor').note()\n  .decay(.05).sustain(0).delay(.2).degradeBy(.5).mask(\"<0 1>/16\")\n)`;\n\nexport const amensister = `// \"Amensister\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nawait samples('github:tidalcycles/Dirt-Samples/master')\n\nstack(\n  // amen\n  n(\"0 1 2 3 4 5 6 7\")\n  .sometimes(x=>x.ply(2))\n  .rarely(x=>x.speed(\"2 | -2\"))\n  .sometimesBy(.4, x=>x.delay(\".5\"))\n  .s(\"amencutup\")\n  .slow(2)\n  .room(.5)\n  ,\n  // bass\n  sine.add(saw.slow(4)).range(0,7).segment(8)\n  .superimpose(x=>x.add(.1))\n  .scale('G0 minor').note()\n  .s(\"sawtooth\")\n  .gain(.4).decay(.1).sustain(0)\n  .lpa(.1).lpenv(-4).lpq(10)\n  .cutoff(perlin.range(300,3000).slow(8))\n  .degradeBy(\"0 0.1 .5 .1\")\n  .rarely(add(note(\"12\")))\n  ,\n  // chord\n  note(\"Bb3,D4\".superimpose(x=>x.add(.2)))\n  .s('sawtooth').lpf(1000).struct(\"<~@3 [~ x]>\")\n  .decay(.05).sustain(.0).delay(.8).delaytime(.125).room(.8)\n  ,\n  // alien\n  s(\"breath\").room(1).shape(.6).chop(16).rev().mask(\"<x ~@7>\")\n  ,\n  n(\"0 1\").s(\"east\").delay(.5).degradeBy(.8).speed(rand.range(.5,1.5))\n).reset(\"<x@7 x(5,8,-1)>\")`;\n\nexport const juxUndTollerei = `// \"Jux und tollerei\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nnote(\"c3 eb3 g3 bb3\").palindrome()\n.s('sawtooth')\n.jux(x=>x.rev().color('green').s('sawtooth'))\n.off(1/4, x=>x.add(note(\"<7 12>/2\")).slow(2).late(.005).s('triangle'))\n.lpf(sine.range(200,2000).slow(8))\n.lpa(.2).lpenv(-2)\n.decay(.05).sustain(0)\n.room(.6)\n.delay(.5).delaytime(.1).delayfeedback(.4)\n.pianoroll()`;\n\nexport const csoundDemo = `// \"CSound demo\"\n// @license with CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nawait loadCsound\\`\ninstr CoolSynth\n    iduration = p3\n    ifreq = p4\n    igain = p5\n    ioct = octcps(ifreq)\n\n    kpwm = oscili(.05, 8)\n    asig = vco2(igain, ifreq, 4, .5 + kpwm)\n    asig += vco2(igain, ifreq * 2)\n\n    idepth = 2\n    acut = transegr:a(0, .005, 0, idepth, .06, -4.2, 0.001, .01, -4.2, 0) ; filter envelope\n    asig = zdf_2pole(asig, cpsoct(ioct + acut + 2), 0.5)\n\n    iattack = .01\n    isustain = .5\n    idecay = .1\n    irelease = .1\n    asig *= linsegr:a(0, iattack, 1, idecay, isustain, iduration, isustain, irelease, 0)\n    \n    out(asig, asig)\nendin\\`\n\n\"<0 2 [4 6](3,4,2) 3*2>\"\n.off(1/4, add(2))\n.off(1/2, add(6))\n.scale('D minor')\n.note()\n//.pianoroll()\n.csound('CoolSynth')`;\n\nexport const loungeSponge = `// \"Lounge sponge\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos, livecode.orc by Steven Yi\n\nawait loadOrc('github:kunstmusik/csound-live-code/master/livecode.orc')\n\nstack(\n  chord(\"<C^7 A7 Dm7 Fm7>/2\").dict('lefthand').voicing()\n  .cutoff(sine.range(500,2000).round().slow(16))\n  .euclidLegato(3,8).csound('FM1')\n  ,\n  note(\"<C2 A1 D2 F2>/2\").ply(8).csound('Bass').gain(\"1 4 1 4\")\n  ,\n  n(\"0 7 [4 3] 2\".fast(2/3).off(\".25 .125\", add(\"<2 4 -3 -1>\"))\n  .slow(2).scale('A4 minor'))\n  .clip(.25).csound('SynHarp')\n  ,\n  s(\"bd*2,[~ hh]*2,~ cp\").bank('RolandTR909')\n)`;\n\nexport const arpoon = `// \"Arpoon\"\n// @license CC BY-NC-SA 4.0 https://creativecommons.org/licenses/by-nc-sa/4.0/\n// @by Felix Roos\n\nawait samples('github:tidalcycles/Dirt-Samples/master')\n\nn(\"[0,3] 2 [1,3] 2\".fast(3).lastOf(4, fast(2))).clip(2)\n  .offset(\"<<1 2> 2 1 1>\")\n  .chord(\"<<Am7 C^7> C7 F^7 [Fm7 E7b9]>\")\n  .dict('lefthand').voicing()\n  .add(perlin.range(0,0.2).add(\"<-12 0>/8\").note())\n  .cutoff(perlin.range(500,4000)).resonance(12)\n  .gain(\"<.5 .8>*16\")\n  .decay(.16).sustain(0.5)\n  .delay(.2)\n  .room(.5).pan(sine.range(.3,.6))\n  .s('piano')\n  .stack(\n    \"<<A1 C2>!2 F2 F2>\"\n    .add.out(\"0 -5\".fast(2))\n    .add(\"0,.12\").note()\n    .s('sawtooth').cutoff(180)\n    .lpa(.1).lpenv(2)\n  )\n  .slow(4)\n  .stack(s(\"bd*4, [~ [hh hh? hh?]]*2,~ [sd ~ [sd:2? bd?]]\").bank('RolandTR909').gain(.5).slow(2))\n`;\n","import { cx } from '@strudel.cycles/react';\nimport React from 'react';\n\nfunction Loader({ active }) {\n  return (\n    <div className=\"overflow-hidden opacity-50 fixed top-0 left-0 w-full z-[1000]\">\n      <div className={cx('h-[2px] block w-full', active ? 'bg-foreground animate-train' : 'bg-transparent')}>\n        <div />\n      </div>\n    </div>\n  );\n}\nexport default Loader;\n","export function unicodeToBase64(text) {\n  const utf8Bytes = new TextEncoder().encode(text);\n  const base64String = btoa(String.fromCharCode(...utf8Bytes));\n  return base64String;\n}\n\nexport function base64ToUnicode(base64String) {\n  const utf8Bytes = new Uint8Array(\n    atob(base64String)\n      .split('')\n      .map((char) => char.charCodeAt(0)),\n  );\n  const decodedText = new TextDecoder().decode(utf8Bytes);\n  return decodedText;\n}\n\nexport function code2hash(code) {\n  return encodeURIComponent(unicodeToBase64(code));\n  //return '#' + encodeURIComponent(btoa(code));\n}\n\nexport function hash2code(hash) {\n  return base64ToUnicode(decodeURIComponent(hash));\n  //return atob(decodeURIComponent(codeParam || ''));\n}\n","var d=Object.defineProperty;var e=(c,a)=>{for(var b in a)d(c,b,{get:a[b],enumerable:!0})};export{e as a};\n","import{a as c}from\"./chunk-FEIY7W7S.js\";var w={};c(w,{convertFileSrc:()=>u,invoke:()=>d,transformCallback:()=>s});function l(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function s(r,n=!1){let e=l(),t=`_${e}`;return Object.defineProperty(window,t,{value:o=>(n&&Reflect.deleteProperty(window,t),r?.(o)),writable:!1,configurable:!0}),e}async function d(r,n={}){return new Promise((e,t)=>{let o=s(i=>{e(i),Reflect.deleteProperty(window,`_${a}`)},!0),a=s(i=>{t(i),Reflect.deleteProperty(window,`_${o}`)},!0);window.__TAURI_IPC__({cmd:r,callback:o,error:a,...n})})}function u(r,n=\"asset\"){let e=encodeURIComponent(r);return navigator.userAgent.includes(\"Windows\")?`https://${n}.localhost/${e}`:`${n}://localhost/${e}`}export{s as a,d as b,u as c,w as d};\n","import { invoke } from '@tauri-apps/api/tauri';\n\nexport const Invoke = invoke;\nexport const isTauri = () => window.__TAURI_IPC__ != null;\n","/*\nApp.js - <short description TODO>\nCopyright (C) 2022 Strudel contributors - see <https://github.com/tidalcycles/strudel/blob/main/repl/src/App.js>\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { cleanupDraw, cleanupUi, controls, evalScope, getDrawContext, logger } from '@strudel.cycles/core';\nimport { CodeMirror, cx, flash, useHighlighting, useStrudel, useKeydown } from '@strudel.cycles/react';\nimport { getAudioContext, initAudioOnFirstClick, resetLoadedSounds, webaudioOutput } from '@strudel.cycles/webaudio';\nimport { createClient } from '@supabase/supabase-js';\nimport { nanoid } from 'nanoid';\nimport React, { createContext, useCallback, useEffect, useState, useMemo } from 'react';\nimport './Repl.css';\nimport { Footer } from './Footer';\nimport { Header } from './Header';\nimport { prebake } from './prebake.mjs';\nimport * as tunes from './tunes.mjs';\nimport PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\nimport { themes } from './themes.mjs';\nimport { settingsMap, useSettings, setLatestCode } from '../settings.mjs';\nimport Loader from './Loader';\nimport { settingPatterns } from '../settings.mjs';\nimport { code2hash, hash2code } from './helpers.mjs';\nimport { isTauri } from '../tauri.mjs';\n\nconst { latestCode } = settingsMap.get();\n\ninitAudioOnFirstClick();\n\n// Create a single supabase client for interacting with your database\nconst supabase = createClient(\n  'https://pidxdsxphlhzjnzmifth.supabase.co',\n  'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpZHhkc3hwaGxoempuem1pZnRoIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTYyMzA1NTYsImV4cCI6MTk3MTgwNjU1Nn0.bqlw7802fsWRnqU5BLYtmXk_k-D1VFmbkHMywWc15NM',\n);\n\nconst modules = [\n  import('@strudel.cycles/core'),\n  import('@strudel.cycles/tonal'),\n  import('@strudel.cycles/mini'),\n  import('@strudel.cycles/xen'),\n  import('@strudel.cycles/webaudio'),\n\n  import('@strudel.cycles/serial'),\n  import('@strudel.cycles/soundfonts'),\n  import('@strudel.cycles/csound'),\n];\nif (isTauri()) {\n  modules.concat([\n    import('@strudel/desktopbridge/loggerbridge.mjs'),\n    import('@strudel/desktopbridge/midibridge.mjs'),\n    import('@strudel/desktopbridge/oscbridge.mjs'),\n  ]);\n} else {\n  modules.concat([import('@strudel.cycles/midi'), import('@strudel.cycles/osc')]);\n}\n\nconst modulesLoading = evalScope(\n  controls, // sadly, this cannot be exported from core direclty\n  settingPatterns,\n  ...modules,\n);\n\nconst presets = prebake();\n\nlet drawContext, clearCanvas;\nif (typeof window !== 'undefined') {\n  drawContext = getDrawContext();\n  clearCanvas = () => drawContext.clearRect(0, 0, drawContext.canvas.height, drawContext.canvas.width);\n}\n\nconst getTime = () => getAudioContext().currentTime;\n\nasync function initCode() {\n  // load code from url hash (either short hash from database or decode long hash)\n  try {\n    const initialUrl = window.location.href;\n    const hash = initialUrl.split('?')[1]?.split('#')?.[0];\n    const codeParam = window.location.href.split('#')[1] || '';\n    // looking like https://strudel.tidalcycles.org/?J01s5i1J0200 (fixed hash length)\n    if (codeParam) {\n      // looking like https://strudel.tidalcycles.org/#ImMzIGUzIg%3D%3D (hash length depends on code length)\n      return hash2code(codeParam);\n    } else if (hash) {\n      return supabase\n        .from('code')\n        .select('code')\n        .eq('hash', hash)\n        .then(({ data, error }) => {\n          if (error) {\n            console.warn('failed to load hash', err);\n          }\n          if (data.length) {\n            //console.log('load hash from database', hash);\n            return data[0].code;\n          }\n        });\n    }\n  } catch (err) {\n    console.warn('failed to decode', err);\n  }\n}\n\nfunction getRandomTune() {\n  const allTunes = Object.entries(tunes);\n  const randomItem = (arr) => arr[Math.floor(Math.random() * arr.length)];\n  const [name, code] = randomItem(allTunes);\n  return { name, code };\n}\n\nconst { code: randomTune, name } = getRandomTune();\n\nexport const ReplContext = createContext(null);\n\nexport function Repl({ embedded = false }) {\n  const isEmbedded = embedded || window.location !== window.parent.location;\n  const [view, setView] = useState(); // codemirror view\n  const [lastShared, setLastShared] = useState();\n  const [pending, setPending] = useState(true);\n  const {\n    theme,\n    keybindings,\n    fontSize,\n    fontFamily,\n    isLineNumbersDisplayed,\n    isAutoCompletionEnabled,\n    isLineWrappingEnabled,\n    panelPosition,\n  } = useSettings();\n\n  const paintOptions = useMemo(() => ({ fontFamily }), [fontFamily]);\n\n  const { code, setCode, scheduler, evaluate, activateCode, isDirty, activeCode, pattern, started, stop, error } =\n    useStrudel({\n      initialCode: '// LOADING...',\n      defaultOutput: webaudioOutput,\n      getTime,\n      beforeEval: async () => {\n        setPending(true);\n        await modulesLoading;\n        cleanupUi();\n        cleanupDraw();\n      },\n      afterEval: ({ code, meta }) => {\n        setMiniLocations(meta.miniLocations);\n        setPending(false);\n        setLatestCode(code);\n        window.location.hash = '#' + code2hash(code);\n      },\n      onEvalError: (err) => {\n        setPending(false);\n      },\n      onToggle: (play) => {\n        if (!play) {\n          cleanupDraw(false);\n          window.postMessage('strudel-stop');\n        }\n      },\n      drawContext,\n      // drawTime: [0, 6],\n      paintOptions,\n    });\n\n  // init code\n  useEffect(() => {\n    initCode().then((decoded) => {\n      let msg;\n      if (decoded) {\n        setCode(decoded);\n        msg = `I have loaded the code from the URL.`;\n      } else if (latestCode) {\n        setCode(latestCode);\n        msg = `Your last session has been loaded!`;\n      } /*  if(randomTune) */ else {\n        setCode(randomTune);\n        msg = `A random code snippet named \"${name}\" has been loaded!`;\n      }\n      logger(`Welcome to Strudel! ${msg} Press play or hit ctrl+enter to run it!`, 'highlight');\n      setPending(false);\n    });\n  }, []);\n\n  // keyboard shortcuts\n  useKeydown(\n    useCallback(\n      async (e) => {\n        if (e.ctrlKey || e.altKey) {\n          if (e.code === 'Enter') {\n            if (getAudioContext().state !== 'running') {\n              alert('please click play to initialize the audio. you can use shortcuts after that!');\n              return;\n            }\n            e.preventDefault();\n            flash(view);\n            await activateCode();\n          } else if (e.key === '.' || e.code === 'Period') {\n            stop();\n            e.preventDefault();\n          }\n        }\n      },\n      [activateCode, stop, view],\n    ),\n  );\n\n  // highlighting\n  const { setMiniLocations } = useHighlighting({\n    view,\n    pattern,\n    active: started && !activeCode?.includes('strudel disable-highlighting'),\n    getTime: () => scheduler.now(),\n  });\n\n  //\n  // UI Actions\n  //\n\n  const handleChangeCode = useCallback(\n    (c) => {\n      setCode(c);\n      started && logger('[edit] code changed. hit ctrl+enter to update');\n    },\n    [started],\n  );\n  const handleSelectionChange = useCallback((selection) => {\n    // TODO: scroll to selected function in reference\n    // console.log('selectino change', selection.ranges[0].from);\n  }, []);\n\n  const handleTogglePlay = async () => {\n    await getAudioContext().resume(); // fixes no sound in ios webkit\n    if (!started) {\n      logger('[repl] started. tip: you can also start by pressing ctrl+enter', 'highlight');\n      activateCode();\n    } else {\n      logger('[repl] stopped. tip: you can also stop by pressing ctrl+dot', 'highlight');\n      stop();\n    }\n  };\n  const handleUpdate = () => {\n    isDirty && activateCode();\n    logger('[repl] code updated! tip: you can also update the code by pressing ctrl+enter', 'highlight');\n  };\n\n  const handleShuffle = async () => {\n    const { code, name } = getRandomTune();\n    logger(`[repl]  loading random tune \"${name}\"`);\n    clearCanvas();\n    resetLoadedSounds();\n    scheduler.setCps(1);\n    await prebake(); // declare default samples\n    await evaluate(code, false);\n  };\n\n  const handleShare = async () => {\n    const codeToShare = activeCode || code;\n    if (lastShared === codeToShare) {\n      logger(`Link already generated!`, 'error');\n      return;\n    }\n    // generate uuid in the browser\n    const hash = nanoid(12);\n    const shareUrl = window.location.origin + window.location.pathname + '?' + hash;\n    const { data, error } = await supabase.from('code').insert([{ code: codeToShare, hash }]);\n    if (!error) {\n      setLastShared(activeCode || code);\n      // copy shareUrl to clipboard\n      await navigator.clipboard.writeText(shareUrl);\n      const message = `Link copied to clipboard: ${shareUrl}`;\n      alert(message);\n      // alert(message);\n      logger(message, 'highlight');\n    } else {\n      console.log('error', error);\n      const message = `Error: ${error.message}`;\n      // alert(message);\n      logger(message);\n    }\n  };\n  const context = {\n    scheduler,\n    embedded,\n    started,\n    pending,\n    isDirty,\n    lastShared,\n    activeCode,\n    handleChangeCode,\n    handleTogglePlay,\n    handleUpdate,\n    handleShuffle,\n    handleShare,\n  };\n  const currentTheme = useMemo(() => themes[theme] || themes.strudelTheme, [theme]);\n  const handleViewChanged = useCallback((v) => {\n    setView(v);\n  }, []);\n\n  return (\n    // bg-gradient-to-t from-blue-900 to-slate-900\n    // bg-gradient-to-t from-green-900 to-slate-900\n    <ReplContext.Provider value={context}>\n      <div\n        className={cx(\n          'h-full flex flex-col relative',\n          // overflow-hidden\n        )}\n      >\n        <Loader active={pending} />\n        <Header context={context} />\n        {isEmbedded && !started && (\n          <button\n            onClick={() => handleTogglePlay()}\n            className=\"text-white text-2xl fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-[1000] m-auto p-4 bg-black rounded-md flex items-center space-x-2\"\n          >\n            <PlayCircleIcon className=\"w-6 h-6\" />\n            <span>play</span>\n          </button>\n        )}\n        <div className=\"grow flex relative overflow-hidden\">\n          <section className=\"text-gray-100 cursor-text pb-0 overflow-auto grow\" id=\"code\">\n            <CodeMirror\n              theme={currentTheme}\n              value={code}\n              keybindings={keybindings}\n              isLineNumbersDisplayed={isLineNumbersDisplayed}\n              isAutoCompletionEnabled={isAutoCompletionEnabled}\n              isLineWrappingEnabled={isLineWrappingEnabled}\n              fontSize={fontSize}\n              fontFamily={fontFamily}\n              onChange={handleChangeCode}\n              onViewChanged={handleViewChanged}\n              onSelectionChange={handleSelectionChange}\n            />\n          </section>\n          {panelPosition === 'right' && !isEmbedded && <Footer context={context} />}\n        </div>\n        {error && (\n          <div className=\"text-red-500 p-4 bg-lineHighlight animate-pulse\">{error.message || 'Unknown Error :-/'}</div>\n        )}\n        {panelPosition === 'bottom' && !isEmbedded && <Footer context={context} />}\n      </div>\n    </ReplContext.Provider>\n  );\n}\n"],"file":"_astro/Repl.ca27a478.js"}