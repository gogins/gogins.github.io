/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var lc=2e3,m={s:1,n:0,d:1};function Q(t,e){if(isNaN(t=parseInt(t,10)))throw ht();return t*e}function T(t,e){if(e===0)throw Mt();var n=Object.create(k.prototype);n.s=t<0?-1:1,t=t<0?-t:t;var s=Z(t,e);return n.n=t/s,n.d=e/s,n}function Kt(t){for(var e={},n=t,s=2,r=4;r<=n;){for(;n%s===0;)n/=s,e[s]=(e[s]||0)+1;r+=1+2*s++}return n!==t?n>1&&(e[n]=(e[n]||0)+1):e[t]=(e[t]||0)+1,e}var $=function(t,e){var n=0,s=1,r=1,o=0,i=0,u=0,a=1,d=1,l=0,h=1,_=1,w=1,b=1e7,q;if(t!=null)if(e!==void 0){if(n=t,s=e,r=n*s,n%1!==0||s%1!==0)throw pc()}else switch(typeof t){case"object":{if("d"in t&&"n"in t)n=t.n,s=t.d,"s"in t&&(n*=t.s);else if(0 in t)n=t[0],1 in t&&(s=t[1]);else throw ht();r=n*s;break}case"number":{if(t<0&&(r=t,t=-t),t%1===0)n=t;else if(t>0){for(t>=1&&(d=Math.pow(10,Math.floor(1+Math.log(t)/Math.LN10)),t/=d);h<=b&&w<=b;)if(q=(l+_)/(h+w),t===q){h+w<=b?(n=l+_,s=h+w):w>h?(n=_,s=w):(n=l,s=h);break}else t>q?(l+=_,h+=w):(_+=l,w+=h),h>b?(n=_,s=w):(n=l,s=h);n*=d}else(isNaN(t)||isNaN(e))&&(s=n=NaN);break}case"string":{if(h=t.match(/\d+|./g),h===null)throw ht();if(h[l]==="-"?(r=-1,l++):h[l]==="+"&&l++,h.length===l+1?i=Q(h[l++],r):h[l+1]==="."||h[l]==="."?(h[l]!=="."&&(o=Q(h[l++],r)),l++,(l+1===h.length||h[l+1]==="("&&h[l+3]===")"||h[l+1]==="'"&&h[l+3]==="'")&&(i=Q(h[l],r),a=Math.pow(10,h[l].length),l++),(h[l]==="("&&h[l+2]===")"||h[l]==="'"&&h[l+2]==="'")&&(u=Q(h[l+1],r),d=Math.pow(10,h[l+1].length)-1,l+=3)):h[l+1]==="/"||h[l+1]===":"?(i=Q(h[l],r),a=Q(h[l+2],1),l+=3):h[l+3]==="/"&&h[l+1]===" "&&(o=Q(h[l],r),i=Q(h[l+2],r),a=Q(h[l+4],1),l+=5),h.length<=l){s=a*d,r=n=u+s*o+d*i;break}}default:throw ht()}if(s===0)throw Mt();m.s=r<0?-1:1,m.n=Math.abs(n),m.d=Math.abs(s)};function fc(t,e,n){for(var s=1;e>0;t=t*t%n,e>>=1)e&1&&(s=s*t%n);return s}function hc(t,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var n=10%e,s=1;n!==1;s++)if(n=n*10%e,s>lc)return 0;return s}function dc(t,e,n){for(var s=1,r=fc(10,n,e),o=0;o<300;o++){if(s===r)return o;s=s*10%e,r=r*10%e}return 0}function Z(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function k(t,e){if($(t,e),this instanceof k)t=Z(m.d,m.n),this.s=m.s,this.n=m.n/t,this.d=m.d/t;else return T(m.s*m.n,m.d)}var Mt=function(){return new Error("Division by Zero")},ht=function(){return new Error("Invalid argument")},pc=function(){return new Error("Parameters must be integer")};k.prototype={s:1,n:0,d:1,abs:function(){return T(this.n,this.d)},neg:function(){return T(-this.s*this.n,this.d)},add:function(t,e){return $(t,e),T(this.s*this.n*m.d+m.s*this.d*m.n,this.d*m.d)},sub:function(t,e){return $(t,e),T(this.s*this.n*m.d-m.s*this.d*m.n,this.d*m.d)},mul:function(t,e){return $(t,e),T(this.s*m.s*this.n*m.n,this.d*m.d)},div:function(t,e){return $(t,e),T(this.s*m.s*this.n*m.d,this.d*m.n)},clone:function(){return T(this.s*this.n,this.d)},mod:function(t,e){if(isNaN(this.n)||isNaN(this.d))return new k(NaN);if(t===void 0)return T(this.s*this.n%this.d,1);if($(t,e),m.n===0&&this.d===0)throw Mt();return T(this.s*(m.d*this.n)%(m.n*this.d),m.d*this.d)},gcd:function(t,e){return $(t,e),T(Z(m.n,this.n)*Z(m.d,this.d),m.d*this.d)},lcm:function(t,e){return $(t,e),m.n===0&&this.n===0?T(0,1):T(m.n*this.n,Z(m.n,this.n)*Z(m.d,this.d))},ceil:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.ceil(t*this.s*this.n/this.d),t)},floor:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.floor(t*this.s*this.n/this.d),t)},round:function(t){return t=Math.pow(10,t||0),isNaN(this.n)||isNaN(this.d)?new k(NaN):T(Math.round(t*this.s*this.n/this.d),t)},roundTo:function(t,e){return $(t,e),T(this.s*Math.round(this.n*m.d/(this.d*m.n))*m.n,m.d)},inverse:function(){return T(this.s*this.d,this.n)},pow:function(t,e){if($(t,e),m.d===1)return m.s<0?T(Math.pow(this.s*this.d,m.n),Math.pow(this.n,m.n)):T(Math.pow(this.s*this.n,m.n),Math.pow(this.d,m.n));if(this.s<0)return null;var n=Kt(this.n),s=Kt(this.d),r=1,o=1;for(var i in n)if(i!=="1"){if(i==="0"){r=0;break}if(n[i]*=m.n,n[i]%m.d===0)n[i]/=m.d;else return null;r*=Math.pow(i,n[i])}for(var i in s)if(i!=="1"){if(s[i]*=m.n,s[i]%m.d===0)s[i]/=m.d;else return null;o*=Math.pow(i,s[i])}return m.s<0?T(o,r):T(r,o)},equals:function(t,e){return $(t,e),this.s*this.n*m.d===m.s*m.n*this.d},compare:function(t,e){$(t,e);var n=this.s*this.n*m.d-m.s*m.n*this.d;return(0<n)-(n<0)},simplify:function(t){if(isNaN(this.n)||isNaN(this.d))return this;t=t||.001;for(var e=this.abs(),n=e.toContinued(),s=1;s<n.length;s++){for(var r=T(n[s-1],1),o=s-2;o>=0;o--)r=r.inverse().add(n[o]);if(Math.abs(r.sub(e).valueOf())<t)return r.mul(this.s)}return this},divisible:function(t,e){return $(t,e),!(!(m.n*this.d)||this.n*m.d%(m.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(t){var e,n="",s=this.n,r=this.d;return this.s<0&&(n+="-"),r===1?n+=s:(t&&(e=Math.floor(s/r))>0&&(n+=e,n+=" ",s%=r),n+=s,n+="/",n+=r),n},toLatex:function(t){var e,n="",s=this.n,r=this.d;return this.s<0&&(n+="-"),r===1?n+=s:(t&&(e=Math.floor(s/r))>0&&(n+=e,s%=r),n+="\\frac{",n+=s,n+="}{",n+=r,n+="}"),n},toContinued:function(){var t,e=this.n,n=this.d,s=[];if(isNaN(e)||isNaN(n))return s;do s.push(Math.floor(e/n)),t=e%n,e=n,n=t;while(e!==1);return s},toString:function(t){var e=this.n,n=this.d;if(isNaN(e)||isNaN(n))return"NaN";t=t||15;var s=hc(e,n),r=dc(e,n,s),o=this.s<0?"-":"";if(o+=e/n|0,e%=n,e*=10,e&&(o+="."),s){for(var i=r;i--;)o+=e/n|0,e%=n,e*=10;o+="(";for(var i=s;i--;)o+=e/n|0,e%=n,e*=10;o+=")"}else for(var i=t;e&&i--;)o+=e/n|0,e%=n,e*=10;return o}};const St="strudel.log";let mc=1e3,Xt,Yt;function E(t,e,n={}){let s=performance.now();Xt===t&&s-Yt<mc||(Xt=t,Yt=s,console.log(`%c${t}`,"background-color: black;color:white;border-radius:15px"),typeof document<"u"&&typeof CustomEvent<"u"&&document.dispatchEvent(new CustomEvent(St,{detail:{message:t,type:e,data:n}})))}E.key=St;const yc=t=>/^[a-gA-G][#bs]*[0-9]$/.test(t),pt=t=>/^[a-gA-G][#bsf]*[0-9]?$/.test(t),ee=t=>{if(typeof t!="string")return[];const[e,n="",s]=t.match(/^([a-gA-G])([#bsf]*)([0-9]*)$/)?.slice(1)||[];return e?[e,n,s?Number(s):void 0]:[]},gc={c:0,d:2,e:4,f:5,g:7,a:9,b:11},wc={"#":1,b:-1,s:1,f:-1},ot=(t,e=3)=>{const[n,s,r=e]=ee(t);if(!n)throw new Error('not a note: "'+t+'"');const o=gc[n.toLowerCase()],i=s?.split("").reduce((u,a)=>u+wc[a],0)||0;return(Number(r)+1)*12+o+i},et=t=>Math.pow(2,(t-69)/12)*440,ne=t=>12*Math.log(t/440)/Math.LN2+69,bc=(t,e)=>{if(typeof t!="object")throw new Error("valueToMidi: expected object value");let{freq:n,note:s}=t;if(typeof n=="number")return ne(n);if(typeof s=="string")return ot(s);if(typeof s=="number")return s;if(!e)throw new Error("valueToMidi: expected freq or note to be set");return e},_c=(t,e)=>(t-e)*1e3,se=t=>et(typeof t=="number"?t:ot(t)),vc=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],kc=t=>{const e=Math.floor(t/12)-1;return vc[t%12]+e},it=(t,e)=>(t%e+e)%e;function re(t,e=0){return isNaN(Number(t))?(E(`"${t}" is not a number, falling back to ${e}`,"warning"),e):t}const qc=(t,e)=>it(Math.round(re(t??0,0)),e),Ac=t=>{let{value:e,context:n}=t,s=e;if(typeof s=="object"&&!Array.isArray(s)&&(s=s.note||s.n||s.value,s===void 0))throw new Error(`cannot find a playable note for ${JSON.stringify(e)}`);if(typeof s=="number"&&n.type!=="frequency")s=et(t.value);else if(typeof s=="number"&&n.type==="frequency")s=t.value;else if(typeof s!="string"||!pt(s))throw new Error("not a note: "+JSON.stringify(s));return s},Tc=t=>{let{value:e,context:n}=t;if(typeof e=="object")return e.freq?e.freq:se(e.note||e.n||e.value);if(typeof e=="number"&&n.type!=="frequency")e=et(t.value);else if(typeof e=="string"&&pt(e))e=et(ot(t.value));else if(typeof e!="number")throw new Error("not a note or frequency: "+e);return e},oe=(t,e)=>t.slice(e).concat(t.slice(0,e)),ie=(...t)=>t.reduce((e,n)=>(...s)=>e(n(...s)),e=>e),Nc=(...t)=>ie(...t.reverse()),st=t=>t.filter(e=>e!=null),U=t=>[].concat(...t),tt=t=>t,Cc=(t,e)=>t,Bt=(t,e)=>Array.from({length:e-t+1},(n,s)=>s+t);function v(t,e,n=t.length){const s=function r(...o){if(o.length>=n)return t.apply(this,o);{const i=function(...u){return r.apply(this,o.concat(u))};return e&&e(i,o),i}};return e&&e(s,[]),s}function xt(t){const e=Number(t);if(!isNaN(e))return e;if(pt(t))return ot(t);throw new Error(`cannot parse as numeral: "${t}"`)}function Ot(t,e){return(...n)=>t(...n.map(e))}function P(t){return Ot(t,xt)}function ce(t){const e=Number(t);if(!isNaN(e))return e;const n={pi:Math.PI,w:1,h:.5,q:.25,e:.125,s:.0625,t:1/3,f:.2,x:1/6}[t];if(typeof n<"u")return n;throw new Error(`cannot parse as fractional: "${t}"`)}const Mc=t=>Ot(t,ce),zt=function(t,e){return[e.slice(0,t),e.slice(t)]},Et=(t,e,n)=>e.map((s,r)=>t(s,n[r])),ue=function(t){const e=[];for(let n=0;n<t.length-1;++n)e.push([t[n],t[n+1]]);return e},ae=(t,e,n)=>Math.min(Math.max(t,e),n),Sc=["Do","Reb","Re","Mib","Mi","Fa","Solb","Sol","Lab","La","Sib","Si"],Bc=["Sa","Re","Ga","Ma","Pa","Dha","Ni"],xc=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Hb","H"],Oc=["Ni","Pab","Pa","Voub","Vou","Ga","Dib","Di","Keb","Ke","Zob","Zo"],zc=["I","Ro","Ha","Ni","Ho","He","To"],Ec=["C","Db","D","Eb","E","F","Gb","G","Ab","A","Bb","B"],jc=(t,e="letters")=>{const s=(e==="solfeggio"?Sc:e==="indian"?Bc:e==="german"?xc:e==="byzantine"?Oc:e==="japanese"?zc:Ec)[t%12],r=Math.floor(t/12)-1;return s+r};function Jc(t){var e={};return t.filter(function(n){return e.hasOwn(n)?!1:e[n]=!0})}function $c(t){return t.sort().filter(function(e,n,s){return!n||e!=s[n-1]})}function le(t){return t.sort((e,n)=>e.compare(n)).filter(function(e,n,s){return!n||e.ne(s[n-1])})}function fe(t){const e=new TextEncoder().encode(t);return btoa(String.fromCharCode(...e))}function he(t){const e=new Uint8Array(atob(t).split("").map(s=>s.charCodeAt(0)));return new TextDecoder().decode(e)}function Pc(t){return encodeURIComponent(fe(t))}function Lc(t){return he(decodeURIComponent(t))}function de(t,e){return Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([n,s],r)=>[n,e(s,n,r)]))}k.prototype.sam=function(){return this.floor()};k.prototype.nextSam=function(){return this.sam().add(1)};k.prototype.wholeCycle=function(){return new S(this.sam(),this.nextSam())};k.prototype.cyclePos=function(){return this.sub(this.sam())};k.prototype.lt=function(t){return this.compare(t)<0};k.prototype.gt=function(t){return this.compare(t)>0};k.prototype.lte=function(t){return this.compare(t)<=0};k.prototype.gte=function(t){return this.compare(t)>=0};k.prototype.eq=function(t){return this.compare(t)==0};k.prototype.ne=function(t){return this.compare(t)!=0};k.prototype.max=function(t){return this.gt(t)?this:t};k.prototype.maximum=function(...t){return t=t.map(e=>new k(e)),t.reduce((e,n)=>n.max(e),this)};k.prototype.min=function(t){return this.lt(t)?this:t};k.prototype.mulmaybe=function(t){return t!==void 0?this.mul(t):void 0};k.prototype.divmaybe=function(t){return t!==void 0?this.div(t):void 0};k.prototype.addmaybe=function(t){return t!==void 0?this.add(t):void 0};k.prototype.submaybe=function(t){return t!==void 0?this.sub(t):void 0};k.prototype.show=function(){return this.s*this.n+"/"+this.d};k.prototype.or=function(t){return this.eq(0)?t:this};const y=t=>k(t),Rc=(...t)=>{if(t=st(t),t.length!==0)return t.reduce((e,n)=>e.gcd(n),y(1))},ct=(...t)=>{if(t=st(t),t.length===0)return;const e=t.pop();return t.reduce((n,s)=>n===void 0||s===void 0?void 0:n.lcm(s),e)};y._original=k;class S{constructor(e,n){this.begin=y(e),this.end=y(n)}get spanCycles(){const e=[];var n=this.begin;const s=this.end,r=s.sam();if(n.equals(s))return[new S(n,s)];for(;s.gt(n);){if(n.sam().equals(r)){e.push(new S(n,this.end));break}const o=n.nextSam();e.push(new S(n,o)),n=o}return e}get duration(){return this.end.sub(this.begin)}cycleArc(){const e=this.begin.cyclePos(),n=e.add(this.duration);return new S(e,n)}withTime(e){return new S(e(this.begin),e(this.end))}withEnd(e){return new S(this.begin,e(this.end))}withCycle(e){const n=this.begin.sam(),s=n.add(e(this.begin.sub(n))),r=n.add(e(this.end.sub(n)));return new S(s,r)}intersection(e){const n=this.begin.max(e.begin),s=this.end.min(e.end);if(!n.gt(s)&&!(n.equals(s)&&(n.equals(this.end)&&this.begin.lt(this.end)||n.equals(e.end)&&e.begin.lt(e.end))))return new S(n,s)}intersection_e(e){const n=this.intersection(e);if(n==null)throw"TimeSpans do not intersect";return n}midpoint(){return this.begin.add(this.duration.div(y(2)))}equals(e){return this.begin.equals(e.begin)&&this.end.equals(e.end)}show(){return this.begin.show()+" → "+this.end.show()}}class M{constructor(e,n,s,r={},o=!1){this.whole=e,this.part=n,this.value=s,this.context=r,this.stateful=o,o&&console.assert(typeof this.value=="function","Stateful values must be functions")}get duration(){let e;return typeof this.value?.duration=="number"?e=y(this.value.duration):e=this.whole.end.sub(this.whole.begin),typeof this.value?.clip=="number"?e.mul(this.value.clip):e}get endClipped(){return this.whole.begin.add(this.duration)}isActive(e){return this.whole.begin<=e&&this.endClipped>=e}isInPast(e){return e>this.endClipped}isInNearPast(e,n){return n-e<=this.endClipped}isInFuture(e){return e<this.whole.begin}isInNearFuture(e,n){return n<this.whole.begin&&n>this.whole.begin-e}isWithinTime(e,n){return this.whole.begin<=n&&this.endClipped>=e}wholeOrPart(){return this.whole?this.whole:this.part}withSpan(e){const n=this.whole?e(this.whole):void 0;return new M(n,e(this.part),this.value,this.context)}withValue(e){return new M(this.whole,this.part,e(this.value),this.context)}hasOnset(){return this.whole!=null&&this.whole.begin.equals(this.part.begin)}hasTag(e){return this.context.tags?.includes(e)}resolveState(e){if(this.stateful&&this.hasOnset()){console.log("stateful");const n=this.value,[s,r]=n(e);return[s,new M(this.whole,this.part,r,this.context,!1)]}return[e,this]}spanEquals(e){return this.whole==null&&e.whole==null||this.whole.equals(e.whole)}equals(e){return this.spanEquals(e)&&this.part.equals(e.part)&&this.value===e.value}show(e=!1){const n=typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value;var s="";if(this.whole==null)s="~"+this.part.show;else{var r=this.whole.begin.equals(this.part.begin)&&this.whole.end.equals(this.part.end);this.whole.begin.equals(this.part.begin)||(s=this.whole.begin.show()+" ⇜ "),r||(s+="("),s+=this.part.show(),r||(s+=")"),this.whole.end.equals(this.part.end)||(s+=" ⇝ "+this.whole.end.show())}return"[ "+s+" | "+n+" ]"}showWhole(e=!1){return`${this.whole==null?"~":this.whole.show()}: ${typeof this.value=="object"?e?JSON.stringify(this.value).slice(1,-1).replaceAll('"',"").replaceAll(","," "):JSON.stringify(this.value):this.value}`}combineContext(e){const n=this;return{...n.context,...e.context,locations:(n.context.locations||[]).concat(e.context.locations||[])}}setContext(e){return new M(this.whole,this.part,this.value,e)}ensureObjectValue(){if(typeof this.value!="object")throw new Error(`expected hap.value to be an object, but got "${this.value}". Hint: append .note() or .s() to the end`,"error")}}class nt{constructor(e,n={}){this.span=e,this.controls=n}setSpan(e){return new nt(e,this.controls)}withSpan(e){return this.setSpan(e(this.span))}setControls(e){return new nt(this.span,e)}}function Wc(t,e,n){if(e?.value!==void 0&&Object.keys(e).length===1)return E("[warn]: Can't do arithmetic on control pattern."),t;const s=Object.keys(t).filter(r=>Object.keys(e).includes(r));return Object.assign({},t,e,Object.fromEntries(s.map(r=>[r,n(t[r],e[r])])))}v((t,e)=>t*e);v((t,e)=>e.map(t));function pe(t,e=60){let n=0,s=y(0),r=[""],o="";for(;r[0].length<e;){const i=t.queryArc(n,n+1),u=i.filter(l=>l.hasOnset()).map(l=>l.duration),a=Rc(...u),d=a.inverse();r=r.map(l=>l+"|"),o+="|";for(let l=0;l<d;l++){const[h,_]=[s,s.add(a)],w=i.filter(q=>q.whole.begin.lte(h)&&q.whole.end.gte(_)),b=w.length-r.length;b>0&&(r=r.concat(Array(b).fill(o))),r=r.map((q,O)=>{const z=w[O];if(z){const X=z.whole.begin.eq(h)?""+z.value:"-";return q+X}return q+"."}),o+=".",s=s.add(a)}n++}return r.join(`
`)}let vt,I=!0;const Ic=function(t){I=!!t},Hc=t=>vt=t;class p{constructor(e,n=void 0){this.query=e,this._Pattern=!0,this.tactus=n}get tactus(){return this.__tactus}set tactus(e){this.__tactus=e===void 0?void 0:y(e)}setTactus(e){return this.tactus=e,this}withTactus(e){return I?new p(this.query,this.tactus===void 0?void 0:e(this.tactus)):this}get hasTactus(){return this.tactus!==void 0}withValue(e){const n=new p(s=>this.query(s).map(r=>r.withValue(e)));return n.tactus=this.tactus,n}withState(e){return this.withHaps((n,s)=>(e(s),n))}fmap(e){return this.withValue(e)}appWhole(e,n){const s=this,r=function(o){const i=s.query(o),u=n.query(o),a=function(d,l){const h=d.part.intersection(l.part);if(h!=null)return new M(e(d.whole,l.whole),h,d.value(l.value),l.combineContext(d))};return U(i.map(d=>st(u.map(l=>a(d,l)))))};return new p(r)}appBoth(e){const n=this,s=function(o,i){if(!(o==null||i==null))return o.intersection_e(i)},r=n.appWhole(s,e);return I&&(r.tactus=ct(e.tactus,n.tactus)),r}appLeft(e){const n=this,s=function(o){const i=[];for(const u of n.query(o)){const a=e.query(o.setSpan(u.wholeOrPart()));for(const d of a){const l=u.whole,h=u.part.intersection(d.part);if(h){const _=u.value(d.value),w=d.combineContext(u),b=new M(l,h,_,w);i.push(b)}}}return i},r=new p(s);return r.tactus=this.tactus,r}appRight(e){const n=this,s=function(o){const i=[];for(const u of e.query(o)){const a=n.query(o.setSpan(u.wholeOrPart()));for(const d of a){const l=u.whole,h=d.part.intersection(u.part);if(h){const _=d.value(u.value),w=u.combineContext(d),b=new M(l,h,_,w);i.push(b)}}}return i},r=new p(s);return r.tactus=e.tactus,r}bindWhole(e,n){const s=this,r=function(o){const i=function(a,d){return new M(e(a.whole,d.whole),d.part,d.value,Object.assign({},a.context,d.context,{locations:(a.context.locations||[]).concat(d.context.locations||[])}))},u=function(a){return n(a.value).query(o.setSpan(a.part)).map(d=>i(a,d))};return U(s.query(o).map(a=>u(a)))};return new p(r)}bind(e){const n=function(s,r){if(!(s==null||r==null))return s.intersection_e(r)};return this.bindWhole(n,e)}join(){return this.bind(tt)}outerBind(e){return this.bindWhole(n=>n,e).setTactus(this.tactus)}outerJoin(){return this.outerBind(tt)}innerBind(e){return this.bindWhole((n,s)=>s,e)}innerJoin(){return this.innerBind(tt)}resetJoin(e=!1){const n=this;return new p(s=>n.discreteOnly().query(s).map(r=>r.value.late(e?r.whole.begin:r.whole.begin.cyclePos()).query(s).map(o=>new M(o.whole?o.whole.intersection(r.whole):void 0,o.part.intersection(r.part),o.value).setContext(r.combineContext(o))).filter(o=>o.part)).flat())}restartJoin(){return this.resetJoin(!0)}squeezeJoin(){const e=this;function n(s){const r=e.discreteOnly().query(s);function o(u){const d=u.value._focusSpan(u.wholeOrPart()).query(s.setSpan(u.part));function l(h,_){let w;if(_.whole&&h.whole&&(w=_.whole.intersection(h.whole),!w))return;const b=_.part.intersection(h.part);if(!b)return;const q=_.combineContext(h);return new M(w,b,_.value,q)}return d.map(h=>l(u,h))}return U(r.map(o)).filter(u=>u)}return new p(n)}squeezeBind(e){return this.fmap(e).squeezeJoin()}queryArc(e,n,s={}){try{return this.query(new nt(new S(e,n),s))}catch(r){return E(`[query]: ${r.message}`,"error"),[]}}splitQueries(){const e=this,n=s=>U(s.span.spanCycles.map(r=>e.query(s.setSpan(r))));return new p(n)}withQuerySpan(e){return new p(n=>this.query(n.withSpan(e)))}withQuerySpanMaybe(e){const n=this;return new p(s=>{const r=s.withSpan(e);return r.span?n.query(r):[]})}withQueryTime(e){return new p(n=>this.query(n.withSpan(s=>s.withTime(e))))}withHapSpan(e){return new p(n=>this.query(n).map(s=>s.withSpan(e)))}withHapTime(e){return this.withHapSpan(n=>n.withTime(e))}withHaps(e){const n=new p(s=>e(this.query(s),s));return n.tactus=this.tactus,n}withHap(e){return this.withHaps(n=>n.map(e))}setContext(e){return this.withHap(n=>n.setContext(e))}withContext(e){const n=this.withHap(s=>s.setContext(e(s.context)));return this.__pure!==void 0&&(n.__pure=this.__pure,n.__pure_loc=this.__pure_loc),n}stripContext(){return this.withHap(e=>e.setContext({}))}withLoc(e,n){const s={start:e,end:n},r=this.withContext(o=>{const i=(o.locations||[]).concat([s]);return{...o,locations:i}});return this.__pure&&(r.__pure=this.__pure,r.__pure_loc=s),r}filterHaps(e){return new p(n=>this.query(n).filter(e))}filterValues(e){return new p(n=>this.query(n).filter(s=>e(s.value))).setTactus(this.tactus)}removeUndefineds(){return this.filterValues(e=>e!=null)}onsetsOnly(){return this.filterHaps(e=>e.hasOnset())}discreteOnly(){return this.filterHaps(e=>e.whole)}defragmentHaps(){return this.discreteOnly().withHaps(n=>{const s=[];for(var r=0;r<n.length;++r){for(var o=!0,i=n[r];o;){const d=JSON.stringify(n[r].value);for(var u=!1,a=r+1;a<n.length;a++){const l=n[a];if(i.whole.equals(l.whole)){if(i.part.begin.eq(l.part.end)){if(d===JSON.stringify(l.value)){i=new M(i.whole,new S(l.part.begin,i.part.end),i.value),n.splice(a,1),u=!0;break}}else if(l.part.begin.eq(i.part.end)&&d==JSON.stringify(l.value)){i=new M(i.whole,new S(i.part.begin,l.part.end),i.value),n.splice(a,1),u=!0;break}}}o=u}s.push(i)}return s})}firstCycle(e=!1){var n=this;return e||(n=n.stripContext()),n.query(new nt(new S(y(0),y(1))))}get firstCycleValues(){return this.firstCycle().map(e=>e.value)}get showFirstCycle(){return this.firstCycle().map(e=>`${e.value}: ${e.whole.begin.toFraction()} - ${e.whole.end.toFraction()}`)}sortHapsByPart(){return this.withHaps(e=>e.sort((n,s)=>n.part.begin.sub(s.part.begin).or(n.part.end.sub(s.part.end)).or(n.whole.begin.sub(s.whole.begin).or(n.whole.end.sub(s.whole.end)))))}asNumber(){return this.fmap(xt)}_opIn(e,n){return this.fmap(n).appLeft(g(e))}_opOut(e,n){return this.fmap(n).appRight(g(e))}_opMix(e,n){return this.fmap(n).appBoth(g(e))}_opSqueeze(e,n){const s=g(e);return this.fmap(r=>s.fmap(o=>n(r)(o))).squeezeJoin()}_opSqueezeOut(e,n){const s=this;return g(e).fmap(o=>s.fmap(i=>n(i)(o))).squeezeJoin()}_opReset(e,n){return g(e).fmap(r=>this.fmap(o=>n(o)(r))).resetJoin()}_opRestart(e,n){return g(e).fmap(r=>this.fmap(o=>n(o)(r))).restartJoin()}layer(...e){return x(...e.map(n=>n(this)))}superimpose(...e){return this.stack(...e.map(n=>n(this)))}stack(...e){return x(this,...e)}sequence(...e){return F(this,...e)}seq(...e){return F(this,...e)}cat(...e){return we(this,...e)}fastcat(...e){return V(this,...e)}slowcat(...e){return Y(this,...e)}onTrigger(e,n=!0){return this.withHap(s=>s.setContext({...s.context,onTrigger:(...r)=>{s.context.onTrigger?.(...r),e(...r)},dominantTrigger:s.context.dominantTrigger||n}))}log(e=(s,r)=>`[hap] ${r.showWhole(!0)}`,n=(s,r)=>({hap:r})){return this.onTrigger((...s)=>{E(e(...s),void 0,n(...s))},!1)}logValues(e=tt){return this.log((n,s)=>e(s.value))}drawLine(){return console.log(pe(this)),this}}function Fc(t,e){let n=[];return e.forEach(s=>{const r=n.findIndex(([o])=>t(s,o));r===-1?n.push([s]):n[r].push(s)}),n}const Vc=(t,e)=>t.spanEquals(e);p.prototype.collect=function(){return this.withHaps(t=>Fc(Vc,t).map(e=>new M(e[0].whole,e[0].part,e,{})))};p.prototype.arpWith=function(t){return this.collect().fmap(e=>g(t(e))).innerJoin().withHap(e=>new M(e.whole,e.part,e.value.value,e.combineContext(e.value)))};p.prototype.arp=function(t){return this.arpWith(e=>t.fmap(n=>e[n%e.length]))};function ft(t){return!Array.isArray(t)&&typeof t=="object"}function Dc(t,e,n){return ft(t)||ft(e)?(ft(t)||(t={value:t}),ft(e)||(e={value:e}),Wc(t,e,n)):n(t,e)}(function(){const t={set:[(n,s)=>s],keep:[n=>n],keepif:[(n,s)=>s?n:void 0],add:[P((n,s)=>n+s)],sub:[P((n,s)=>n-s)],mul:[P((n,s)=>n*s)],div:[P((n,s)=>n/s)],mod:[P(it)],pow:[P(Math.pow)],band:[P((n,s)=>n&s)],bor:[P((n,s)=>n|s)],bxor:[P((n,s)=>n^s)],blshift:[P((n,s)=>n<<s)],brshift:[P((n,s)=>n>>s)],lt:[(n,s)=>n<s],gt:[(n,s)=>n>s],lte:[(n,s)=>n<=s],gte:[(n,s)=>n>=s],eq:[(n,s)=>n==s],eqt:[(n,s)=>n===s],ne:[(n,s)=>n!=s],net:[(n,s)=>n!==s],and:[(n,s)=>n&&s],or:[(n,s)=>n||s],func:[(n,s)=>s(n)]},e=["In","Out","Mix","Squeeze","SqueezeOut","Reset","Restart"];for(const[n,[s,r]]of Object.entries(t)){p.prototype["_"+n]=function(o){return this.fmap(i=>s(i,o))},Object.defineProperty(p.prototype,n,{get:function(){const o=this,i=(...u)=>o[n].in(...u);for(const u of e)i[u.toLowerCase()]=function(...a){var d=o;a=F(a),r&&(d=r(d),a=r(a));var l;return n==="keepif"?(l=d["_op"+u](a,h=>_=>s(h,_)),l=l.removeUndefineds()):l=d["_op"+u](a,h=>_=>Dc(h,_,s)),l};return i.squeezein=i.squeeze,i}});for(const o of e)p.prototype[o.toLowerCase()]=function(...i){return this.set[o.toLowerCase()](i)}}p.prototype.struct=function(...n){return this.keepif.out(...n)},p.prototype.structAll=function(...n){return this.keep.out(...n)},p.prototype.mask=function(...n){return this.keepif.in(...n)},p.prototype.maskAll=function(...n){return this.keep.in(...n)},p.prototype.reset=function(...n){return this.keepif.reset(...n)},p.prototype.resetAll=function(...n){return this.keep.reset(...n)},p.prototype.restart=function(...n){return this.keepif.restart(...n)},p.prototype.restartAll=function(...n){return this.keep.restart(...n)}})();const Gc=x,Qc=x,Uc=Wt,rt=t=>new p(()=>[],t),N=rt(1),L=rt(0);function K(t){function e(s){return s.span.spanCycles.map(r=>new M(y(r.begin).wholeCycle(),r,t))}const n=new p(e,1);return n.__pure=t,n}function jt(t){return t instanceof p||t?._Pattern}function g(t){return jt(t)?t:vt&&typeof t=="string"?vt(t):K(t)}function x(...t){t=t.map(s=>Array.isArray(s)?F(...s):g(s));const e=s=>U(t.map(r=>r.query(s))),n=new p(e);return I&&(n.tactus=ct(...t.map(s=>s.tactus))),n}function Jt(t,e){if(e=e.map(o=>Array.isArray(o)?F(...o):g(o)),e.length===0)return N;if(e.length===1)return e[0];const[n,...s]=e.map(o=>o.tactus),r=I?n.maximum(...s):void 0;return x(...t(r,e))}function me(...t){return Jt((e,n)=>n.map(s=>s.tactus.eq(e)?s:R(s,rt(e.sub(s.tactus)))),t)}function ye(...t){return Jt((e,n)=>n.map(s=>s.tactus.eq(e)?s:R(rt(e.sub(s.tactus)),s)),t)}function ge(...t){return Jt((e,n)=>n.map(s=>{if(s.tactus.eq(e))return s;const r=rt(e.sub(s.tactus).div(2));return R(r,s,r)}),t)}function Kc(t,...e){const[n,...s]=e.map(i=>i.tactus),r=n.maximum(...s),o={centre:ge,left:me,right:ye,expand:x,repeat:(...i)=>Ae(r,...i)};return t.inhabit(o).fmap(i=>i(...e)).innerJoin().setTactus(r)}function Y(...t){if(t=t.map(s=>Array.isArray(s)?V(...s):g(s)),t.length==1)return t[0];const e=function(s){const r=s.span,o=it(r.begin.sam(),t.length),i=t[o];if(!i)return[];const u=r.begin.floor().sub(r.begin.div(t.length).floor());return i.withHapTime(a=>a.add(u)).query(s.setSpan(r.withTime(a=>a.sub(u))))},n=I?ct(...t.map(s=>s.tactus)):void 0;return new p(e).splitQueries().setTactus(n)}function $t(...t){t=t.map(g);const e=function(n){const s=Math.floor(n.span.begin)%t.length;return t[s]?.query(n)||[]};return new p(e).splitQueries()}function we(...t){return Y(...t)}function Xc(...t){const e=t.reduce((n,[s])=>n+s,0);return t=t.map(([n,s])=>[n,s.fast(n)]),R(...t).slow(e)}function V(...t){let e=Y(...t);return t.length>1&&(e=e._fast(t.length),e.tactus=t.length),t.length==1&&t[0].__tactus_source&&(t.tactus=t[0].tactus),e}function F(...t){return V(...t)}function be(...t){return V(...t)}function kt(t){return Array.isArray(t)?t.length==0?[N,0]:t.length==1?kt(t[0]):[V(...t.map(e=>kt(e)[0])),t.length]:[g(t),1]}const Yc=v((t,e)=>g(e).mask(t)),Zc=v((t,e)=>g(e).struct(t)),tu=v((t,e)=>g(e).superimpose(...t)),eu=v((t,e)=>g(e).set(t)),nu=v((t,e)=>g(e).keep(t)),su=v((t,e)=>g(e).keepif(t)),ru=v((t,e)=>g(e).add(t)),ou=v((t,e)=>g(e).sub(t)),iu=v((t,e)=>g(e).mul(t)),cu=v((t,e)=>g(e).div(t)),uu=v((t,e)=>g(e).mod(t)),au=v((t,e)=>g(e).pow(t)),lu=v((t,e)=>g(e).band(t)),fu=v((t,e)=>g(e).bor(t)),hu=v((t,e)=>g(e).bxor(t)),du=v((t,e)=>g(e).blshift(t)),pu=v((t,e)=>g(e).brshift(t)),mu=v((t,e)=>g(e).lt(t)),yu=v((t,e)=>g(e).gt(t)),gu=v((t,e)=>g(e).lte(t)),wu=v((t,e)=>g(e).gte(t)),bu=v((t,e)=>g(e).eq(t)),_u=v((t,e)=>g(e).eqt(t)),vu=v((t,e)=>g(e).ne(t)),ku=v((t,e)=>g(e).net(t)),qu=v((t,e)=>g(e).and(t)),Au=v((t,e)=>g(e).or(t)),Tu=v((t,e)=>g(e).func(t));function f(t,e,n=!0,s=!1,r=o=>o.innerJoin()){if(Array.isArray(t)){const u={};for(const a of t)u[a]=f(a,e,n);return u}const o=e.length;var i;return n?i=function(...u){u=u.map(g);const a=u[u.length-1];let d;if(o===1)d=e(a);else{const l=u.slice(0,-1);if(l.every(h=>h.__pure!=null)){const h=l.map(w=>w.__pure),_=l.filter(w=>w.__pure_loc).map(w=>w.__pure_loc);d=e(...h,a),d=d.withContext(w=>{const b=(w.locations||[]).concat(_);return{...w,locations:b}})}else{const[h,..._]=l;let w=(...b)=>e(...b,a);w=v(w,null,o-1),d=r(_.reduce((b,q)=>b.appLeft(q),h.fmap(w)))}}return s&&(d.tactus=a.tactus),d}:i=function(...u){u=u.map(g);const a=e(...u);return s&&(a.tactus=u[u.length-1].tactus),a},p.prototype[t]=function(...u){if(o===2&&u.length!==1)u=[F(...u)];else if(o!==u.length+1)throw new Error(`.${t}() expects ${o-1} inputs but got ${u.length}.`);return u=u.map(g),i(...u,this)},o>1&&(p.prototype["_"+t]=function(...u){const a=e(...u,this);return s&&a.setTactus(this.tactus),a}),v(i,null,o)}function ut(t,e,n=!0,s=!1,r=o=>o.stepJoin()){return f(t,e,n,s,r)}const Nu=f("round",function(t){return t.asNumber().fmap(e=>Math.round(e))}),Cu=f("floor",function(t){return t.asNumber().fmap(e=>Math.floor(e))}),Mu=f("ceil",function(t){return t.asNumber().fmap(e=>Math.ceil(e))}),Su=f("toBipolar",function(t){return t.fmap(e=>e*2-1)}),Bu=f("fromBipolar",function(t){return t.fmap(e=>(e+1)/2)}),xu=f("range",function(t,e,n){return n.mul(e-t).add(t)}),Ou=f("rangex",function(t,e,n){return n._range(Math.log(t),Math.log(e)).fmap(Math.exp)}),zu=f("range2",function(t,e,n){return n.fromBipolar()._range(t,e)}),Eu=f("ratio",t=>t.fmap(e=>Array.isArray(e)?e.slice(1).reduce((n,s)=>n/s,e[0]):e)),ju=f("compress",function(t,e,n){return t=y(t),e=y(e),t.gt(e)||t.gt(1)||e.gt(1)||t.lt(0)||e.lt(0)?N:n._fastGap(y(1).div(e.sub(t)))._late(t)}),{compressSpan:Ju,compressspan:$u}=f(["compressSpan","compressspan"],function(t,e){return e._compress(t.begin,t.end)}),{fastGap:Pu,fastgap:Lu}=f(["fastGap","fastgap"],function(t,e){const n=function(r){const o=r.begin.sam(),i=r.begin.sub(o).mul(t).min(1),u=r.end.sub(o).mul(t).min(1);if(!(i>=1))return new S(o.add(i),o.add(u))},s=function(r){const o=r.part.begin,i=r.part.end,u=o.sam(),a=o.sub(u).div(t).min(1),d=i.sub(u).div(t).min(1),l=new S(u.add(a),u.add(d)),h=r.whole?new S(l.begin.sub(o.sub(r.whole.begin).div(t)),l.end.add(r.whole.end.sub(i).div(t))):void 0;return new M(h,l,r.value,r.context)};return e.withQuerySpanMaybe(n).withHap(s).splitQueries()}),Ru=f("focus",function(t,e,n){return t=y(t),e=y(e),n._fast(y(1).div(e.sub(t))).late(t.cyclePos())}),{focusSpan:Wu,focusspan:Iu}=f(["focusSpan","focusspan"],function(t,e){return e._focus(t.begin,t.end)}),Hu=f("ply",function(t,e){const n=e.fmap(s=>K(s)._fast(t)).squeezeJoin();return I&&(n.tactus=y(t).mulmaybe(e.tactus)),n}),{fast:Fu,density:Cf}=f(["fast","density"],function(t,e){return t===0?N:(t=y(t),e.withQueryTime(s=>s.mul(t)).withHapTime(s=>s.div(t)).setTactus(e.tactus))},!0,!0),Vu=f("hurry",function(t,e){return e._fast(t).mul(K({speed:t}))}),{slow:Du,sparsity:Gu}=f(["slow","sparsity"],function(t,e){return t===0?N:e._fast(y(1).div(t))}),Qu=f("inside",function(t,e,n){return e(n._slow(t))._fast(t)}),Uu=f("outside",function(t,e,n){return e(n._fast(t))._slow(t)}),Ku=f("lastOf",function(t,e,n){const s=Array(t-1).fill(n);return s.push(e(n)),$t(...s)}),{firstOf:Xu,every:Yu}=f(["firstOf","every"],function(t,e,n){const s=Array(t-1).fill(n);return s.unshift(e(n)),$t(...s)}),Zu=f("apply",function(t,e){return t(e)}),ta=f("cpm",function(t,e){return e._fast(t/60/1)}),ea=f("early",function(t,e){return t=y(t),e.withQueryTime(n=>n.add(t)).withHapTime(n=>n.sub(t))},!0,!0),_e=f("late",function(t,e){return t=y(t),e._early(y(0).sub(t))},!0,!0),na=f("zoom",function(t,e,n){if(e=y(e),t=y(t),t.gte(e))return L;const s=e.sub(t),r=I?n.tactus.mulmaybe(s):void 0;return n.withQuerySpan(o=>o.withCycle(i=>i.mul(s).add(t))).withHapSpan(o=>o.withCycle(i=>i.sub(t).div(s))).splitQueries().setTactus(r)}),{zoomArc:sa,zoomarc:ra}=f(["zoomArc","zoomarc"],function(t,e){return e.zoom(t.begin,t.end)}),oa=f("linger",function(t,e){return t==0?N:t<0?e._zoom(t.add(1),1)._slow(t):e._zoom(0,t)._slow(t)},!0,!0),ia=f("segment",function(t,e){return e.struct(K(!0)._fast(t)).setTactus(t)}),ca=f("swingBy",(t,e,n)=>n.inside(e,_e(be(0,t/2)))),ua=f("swing",(t,e)=>e.swingBy(1/3,t)),{invert:aa,inv:la}=f(["invert","inv"],function(t){return t.fmap(e=>!e)},!0,!0),fa=f("when",function(t,e,n){return t?e(n):n}),ha=f("off",function(t,e,n){return x(n,e(n.late(t)))}),da=f("brak",function(t){return t.when(Y(!1,!0),e=>V(e,N)._late(.25))}),ve=f("rev",function(t){const e=function(n){const s=n.span,r=s.begin.sam(),o=s.begin.nextSam(),i=function(a){const d=a.withTime(h=>r.add(o.sub(h))),l=d.begin;return d.begin=d.end,d.end=l,d};return t.query(n.setSpan(i(s))).map(a=>a.withSpan(i))};return new p(e).splitQueries()},!1,!0),pa=f("pressBy",function(t,e){return e.fmap(n=>K(n).compress(t,1)).squeezeJoin()}),ma=f("press",function(t){return t._pressBy(.5)});p.prototype.hush=function(){return N};const ya=f("palindrome",function(t){return t.lastOf(2,ve)},!0,!0),{juxBy:ga,juxby:wa}=f(["juxBy","juxby"],function(t,e,n){t/=2;const s=function(i,u,a){return u in i?i[u]:a},r=n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)-t})),o=e(n.withValue(i=>Object.assign({},i,{pan:s(i,"pan",.5)+t})));return x(r,o).setTactus(I?ct(r.tactus,o.tactus):void 0)}),ba=f("jux",function(t,e){return e._juxBy(1,t,e)}),{echoWith:_a,echowith:va,stutWith:ka,stutwith:qa}=f(["echoWith","echowith","stutWith","stutwith"],function(t,e,n,s){return x(...Bt(0,t-1).map(r=>n(s.late(y(e).mul(r)),r)))}),Aa=f("echo",function(t,e,n,s){return s._echoWith(t,e,(r,o)=>r.gain(Math.pow(n,o)))}),Ta=f("stut",function(t,e,n,s){return s._echoWith(t,n,(r,o)=>r.gain(Math.pow(e,o)))}),Pt=function(t,e,n=!1){return t=y(t),Y(...Bt(0,t.sub(1)).map(s=>n?e.late(y(s).div(t)):e.early(y(s).div(t))))},Na=f("iter",function(t,e){return Pt(t,e,!1)},!0,!0),{iterBack:Ca,iterback:Ma}=f(["iterBack","iterback"],function(t,e){return Pt(t,e,!0)},!0,!0),{repeatCycles:Sa}=f("repeatCycles",function(t,e){return new p(function(n){const s=n.span.begin.sam(),r=s.div(t).sam(),o=s.sub(r);return n=n.withSpan(i=>i.withTime(u=>u.sub(o))),e.query(n).map(i=>i.withSpan(u=>u.withTime(a=>a.add(o))))}).splitQueries()},!0,!0),Lt=function(t,e,n,s=!1,r=!1){const o=Array(t-1).fill(!1);o.unshift(!0);const i=Pt(t,F(...o),!s);return r||(n=n.repeatCycles(t)),n.when(i,e)},{chunk:Ba,slowchunk:xa,slowChunk:Oa}=f(["chunk","slowchunk","slowChunk"],function(t,e,n){return Lt(t,e,n,!1,!1)}),{chunkBack:za,chunkback:Ea}=f(["chunkBack","chunkback"],function(t,e,n){return Lt(t,e,n,!0)}),{fastchunk:ja,fastChunk:Ja}=f(["fastchunk","fastChunk"],function(t,e,n){return Lt(t,e,n,!1,!0)}),$a=f("bypass",function(t,e){return t=!!parseInt(t),t?N:e},!0,!0),Pa=f("ribbon",(t,e,n)=>n.early(t).restart(K(1).slow(e))),La=f("hsla",(t,e,n,s,r)=>r.color(`hsla(${t}turn,${e*100}%,${n*100}%,${s})`)),Ra=f("hsl",(t,e,n,s)=>s.color(`hsl(${t}turn,${e*100}%,${n*100}%)`));p.prototype.tag=function(t){return this.withContext(e=>({...e,tags:(e.tags||[]).concat([t])}))};p.prototype.stepJoin=function(){const t=this,e=R(...qt(At(t.queryArc(0,1)))).tactus,n=function(s){const o=t.early(s.span.begin.sam()).query(s.setSpan(new S(y(0),y(1))));return R(...qt(At(o))).query(s)};return new p(n,e)};function qt(t){const e=t.filter((o,i)=>i.hasTactus).reduce((o,i)=>o.add(i),y(0)),n=st(t.map((o,i)=>i.tactus)).reduce((o,i)=>o.add(i),y(0)),s=e.eq(0)?void 0:n.div(e);function r(o,i){return i.tactus===void 0?[o.mulmaybe(s),i]:[i.tactus,i]}return t.map(o=>r(...o))}function At(t){const e=U(t.map(r=>[r.part.begin,r.part.end])),n=le([y(0),y(1),...e]);return ue(n).map(r=>[r[1].sub(r[0]),x(...ke(new S(...r),t).map(o=>o.value.withHap(i=>i.setContext(i.combineContext(o)))))])}function ke(t,e){return st(e.map(n=>qe(t,n)))}function qe(t,e){const n=t.intersection(e.part);if(n!=null)return new M(e.whole,n,e.value,e.context)}const Wa=f("steps",function(t,e){return e.tactus===void 0?e:e.tactus.eq(y(0))?L:e.fast(y(t).div(e.tactus))});function Rt(t,...e){const n=e.map(r=>kt(r));if(n.length==0)return N;t==0&&(t=n[0][1]);const s=[];for(const r of n)r[1]!=0&&(t==r[1]?s.push(r[0]):s.push(r[0]._fast(y(t).div(y(r[1])))));return x(...s)}function Ae(t,...e){return e.length==0?N:Array.isArray(e[0])?Rt(t,...e):Wt(...e).steps(t)}function Wt(...t){if(Array.isArray(t[0]))return Rt(0,...t);if(t=t.filter(o=>o.hasTactus),t.length==0)return N;const e=t[0].tactus;if(e.eq(y(0)))return L;const[n,...s]=t,r=x(n,...s.map(o=>o._slow(o.tactus.div(e))));return r.tactus=e,r}function R(...t){if(t.length===0)return L;const e=i=>Array.isArray(i)?i:[i.tactus,i];if(t=t.map(e),t.find(i=>i[0]===void 0)){const i=t.map(a=>a[0]).filter(a=>a!==void 0);if(i.length===0)return V(...t.map(a=>a[1]));if(i.length===t.length)return L;const u=i.reduce((a,d)=>a.add(d),y(0)).div(i.length);for(let a of t)a[0]===void 0&&(a[0]=u)}if(t.length==1)return g(t[0][1]).withTactus(u=>t[0][0]);const n=t.map(i=>i[0]).reduce((i,u)=>i.add(u),y(0));let s=y(0);const r=[];for(const[i,u]of t){if(y(i).eq(0))continue;const a=s.add(i);r.push(g(u)._compress(s.div(n),a.div(n))),s=a}const o=x(...r);return o.tactus=n,o}const Ia=R,Te=R;function Ha(...t){t=t.map(r=>Array.isArray(r)?r.map(g):[g(r)]);const e=ct(...t.map(r=>y(r.length)));let n=[];for(let r=0;r<e;++r)n.push(...t.map(o=>o.length==0?N:o[r%o.length]));n=n.filter(r=>r.hasTactus&&r.tactus>0);const s=n.reduce((r,o)=>r.add(o.tactus),y(0));return n=R(...n),n.tactus=s,n}const Fa=ut("s_add",function(t,e){if(!e.hasTactus||e.tactus.lte(0)||(t=y(t),t.eq(0)))return L;const n=t<0;n&&(t=t.abs());const s=t.div(e.tactus);return s.lte(0)?L:s.gte(1)?e:n?e.zoom(y(1).sub(s),1):e.zoom(0,s)}),Va=ut("s_sub",function(t,e){return e.hasTactus?(t=y(t),t.lt(0)?e.s_add(y(0).sub(e.tactus.add(t))):e.s_add(e.tactus.sub(t))):L}),Da=ut("s_extend",function(t,e){return e.fast(t).s_expand(t)}),Ga=ut("s_expand",function(t,e){return e.withTactus(n=>n.mul(y(t)))}),Qa=ut("s_contract",function(t,e){return e.withTactus(n=>n.div(y(t)))});p.prototype.s_taperlist=function(t,e){const n=this;if(!n.hasTactus)return[n];if(e=e-1,e===0)return[n];const s=[],r=t>0;t=y(Math.abs(t));const o=n.tactus.sub(t.mul(y(e))).max(y(0));for(let i=0;i<e;++i)s.push(n.zoom(0,o.add(t.mul(y(i))).div(n.tactus)));return s.push(n),r&&s.reverse(),s};const Ua=(t,e,n)=>n.s_taperlist(t,e),Ka=f("s_taper",function(t,e,n){if(!n.hasTactus)return L;const s=n.s_taperlist(t,e),r=R(...s);return r.tactus=s.reduce((o,i)=>o.add(i.tactus),y(0)),r},!0,!1,t=>t.stepJoin());p.prototype.s_tour=function(...t){return R(...[].concat(...t.map((e,n)=>[...t.slice(0,t.length-n),this,...t.slice(t.length-n)]),this,...t))};const Xa=function(t,...e){return t.s_tour(...e)},Ya=f("chop",function(t,e){const s=Array.from({length:t},(i,u)=>u).map(i=>({begin:i/t,end:(i+1)/t})),r=function(i,u){if("begin"in i&&"end"in i&&i.begin!==void 0&&i.end!==void 0){const a=i.end-i.begin;u={begin:i.begin+u.begin*a,end:i.begin+u.end*a}}return Object.assign({},i,u)},o=function(i){return F(s.map(u=>r(i,u)))};return e.squeezeBind(o).setTactus(I?y(t).mulmaybe(e.tactus):void 0)}),Za=f("striate",function(t,e){const s=Array.from({length:t},(o,i)=>i).map(o=>({begin:o/t,end:(o+1)/t})),r=Y(...s);return e.set(r)._fast(t).setTactus(I?y(t).mulmaybe(e.tactus):void 0)}),Ne=function(t,e,n=.5){return e.speed(1/t*n).unit("c").slow(t)},Ce=f("slice",function(t,e,n){return t.innerBind(s=>e.outerBind(r=>n.outerBind(o=>{o=o instanceof Object?o:{s:o};const i=Array.isArray(s)?s[r]:r/s,u=Array.isArray(s)?s[r+1]:(r+1)/s;return K({begin:i,end:u,_slices:s,...o})}))).setTactus(e.tactus)},!1),tl=f("splice",function(t,e,n){const s=Ce(t,e,n);return new p(r=>{const o=r.controls._cps||1;return s.query(r).map(u=>u.withValue(a=>({speed:o/a._slices/u.whole.duration*(a.speed||1),unit:"c",...a})))}).setTactus(e.tactus)},!1),{loopAt:el,loopat:nl}=f(["loopAt","loopat"],function(t,e){const n=e.tactus?e.tactus.div(t):void 0;return new p(s=>Ne(t,e,s.controls._cps).query(s),n)}),sl=f("fit",t=>t.withHaps((e,n)=>e.map(s=>s.withValue(r=>({...r,speed:(n.controls._cps||1)/s.whole.duration,unit:"c"}))))),{loopAtCps:rl,loopatcps:ol}=f(["loopAtCps","loopatcps"],function(t,e,n){return Ne(t,n,e)}),il=t=>K(1).withValue(()=>g(t())).innerJoin();let Zt=t=>t<.5?1:1-(t-.5)/.5,Me=(t,e,n)=>{e=g(e),t=g(t),n=g(n);let s=e.fmap(o=>({gain:Zt(o)})),r=e.fmap(o=>({gain:Zt(1-o)}));return x(t.mul(s),n.mul(r))};p.prototype.xfade=function(t,e){return Me(this,t,e)};function mt(t){let e=Array.isArray(t);t=e?t:[t];const n=t[0],s=i=>{let u;if(typeof i=="object"&&i.value!==void 0&&(u={...i},i=i.value,delete u.value),e&&Array.isArray(i)){const a=u||{};return i.forEach((d,l)=>{l<t.length&&(a[t[l]]=d)}),a}else return u?(u[n]=i,u):{[n]:i}},r=(...i)=>F(...i).withValue(s),o=function(...i){return i.length?this.set(r(...i)):this.fmap(s)};return p.prototype[n]=o,r}function c(t,...e){const n=Array.isArray(t)?t[0]:t;let s={};return s[n]=mt(t),e.forEach(r=>{s[r]=s[n],p.prototype[r]=p.prototype[n]}),s}const{s:Se,sound:Be}=c(["s","n","gain"],"sound"),{source:xe,src:Oe}=c("source","src"),{n:ze}=c("n"),{note:Ee}=c(["note","n"]),{accelerate:je}=c("accelerate"),{velocity:Je}=c("velocity"),{gain:$e}=c("gain"),{postgain:Pe}=c("postgain"),{amp:Le}=c("amp"),{attack:Re,att:We}=c("attack","att"),{fmh:Ie}=c(["fmh","fmi"],"fmh"),{fmi:He,fm:Fe}=c(["fmi","fmh"],"fm"),{fmenv:Ve}=c("fmenv"),{fmattack:De}=c("fmattack"),{fmdecay:Ge}=c("fmdecay"),{fmsustain:Qe}=c("fmsustain"),{fmrelease:Ue}=c("fmrelease"),{fmvelocity:Ke}=c("fmvelocity"),{bank:Xe}=c("bank"),{analyze:Ye}=c("analyze"),{fft:Ze}=c("fft"),{decay:tn,dec:en}=c("decay","dec"),{sustain:nn,sus:sn}=c("sustain","sus"),{release:rn,rel:on}=c("release","rel"),{hold:cn}=c("hold"),{bandf:un,bpf:an,bp:ln}=c(["bandf","bandq","bpenv"],"bpf","bp"),{bandq:fn,bpq:hn}=c("bandq","bpq"),{begin:dn}=c("begin"),{end:pn}=c("end"),{loop:mn}=c("loop"),{loopBegin:yn,loopb:gn}=c("loopBegin","loopb"),{loopEnd:wn,loope:bn}=c("loopEnd","loope"),{crush:_n}=c("crush"),{coarse:vn}=c("coarse"),{drive:kn}=c("drive"),{channels:qn,ch:An}=c("channels","ch"),{phaserrate:Tn,phasr:Nn}=c("phaserrate","phasr"),{phaser:Cn,ph:Mn}=c(["phaser","phaserdepth","phasercenter","phasersweep"],"ph"),{phasersweep:Sn,phs:Bn}=c("phasersweep","phs"),{phasercenter:xn,phc:On}=c("phasercenter","phc"),{phaserdepth:zn,phd:En,phasdp:jn}=c("phaserdepth","phd","phasdp"),{channel:Jn}=c("channel"),{cut:$n}=c("cut"),{cutoff:Pn,ctf:Ln,lpf:Rn,lp:Wn}=c(["cutoff","resonance","lpenv"],"ctf","lpf","lp"),{lpenv:In,lpe:Hn}=c("lpenv","lpe"),{hpenv:Fn,hpe:Vn}=c("hpenv","hpe"),{bpenv:Dn,bpe:Gn}=c("bpenv","bpe"),{lpattack:Qn,lpa:Un}=c("lpattack","lpa"),{hpattack:Kn,hpa:Xn}=c("hpattack","hpa"),{bpattack:Yn,bpa:Zn}=c("bpattack","bpa"),{lpdecay:ts,lpd:es}=c("lpdecay","lpd"),{hpdecay:ns,hpd:ss}=c("hpdecay","hpd"),{bpdecay:rs,bpd:os}=c("bpdecay","bpd"),{lpsustain:is,lps:cs}=c("lpsustain","lps"),{hpsustain:us,hps:as}=c("hpsustain","hps"),{bpsustain:ls,bps:fs}=c("bpsustain","bps"),{lprelease:hs,lpr:ds}=c("lprelease","lpr"),{hprelease:ps,hpr:ms}=c("hprelease","hpr"),{bprelease:ys,bpr:gs}=c("bprelease","bpr"),{ftype:ws}=c("ftype"),{fanchor:bs}=c("fanchor"),{vib:_s,vibrato:vs,v:ks}=c(["vib","vibmod"],"vibrato","v"),{noise:qs}=c("noise"),{vibmod:As,vmod:Ts}=c(["vibmod","vib"],"vmod"),{hcutoff:Ns,hpf:Cs,hp:Ms}=c(["hcutoff","hresonance","hpenv"],"hpf","hp"),{hresonance:Ss,hpq:Bs}=c("hresonance","hpq"),{resonance:xs,lpq:Os}=c("resonance","lpq"),{djf:zs}=c("djf"),{delay:Es}=c(["delay","delaytime","delayfeedback"]),{delayfeedback:js,delayfb:Js,dfb:$s}=c("delayfeedback","delayfb","dfb"),{delaytime:Ps,delayt:Ls,dt:Rs}=c("delaytime","delayt","dt"),{lock:Ws}=c("lock"),{detune:Is,det:Hs}=c("detune","det"),{unison:Fs}=c("unison"),{spread:Vs}=c("spread"),{dry:Ds}=c("dry"),{fadeTime:Gs,fadeOutTime:Qs}=c("fadeTime","fadeOutTime"),{fadeInTime:Us}=c("fadeInTime"),{freq:Ks}=c("freq"),{pattack:Xs,patt:Ys}=c("pattack","patt"),{pdecay:Zs,pdec:tr}=c("pdecay","pdec"),{psustain:er,psus:nr}=c("psustain","psus"),{prelease:sr,prel:rr}=c("prelease","prel"),{penv:or}=c("penv"),{pcurve:ir}=c("pcurve"),{panchor:cr}=c("panchor"),{gate:ur,gat:ar}=c("gate","gat"),{leslie:lr}=c("leslie"),{lrate:fr}=c("lrate"),{lsize:hr}=c("lsize"),{activeLabel:dr}=c("activeLabel"),{label:pr}=c(["label","activeLabel"]),{degree:mr}=c("degree"),{mtranspose:yr}=c("mtranspose"),{ctranspose:gr}=c("ctranspose"),{harmonic:wr}=c("harmonic"),{stepsPerOctave:br}=c("stepsPerOctave"),{octaveR:_r}=c("octaveR"),{nudge:vr}=c("nudge"),{octave:kr}=c("octave"),{orbit:qr}=c("orbit"),{overgain:Ar}=c("overgain"),{overshape:Tr}=c("overshape"),{pan:Nr}=c("pan"),{panspan:Cr}=c("panspan"),{pansplay:Mr}=c("pansplay"),{panwidth:Sr}=c("panwidth"),{panorient:Br}=c("panorient"),{rate:xr}=c("rate"),{slide:Or}=c("slide"),{semitone:zr}=c("semitone"),{voice:Er}=c("voice"),{chord:jr}=c("chord"),{dictionary:Jr,dict:$r}=c("dictionary","dict"),{anchor:Pr}=c("anchor"),{offset:Lr}=c("offset"),{octaves:Rr}=c("octaves"),{mode:Wr}=c(["mode","anchor"]),{room:Ir}=c(["room","size"]),{roomlp:Hr,rlp:Fr}=c("roomlp","rlp"),{roomdim:Vr,rdim:Dr}=c("roomdim","rdim"),{roomfade:Gr,rfade:Qr}=c("roomfade","rfade"),{ir:Ur,iresponse:Kr}=c(["ir","i"],"iresponse"),{roomsize:Xr,size:Yr,sz:Zr,rsize:to}=c("roomsize","size","sz","rsize"),{shape:eo}=c(["shape","shapevol"]),{distort:no,dist:so}=c(["distort","distortvol"],"dist"),{compressor:ro}=c(["compressor","compressorRatio","compressorKnee","compressorAttack","compressorRelease"]),{compressorKnee:oo}=c("compressorKnee"),{compressorRatio:io}=c("compressorRatio"),{compressorAttack:co}=c("compressorAttack"),{compressorRelease:uo}=c("compressorRelease"),{speed:ao}=c("speed"),{stretch:lo}=c("stretch"),{unit:fo}=c("unit"),{squiz:ho}=c("squiz"),{vowel:po}=c("vowel"),{waveloss:mo}=c("waveloss"),{density:cl}=c("density"),{expression:yo}=c("expression"),{sustainpedal:go}=c("sustainpedal"),{tremolodepth:wo,tremdp:bo}=c("tremolodepth","tremdp"),{tremolorate:_o,tremr:vo}=c("tremolorate","tremr"),{fshift:ko}=c("fshift"),{fshiftnote:qo}=c("fshiftnote"),{fshiftphase:Ao}=c("fshiftphase"),{triode:To}=c("triode"),{krush:No}=c("krush"),{kcutoff:Co}=c("kcutoff"),{octer:Mo}=c("octer"),{octersub:So}=c("octersub"),{octersubsub:Bo}=c("octersubsub"),{ring:xo}=c("ring"),{ringf:Oo}=c("ringf"),{ringdf:zo}=c("ringdf"),{freeze:Eo}=c("freeze"),{xsdelay:jo}=c("xsdelay"),{tsdelay:Jo}=c("tsdelay"),{real:$o}=c("real"),{imag:Po}=c("imag"),{enhance:Lo}=c("enhance"),{partials:Ro}=c("partials"),{comb:Wo}=c("comb"),{smear:Io}=c("smear"),{scram:Ho}=c("scram"),{binshift:Fo}=c("binshift"),{hbrick:Vo}=c("hbrick"),{lbrick:Do}=c("lbrick"),{midichan:Go}=c("midichan"),{control:Qo}=c("control"),{ccn:Uo}=c("ccn"),{ccv:Ko}=c("ccv"),{polyTouch:Xo}=c("polyTouch"),{midibend:Yo}=c("midibend"),{miditouch:Zo}=c("miditouch"),{ctlNum:ti}=c("ctlNum"),{frameRate:ei}=c("frameRate"),{frames:ni}=c("frames"),{hours:si}=c("hours"),{midicmd:ri}=c("midicmd"),{minutes:oi}=c("minutes"),{progNum:ii}=c("progNum"),{seconds:ci}=c("seconds"),{songPtr:ui}=c("songPtr"),{uid:ai}=c("uid"),{val:li}=c("val"),{cps:fi}=c("cps"),{clip:hi,legato:di}=c("clip","legato"),{duration:pi,dur:mi}=c("duration","dur"),{zrand:yi}=c("zrand"),{curve:gi}=c("curve"),{deltaSlide:wi}=c("deltaSlide"),{pitchJump:bi}=c("pitchJump"),{pitchJumpTime:_i}=c("pitchJumpTime"),{lfo:vi,repeatTime:ki}=c("lfo","repeatTime"),{znoise:qi}=c("znoise"),{zmod:Ai}=c("zmod"),{zcrush:Ti}=c("zcrush"),{zdelay:Ni}=c("zdelay"),{tremolo:Ci}=c("tremolo"),{zzfx:Mi}=c("zzfx"),{color:Si,colour:Bi}=c(["color","colour"]);let xi=(...t)=>t.reduce((e,n)=>Object.assign(e,{[n]:mt(n)}),{});const Oi=f("adsr",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s,r,o]=t;return e.set({attack:n,decay:s,sustain:r,release:o})}),zi=f("ad",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.attack(n).decay(s)}),Ei=f("ds",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=0]=t;return e.set({decay:n,sustain:s})}),ji=f("ar",(t,e)=>{t=Array.isArray(t)?t:[t];const[n,s=n]=t;return e.set({attack:n,release:s})}),ul=Object.freeze(Object.defineProperty({__proto__:null,accelerate:je,activeLabel:dr,ad:zi,adsr:Oi,amp:Le,analyze:Ye,anchor:Pr,ar:ji,att:We,attack:Re,bandf:un,bandq:fn,bank:Xe,begin:dn,binshift:Fo,bp:ln,bpa:Zn,bpattack:Yn,bpd:os,bpdecay:rs,bpe:Gn,bpenv:Dn,bpf:an,bpq:hn,bpr:gs,bprelease:ys,bps:fs,bpsustain:ls,ccn:Uo,ccv:Ko,ch:An,channel:Jn,channels:qn,chord:jr,clip:hi,coarse:vn,color:Si,colour:Bi,comb:Wo,compressor:ro,compressorAttack:co,compressorKnee:oo,compressorRatio:io,compressorRelease:uo,control:Qo,cps:fi,createParam:mt,createParams:xi,crush:_n,ctf:Ln,ctlNum:ti,ctranspose:gr,curve:gi,cut:$n,cutoff:Pn,dec:en,decay:tn,degree:mr,delay:Es,delayfb:Js,delayfeedback:js,delayt:Ls,delaytime:Ps,deltaSlide:wi,density:cl,det:Hs,detune:Is,dfb:$s,dict:$r,dictionary:Jr,dist:so,distort:no,djf:zs,drive:kn,dry:Ds,ds:Ei,dt:Rs,dur:mi,duration:pi,end:pn,enhance:Lo,expression:yo,fadeInTime:Us,fadeOutTime:Qs,fadeTime:Gs,fanchor:bs,fft:Ze,fm:Fe,fmattack:De,fmdecay:Ge,fmenv:Ve,fmh:Ie,fmi:He,fmrelease:Ue,fmsustain:Qe,fmvelocity:Ke,frameRate:ei,frames:ni,freeze:Eo,freq:Ks,fshift:ko,fshiftnote:qo,fshiftphase:Ao,ftype:ws,gain:$e,gat:ar,gate:ur,harmonic:wr,hbrick:Vo,hcutoff:Ns,hold:cn,hours:si,hp:Ms,hpa:Xn,hpattack:Kn,hpd:ss,hpdecay:ns,hpe:Vn,hpenv:Fn,hpf:Cs,hpq:Bs,hpr:ms,hprelease:ps,hps:as,hpsustain:us,hresonance:Ss,imag:Po,ir:Ur,iresponse:Kr,kcutoff:Co,krush:No,label:pr,lbrick:Do,legato:di,leslie:lr,lfo:vi,lock:Ws,loop:mn,loopBegin:yn,loopEnd:wn,loopb:gn,loope:bn,lp:Wn,lpa:Un,lpattack:Qn,lpd:es,lpdecay:ts,lpe:Hn,lpenv:In,lpf:Rn,lpq:Os,lpr:ds,lprelease:hs,lps:cs,lpsustain:is,lrate:fr,lsize:hr,midibend:Yo,midichan:Go,midicmd:ri,miditouch:Zo,minutes:oi,mode:Wr,mtranspose:yr,n:ze,noise:qs,note:Ee,nudge:vr,octave:kr,octaveR:_r,octaves:Rr,octer:Mo,octersub:So,octersubsub:Bo,offset:Lr,orbit:qr,overgain:Ar,overshape:Tr,pan:Nr,panchor:cr,panorient:Br,panspan:Cr,pansplay:Mr,panwidth:Sr,partials:Ro,patt:Ys,pattack:Xs,pcurve:ir,pdec:tr,pdecay:Zs,penv:or,ph:Mn,phasdp:jn,phaser:Cn,phasercenter:xn,phaserdepth:zn,phaserrate:Tn,phasersweep:Sn,phasr:Nn,phc:On,phd:En,phs:Bn,pitchJump:bi,pitchJumpTime:_i,polyTouch:Xo,postgain:Pe,prel:rr,prelease:sr,progNum:ii,psus:nr,psustain:er,rate:xr,rdim:Dr,real:$o,registerControl:c,rel:on,release:rn,repeatTime:ki,resonance:xs,rfade:Qr,ring:xo,ringdf:zo,ringf:Oo,rlp:Fr,room:Ir,roomdim:Vr,roomfade:Gr,roomlp:Hr,roomsize:Xr,rsize:to,s:Se,scram:Ho,seconds:ci,semitone:zr,shape:eo,size:Yr,slide:Or,smear:Io,songPtr:ui,sound:Be,source:xe,speed:ao,spread:Vs,squiz:ho,src:Oe,stepsPerOctave:br,stretch:lo,sus:sn,sustain:nn,sustainpedal:go,sz:Zr,tremdp:bo,tremolo:Ci,tremolodepth:wo,tremolorate:_o,tremr:vo,triode:To,tsdelay:Jo,uid:ai,unison:Fs,unit:fo,v:ks,val:li,velocity:Je,vib:_s,vibmod:As,vibrato:vs,vmod:Ts,voice:Er,vowel:po,waveloss:mo,xsdelay:jo,zcrush:Ti,zdelay:Ni,zmod:Ai,znoise:qi,zrand:yi,zzfx:Mi},Symbol.toStringTag,{value:"Module"})),al=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=zt(s,r);return[[s,n-s],[Et((a,d)=>a.concat(d),i,o),u]]},ll=function(t,e){const[n,s]=t,[r,o]=e,[i,u]=zt(n,o);return[[n,s-n],[Et((d,l)=>d.concat(l),r,i),u]]},Ji=function(t,e){const[n,s]=t;return Math.min(n,s)<=1?[t,e]:Ji(...n>s?al(t,e):ll(t,e))},$i=function(t,e){const n=t<0;t=Math.abs(t);const s=e-t,r=Array(t).fill([1]),o=Array(s).fill([0]),i=Ji([t,s],[r,o]),u=U(i[1][0]).concat(U(i[1][1]));return n?u.map(a=>a===0?1:0):u},It=function(t,e,n){const s=$i(t,e);return n?oe(s,-n):s},fl=f("euclid",function(t,e,n){return n.struct(It(t,e,0))}),{euclidrot:hl,euclidRot:dl}=f(["euclidrot","euclidRot"],function(t,e,n,s){return s.struct(It(t,e,n))}),Pi=function(t,e,n,s){if(t<1)return N;const o=It(t,e,n).join("").split("1").slice(1).map(i=>[i.length+1,!0]);return s.struct(Te(...o))},pl=f(["euclidLegato"],function(t,e,n){return Pi(t,e,0,n)}),ml=f(["euclidLegatoRot"],function(t,e,n,s){return Pi(t,e,n,s)});function Li(t,e,n=.05,s=.1,r=.1,o=globalThis.setInterval,i=globalThis.clearInterval,u=!0){let a=0,d=0,l=10**4,h=.01;const _=j=>n=j(n);r=r||s/2;const w=()=>{const j=t(),G=j+s+r;for(d===0&&(d=j+h);d<G;)d=u?Math.round(d*l)/l:d,e(d,n,a,j),d+=n,a++};let b;const q=()=>{O(),w(),b=o(w,s*1e3)},O=()=>{b!==void 0&&i(b),b=void 0};return{setDuration:_,start:q,stop:()=>{a=0,d=0,O()},pause:()=>O(),duration:n,interval:s,getPhase:()=>d,minLatency:h}}function yl(t){return new p(e=>[new M(void 0,e.span,t)])}const H=t=>{const e=n=>[new M(void 0,n.span,t(n.span.midpoint()))];return new p(e)},Ht=H(t=>1-t%1),Ri=Ht.toBipolar(),yt=H(t=>t%1),Wi=yt.toBipolar(),Ft=H(t=>Math.sin(Math.PI*2*t)),Ii=Ft.fromBipolar(),gl=Ii._early(y(1).div(4)),wl=Ft._early(y(1).div(4)),Hi=H(t=>Math.floor(t*2%2)),bl=Hi.toBipolar(),_l=V(Ht,yt),vl=V(Ri,Wi),Fi=H(tt);let Vt=0,Dt=0;typeof window<"u"&&document.addEventListener("mousemove",t=>{Vt=t.clientY/document.body.clientHeight,Dt=t.clientX/document.body.clientWidth});const kl=H(()=>Vt),ql=H(()=>Vt),Al=H(()=>Dt),Tl=H(()=>Dt),Nl=t=>{const e=t<<13^t,n=e>>17^e;return n<<5^n},Cl=t=>t-Math.trunc(t),Ml=t=>Nl(Math.trunc(Cl(t/300)*536870912)),Sl=t=>t%536870912/536870912,Tt=t=>Math.abs(Sl(Ml(t))),Bl=t=>yt.range(0,t).floor().segment(t),W=H(Tt),xl=W.toBipolar(),Gt=t=>W.fmap(e=>e<t),Ol=t=>g(t).fmap(Gt).innerJoin(),zl=Gt(.5),Vi=t=>W.fmap(e=>Math.trunc(e*t)),El=t=>g(t).fmap(Vi).innerJoin(),D=function(t,e,n=!0){const s=Array.isArray(t),r=Object.keys(t).length;return t=de(t,g),r===0?N:e.fmap(o=>{let i=o;return s&&(i=n?Math.round(i)%r:ae(Math.round(i),0,t.length-1)),t[i]})},Di=function(t,e){return Array.isArray(e)&&([e,t]=[t,e]),jl(t,e)},jl=f("pick",function(t,e){return D(t,e,!1).innerJoin()}),Gi=f("pickmod",function(t,e){return D(t,e,!0).innerJoin()}),Jl=f("pickF",function(t,e,n){return n.apply(Di(t,e))}),$l=f("pickmodF",function(t,e,n){return n.apply(Gi(t,e))}),Pl=f("pickOut",function(t,e){return D(t,e,!1).outerJoin()}),Ll=f("pickmodOut",function(t,e){return D(t,e,!0).outerJoin()}),Rl=f("pickRestart",function(t,e){return D(t,e,!1).restartJoin()}),Wl=f("pickmodRestart",function(t,e){return D(t,e,!0).restartJoin()}),Il=f("pickReset",function(t,e){return D(t,e,!1).resetJoin()}),Hl=f("pickmodReset",function(t,e){return D(t,e,!0).resetJoin()}),{inhabit:Fl,pickSqueeze:Vl}=f(["inhabit","pickSqueeze"],function(t,e){return D(t,e,!1).squeezeJoin()}),{inhabitmod:Dl,pickmodSqueeze:Gl}=f(["inhabitmod","pickmodSqueeze"],function(t,e){return D(t,e,!0).squeezeJoin()}),Ql=(t,e)=>(e=e.map(g),e.length==0?N:t.fmap(n=>{const s=it(Math.round(n),e.length);return e[s]}).squeezeJoin()),Qt=(t,e)=>(e=e.map(g),e.length==0?N:t.range(0,e.length).fmap(n=>{const s=Math.min(Math.max(Math.floor(n),0),e.length-1);return e[s]})),gt=(t,e)=>Qt(t,e).outerJoin(),Qi=(t,e)=>Qt(t,e).innerJoin(),Ul=(...t)=>gt(W,t);p.prototype.choose=function(...t){return gt(this,t)};p.prototype.choose2=function(...t){return gt(this.fromBipolar(),t)};const Ui=(...t)=>Qi(W.segment(1),t),Kl=Ui,Ki=function(t,...e){const n=e.map(u=>g(u[0])),s=[];let r=0;for(const u of e)r+=u[1],s.push(r);const o=r,i=function(u){const a=u*o;return n[s.findIndex(d=>d>a,s)]};return t.fmap(i)},Xl=(...t)=>Ki(...t).outerJoin(),Yl=(...t)=>Xl(W,...t),Xi=(...t)=>Ki(W.segment(1),...t).innerJoin(),Zl=Xi,Yi=t=>{const e=t.fmap(Math.floor),n=t.fmap(o=>Math.floor(o)+1),s=o=>6*o**5-15*o**4+10*o**3,r=o=>i=>u=>i+s(o)*(u-i);return t.sub(e).fmap(r).appBoth(e.fmap(Tt)).appBoth(n.fmap(Tt))},tf=Yi(Fi.fmap(t=>Number(t))),ef=f("degradeByWith",(t,e,n)=>n.fmap(s=>r=>s).appLeft(t.filterValues(s=>s>e))),nf=f("degradeBy",function(t,e){return e._degradeByWith(W,t)}),sf=f("degrade",t=>t._degradeBy(.5)),rf=f("undegradeBy",function(t,e){return e._degradeByWith(W.fmap(n=>1-n),t)}),of=f("undegrade",t=>t._undegradeBy(.5)),cf=f("sometimesBy",function(t,e,n){return g(t).fmap(s=>x(n._degradeBy(s),e(n._undegradeBy(1-s)))).innerJoin()}),uf=f("sometimes",function(t,e){return e._sometimesBy(.5,t)}),af=f("someCyclesBy",function(t,e,n){return g(t).fmap(s=>x(n._degradeByWith(W._segment(1),s),e(n._degradeByWith(W.fmap(r=>1-r)._segment(1),1-s)))).innerJoin()}),lf=f("someCycles",function(t,e){return e._someCyclesBy(.5,t)}),ff=f("often",function(t,e){return e.sometimesBy(.75,t)}),hf=f("rarely",function(t,e){return e.sometimesBy(.25,t)}),df=f("almostNever",function(t,e){return e.sometimesBy(.1,t)}),pf=f("almostAlways",function(t,e){return e.sometimesBy(.9,t)}),mf=f("never",function(t,e){return e}),yf=f("always",function(t,e){return t(e)});let dt;try{dt=window?.speechSynthesis}catch{console.warn("cannot use window: not in browser?")}let te=dt?.getVoices();function gf(t,e,n){dt.cancel();const s=new SpeechSynthesisUtterance(t);s.lang=e,te=dt.getVoices();const r=te.filter(o=>o.lang.includes(e));typeof n=="number"?s.voice=r[n%r.length]:typeof n=="string"&&(s.voice=r.find(o=>o.name===o)),speechSynthesis.speak(s)}const wf=f("speak",function(t,e,n){return n.onTrigger((s,r)=>{gf(r.value,t,e)})}),Zi=async(...t)=>{const e=await Promise.allSettled(t),n=e.filter(s=>s.status==="fulfilled").map(s=>s.value);return e.forEach((s,r)=>{s.status==="rejected"&&console.warn(`evalScope: module with index ${r} could not be loaded:`,s.reason)}),n.forEach(s=>{Object.entries(s).forEach(([r,o])=>{globalThis[r]=o})}),n};function bf(t,e={}){const{wrapExpression:n=!0,wrapAsync:s=!0}=e;n&&(t=`{${t}}`),s&&(t=`(async ()=>${t})()`);const r=`"use strict";return (${t})`;return Function(r)()}const tc=async(t,e,n)=>{let s={};if(e){const i=e(t,n);t=i.output,s=i}return{mode:"javascript",pattern:await bf(t,{wrapExpression:!!e}),meta:s}};class _f{constructor({onTrigger:e,onToggle:n,getTime:s}){this.started=!1,this.cps=.5,this.lastTick=0,this.getTime=s,this.time_at_last_tick_message=0,this.num_cycles_at_cps_change=0,this.onToggle=n,this.latency=.1,this.cycle=0,this.id=Math.round(Date.now()*Math.random()),this.worker_time_dif,this.worker=new SharedWorker(new URL("/assets/clockworker-OodvW4tn.js",import.meta.url)),this.worker.port.start(),this.channel=new BroadcastChannel("strudeltick");let r=0;const o=20,i=10**3,u=(l,h,_)=>{const w=s()-(l+h)+_;if(this.worker_time_dif==null)this.worker_time_dif=w;else{const q=Math.round((this.worker_time_dif*r+w*1)/(r+1)*i)/i;q!=this.worker_time_dif&&(r=4),this.worker_time_dif=q}r=Math.min(r+1,o)},a=l=>{const{num_cycles_at_cps_change:h,cps:_,num_seconds_at_cps_change:w,num_seconds_since_cps_change:b,begin:q,end:O,tickdeadline:z,cycle:B}=l;this.cps=_,this.cycle=B,u(w,b,z),d(q,O,h,w),this.time_at_last_tick_message=this.getTime()},d=(l,h,_,w)=>{if(this.started===!1)return;this.pattern.queryArc(l,h,{_cps:this.cps}).forEach(q=>{if(q.hasOnset()){const O=(q.whole.begin-_)/this.cps+w+this.latency+this.worker_time_dif,z=q.duration/this.cps;e?.(q,0,z,this.cps,O)}})};this.channel.onmessage=l=>{if(!this.started)return;const{payload:h,type:_}=l.data;switch(_){case"tick":a(h)}}}sendMessage(e,n){this.worker.port.postMessage({type:e,payload:n,id:this.id})}now(){const e=(this.getTime()-this.time_at_last_tick_message)*this.cps;return this.cycle+e}setCps(e=1){this.sendMessage("cpschange",{cps:e})}setCycle(e){this.sendMessage("setcycle",{cycle:e})}setStarted(e){this.sendMessage("toggle",{started:e}),this.started=e,this.onToggle?.(e)}start(){E("[cyclist] start"),this.setStarted(!0)}stop(){this.worker_time_dif=null,E("[cyclist] stop"),this.setStarted(!1)}setPattern(e,n=!1){this.pattern=e,n&&!this.started&&this.start()}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}class ec{constructor({interval:e,onTrigger:n,onToggle:s,onError:r,getTime:o,latency:i=.1,setInterval:u,clearInterval:a,beforeStart:d}){this.started=!1,this.beforeStart=d,this.cps=.5,this.num_ticks_since_cps_change=0,this.lastTick=0,this.lastBegin=0,this.lastEnd=0,this.getTime=o,this.num_cycles_at_cps_change=0,this.seconds_at_cps_change,this.onToggle=s,this.latency=i,this.clock=Li(o,(h,_,w,b)=>{this.num_ticks_since_cps_change===0&&(this.num_cycles_at_cps_change=this.lastEnd,this.seconds_at_cps_change=h),this.num_ticks_since_cps_change++;const O=this.num_ticks_since_cps_change*_*this.cps;try{const z=this.lastEnd;this.lastBegin=z;const B=this.num_cycles_at_cps_change+O;if(this.lastEnd=B,this.lastTick=h,h<b){console.log("skip query: too late");return}this.pattern.queryArc(z,B,{_cps:this.cps}).forEach(j=>{if(j.hasOnset()){const G=(j.whole.begin-this.num_cycles_at_cps_change)/this.cps+this.seconds_at_cps_change+i,at=j.duration/this.cps,lt=G-h;n?.(j,lt,at,this.cps,G)}})}catch(z){E(`[cyclist] error: ${z.message}`),r?.(z)}},e,.1,.1,u,a);let l=this;globalThis.__cyclist__=l}now(){if(!this.started)return 0;const e=this.getTime()-this.lastTick-this.clock.duration;return this.lastBegin+e*this.cps}setStarted(e){this.started=e,this.onToggle?.(e)}async start(){if(await this.beforeStart?.(),this.num_ticks_since_cps_change=0,this.num_cycles_at_cps_change=0,!this.pattern)throw new Error("Scheduler: no pattern set! call .setPattern first.");E("[cyclist] start"),this.clock.start(),this.setStarted(!0),globalThis.haps_from_outputs=null}pause(){E("[cyclist] pause"),this.clock.pause(),this.setStarted(!1)}stop(){E("[cyclist] stop"),this.clock.stop(),this.lastEnd=0,this.setStarted(!1)}async setPattern(e,n=!1){this.pattern=e,n&&!this.started&&await this.start()}setCps(e=.5){this.cps!==e&&(this.cps=e,this.num_ticks_since_cps_change=0)}log(e,n,s){const r=s.filter(o=>o.hasOnset());console.log(`${e.toFixed(4)} - ${n.toFixed(4)} ${Array(r.length).fill("I").join("")}`)}}let Nt;function vf(){if(!Nt)throw new Error("no time set! use setTime to define a time source");return Nt()}function Ct(t){Nt=t}function kf({defaultOutput:t,onEvalError:e,beforeEval:n,beforeStart:s,afterEval:r,getTime:o,transpiler:i,onToggle:u,editPattern:a,onUpdateState:d,sync:l=!1,setInterval:h,clearInterval:_,id:w}){const b={schedulerError:void 0,evalError:void 0,code:"// LOADING",activeCode:"// LOADING",pattern:void 0,miniLocations:[],widgets:[],pending:!1,started:!1},q={id:w},O=A=>{Object.assign(b,A),b.isDirty=b.code!==b.activeCode,b.error=b.evalError||b.schedulerError,d?.(b)},z={onTrigger:nc({defaultOutput:t,getTime:o}),getTime:o,onToggle:A=>{O({started:A}),u?.(A)},setInterval:h,clearInterval:_,beforeStart:s},B=l&&typeof SharedWorker<"u"?new _f(z):new ec(z);let X={},j=0,G;const at=function(){return X={},j=0,G=void 0,N},lt=async(A,C=!0)=>(A=a?.(A)||A,await B.setPattern(A,C),A);Ct(()=>B.now());const sc=()=>B.stop(),rc=()=>B.start(),oc=()=>B.pause(),ic=()=>B.toggle(),wt=A=>B.setCps(A),Ut=A=>B.setCps(A/60),cc=function(A){return G=A,N},uc=()=>{p.prototype.p=function(C){return C.startsWith("_")||C.endsWith("_")?N:(C==="$"&&(C=`$${j}`,j++),X[C]=this,this)},p.prototype.q=function(C){return N};try{for(let C=1;C<10;++C)Object.defineProperty(p.prototype,`d${C}`,{get(){return this.p(C)},configurable:!0}),Object.defineProperty(p.prototype,`p${C}`,{get(){return this.p(C)},configurable:!0}),p.prototype[`q${C}`]=N}catch(C){console.warn("injectPatternMethods: error:",C)}const A=f("cpm",function(C,bt){return bt._fast(C/60/B.cps)});return Zi({all:cc,hush:at,cpm:A,setCps:wt,setcps:wt,setCpm:Ut,setcpm:Ut})};return{scheduler:B,evaluate:async(A,C=!0,bt=!0)=>{if(!A)throw new Error("no code to evaluate");try{O({code:A,pending:!0}),await uc(),Ct(()=>B.now()),await n?.({code:A}),bt&&at();let{pattern:J,meta:_t}=await tc(A,i,q);if(Object.keys(X).length&&(J=x(...Object.values(X))),G&&(J=G(J)),!jt(J)){const ac=`got "${typeof evaluated}" instead of pattern`;throw new Error(ac+(typeof evaluated=="function"?", did you forget to call a function?":"."))}return E("[eval] code updated"),J=await lt(J,C),O({miniLocations:_t?.miniLocations||[],widgets:_t?.widgets||[],activeCode:A,pattern:J,evalError:void 0,schedulerError:void 0,pending:!1}),r?.({code:A,pattern:J,meta:_t}),J}catch(J){E(`[eval] error: ${J.message}`,"error"),console.error(J),O({evalError:J,pending:!1}),e?.(J)}},start:rc,stop:sc,pause:oc,setCps:wt,setPattern:lt,setCode:A=>O({code:A}),toggle:ic,state:b}}const nc=({getTime:t,defaultOutput:e})=>async(n,s,r,o,i)=>{try{(!n.context.onTrigger||!n.context.dominantTrigger)&&await e(n,s,r,o,i),n.context.onTrigger&&await n.context.onTrigger(t()+s,n,t(),o,i)}catch(u){E(`[cyclist] error: ${u.message}`,"error")}},qf=function(t,e={}){const n=document.getElementById("code"),s="background-image:url("+t+");background-size:contain;";n.style=s;const{className:r}=n,o=(a,d)=>{({style:()=>n.style=s+";"+d,className:()=>n.className=d+" "+r})[a]()},i=Object.entries(e).filter(([a,d])=>typeof d=="function");Object.entries(e).filter(([a,d])=>typeof d=="string").forEach(([a,d])=>o(a,d)),i.length},Af=()=>{const t=document.getElementById("code");t&&(t.style="")};E("🌀 @strudel/core loaded 🌀");globalThis._strudelLoaded&&console.warn(`@strudel/core was loaded more than once...
This might happen when you have multiple versions of strudel installed. 
Please check with "npm ls @strudel/core".`);globalThis._strudelLoaded=!0;const Mf=Object.freeze(Object.defineProperty({__proto__:null,Cyclist:ec,Fraction:y,Hap:M,Pattern:p,State:nt,TimeSpan:S,__chooseWith:Qt,_brandBy:Gt,_fitslice:ke,_irand:Vi,_match:qe,_mod:it,_polymeterListSteps:Rt,_retime:qt,_slices:At,accelerate:je,activeLabel:dr,ad:zi,add:ru,adsr:Oi,almostAlways:pf,almostNever:df,always:yf,amp:Le,analyze:Ye,anchor:Pr,and:qu,apply:Zu,ar:ji,arrange:Xc,att:We,attack:Re,backgroundImage:qf,band:lu,bandf:un,bandq:fn,bank:Xe,base64ToUnicode:he,begin:dn,binshift:Fo,bjork:$i,blshift:du,bor:fu,bp:ln,bpa:Zn,bpattack:Yn,bpd:os,bpdecay:rs,bpe:Gn,bpenv:Dn,bpf:an,bpq:hn,bpr:gs,bprelease:ys,bps:fs,bpsustain:ls,brak:da,brand:zl,brandBy:Ol,brshift:pu,bxor:hu,bypass:$a,calculateTactus:Ic,cat:we,ccn:Uo,ccv:Ko,ceil:Mu,ch:An,channel:Jn,channels:qn,choose:Ul,chooseCycles:Ui,chooseInWith:Qi,chooseWith:gt,chop:Ya,chord:jr,chunk:Ba,chunkBack:za,chunkback:Ea,clamp:ae,cleanupUi:Af,clip:hi,coarse:vn,code2hash:Pc,color:Si,colour:Bi,comb:Wo,compose:Nc,compress:ju,compressSpan:Ju,compressor:ro,compressorAttack:co,compressorKnee:oo,compressorRatio:io,compressorRelease:uo,compressspan:$u,constant:Cc,control:Qo,controls:ul,cosine:gl,cosine2:wl,cpm:ta,cps:fi,createClock:Li,createParam:mt,createParams:xi,crush:_n,ctf:Ln,ctlNum:ti,ctranspose:gr,curry:v,curve:gi,cut:$n,cutoff:Pn,dec:en,decay:tn,degrade:sf,degradeBy:nf,degradeByWith:ef,degree:mr,delay:Es,delayfb:Js,delayfeedback:js,delayt:Ls,delaytime:Ps,deltaSlide:wi,det:Hs,detune:Is,dfb:$s,dict:$r,dictionary:Jr,dist:so,distort:no,div:cu,djf:zs,drawLine:pe,drive:kn,dry:Ds,ds:Ei,dt:Rs,dur:mi,duration:pi,early:ea,echo:Aa,echoWith:_a,echowith:va,end:pn,enhance:Lo,eq:bu,eqt:_u,euclid:fl,euclidLegato:pl,euclidLegatoRot:ml,euclidRot:dl,euclidrot:hl,evalScope:Zi,evaluate:tc,every:Yu,expression:yo,fadeInTime:Us,fadeOutTime:Qs,fadeTime:Gs,fanchor:bs,fast:Fu,fastChunk:Ja,fastGap:Pu,fastcat:V,fastchunk:ja,fastgap:Lu,fft:Ze,firstOf:Xu,fit:sl,flatten:U,floor:Cu,fm:Fe,fmattack:De,fmdecay:Ge,fmenv:Ve,fmh:Ie,fmi:He,fmrelease:Ue,fmsustain:Qe,fmvelocity:Ke,focus:Ru,focusSpan:Wu,focusspan:Iu,fractionalArgs:Mc,frameRate:ei,frames:ni,freeze:Eo,freq:Ks,freqToMidi:ne,fromBipolar:Bu,fshift:ko,fshiftnote:qo,fshiftphase:Ao,ftype:ws,func:Tu,gain:$e,gap:rt,gat:ar,gate:ur,getEventOffsetMs:_c,getFreq:se,getFrequency:Tc,getPlayableNoteValue:Ac,getSoundIndex:qc,getTime:vf,getTrigger:nc,gt:yu,gte:wu,harmonic:wr,hash2code:Lc,hbrick:Vo,hcutoff:Ns,hold:cn,hours:si,hp:Ms,hpa:Xn,hpattack:Kn,hpd:ss,hpdecay:ns,hpe:Vn,hpenv:Fn,hpf:Cs,hpq:Bs,hpr:ms,hprelease:ps,hps:as,hpsustain:us,hresonance:Ss,hsl:Ra,hsla:La,hurry:Vu,id:tt,imag:Po,inhabit:Fl,inhabitmod:Dl,inside:Qu,inv:la,invert:aa,ir:Ur,irand:El,iresponse:Kr,isNote:pt,isNoteWithOctave:yc,isPattern:jt,isaw:Ht,isaw2:Ri,iter:Na,iterBack:Ca,iterback:Ma,jux:ba,juxBy:ga,juxby:wa,kcutoff:Co,keep:nu,keepif:su,krush:No,label:pr,lastOf:Ku,late:_e,lbrick:Do,legato:di,leslie:lr,lfo:vi,linger:oa,listRange:Bt,lock:Ws,logKey:St,logger:E,loop:mn,loopAt:el,loopAtCps:rl,loopBegin:yn,loopEnd:wn,loopat:nl,loopatcps:ol,loopb:gn,loope:bn,lp:Wn,lpa:Un,lpattack:Qn,lpd:es,lpdecay:ts,lpe:Hn,lpenv:In,lpf:Rn,lpq:Os,lpr:ds,lprelease:hs,lps:cs,lpsustain:is,lrate:fr,lsize:hr,lt:mu,lte:gu,mapArgs:Ot,mask:Yc,midi2note:kc,midiToFreq:et,midibend:Yo,midichan:Go,midicmd:ri,miditouch:Zo,minutes:oi,mod:uu,mode:Wr,mouseX:Tl,mouseY:ql,mousex:Al,mousey:kl,mtranspose:yr,mul:iu,n:ze,nanFallback:re,ne:vu,net:ku,never:mf,noise:qs,note:Ee,noteToMidi:ot,nothing:L,nudge:vr,numeralArgs:P,objectMap:de,octave:kr,octaveR:_r,octaves:Rr,octer:Mo,octersub:So,octersubsub:Bo,off:ha,offset:Lr,often:ff,or:Au,orbit:qr,outside:Uu,overgain:Ar,overshape:Tr,pairs:ue,palindrome:ya,pan:Nr,panchor:cr,panorient:Br,panspan:Cr,pansplay:Mr,panwidth:Sr,parseFractional:ce,parseNumeral:xt,partials:Ro,patt:Ys,pattack:Xs,pcurve:ir,pdec:tr,pdecay:Zs,penv:or,perlin:tf,perlinWith:Yi,ph:Mn,phasdp:jn,phaser:Cn,phasercenter:xn,phaserdepth:zn,phaserrate:Tn,phasersweep:Sn,phasr:Nn,phc:On,phd:En,phs:Bn,pick:Di,pickF:Jl,pickOut:Pl,pickReset:Il,pickRestart:Rl,pickSqueeze:Vl,pickmod:Gi,pickmodF:$l,pickmodOut:Ll,pickmodReset:Hl,pickmodRestart:Wl,pickmodSqueeze:Gl,pipe:ie,pitchJump:bi,pitchJumpTime:_i,ply:Hu,pm:Uc,polyTouch:Xo,polyrhythm:Gc,postgain:Pe,pow:au,pr:Qc,prel:rr,prelease:sr,press:ma,pressBy:pa,progNum:ii,psus:nr,psustain:er,pure:K,rand:W,rand2:xl,randcat:Kl,range:xu,range2:zu,rangex:Ou,rarely:hf,rate:xr,ratio:Eu,rdim:Dr,real:$o,ref:il,register:f,registerControl:c,reify:g,rel:on,release:rn,removeUndefineds:st,repeatCycles:Sa,repeatTime:ki,repl:kf,resonance:xs,rev:ve,rfade:Qr,ribbon:Pa,ring:xo,ringdf:zo,ringf:Oo,rlp:Fr,room:Ir,roomdim:Vr,roomfade:Gr,roomlp:Hr,roomsize:Xr,rotate:oe,round:Nu,rsize:to,run:Bl,s:Se,s_add:Fa,s_alt:Ha,s_cat:R,s_contract:Qa,s_cycles:Da,s_expand:Ga,s_polymeter:Wt,s_polymeterSteps:Ae,s_sub:Va,s_taper:Ka,s_taperlist:Ua,s_tour:Xa,saw:yt,saw2:Wi,scram:Ho,seconds:ci,segment:ia,semitone:zr,seq:be,sequence:F,set:eu,setStringParser:Hc,setTime:Ct,shape:eo,signal:H,silence:N,sine:Ii,sine2:Ft,size:Yr,slice:Ce,slide:Or,slow:Du,slowChunk:Oa,slowcat:Y,slowcatPrime:$t,slowchunk:xa,smear:Io,sol2note:jc,someCycles:lf,someCyclesBy:af,sometimes:uf,sometimesBy:cf,songPtr:ui,sound:Be,source:xe,sparsity:Gu,speak:wf,speed:ao,splice:tl,splitAt:zt,spread:Vs,square:Hi,square2:bl,squeeze:Ql,squiz:ho,src:Oe,stack:x,stackBy:Kc,stackCentre:ge,stackLeft:me,stackRight:ye,steady:yl,steps:Wa,stepsPerOctave:br,stretch:lo,striate:Za,struct:Zc,stut:Ta,stutWith:ka,stutwith:qa,sub:ou,superimpose:tu,sus:sn,sustain:nn,sustainpedal:go,swing:ua,swingBy:ca,sz:Zr,time:Fi,timeCat:Te,timecat:Ia,toBipolar:Su,tokenizeNote:ee,tremdp:bo,tremolo:Ci,tremolodepth:wo,tremolorate:_o,tremr:vo,tri:_l,tri2:vl,triode:To,tsdelay:Jo,uid:ai,undegrade:of,undegradeBy:rf,unicodeToBase64:fe,uniq:Jc,uniqsort:$c,uniqsortr:le,unison:Fs,unit:fo,v:ks,val:li,valueToMidi:bc,velocity:Je,vib:_s,vibmod:As,vibrato:vs,vmod:Ts,voice:Er,vowel:po,waveloss:mo,wchoose:Yl,wchooseCycles:Xi,when:fa,wrandcat:Zl,xfade:Me,xsdelay:jo,zcrush:Ti,zdelay:Ni,zipWith:Et,zmod:Ai,znoise:qi,zoom:na,zoomArc:sa,zoomarc:ra,zrand:yi,zzfx:Mi},Symbol.toStringTag,{value:"Module"}));export{Te as A,ct as B,F as C,V as D,Qi as E,W as F,Hc as G,kf as H,bc as I,Zi as J,Lc as K,p as P,it as _,eo as a,_c as b,il as c,f as d,Tc as e,pt as f,vf as g,Pc as h,jt as i,N as j,xi as k,E as l,kc as m,ot as n,K as o,xt as p,ne as q,g as r,ao as s,et as t,qc as u,Ac as v,Mf as w,ae as x,x as y,y as z};
//# sourceMappingURL=index.CEVOgZNG.js.map
