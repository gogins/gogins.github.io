{"version":3,"file":"useFrame.84ba1694.js","sources":["../../../packages/react/src/hooks/useEvent.mjs","../../../packages/react/src/hooks/useFrame.mjs"],"sourcesContent":["import { useEffect } from 'react';\n\nfunction useEvent(name, onTrigger, useCapture = false) {\n  useEffect(() => {\n    document.addEventListener(name, onTrigger, useCapture);\n    return () => {\n      document.removeEventListener(name, onTrigger, useCapture);\n    };\n  }, [onTrigger]);\n}\n\nexport default useEvent;\n","import { useEffect, useRef } from 'react';\n\nfunction useFrame(callback, autostart = false) {\n  const requestRef = useRef();\n  const previousTimeRef = useRef();\n\n  const animate = (time) => {\n    if (previousTimeRef.current !== undefined) {\n      const deltaTime = time - previousTimeRef.current;\n      callback(time, deltaTime);\n    }\n    previousTimeRef.current = time;\n    requestRef.current = requestAnimationFrame(animate);\n  };\n\n  const start = () => {\n    requestRef.current = requestAnimationFrame(animate);\n  };\n  const stop = () => {\n    requestRef.current && cancelAnimationFrame(requestRef.current);\n    delete requestRef.current;\n  };\n  useEffect(() => {\n    if (requestRef.current) {\n      stop();\n      start();\n    }\n  }, [callback]);\n\n  useEffect(() => {\n    if (autostart) {\n      start();\n    }\n    return stop;\n  }, []); // Make sure the effect only runs once\n\n  return {\n    start,\n    stop,\n  };\n}\n\nexport default useFrame;\n"],"names":["useEvent","name","onTrigger","useCapture","useEffect","useFrame","callback","autostart","requestRef","useRef","previousTimeRef","animate","time","deltaTime","start","stop"],"mappings":"wCAEA,SAASA,EAASC,EAAMC,EAAWC,EAAa,GAAO,CACrDC,EAAAA,UAAU,KACR,SAAS,iBAAiBH,EAAMC,EAAWC,CAAU,EAC9C,IAAM,CACX,SAAS,oBAAoBF,EAAMC,EAAWC,CAAU,CAC9D,GACK,CAACD,CAAS,CAAC,CAChB,CCPA,SAASG,EAASC,EAAUC,EAAY,GAAO,CAC7C,MAAMC,EAAaC,EAAAA,SACbC,EAAkBD,EAAAA,SAElBE,EAAWC,GAAS,CACxB,GAAIF,EAAgB,UAAY,OAAW,CACzC,MAAMG,EAAYD,EAAOF,EAAgB,QACzCJ,EAASM,EAAMC,CAAS,CACzB,CACDH,EAAgB,QAAUE,EAC1BJ,EAAW,QAAU,sBAAsBG,CAAO,CACtD,EAEQG,EAAQ,IAAM,CAClBN,EAAW,QAAU,sBAAsBG,CAAO,CACtD,EACQI,EAAO,IAAM,CACjBP,EAAW,SAAW,qBAAqBA,EAAW,OAAO,EAC7D,OAAOA,EAAW,OACtB,EACEJ,OAAAA,EAAAA,UAAU,IAAM,CACVI,EAAW,UACbO,IACAD,IAEN,EAAK,CAACR,CAAQ,CAAC,EAEbF,EAAAA,UAAU,KACJG,GACFO,IAEKC,GACN,CAAE,CAAA,EAEE,CACL,MAAAD,EACA,KAAAC,CACJ,CACA"}