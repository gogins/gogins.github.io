import{I as b}from"./utils.LrGx5Wub.js";import{P as h,n as g}from"./index.BqApzMOV.js";import"./useClient.OffH7qpv.js";import"./index.Nkt9jjly.js";import"./scope.a_rP-DLk.js";import"./preload-helper.L44mwuYi.js";import"./jsx-runtime.XGodtQ4D.js";/* empty css                       */const v=144,E=128,M=176;h.prototype.midi=function(u){return this.onTrigger((a,e,d)=>{const{note:n,nrpnn:x,nrpv:y,ccn:s,ccv:t}=e.value,p=(a-d)*1e3,f=Math.floor((e.context?.velocity??.9)*100),l=Math.floor(e.duration.valueOf()*1e3-10),i=Math.round(p),c=(e.value.midichan??1)-1,m=u??"IAC",o=[];if(n!=null){const r=typeof n=="number"?n:g(n);o.push({requestedport:m,message:[v+c,r,f],offset:i}),o.push({requestedport:m,message:[E+c,r,f],offset:i+l})}if(t&&s){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof s))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);o.push({requestedport:m,message:[M+c,s,r],offset:i})}o.length&&setTimeout(()=>{b("sendmidi",{messagesfromjs:o})})})};
