{"version":3,"file":"Repl.j6kxXoNh.js","sources":["../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/AcademicCapIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/ArrowPathIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/LinkIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/PlayCircleIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/SparklesIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/StopCircleIcon.js","../../src/repl/Header.jsx","../../src/repl/Loader.jsx","../../../node_modules/.pnpm/@heroicons+react@2.1.1_react@18.2.0/node_modules/@heroicons/react/20/solid/esm/XMarkIcon.js","../../src/repl/panel/ConsoleTab.jsx","../../src/repl/panel/FilesTab.jsx","../../src/repl/panel/Reference.jsx","../../src/repl/panel/SelectInput.jsx","../../src/repl/panel/AudioDeviceSelector.jsx","../../src/repl/panel/SettingsTab.jsx","../../src/repl/panel/ImportSoundsButton.jsx","../../src/repl/panel/SoundsTab.jsx","../../src/repl/panel/WelcomeTab.jsx","../../src/repl/panel/Panel.jsx","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/factories/cache.js","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/factories/generate-unique-number.js","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/module.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.4/node_modules/worker-timers-broker/build/es2019/guards/call-notification.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.4/node_modules/worker-timers-broker/build/es2019/guards/clear-response.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.4/node_modules/worker-timers-broker/build/es2019/module.js","../../../node_modules/.pnpm/worker-timers@7.1.4/node_modules/worker-timers/build/es2019/factories/load-or-return-broker.js","../../../node_modules/.pnpm/worker-timers@7.1.4/node_modules/worker-timers/build/es2019/worker/worker.js","../../../node_modules/.pnpm/worker-timers@7.1.4/node_modules/worker-timers/build/es2019/module.js","../../src/repl/Repl.jsx"],"sourcesContent":["import * as React from \"react\";\nfunction AcademicCapIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.664 1.319a.75.75 0 0 1 .672 0 41.059 41.059 0 0 1 8.198 5.424.75.75 0 0 1-.254 1.285 31.372 31.372 0 0 0-7.86 3.83.75.75 0 0 1-.84 0 31.508 31.508 0 0 0-2.08-1.287V9.394c0-.244.116-.463.302-.592a35.504 35.504 0 0 1 3.305-2.033.75.75 0 0 0-.714-1.319 37 37 0 0 0-3.446 2.12A2.216 2.216 0 0 0 6 9.393v.38a31.293 31.293 0 0 0-4.28-1.746.75.75 0 0 1-.254-1.285 41.059 41.059 0 0 1 8.198-5.424ZM6 11.459a29.848 29.848 0 0 0-2.455-1.158 41.029 41.029 0 0 0-.39 3.114.75.75 0 0 0 .419.74c.528.256 1.046.53 1.554.82-.21.324-.455.63-.739.914a.75.75 0 1 0 1.06 1.06c.37-.369.69-.77.96-1.193a26.61 26.61 0 0 1 3.095 2.348.75.75 0 0 0 .992 0 26.547 26.547 0 0 1 5.93-3.95.75.75 0 0 0 .42-.739 41.053 41.053 0 0 0-.39-3.114 29.925 29.925 0 0 0-5.199 2.801 2.25 2.25 0 0 1-2.514 0c-.41-.275-.826-.541-1.25-.797a6.985 6.985 0 0 1-1.084 3.45 26.503 26.503 0 0 0-1.281-.78A5.487 5.487 0 0 0 6 12v-.54Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = React.forwardRef(AcademicCapIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction LinkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.232 4.232a2.5 2.5 0 0 1 3.536 3.536l-1.225 1.224a.75.75 0 0 0 1.061 1.06l1.224-1.224a4 4 0 0 0-5.656-5.656l-3 3a4 4 0 0 0 .225 5.865.75.75 0 0 0 .977-1.138 2.5 2.5 0 0 1-.142-3.667l3-3Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.603 7.963a.75.75 0 0 0-.977 1.138 2.5 2.5 0 0 1 .142 3.667l-3 3a2.5 2.5 0 0 1-3.536-3.536l1.225-1.224a.75.75 0 0 0-1.061-1.06l-1.224 1.224a4 4 0 1 0 5.656 5.656l3-3a4 4 0 0 0-.225-5.865Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(LinkIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlayCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = React.forwardRef(PlayCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction SparklesIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.98 1.804a1 1 0 0 0-1.96 0l-.24 1.192a1 1 0 0 1-.784.785l-1.192.238a1 1 0 0 0 0 1.962l1.192.238a1 1 0 0 1 .785.785l.238 1.192a1 1 0 0 0 1.962 0l.238-1.192a1 1 0 0 1 .785-.785l1.192-.238a1 1 0 0 0 0-1.962l-1.192-.238a1 1 0 0 1-.785-.785l-.238-1.192ZM6.949 5.684a1 1 0 0 0-1.898 0l-.683 2.051a1 1 0 0 1-.633.633l-2.051.683a1 1 0 0 0 0 1.898l2.051.684a1 1 0 0 1 .633.632l.683 2.051a1 1 0 0 0 1.898 0l.683-2.051a1 1 0 0 1 .633-.633l2.051-.683a1 1 0 0 0 0-1.898l-2.051-.683a1 1 0 0 1-.633-.633L6.95 5.684ZM13.949 13.684a1 1 0 0 0-1.898 0l-.184.551a1 1 0 0 1-.632.633l-.551.183a1 1 0 0 0 0 1.898l.551.183a1 1 0 0 1 .633.633l.183.551a1 1 0 0 0 1.898 0l.184-.551a1 1 0 0 1 .632-.633l.551-.183a1 1 0 0 0 0-1.898l-.551-.184a1 1 0 0 1-.633-.632l-.183-.551Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(SparklesIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction StopCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm5-2.25A.75.75 0 0 1 7.75 7h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-4.5Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = React.forwardRef(StopCircleIcon);\nexport default ForwardRef;","import AcademicCapIcon from '@heroicons/react/20/solid/AcademicCapIcon';\nimport ArrowPathIcon from '@heroicons/react/20/solid/ArrowPathIcon';\nimport LinkIcon from '@heroicons/react/20/solid/LinkIcon';\nimport PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\nimport SparklesIcon from '@heroicons/react/20/solid/SparklesIcon';\nimport StopCircleIcon from '@heroicons/react/20/solid/StopCircleIcon';\nimport cx from '@src/cx.mjs';\nimport { useSettings, setIsZen } from '../settings.mjs';\n// import { ReplContext } from './Repl';\nimport './Repl.css';\nconst { BASE_URL } = import.meta.env;\nconst baseNoTrailing = BASE_URL.endsWith('/') ? BASE_URL.slice(0, -1) : BASE_URL;\n\nexport function Header({ context }) {\n  const {\n    embedded,\n    started,\n    pending,\n    isDirty,\n    activeCode,\n    handleTogglePlay,\n    handleEvaluate,\n    handleShuffle,\n    handleShare,\n  } = context;\n  const isEmbedded = typeof window !== 'undefined' && (embedded || window.location !== window.parent.location);\n  const { isZen } = useSettings();\n\n  return (\n    <header\n      id=\"header\"\n      className={cx(\n        'flex-none text-black  z-[100] text-lg select-none',\n        !isZen && !isEmbedded && 'bg-lineHighlight',\n        isZen ? 'h-12 w-8 fixed top-0 left-0' : 'sticky top-0 w-full py-1 justify-between',\n        isEmbedded ? 'flex' : 'md:flex',\n      )}\n    >\n      <div className=\"px-4 flex space-x-2 md:pt-0 select-none\">\n        {/*             <img\n    src={logo}\n    className={cx('Tidal-logo', isEmbedded ? 'w-8 h-8' : 'w-10 h-10', started && 'animate-pulse')} // 'bg-[#ffffff80] rounded-full'\n    alt=\"logo\"\n  /> */}\n        <h1\n          onClick={() => {\n            if (isEmbedded) window.open(window.location.href.replace('embed', ''));\n          }}\n          className={cx(\n            isEmbedded ? 'text-l cursor-pointer' : 'text-xl',\n            'text-foreground font-bold flex space-x-2 items-center',\n          )}\n        >\n          <div\n            className={cx('mt-[1px]', started && 'animate-spin', 'cursor-pointer')}\n            onClick={() => {\n              if (!isEmbedded) {\n                setIsZen(!isZen);\n              }\n            }}\n          >\n            🌀\n          </div>\n          {!isZen && (\n            <div className={cx(started && 'animate-pulse')}>\n              <span className=\"\">strudel</span> <span className=\"text-sm\">REPL</span>\n            </div>\n          )}\n        </h1>\n      </div>\n      {!isZen && (\n        <div className=\"flex max-w-full overflow-auto text-foreground\">\n          <button\n            onClick={handleTogglePlay}\n            title={started ? 'stop' : 'play'}\n            className={cx(!isEmbedded ? 'p-2' : 'px-2', 'hover:opacity-50', !started && 'animate-pulse')}\n          >\n            {!pending ? (\n              <span className={cx('flex items-center space-x-1', isEmbedded ? '' : 'w-16')}>\n                {started ? <StopCircleIcon className=\"w-6 h-6\" /> : <PlayCircleIcon className=\"w-6 h-6\" />}\n                {!isEmbedded && <span>{started ? 'stop' : 'play'}</span>}\n              </span>\n            ) : (\n              <>loading...</>\n            )}\n          </button>\n          <button\n            onClick={handleEvaluate}\n            title=\"update\"\n            className={cx(\n              'flex items-center space-x-1',\n              !isEmbedded ? 'p-2' : 'px-2',\n              !isDirty || !activeCode ? 'opacity-50' : 'hover:opacity-50',\n            )}\n          >\n            {/*             <CommandLineIcon className=\"w-6 h-6\" /> */}\n            <ArrowPathIcon className=\"w-6 h-6\" />\n            {!isEmbedded && <span>update</span>}\n          </button>\n          {!isEmbedded && (\n            <button\n              title=\"shuffle\"\n              className=\"hover:opacity-50 p-2 flex items-center space-x-1\"\n              onClick={handleShuffle}\n            >\n              <SparklesIcon className=\"w-6 h-6\" />\n              <span> shuffle</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <button\n              title=\"share\"\n              className={cx(\n                'cursor-pointer hover:opacity-50 flex items-center space-x-1',\n                !isEmbedded ? 'p-2' : 'px-2',\n              )}\n              onClick={handleShare}\n            >\n              <LinkIcon className=\"w-6 h-6\" />\n              <span>share</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <a\n              title=\"learn\"\n              href={`${baseNoTrailing}/workshop/getting-started/`}\n              className={cx('hover:opacity-50 flex items-center space-x-1', !isEmbedded ? 'p-2' : 'px-2')}\n            >\n              <AcademicCapIcon className=\"w-6 h-6\" />\n              <span>learn</span>\n            </a>\n          )}\n          {/* {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a href={window.location.href} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Open in REPL\">\n                🚀\n              </a>\n            </button>\n          )}\n          {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a\n                onClick={() => {\n                  window.location.href = initialUrl;\n                  window.location.reload();\n                }}\n                title=\"Reset\"\n              >\n                💔\n              </a>\n            </button>\n          )} */}\n        </div>\n      )}\n    </header>\n  );\n}\n","import cx from '@src/cx.mjs';\n\nfunction Loader({ active }) {\n  return (\n    <div className=\"overflow-hidden opacity-50 fixed top-0 left-0 w-full z-[1000]\">\n      <div className={cx('h-[2px] block w-full', active ? 'bg-foreground animate-train' : 'bg-transparent')}>\n        <div />\n      </div>\n    </div>\n  );\n}\nexport default Loader;\n","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z\"\n  }));\n}\nconst ForwardRef = React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import cx from '@src/cx.mjs';\n\nexport function ConsoleTab({ log }) {\n  return (\n    <div id=\"console-tab\" className=\"break-all px-4 dark:text-white text-stone-900 text-sm\">\n      <pre>{`███████╗████████╗██████╗ ██╗   ██╗██████╗ ███████╗██╗     \n██╔════╝╚══██╔══╝██╔══██╗██║   ██║██╔══██╗██╔════╝██║     \n███████╗   ██║   ██████╔╝██║   ██║██║  ██║█████╗  ██║     \n╚════██║   ██║   ██╔══██╗██║   ██║██║  ██║██╔══╝  ██║     \n███████║   ██║   ██║  ██║╚██████╔╝██████╔╝███████╗███████╗\n╚══════╝   ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚═════╝ ╚══════╝╚══════╝`}</pre>\n      {log.map((l, i) => {\n        const message = linkify(l.message);\n        return (\n          <div key={l.id} className={cx(l.type === 'error' && 'text-red-500', l.type === 'highlight' && 'underline')}>\n            <span dangerouslySetInnerHTML={{ __html: message }} />\n            {l.count ? ` (${l.count})` : ''}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction linkify(inputText) {\n  var replacedText, replacePattern1, replacePattern2, replacePattern3;\n\n  //URLs starting with http://, https://, or ftp://\n  replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n  replacedText = inputText.replace(replacePattern1, '<a class=\"underline\" href=\"$1\" target=\"_blank\">$1</a>');\n\n  //URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n  replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n  replacedText = replacedText.replace(\n    replacePattern2,\n    '$1<a class=\"underline\" href=\"http://$2\" target=\"_blank\">$2</a>',\n  );\n\n  //Change email addresses to mailto:: links.\n  replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n  replacedText = replacedText.replace(replacePattern3, '<a class=\"underline\" href=\"mailto:$1\">$1</a>');\n\n  return replacedText;\n}\n","import { Fragment, useEffect } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { isAudioFile, readDir, dir, playFile } from '../files.mjs';\n\nexport function FilesTab() {\n  const [path, setPath] = useState([]);\n  useEffect(() => {\n    let init = false;\n    readDir('', { dir, recursive: true })\n      .then((children) => setPath([{ name: '~/music', children }]))\n      .catch((err) => {\n        console.log('error loadin files', err);\n      });\n    return () => {\n      init = true;\n    };\n  }, []);\n  const current = useMemo(() => path[path.length - 1], [path]);\n  const subpath = useMemo(\n    () =>\n      path\n        .slice(1)\n        .map((p) => p.name)\n        .join('/'),\n    [path],\n  );\n  const folders = useMemo(() => current?.children.filter((e) => !!e.children), [current]);\n  const files = useMemo(() => current?.children.filter((e) => !e.children && isAudioFile(e.name)), [current]);\n  const select = (e) => setPath((p) => p.concat([e]));\n  return (\n    <div className=\"px-4 flex flex-col h-full\">\n      <div className=\"flex justify-between font-mono pb-1\">\n        <div>\n          <span>{`samples('`}</span>\n          {path?.map((p, i) => {\n            if (i < path.length - 1) {\n              return (\n                <Fragment key={i}>\n                  <span className=\"cursor-pointer underline\" onClick={() => setPath((p) => p.slice(0, i + 1))}>\n                    {p.name}\n                  </span>\n                  <span>/</span>\n                </Fragment>\n              );\n            } else {\n              return (\n                <span className=\"cursor-pointer underline\" key={i}>\n                  {p.name}\n                </span>\n              );\n            }\n          })}\n          <span>{`')`}</span>\n        </div>\n      </div>\n      <div className=\"overflow-auto\">\n        {!folders?.length && !files?.length && <span className=\"text-gray-500\">Nothing here</span>}\n        {folders?.map((e, i) => (\n          <div className=\"cursor-pointer\" key={i} onClick={() => select(e)}>\n            {e.name}\n          </div>\n        ))}\n        {files?.map((e, i) => (\n          <div\n            className=\"text-gray-500 cursor-pointer select-none\"\n            key={i}\n            onClick={async () => playFile(`${subpath}/${e.name}`)}\n          >\n            {e.name}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import jsdocJson from '../../../../doc.json';\nconst visibleFunctions = jsdocJson.docs\n  .filter(({ name, description }) => name && !name.startsWith('_') && !!description)\n  .sort((a, b) => /* a.meta.filename.localeCompare(b.meta.filename) +  */ a.name.localeCompare(b.name));\n\nconst getInnerText = (html) => {\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  return div.textContent || div.innerText || '';\n};\n\nexport function Reference() {\n  return (\n    <div className=\"flex h-full w-full pt-2 text-foreground overflow-hidden\">\n      <div className=\"w-42 flex-none h-full overflow-y-auto overflow-x-hidden pr-4\">\n        {visibleFunctions.map((entry, i) => (\n          <a\n            key={i}\n            className=\"cursor-pointer block hover:bg-lineHighlight py-1 px-4\"\n            onClick={() => {\n              const el = document.getElementById(`doc-${i}`);\n              const container = document.getElementById('reference-container');\n              container.scrollTo(0, el.offsetTop);\n            }}\n          >\n            {entry.name} {/* <span className=\"text-gray-600\">{entry.meta.filename}</span> */}\n          </a>\n        ))}\n      </div>\n      <div className=\"break-normal w-full h-full overflow-auto pl-4 flex relative\" id=\"reference-container\">\n        <div className=\"prose dark:prose-invert max-w-full pr-4\">\n          <h2>API Reference</h2>\n          <p>\n            This is the long list functions you can use! Remember that you don't need to remember all of those and that\n            you can already make music with a small set of functions!\n          </p>\n          {visibleFunctions.map((entry, i) => (\n            <section key={i}>\n              <h3 id={`doc-${i}`}>{entry.name}</h3>\n              {!!entry.synonyms_text && (\n                <p>\n                  Synonyms: <code>{entry.synonyms_text}</code>\n                </p>\n              )}\n              {/* <small>{entry.meta.filename}</small> */}\n              <p dangerouslySetInnerHTML={{ __html: entry.description }}></p>\n              <ul>\n                {entry.params?.map(({ name, type, description }, i) => (\n                  <li key={i}>\n                    {name} : {type.names?.join(' | ')} {description ? <> - {getInnerText(description)}</> : ''}\n                  </li>\n                ))}\n              </ul>\n              {entry.examples?.map((example, j) => (\n                <pre key={j}>{example}</pre>\n              ))}\n            </section>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n//      value: ?ID, options: Map<ID, any>, onChange: ID => null, onClick: event => void, isDisabled: boolean\nexport function SelectInput({ value, options, onChange, onClick, isDisabled }) {\n  return (\n    <select\n      disabled={isDisabled}\n      onClick={onClick}\n      className=\"p-2 bg-background rounded-md text-foreground\"\n      value={value ?? ''}\n      onChange={(e) => onChange(e.target.value)}\n    >\n      {options.size == 0 && <option value={value}>{`${value ?? 'select an option'}`}</option>}\n      {Array.from(options.keys()).map((id) => (\n        <option key={id} className=\"bg-background\" value={id}>\n          {options.get(id)}\n        </option>\n      ))}\n    </select>\n  );\n}\n","import React, { useState } from 'react';\nimport { getAudioDevices, setAudioDevice } from '../util.mjs';\nimport { SelectInput } from './SelectInput';\n\nconst initdevices = new Map();\n\n// Allows the user to select an audio interface for Strudel to play through\nexport function AudioDeviceSelector({ audioDeviceName, onChange, isDisabled }) {\n  const [devices, setDevices] = useState(initdevices);\n  const devicesInitialized = devices.size > 0;\n\n  const onClick = () => {\n    if (devicesInitialized) {\n      return;\n    }\n    getAudioDevices().then((devices) => {\n      setDevices(devices);\n    });\n  };\n  const onDeviceChange = (deviceName) => {\n    if (!devicesInitialized) {\n      return;\n    }\n    const deviceID = devices.get(deviceName);\n    onChange(deviceName);\n    setAudioDevice(deviceID);\n  };\n  const options = new Map();\n  Array.from(devices.keys()).forEach((deviceName) => {\n    options.set(deviceName, deviceName);\n  });\n  return (\n    <SelectInput\n      isDisabled={isDisabled}\n      options={options}\n      onClick={onClick}\n      value={audioDeviceName}\n      onChange={onDeviceChange}\n    />\n  );\n}\n","import { defaultSettings, settingsMap, useSettings } from '../../settings.mjs';\nimport { themes } from '@strudel/codemirror';\nimport { ButtonGroup } from './Forms.jsx';\nimport { AudioDeviceSelector } from './AudioDeviceSelector.jsx';\n\nfunction Checkbox({ label, value, onChange }) {\n  return (\n    <label>\n      <input type=\"checkbox\" checked={value} onChange={onChange} />\n      {' ' + label}\n    </label>\n  );\n}\n\nfunction SelectInput({ value, options, onChange }) {\n  return (\n    <select\n      className=\"p-2 bg-background rounded-md text-foreground\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    >\n      {Object.entries(options).map(([k, label]) => (\n        <option key={k} className=\"bg-background\" value={k}>\n          {label}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction NumberSlider({ value, onChange, step = 1, ...rest }) {\n  return (\n    <div className=\"flex space-x-2 gap-1\">\n      <input\n        className=\"p-2 grow\"\n        type=\"range\"\n        value={value}\n        step={step}\n        onChange={(e) => onChange(Number(e.target.value))}\n        {...rest}\n      />\n      <input\n        type=\"number\"\n        value={value}\n        step={step}\n        className=\"w-16 bg-background rounded-md\"\n        onChange={(e) => onChange(Number(e.target.value))}\n      />\n    </div>\n  );\n}\n\nfunction FormItem({ label, children }) {\n  return (\n    <div className=\"grid gap-2\">\n      <label>{label}</label>\n      {children}\n    </div>\n  );\n}\n\nconst themeOptions = Object.fromEntries(Object.keys(themes).map((k) => [k, k]));\nconst fontFamilyOptions = {\n  monospace: 'monospace',\n  Courier: 'Courier',\n  JetBrains: 'JetBrains',\n  Hack: 'Hack',\n  FiraCode: 'FiraCode',\n  'FiraCode-SemiBold': 'FiraCode SemiBold',\n  teletext: 'teletext',\n  mode7: 'mode7',\n  BigBlueTerminal: 'BigBlueTerminal',\n  x3270: 'x3270',\n  Monocraft: 'Monocraft',\n  PressStart: 'PressStart2P',\n  'we-come-in-peace': 'we-come-in-peace',\n  galactico: 'galactico',\n};\n\nexport function SettingsTab({ started }) {\n  const {\n    theme,\n    keybindings,\n    isBracketClosingEnabled,\n    isBracketMatchingEnabled,\n    isLineNumbersDisplayed,\n    isPatternHighlightingEnabled,\n    isActiveLineHighlighted,\n    isAutoCompletionEnabled,\n    isTooltipEnabled,\n    isFlashEnabled,\n    isSyncEnabled,\n    isLineWrappingEnabled,\n    fontSize,\n    fontFamily,\n    panelPosition,\n    audioDeviceName,\n  } = useSettings();\n\n  return (\n    <div className=\"text-foreground p-4 space-y-4\">\n      {AudioContext.prototype.setSinkId != null && (\n        <FormItem label=\"Audio Output Device\">\n          <AudioDeviceSelector\n            isDisabled={started}\n            audioDeviceName={audioDeviceName}\n            onChange={(audioDeviceName) => settingsMap.setKey('audioDeviceName', audioDeviceName)}\n          />\n        </FormItem>\n      )}\n      <FormItem label=\"Theme\">\n        <SelectInput options={themeOptions} value={theme} onChange={(theme) => settingsMap.setKey('theme', theme)} />\n      </FormItem>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <FormItem label=\"Font Family\">\n          <SelectInput\n            options={fontFamilyOptions}\n            value={fontFamily}\n            onChange={(fontFamily) => settingsMap.setKey('fontFamily', fontFamily)}\n          />\n        </FormItem>\n        <FormItem label=\"Font Size\">\n          <NumberSlider\n            value={fontSize}\n            onChange={(fontSize) => settingsMap.setKey('fontSize', fontSize)}\n            min={10}\n            max={40}\n            step={2}\n          />\n        </FormItem>\n      </div>\n      <FormItem label=\"Keybindings\">\n        <ButtonGroup\n          value={keybindings}\n          onChange={(keybindings) => settingsMap.setKey('keybindings', keybindings)}\n          items={{ codemirror: 'Codemirror', vim: 'Vim', emacs: 'Emacs', vscode: 'VSCode' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Panel Position\">\n        <ButtonGroup\n          value={panelPosition}\n          onChange={(value) => settingsMap.setKey('panelPosition', value)}\n          items={{ bottom: 'Bottom', right: 'Right' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Code Settings\">\n        <Checkbox\n          label=\"Enable bracket matching\"\n          onChange={(cbEvent) => settingsMap.setKey('isBracketMatchingEnabled', cbEvent.target.checked)}\n          value={isBracketMatchingEnabled}\n        />\n        <Checkbox\n          label=\"Auto close brackets\"\n          onChange={(cbEvent) => settingsMap.setKey('isBracketClosingEnabled', cbEvent.target.checked)}\n          value={isBracketClosingEnabled}\n        />\n        <Checkbox\n          label=\"Display line numbers\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineNumbersDisplayed', cbEvent.target.checked)}\n          value={isLineNumbersDisplayed}\n        />\n        <Checkbox\n          label=\"Highlight active line\"\n          onChange={(cbEvent) => settingsMap.setKey('isActiveLineHighlighted', cbEvent.target.checked)}\n          value={isActiveLineHighlighted}\n        />\n        <Checkbox\n          label=\"Highlight events in code\"\n          onChange={(cbEvent) => settingsMap.setKey('isPatternHighlightingEnabled', cbEvent.target.checked)}\n          value={isPatternHighlightingEnabled}\n        />\n        <Checkbox\n          label=\"Enable auto-completion\"\n          onChange={(cbEvent) => settingsMap.setKey('isAutoCompletionEnabled', cbEvent.target.checked)}\n          value={isAutoCompletionEnabled}\n        />\n        <Checkbox\n          label=\"Enable tooltips on Ctrl and hover\"\n          onChange={(cbEvent) => settingsMap.setKey('isTooltipEnabled', cbEvent.target.checked)}\n          value={isTooltipEnabled}\n        />\n        <Checkbox\n          label=\"Enable line wrapping\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineWrappingEnabled', cbEvent.target.checked)}\n          value={isLineWrappingEnabled}\n        />\n        <Checkbox\n          label=\"Enable flashing on evaluation\"\n          onChange={(cbEvent) => settingsMap.setKey('isFlashEnabled', cbEvent.target.checked)}\n          value={isFlashEnabled}\n        />\n        <Checkbox\n          label=\"Sync across Browser Tabs / Windows\"\n          onChange={(cbEvent) => {\n            if (confirm('Changing this setting requires the window to reload itself. OK?')) {\n              settingsMap.setKey('isSyncEnabled', cbEvent.target.checked);\n              window.location.reload();\n            }\n          }}\n          value={isSyncEnabled}\n        />\n      </FormItem>\n      <FormItem label=\"Zen Mode\">Try clicking the logo in the top left!</FormItem>\n      <FormItem label=\"Reset Settings\">\n        <button\n          className=\"bg-background p-2 max-w-[300px] rounded-md hover:opacity-50\"\n          onClick={() => {\n            if (confirm('Sure?')) {\n              settingsMap.set(defaultSettings);\n            }\n          }}\n        >\n          restore default settings\n        </button>\n      </FormItem>\n    </div>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { registerSamplesFromDB, uploadSamplesToDB, userSamplesDBConfig } from '../idbutils.mjs';\n\n//choose a directory to locally import samples\nexport default function ImportSoundsButton({ onComplete }) {\n  let fileUploadRef = React.createRef();\n  const [isUploading, setIsUploading] = useState(false);\n  const onChange = useCallback(async () => {\n    if (!fileUploadRef.current.files?.length) {\n      return;\n    }\n    setIsUploading(true);\n    await uploadSamplesToDB(userSamplesDBConfig, fileUploadRef.current.files).then(() => {\n      registerSamplesFromDB(userSamplesDBConfig, () => {\n        onComplete();\n        setIsUploading(false);\n      });\n    });\n  });\n\n  return (\n    <label\n      style={{ alignItems: 'center' }}\n      className=\"flex bg-background ml-2 pl-2 pr-2 max-w-[300px] rounded-md hover:opacity-50 whitespace-nowrap cursor-pointer\"\n    >\n      <input\n        disabled={isUploading}\n        ref={fileUploadRef}\n        id=\"audio_file\"\n        style={{ display: 'none' }}\n        type=\"file\"\n        directory=\"\"\n        webkitdirectory=\"\"\n        multiple\n        accept=\"audio/*\"\n        onChange={() => {\n          onChange();\n        }}\n      />\n      {isUploading ? 'importing...' : 'import sounds'}\n    </label>\n  );\n}\n","import useEvent from '@src/useEvent.mjs';\nimport { useStore } from '@nanostores/react';\nimport { getAudioContext, soundMap, connectToDestination } from '@strudel/webaudio';\nimport React, { useMemo, useRef } from 'react';\nimport { settingsMap, useSettings } from '../../settings.mjs';\nimport { ButtonGroup } from './Forms.jsx';\nimport ImportSoundsButton from './ImportSoundsButton.jsx';\n\nconst getSamples = (samples) =>\n  Array.isArray(samples) ? samples.length : typeof samples === 'object' ? Object.values(samples).length : 1;\n\nexport function SoundsTab() {\n  const sounds = useStore(soundMap);\n  const { soundsFilter } = useSettings();\n  const soundEntries = useMemo(() => {\n    let filtered = Object.entries(sounds).filter(([key]) => !key.startsWith('_'));\n    if (!sounds) {\n      return [];\n    }\n    if (soundsFilter === 'user') {\n      return filtered.filter(([key, { data }]) => !data.prebake);\n    }\n    if (soundsFilter === 'drums') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag === 'drum-machines');\n    }\n    if (soundsFilter === 'samples') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag !== 'drum-machines');\n    }\n    if (soundsFilter === 'synths') {\n      return filtered.filter(([_, { data }]) => ['synth', 'soundfont'].includes(data.type));\n    }\n    return filtered;\n  }, [sounds, soundsFilter]);\n  // holds mutable ref to current triggered sound\n  const trigRef = useRef();\n  // stop current sound on mouseup\n  useEvent('mouseup', () => {\n    const t = trigRef.current;\n    trigRef.current = undefined;\n    t?.then((ref) => {\n      ref?.stop(getAudioContext().currentTime + 0.01);\n    });\n  });\n  return (\n    <div id=\"sounds-tab\" className=\"px-4 flex flex-col w-full h-full dark:text-white text-stone-900\">\n      <div className=\"pb-2 flex shrink-0 overflow-auto\">\n        <ButtonGroup\n          value={soundsFilter}\n          onChange={(value) => settingsMap.setKey('soundsFilter', value)}\n          items={{\n            samples: 'samples',\n            drums: 'drum-machines',\n            synths: 'Synths',\n            user: 'User',\n          }}\n        ></ButtonGroup>\n        <ImportSoundsButton onComplete={() => settingsMap.setKey('soundsFilter', 'user')} />\n      </div>\n      <div className=\"min-h-0 max-h-full grow overflow-auto font-mono text-sm break-normal\">\n        {soundEntries.map(([name, { data, onTrigger }]) => {\n          return (\n            <span\n              key={name}\n              className=\"cursor-pointer hover:opacity-50\"\n              onMouseDown={async () => {\n                const ctx = getAudioContext();\n                const params = {\n                  note: ['synth', 'soundfont'].includes(data.type) ? 'a3' : undefined,\n                  s: name,\n                  clip: 1,\n                  release: 0.5,\n                  sustain: 1,\n                  duration: 0.5,\n                };\n                const time = ctx.currentTime + 0.05;\n                const onended = () => trigRef.current?.node?.disconnect();\n                trigRef.current = Promise.resolve(onTrigger(time, params, onended));\n                trigRef.current.then((ref) => {\n                  connectToDestination(ref?.node);\n                });\n              }}\n            >\n              {' '}\n              {name}\n              {data?.type === 'sample' ? `(${getSamples(data.samples)})` : ''}\n              {data?.type === 'soundfont' ? `(${data.fonts.length})` : ''}\n            </span>\n          );\n        })}\n        {!soundEntries.length ? 'No custom sounds loaded in this pattern (yet).' : ''}\n      </div>\n    </div>\n  );\n}\n","import cx from '@src/cx.mjs';\n\nconst { BASE_URL } = import.meta.env;\nconst baseNoTrailing = BASE_URL.endsWith('/') ? BASE_URL.slice(0, -1) : BASE_URL;\n\nexport function WelcomeTab({ context }) {\n  return (\n    <div className=\"prose dark:prose-invert max-w-[600px] pt-2 font-sans pb-8 px-4\">\n      <h3>\n        <span className={cx('animate-spin inline-block select-none')}>🌀</span> welcome\n      </h3>\n      <p>\n        You have found <span className=\"underline\">strudel</span>, a new live coding platform to write dynamic music\n        pieces in the browser! It is free and open-source and made for beginners and experts alike. To get started:\n        <br />\n        <br />\n        <span className=\"underline\">1. hit play</span> - <span className=\"underline\">2. change something</span> -{' '}\n        <span className=\"underline\">3. hit update</span>\n        <br />\n        If you don't like what you hear, try <span className=\"underline\">shuffle</span>!\n      </p>\n      <p>\n        To learn more about what this all means, check out the{' '}\n        <a href={`${baseNoTrailing}/workshop/getting-started/`} target=\"_blank\">\n          interactive tutorial\n        </a>\n        . Also feel free to join the{' '}\n        <a href=\"https://discord.com/invite/HGEdXmRkzT\" target=\"_blank\">\n          tidalcycles discord channel\n        </a>{' '}\n        to ask any questions, give feedback or just say hello.\n      </p>\n      <h3>about</h3>\n      <p>\n        strudel is a JavaScript version of{' '}\n        <a href=\"https://tidalcycles.org/\" target=\"_blank\">\n          tidalcycles\n        </a>\n        , which is a popular live coding language for music, written in Haskell. Strudel is free/open source software:\n        you can redistribute and/or modify it under the terms of the{' '}\n        <a href=\"https://github.com/tidalcycles/strudel/blob/main/LICENSE\" target=\"_blank\">\n          GNU Affero General Public License\n        </a>\n        . You can find the source code at{' '}\n        <a href=\"https://github.com/tidalcycles/strudel\" target=\"_blank\">\n          github\n        </a>\n        . Please consider to{' '}\n        <a href=\"https://opencollective.com/tidalcycles\" target=\"_blank\">\n          support this project\n        </a>{' '}\n        to ensure ongoing development 💖\n      </p>\n    </div>\n  );\n}\n","import XMarkIcon from '@heroicons/react/20/solid/XMarkIcon';\nimport { logger } from '@strudel/core';\nimport useEvent from '@src/useEvent.mjs';\nimport cx from '@src/cx.mjs';\nimport { nanoid } from 'nanoid';\nimport { useCallback, useLayoutEffect, useEffect, useRef, useState } from 'react';\nimport { setActiveFooter, useSettings } from '../../settings.mjs';\nimport { ConsoleTab } from './ConsoleTab';\nimport { FilesTab } from './FilesTab';\nimport { Reference } from './Reference';\nimport { SettingsTab } from './SettingsTab';\nimport { SoundsTab } from './SoundsTab';\nimport { WelcomeTab } from './WelcomeTab';\nimport { PatternsTab } from './PatternsTab';\nimport useClient from '@src/useClient.mjs';\n\n// https://gist.github.com/gaearon/e7d97cdf38a2907924ea12e4ebdf3c85\nexport const useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\nconst TAURI = typeof window !== 'undefined' && window.__TAURI__;\n\nexport function Panel({ context }) {\n  const footerContent = useRef();\n  const [log, setLog] = useState([]);\n  const { activeFooter, isZen, panelPosition } = useSettings();\n\n  useIsomorphicLayoutEffect(() => {\n    if (footerContent.current && activeFooter === 'console') {\n      // scroll log box to bottom when log changes\n      footerContent.current.scrollTop = footerContent.current?.scrollHeight;\n    }\n  }, [log, activeFooter]);\n  useIsomorphicLayoutEffect(() => {\n    if (!footerContent.current) {\n    } else if (activeFooter === 'console') {\n      footerContent.current.scrollTop = footerContent.current?.scrollHeight;\n    } else {\n      footerContent.current.scrollTop = 0;\n    }\n  }, [activeFooter]);\n\n  useLogger(\n    useCallback((e) => {\n      const { message, type, data } = e.detail;\n      setLog((l) => {\n        const lastLog = l.length ? l[l.length - 1] : undefined;\n        const id = nanoid(12);\n        // if (type === 'loaded-sample' && lastLog.type === 'load-sample' && lastLog.url === data.url) {\n        if (type === 'loaded-sample') {\n          // const loadIndex = l.length - 1;\n          const loadIndex = l.findIndex(({ data: { url }, type }) => type === 'load-sample' && url === data.url);\n          l[loadIndex] = { message, type, id, data };\n        } else if (lastLog && lastLog.message === message) {\n          l = l.slice(0, -1).concat([{ message, type, count: (lastLog.count ?? 1) + 1, id, data }]);\n        } else {\n          l = l.concat([{ message, type, id, data }]);\n        }\n        return l.slice(-20);\n      });\n    }, []),\n  );\n\n  const PanelTab = ({ children, name, label }) => (\n    <>\n      <div\n        onClick={() => setActiveFooter(name)}\n        className={cx(\n          'h-8 px-2 text-foreground cursor-pointer hover:opacity-50 flex items-center space-x-1 border-b',\n          activeFooter === name ? 'border-foreground' : 'border-transparent',\n        )}\n      >\n        {label || name}\n      </div>\n      {activeFooter === name && <>{children}</>}\n    </>\n  );\n  const client = useClient();\n  if (isZen) {\n    return null;\n  }\n\n  const isActive = activeFooter !== '';\n\n  let positions = {\n    right: cx('max-w-full flex-grow-0 flex-none overflow-hidden', isActive ? 'w-[600px] h-full' : 'absolute right-0'),\n    bottom: cx('relative', isActive ? 'h-[360px] min-h-[360px]' : ''),\n  };\n  if (!client) {\n    return null;\n  }\n  return (\n    <nav className={cx('bg-lineHighlight z-[10] flex flex-col', positions[panelPosition])}>\n      <div className=\"flex justify-between px-2\">\n        <div className={cx('flex select-none max-w-full overflow-auto', activeFooter && 'pb-2')}>\n          <PanelTab name=\"intro\" label=\"welcome\" />\n          <PanelTab name=\"patterns\" />\n          <PanelTab name=\"sounds\" />\n          <PanelTab name=\"console\" />\n          <PanelTab name=\"reference\" />\n          <PanelTab name=\"settings\" />\n          {TAURI && <PanelTab name=\"files\" />}\n        </div>\n        {activeFooter !== '' && (\n          <button onClick={() => setActiveFooter('')} className=\"text-foreground px-2\" aria-label=\"Close Panel\">\n            <XMarkIcon className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n      {activeFooter !== '' && (\n        <div className=\"relative overflow-hidden\">\n          <div className=\"text-white overflow-auto h-full max-w-full\" ref={footerContent}>\n            {activeFooter === 'intro' && <WelcomeTab context={context} />}\n            {activeFooter === 'patterns' && <PatternsTab context={context} />}\n            {activeFooter === 'console' && <ConsoleTab log={log} />}\n            {activeFooter === 'sounds' && <SoundsTab />}\n            {activeFooter === 'reference' && <Reference />}\n            {activeFooter === 'settings' && <SettingsTab started={context.started} />}\n            {activeFooter === 'files' && <FilesTab />}\n          </div>\n        </div>\n      )}\n    </nav>\n  );\n}\n\nfunction useLogger(onTrigger) {\n  useEvent(logger.key, onTrigger);\n}\n","export const createCache = (lastNumberWeakMap) => {\n    return (collection, nextNumber) => {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n    };\n};\n//# sourceMappingURL=cache.js.map","/*\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n * is fairly new.\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\nexport const createGenerateUniqueNumber = (cache, lastNumberWeakMap) => {\n    return (collection) => {\n        const lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n            return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n            while (collection.has(nextNumber)) {\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n            }\n            return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n    };\n};\n//# sourceMappingURL=generate-unique-number.js.map","import { createAddUniqueNumber } from './factories/add-unique-number';\nimport { createCache } from './factories/cache';\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './types/index';\nconst LAST_NUMBER_WEAK_MAP = new WeakMap();\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\nexport { addUniqueNumber, generateUniqueNumber };\n//# sourceMappingURL=module.js.map","export const isCallNotification = (message) => {\n    return message.method !== undefined && message.method === 'call';\n};\n//# sourceMappingURL=call-notification.js.map","export const isClearResponse = (message) => {\n    return message.error === null && typeof message.id === 'number';\n};\n//# sourceMappingURL=clear-response.js.map","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { isCallNotification } from './guards/call-notification';\nimport { isClearResponse } from './guards/clear-response';\nexport const load = (url) => {\n    // Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.\n    const scheduledIntervalFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const scheduledTimeoutFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const unrespondedRequests = new Map();\n    const worker = new Worker(url);\n    worker.addEventListener('message', ({ data }) => {\n        if (isCallNotification(data)) {\n            const { params: { timerId, timerType } } = data;\n            if (timerType === 'interval') {\n                const idOrFunc = scheduledIntervalFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n            else if (timerType === 'timeout') {\n                const idOrFunc = scheduledTimeoutFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                    // A timeout can be savely deleted because it is only called once.\n                    scheduledTimeoutFunctions.delete(timerId);\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n        }\n        else if (isClearResponse(data)) {\n            const { id } = data;\n            const timerIdAndTimerType = unrespondedRequests.get(id);\n            if (timerIdAndTimerType === undefined) {\n                throw new Error('The timer is in an undefined state.');\n            }\n            const { timerId, timerType } = timerIdAndTimerType;\n            unrespondedRequests.delete(id);\n            if (timerType === 'interval') {\n                scheduledIntervalFunctions.delete(timerId);\n            }\n            else {\n                scheduledTimeoutFunctions.delete(timerId);\n            }\n        }\n        else {\n            const { error: { message } } = data;\n            throw new Error(message);\n        }\n    });\n    const clearInterval = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'interval' });\n        scheduledIntervalFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'interval' }\n        });\n    };\n    const clearTimeout = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'timeout' });\n        scheduledTimeoutFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'timeout' }\n        });\n    };\n    const setInterval = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledIntervalFunctions);\n        scheduledIntervalFunctions.set(timerId, () => {\n            func();\n            // Doublecheck if the interval should still be rescheduled because it could have been cleared inside of func().\n            if (typeof scheduledIntervalFunctions.get(timerId) === 'function') {\n                worker.postMessage({\n                    id: null,\n                    method: 'set',\n                    params: {\n                        delay,\n                        now: performance.now(),\n                        timerId,\n                        timerType: 'interval'\n                    }\n                });\n            }\n        });\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'interval'\n            }\n        });\n        return timerId;\n    };\n    const setTimeout = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledTimeoutFunctions);\n        scheduledTimeoutFunctions.set(timerId, func);\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'timeout'\n            }\n        });\n        return timerId;\n    };\n    return {\n        clearInterval,\n        clearTimeout,\n        setInterval,\n        setTimeout\n    };\n};\n//# sourceMappingURL=module.js.map","export const createLoadOrReturnBroker = (loadBroker, worker) => {\n    let broker = null;\n    return () => {\n        if (broker !== null) {\n            return broker;\n        }\n        const blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        broker = loadBroker(url);\n        // Bug #1: Edge up until v18 didn't like the URL to be revoked directly.\n        setTimeout(() => URL.revokeObjectURL(url));\n        return broker;\n    };\n};\n//# sourceMappingURL=load-or-return-broker.js.map","// This is the minified and stringified code of the worker-timers-worker package.\nexport const worker = `(()=>{\"use strict\";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:\"call\",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener(\"message\",(i=>{let{data:s}=i;try{if(\"clear\"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if(\"interval\"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id \"'.concat(t,'\".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if(\"timeout\"!==i)throw new Error('The given type \"'.concat(i,'\" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id \"'.concat(e,'\".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if(\"set\"!==s.method)throw new Error('The given method \"'.concat(s.method,'\" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if(\"interval\"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,\"interval\"))})(i,a,n);else{if(\"timeout\"!==d)throw new Error('The given type \"'.concat(d,'\" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,\"timeout\"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`; // tslint:disable-line:max-line-length\n//# sourceMappingURL=worker.js.map","import { load } from 'worker-timers-broker';\nimport { createLoadOrReturnBroker } from './factories/load-or-return-broker';\nimport { worker } from './worker/worker';\nconst loadOrReturnBroker = createLoadOrReturnBroker(load, worker);\nexport const clearInterval = (timerId) => loadOrReturnBroker().clearInterval(timerId);\nexport const clearTimeout = (timerId) => loadOrReturnBroker().clearTimeout(timerId);\nexport const setInterval = (...args) => loadOrReturnBroker().setInterval(...args);\nexport const setTimeout = (...args) => loadOrReturnBroker().setTimeout(...args);\n//# sourceMappingURL=module.js.map","/*\nRepl.jsx - <short description TODO>\nCopyright (C) 2022 Strudel contributors - see <https://github.com/tidalcycles/strudel/blob/main/repl/src/App.js>\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { code2hash, logger, silence } from '@strudel/core';\nimport { getDrawContext } from '@strudel/draw';\nimport cx from '@src/cx.mjs';\nimport { transpiler } from '@strudel/transpiler';\nimport {\n  getAudioContext,\n  initAudioOnFirstClick,\n  webaudioOutput,\n  resetGlobalEffects,\n  resetLoadedSounds,\n} from '@strudel/webaudio';\nimport { defaultAudioDeviceName } from '../settings.mjs';\nimport { getAudioDevices, setAudioDevice } from './util.mjs';\nimport { StrudelMirror, defaultSettings } from '@strudel/codemirror';\nimport { clearHydra } from '@strudel/hydra';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { settingsMap, useSettings } from '../settings.mjs';\nimport {\n  setActivePattern,\n  setLatestCode,\n  createPatternID,\n  userPattern,\n  getViewingPatternData,\n  setViewingPatternData,\n} from '../user_pattern_utils.mjs';\nimport { Header } from './Header';\nimport Loader from './Loader';\nimport { Panel } from './panel/Panel';\nimport { useStore } from '@nanostores/react';\nimport { prebake } from './prebake.mjs';\nimport { getRandomTune, initCode, loadModules, shareCode, ReplContext } from './util.mjs';\nimport PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\nimport './Repl.css';\nimport { setInterval, clearInterval } from 'worker-timers';\n\nconst { latestCode } = settingsMap.get();\n\nlet modulesLoading, presets, drawContext, clearCanvas, isIframe;\nif (typeof window !== 'undefined') {\n  initAudioOnFirstClick();\n  modulesLoading = loadModules();\n  presets = prebake();\n  drawContext = getDrawContext();\n  clearCanvas = () => drawContext.clearRect(0, 0, drawContext.canvas.height, drawContext.canvas.width);\n  isIframe = window.location !== window.parent.location;\n}\n\nasync function getModule(name) {\n  if (!modulesLoading) {\n    return;\n  }\n  const modules = await modulesLoading;\n  return modules.find((m) => m.packageName === name);\n}\n\nexport function Repl({ embedded = false }) {\n  const isEmbedded = embedded || isIframe;\n  const { panelPosition, isZen, isSyncEnabled } = useSettings();\n  const init = useCallback(() => {\n    const drawTime = [-2, 2];\n    const drawContext = getDrawContext();\n    const editor = new StrudelMirror({\n      sync: isSyncEnabled,\n      defaultOutput: webaudioOutput,\n      getTime: () => getAudioContext().currentTime,\n      setInterval,\n      clearInterval,\n      transpiler,\n      autodraw: false,\n      root: containerRef.current,\n      initialCode: '// LOADING',\n      pattern: silence,\n      drawTime,\n      drawContext,\n      prebake: async () => Promise.all([modulesLoading, presets]),\n      onUpdateState: (state) => {\n        setReplState({ ...state });\n      },\n      onToggle: (playing) => {\n        if (!playing) {\n          clearHydra();\n        }\n      },\n      afterEval: (all) => {\n        const { code } = all;\n        setLatestCode(code);\n        window.location.hash = '#' + code2hash(code);\n        const viewingPatternData = getViewingPatternData();\n        const data = { ...viewingPatternData, code };\n        let id = data.id;\n        const isExamplePattern = viewingPatternData.collection !== userPattern.collection;\n\n        if (isExamplePattern) {\n          const codeHasChanged = code !== viewingPatternData.code;\n          if (codeHasChanged) {\n            // fork example\n            const newPattern = userPattern.duplicate(data);\n            id = newPattern.id;\n            setViewingPatternData(newPattern.data);\n          }\n        } else {\n          id = userPattern.isValidID(id) ? id : createPatternID();\n          setViewingPatternData(userPattern.update(id, data).data);\n        }\n        setActivePattern(id);\n      },\n      bgFill: false,\n    });\n\n    // init settings\n\n    initCode().then(async (decoded) => {\n      let msg;\n      if (decoded) {\n        editor.setCode(decoded);\n        msg = `I have loaded the code from the URL.`;\n      } else if (latestCode) {\n        editor.setCode(latestCode);\n        msg = `Your last session has been loaded!`;\n      } else {\n        const { code: randomTune, name } = await getRandomTune();\n        editor.setCode(randomTune);\n        msg = `A random code snippet named \"${name}\" has been loaded!`;\n      }\n      logger(`Welcome to Strudel! ${msg} Press play or hit ctrl+enter to run it!`, 'highlight');\n    });\n\n    editorRef.current = editor;\n  }, []);\n\n  const [replState, setReplState] = useState({});\n  const { started, isDirty, error, activeCode, pending } = replState;\n  const editorRef = useRef();\n  const containerRef = useRef();\n\n  // this can be simplified once SettingsTab has been refactored to change codemirrorSettings directly!\n  // this will be the case when the main repl is being replaced\n  const _settings = useStore(settingsMap, { keys: Object.keys(defaultSettings) });\n  useEffect(() => {\n    let editorSettings = {};\n    Object.keys(defaultSettings).forEach((key) => {\n      if (_settings.hasOwnProperty(key)) {\n        editorSettings[key] = _settings[key];\n      }\n    });\n    editorRef.current?.updateSettings(editorSettings);\n  }, [_settings]);\n\n  // on first load, set stored audio device if possible\n  useEffect(() => {\n    const { audioDeviceName } = _settings;\n    if (audioDeviceName !== defaultAudioDeviceName) {\n      getAudioDevices().then((devices) => {\n        const deviceID = devices.get(audioDeviceName);\n        if (deviceID == null) {\n          return;\n        }\n        setAudioDevice(deviceID);\n      });\n    }\n  }, []);\n\n  //\n  // UI Actions\n  //\n\n  const handleTogglePlay = async () => {\n    editorRef.current?.toggle();\n  };\n\n  const resetEditor = async () => {\n    (await getModule('@strudel/tonal'))?.resetVoicings();\n    resetGlobalEffects();\n    clearCanvas();\n    clearHydra();\n    resetLoadedSounds();\n    editorRef.current.repl.setCps(0.5);\n    await prebake(); // declare default samples\n  };\n\n  const handleUpdate = async (patternData, reset = false) => {\n    setViewingPatternData(patternData);\n    editorRef.current.setCode(patternData.code);\n    if (reset) {\n      await resetEditor();\n      handleEvaluate();\n    }\n  };\n\n  const handleEvaluate = () => {\n    editorRef.current.evaluate();\n  };\n  const handleShuffle = async () => {\n    const patternData = await getRandomTune();\n    const code = patternData.code;\n    logger(`[repl] ✨ loading random tune \"${patternData.id}\"`);\n    setActivePattern(patternData.id);\n    setViewingPatternData(patternData);\n    await resetEditor();\n    editorRef.current.setCode(code);\n    editorRef.current.repl.evaluate(code);\n  };\n\n  const handleShare = async () => shareCode(replState.code);\n  const context = {\n    embedded,\n    started,\n    pending,\n    isDirty,\n    activeCode,\n    handleTogglePlay,\n    handleUpdate,\n    handleShuffle,\n    handleShare,\n    handleEvaluate,\n  };\n\n  return (\n    <ReplContext.Provider value={context}>\n      <div className={cx('h-full flex flex-col relative')}>\n        <Loader active={pending} />\n        <Header context={context} />\n        {isEmbedded && !started && (\n          <button\n            onClick={() => handleTogglePlay()}\n            className=\"text-white text-2xl fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-[1000] m-auto p-4 bg-black rounded-md flex items-center space-x-2\"\n          >\n            <PlayCircleIcon className=\"w-6 h-6\" />\n            <span>play</span>\n          </button>\n        )}\n        <div className=\"grow flex relative overflow-hidden\">\n          <section\n            className={'text-gray-100 cursor-text pb-0 overflow-auto grow' + (isZen ? ' px-10' : '')}\n            id=\"code\"\n            ref={(el) => {\n              containerRef.current = el;\n              if (!editorRef.current) {\n                init();\n              }\n            }}\n          ></section>\n          {panelPosition === 'right' && !isEmbedded && <Panel context={context} />}\n        </div>\n        {error && (\n          <div className=\"text-red-500 p-4 bg-lineHighlight animate-pulse\">{error.message || 'Unknown Error :-/'}</div>\n        )}\n        {panelPosition === 'bottom' && !isEmbedded && <Panel context={context} />}\n      </div>\n    </ReplContext.Provider>\n  );\n}\n"],"names":["AcademicCapIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","AcademicCapIcon$1","ArrowPathIcon","ArrowPathIcon$1","LinkIcon","LinkIcon$1","PlayCircleIcon","PlayCircleIcon$1","SparklesIcon","SparklesIcon$1","StopCircleIcon","StopCircleIcon$1","BASE_URL","baseNoTrailing","Header","context","embedded","started","pending","isDirty","activeCode","handleTogglePlay","handleEvaluate","handleShuffle","handleShare","isEmbedded","isZen","useSettings","jsxs","cx","jsx","setIsZen","Loader","active","XMarkIcon","XMarkIcon$1","ConsoleTab","log","l","i","message","linkify","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","FilesTab","path","setPath","useState","useEffect","readDir","dir","children","err","current","useMemo","subpath","p","folders","e","files","isAudioFile","select","Fragment","playFile","visibleFunctions","jsdocJson","name","description","a","b","getInnerText","html","div","Reference","entry","el","type","example","j","SelectInput","value","options","onChange","onClick","isDisabled","id","initdevices","AudioDeviceSelector","audioDeviceName","devices","setDevices","devicesInitialized","getAudioDevices","onDeviceChange","deviceName","deviceID","setAudioDevice","Checkbox","label","k","NumberSlider","step","rest","FormItem","themeOptions","themes","fontFamilyOptions","SettingsTab","theme","keybindings","isBracketClosingEnabled","isBracketMatchingEnabled","isLineNumbersDisplayed","isPatternHighlightingEnabled","isActiveLineHighlighted","isAutoCompletionEnabled","isTooltipEnabled","isFlashEnabled","isSyncEnabled","isLineWrappingEnabled","fontSize","fontFamily","panelPosition","settingsMap","ButtonGroup","cbEvent","defaultSettings","ImportSoundsButton","onComplete","fileUploadRef","React","isUploading","setIsUploading","useCallback","uploadSamplesToDB","userSamplesDBConfig","registerSamplesFromDB","getSamples","samples","SoundsTab","sounds","useStore","soundMap","soundsFilter","soundEntries","filtered","key","data","_","trigRef","useRef","useEvent","t","ref","getAudioContext","onTrigger","ctx","params","time","onended","connectToDestination","WelcomeTab","useIsomorphicLayoutEffect","useLayoutEffect","TAURI","Panel","footerContent","setLog","activeFooter","useLogger","lastLog","nanoid","loadIndex","url","PanelTab","setActiveFooter","client","useClient","isActive","positions","PatternsTab","logger","createCache","lastNumberWeakMap","collection","nextNumber","MAX_SAFE_INTEGER","TWO_TO_THE_POWER_OF_TWENTY_NINE","TWO_TO_THE_POWER_OF_THIRTY","createGenerateUniqueNumber","cache","lastNumber","LAST_NUMBER_WEAK_MAP","generateUniqueNumber","isCallNotification","isClearResponse","load","scheduledIntervalFunctions","scheduledTimeoutFunctions","unrespondedRequests","worker","timerId","timerType","idOrFunc","timerIdAndTimerType","func","delay","createLoadOrReturnBroker","loadBroker","broker","blob","loadOrReturnBroker","clearInterval","setInterval","args","latestCode","modulesLoading","presets","drawContext","clearCanvas","isIframe","initAudioOnFirstClick","loadModules","prebake","getDrawContext","getModule","m","Repl","init","drawTime","editor","StrudelMirror","webaudioOutput","transpiler","containerRef","silence","state","setReplState","playing","clearHydra","all","code","setLatestCode","code2hash","viewingPatternData","getViewingPatternData","userPattern","newPattern","setViewingPatternData","createPatternID","setActivePattern","initCode","decoded","msg","randomTune","getRandomTune","editorRef","replState","error","_settings","editorSettings","defaultAudioDeviceName","resetEditor","resetGlobalEffects","resetLoadedSounds","handleUpdate","patternData","reset","shareCode","ReplContext"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,8,19,20,21,22,23,24,25,26,27]}