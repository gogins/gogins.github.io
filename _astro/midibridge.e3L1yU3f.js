import{I as g}from"./utils.Cobx6OCq.js";import{P as v,q as E}from"./index.DeKTR5mX.js";import"./useClient.Dn6pdCky.js";import"./preload-helper.BTSXcWDV.js";import"./_commonjsHelpers.BosuxZz1.js";import"./scope.hDWzALKC.js";import"./index.DIn8BZQ7.js";/* empty css                      */const M=144,S=128,w=176;v.prototype.midi=function(a){return this.onTrigger((u,s,d,p)=>{let{note:o,nrpnn:x,nrpv:y,ccn:i,ccv:t,velocity:n=.9,gain:l=1}=s.value;const h=(u-d)*1e3;n=Math.floor(l*n*100);const b=Math.floor(s.duration.valueOf()/p*1e3-10),c=Math.round(h),m=(s.value.midichan??1)-1,f=a??"IAC",e=[];if(o!=null){const r=typeof o=="number"?o:E(o);e.push({requestedport:f,message:[M+m,r,n],offset:c}),e.push({requestedport:f,message:[S+m,r,n],offset:c+b})}if(t&&i){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof i))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);e.push({requestedport:f,message:[w+m,i,r],offset:c})}e.length&&setTimeout(()=>{g("sendmidi",{messagesfromjs:e})})})};
//# sourceMappingURL=midibridge.e3L1yU3f.js.map
