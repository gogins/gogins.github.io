import{I as h}from"./utils.uRqgBBph.js";import{P as g,n as v}from"./index.diuTzW_X.js";import"./useClient.n1XF-nkt.js";import"./index.Nkt9jjly.js";import"./scope.aVbKgaVu.js";import"./preload-helper.wNpzlumS.js";/* empty css                      */const E=144,M=128,x=176;g.prototype.midi=function(u){return this.onTrigger((a,e,d,p)=>{const{note:n,nrpnn:y,nrpv:S,ccn:s,ccv:t}=e.value,l=(a-d)*1e3,f=Math.floor((e.context?.velocity??.9)*100),b=Math.floor(e.duration.valueOf()/p*1e3-10),i=Math.round(l),c=(e.value.midichan??1)-1,m=u??"IAC",o=[];if(n!=null){const r=typeof n=="number"?n:v(n);o.push({requestedport:m,message:[E+c,r,f],offset:i}),o.push({requestedport:m,message:[M+c,r,f],offset:i+b})}if(t&&s){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof s))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);o.push({requestedport:m,message:[x+c,s,r],offset:i})}o.length&&setTimeout(()=>{h("sendmidi",{messagesfromjs:o})})})};
