import{I as b}from"./utils.8d139480.js";import{P as h,n as g}from"./index.a2044bc2.js";import"./Repl.9bb3d489.js";import"./settings.270953c1.js";import"./index.3d4af9ee.js";import"./useKeydown.71409498.js";import"./jsx-runtime.7e7f555b.js";import"./client.014307a4.js";import"./doc.fa0d4fbe.js";import"./mini.03263755.js";import"./useFrame.84ba1694.js";import"./scope.f68c2f6d.js";import"./prebake.5a610a01.js";const v=144,E=128,M=176;h.prototype.midi=function(p){return this.onTrigger((u,e,a)=>{const{note:n,nrpnn:x,nrpv:y,ccn:s,ccv:t}=e.value,d=(u-a)*1e3,f=Math.floor((e.context?.velocity??.9)*100),l=Math.floor(e.duration.valueOf()*1e3-10),i=Math.round(d),m=(e.value.midichan??1)-1,c=p??"IAC",o=[];if(n!=null){const r=typeof n=="number"?n:g(n);o.push({requestedport:c,message:[v+m,r,f],offset:i}),o.push({requestedport:c,message:[E+m,r,f],offset:i+l})}if(t&&s){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof s))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);o.push({requestedport:c,message:[M+m,s,r],offset:i})}o.length&&setTimeout(()=>{b("sendmidi",{messagesfromjs:o})})})};
//# sourceMappingURL=midibridge.32024484.js.map
