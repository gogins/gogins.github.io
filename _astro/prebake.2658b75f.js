import{m as Ae,o as be,C as Be,p as ve,q as ye,l as S,v as E,n as J,r as Ge,P as de,_ as Re}from"./settings.ea7ba944.js";if(typeof DelayNode<"u"){class e extends DelayNode{constructor(t,a,s,o){super(t),a=Math.abs(a),this.delayTime.value=s;const i=t.createGain();i.gain.value=Math.min(Math.abs(o),.995),this.feedback=i.gain;const c=t.createGain();return c.gain.value=a,this.delayGain=c,this.connect(i),this.connect(c),i.connect(this),this.connect=r=>c.connect(r),this}start(t){this.delayGain.gain.setValueAtTime(this.delayGain.gain.value,t+this.delayTime.value)}}AudioContext.prototype.createFeedbackDelay=function(n,t,a){return new e(this,n,t,a)}}typeof AudioContext<"u"&&(AudioContext.prototype.impulseResponse=function(e,n=1){const t=this.sampleRate*e,a=this.createBuffer(n,t,this.sampleRate),s=a.getChannelData(0);for(let o=0;o<t;o++)s[o]=(2*Math.random()-1)*Math.pow(1-o/t,e);return a},AudioContext.prototype.createReverb=function(e){const n=this.createConvolver();return n.setDuration=t=>(n.buffer=this.impulseResponse(t),n.duration=e,n),n.setDuration(e),n});var ae={a:{freqs:[660,1120,2750,3e3,3350],gains:[1,.5012,.0708,.0631,.0126],qs:[80,90,120,130,140]},e:{freqs:[440,1800,2700,3e3,3300],gains:[1,.1995,.1259,.1,.1],qs:[70,80,100,120,120]},i:{freqs:[270,1850,2900,3350,3590],gains:[1,.0631,.0631,.0158,.0158],qs:[40,90,100,120,120]},o:{freqs:[430,820,2700,3e3,3300],gains:[1,.3162,.0501,.0794,.01995],qs:[40,80,100,120,120]},u:{freqs:[370,630,2750,3e3,3400],gains:[1,.1,.0708,.0316,.01995],qs:[40,60,100,120,120]}};if(typeof GainNode<"u"){class e extends GainNode{constructor(t,a){if(super(t),!ae[a])throw new Error("vowel: unknown vowel "+a);const{gains:s,qs:o,freqs:i}=ae[a],c=t.createGain();for(let r=0;r<5;r++){const d=t.createGain();d.gain.value=s[r];const u=t.createBiquadFilter();u.type="bandpass",u.Q.value=o[r],u.frequency.value=i[r],this.connect(u),u.connect(d),d.connect(c)}return c.gain.value=8,this.connect=r=>c.connect(r),this}}AudioContext.prototype.createVowelFilter=function(n){return new e(this,n)}}const Ve="data:application/javascript;base64,Ly8gTElDRU5TRSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSB2My4wIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGt0cjAvV2ViRGlydC9ibG9iL21haW4vTElDRU5TRQovLyBhbGwgdGhlIGNyZWRpdCBnb2VzIHRvIGRrdHIwJ3Mgd2ViZGlydDogaHR0cHM6Ly9naXRodWIuY29tL2RrdHIwL1dlYkRpcnQvYmxvYi81Y2UzZDY5ODM2MmM1NGQ2ZTFiNjhhY2M0N2ViMjk1NWFjNjJjNzkzL2Rpc3QvQXVkaW9Xb3JrbGV0cy5qcwovLyA8MwoKY2xhc3MgQ29hcnNlUHJvY2Vzc29yIGV4dGVuZHMgQXVkaW9Xb3JrbGV0UHJvY2Vzc29yIHsKICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgcmV0dXJuIFt7IG5hbWU6ICdjb2Fyc2UnLCBkZWZhdWx0VmFsdWU6IDEgfV07CiAgfQoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgICB0aGlzLm5vdFN0YXJ0ZWQgPSB0cnVlOwogIH0KCiAgcHJvY2VzcyhpbnB1dHMsIG91dHB1dHMsIHBhcmFtZXRlcnMpIHsKICAgIGNvbnN0IGlucHV0ID0gaW5wdXRzWzBdOwogICAgY29uc3Qgb3V0cHV0ID0gb3V0cHV0c1swXTsKICAgIGNvbnN0IGNvYXJzZSA9IHBhcmFtZXRlcnMuY29hcnNlOwogICAgY29uc3QgYmxvY2tTaXplID0gMTI4OwogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKGhhc0lucHV0KSB7CiAgICAgIHRoaXMubm90U3RhcnRlZCA9IGZhbHNlOwogICAgICBvdXRwdXRbMF1bMF0gPSBpbnB1dFswXVswXTsKICAgICAgZm9yIChsZXQgbiA9IDE7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICAgIGZvciAobGV0IG8gPSAwOyBvIDwgb3V0cHV0Lmxlbmd0aDsgbysrKSB7CiAgICAgICAgICBvdXRwdXRbb11bbl0gPSBuICUgY29hcnNlID09IDAgPyBpbnB1dFswXVtuXSA6IG91dHB1dFtvXVtuIC0gMV07CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ2NvYXJzZS1wcm9jZXNzb3InLCBDb2Fyc2VQcm9jZXNzb3IpOwoKY2xhc3MgQ3J1c2hQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICByZXR1cm4gW3sgbmFtZTogJ2NydXNoJywgZGVmYXVsdFZhbHVlOiAwIH1dOwogIH0KCiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5ub3RTdGFydGVkID0gdHJ1ZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CiAgICBjb25zdCBjcnVzaCA9IHBhcmFtZXRlcnMuY3J1c2g7CiAgICBjb25zdCBibG9ja1NpemUgPSAxMjg7CiAgICBjb25zdCBoYXNJbnB1dCA9ICEoaW5wdXRbMF0gPT09IHVuZGVmaW5lZCk7CiAgICBpZiAoaGFzSW5wdXQpIHsKICAgICAgdGhpcy5ub3RTdGFydGVkID0gZmFsc2U7CiAgICAgIGlmIChjcnVzaC5sZW5ndGggPT09IDEpIHsKICAgICAgICBjb25zdCB4ID0gTWF0aC5wb3coMiwgY3J1c2hbMF0gLSAxKTsKICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IE1hdGgucm91bmQoaW5wdXRbMF1bbl0gKiB4KSAvIHg7CiAgICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IG91dHB1dC5sZW5ndGg7IG8rKykgewogICAgICAgICAgICBvdXRwdXRbb11bbl0gPSB2YWx1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBibG9ja1NpemU7IG4rKykgewogICAgICAgICAgbGV0IHggPSBNYXRoLnBvdygyLCBjcnVzaFtuXSAtIDEpOwogICAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLnJvdW5kKGlucHV0WzBdW25dICogeCkgLyB4OwogICAgICAgICAgZm9yIChsZXQgbyA9IDA7IG8gPCBvdXRwdXQubGVuZ3RoOyBvKyspIHsKICAgICAgICAgICAgb3V0cHV0W29dW25dID0gdmFsdWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQpyZWdpc3RlclByb2Nlc3NvcignY3J1c2gtcHJvY2Vzc29yJywgQ3J1c2hQcm9jZXNzb3IpOwoKY2xhc3MgU2hhcGVQcm9jZXNzb3IgZXh0ZW5kcyBBdWRpb1dvcmtsZXRQcm9jZXNzb3IgewogIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICByZXR1cm4gW3sgbmFtZTogJ3NoYXBlJywgZGVmYXVsdFZhbHVlOiAwIH1dOwogIH0KCiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogICAgdGhpcy5ub3RTdGFydGVkID0gdHJ1ZTsKICB9CgogIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7CiAgICBjb25zdCBpbnB1dCA9IGlucHV0c1swXTsKICAgIGNvbnN0IG91dHB1dCA9IG91dHB1dHNbMF07CiAgICBjb25zdCBzaGFwZTAgPSBwYXJhbWV0ZXJzLnNoYXBlWzBdOwogICAgY29uc3Qgc2hhcGUxID0gc2hhcGUwIDwgMSA/IHNoYXBlMCA6IDEuMCAtIDRlLTEwOwogICAgY29uc3Qgc2hhcGUgPSAoMi4wICogc2hhcGUxKSAvICgxLjAgLSBzaGFwZTEpOwogICAgY29uc3QgYmxvY2tTaXplID0gMTI4OwogICAgY29uc3QgaGFzSW5wdXQgPSAhKGlucHV0WzBdID09PSB1bmRlZmluZWQpOwogICAgaWYgKGhhc0lucHV0KSB7CiAgICAgIHRoaXMubm90U3RhcnRlZCA9IGZhbHNlOwogICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGJsb2NrU2l6ZTsgbisrKSB7CiAgICAgICAgY29uc3QgdmFsdWUgPSAoKDEgKyBzaGFwZSkgKiBpbnB1dFswXVtuXSkgLyAoMSArIHNoYXBlICogTWF0aC5hYnMoaW5wdXRbMF1bbl0pKTsKICAgICAgICBmb3IgKGxldCBvID0gMDsgbyA8IG91dHB1dC5sZW5ndGg7IG8rKykgewogICAgICAgICAgb3V0cHV0W29dW25dID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICByZXR1cm4gdGhpcy5ub3RTdGFydGVkIHx8IGhhc0lucHV0OwogIH0KfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ3NoYXBlLXByb2Nlc3NvcicsIFNoYXBlUHJvY2Vzc29yKTsK";function M(e){const n=w().createGain();return n.gain.value=e,n}const Xe=({s:e,freq:n,t})=>{const a=w().createOscillator();return a.type=e||"triangle",a.frequency.value=Number(n),a.start(t),{node:a,stop:o=>a.stop(o)}},ge=(e,n,t,a,s,o)=>{const i=w().createGain();return i.gain.setValueAtTime(0,o),i.gain.linearRampToValueAtTime(s,o+e),i.gain.linearRampToValueAtTime(t*s,o+e+n),{node:i,stop:c=>{i.gain.setValueAtTime(t*s,c),i.gain.linearRampToValueAtTime(0,c+a)}}},an=(e,n,t,a,s,o,i)=>{const c=w().createGain();return c.gain.setValueAtTime(0,o),c.gain.linearRampToValueAtTime(s,o+e),c.gain.linearRampToValueAtTime(t*s,o+e+n),c.gain.setValueAtTime(t*s,i),c.gain.linearRampToValueAtTime(0,i+a),c},x=(e,n,t)=>{const a=w().createBiquadFilter();return a.type=e,a.frequency.value=n,a.Q.value=t,a},{Pattern:_e,logger:ue}=Ae,q=be();function $(e,n,t={}){q.setKey(e,{onTrigger:n,data:t})}function se(e){return q.get()[e]}const sn=()=>q.set({});let L;const w=()=>(L||(L=new AudioContext),L);let N;const O=()=>{const e=w();return N||(N=e.createGain(),N.connect(e.destination)),N},on=()=>{O().gain.linearRampToValueAtTime(0,w().currentTime+.01),N=null};let D;function Te(){return D||(D=w().audioWorklet.addModule(Ve),D)}function P(e,n,t){const a=new AudioWorkletNode(e,n);return Object.entries(t).forEach(([s,o])=>{a.parameters.get(s).value=o}),a}async function He(){if(typeof window<"u")try{await w().resume(),await Te()}catch(e){console.warn("could not load AudioWorklet effects coarse, crush and shape",e)}}async function cn(){return new Promise(e=>{document.addEventListener("click",async function n(){await He(),e(),document.removeEventListener("click",n)})})}let v={};const oe=.98;function Ze(e,n,t,a){if(t>oe&&ue(`delayfeedback was clamped to ${oe} to save your ears`),t=ye(t,0,.98),!v[e]){const o=w().createFeedbackDelay(1,n,t);o.start?.(a),o.connect(O()),v[e]=o}return v[e].delayTime.value!==n&&v[e].delayTime.setValueAtTime(n,a),v[e].feedback.value!==t&&v[e].feedback.setValueAtTime(t,a),v[e]}let y={};function ze(e,n=2){if(!y[e]){const a=w().createReverb(n);a.connect(O()),y[e]=a}return y[e].duration!==n&&(y[e]=y[e].setDuration(n),y[e].duration=n),y[e]}function ce(e,n,t){const a=M(t);return e.connect(a),a.connect(n),a}const le=async(e,n,t,a)=>{const s=w();e.ensureObjectValue();let o=s.currentTime+n,{s:i="triangle",bank:c,source:r,gain:d=.8,cutoff:u,resonance:m=1,hcutoff:p,hresonance:A=1,bandf:C,bandq:h=1,coarse:I,crush:b,shape:H,pan:F,vowel:j,delay:Z=0,delayfeedback:G=.5,delaytime:l=.25,orbit:Y=1,room:K,size:R=2}=e.value;const{velocity:Q=1}=e.context;d*=Q;let V=[];const ne=()=>{V.forEach(f=>f?.disconnect())};c&&i&&(i=`${c}_${i}`);let B;if(r)B=r(o,e.value,t);else if(se(i)){const{onTrigger:f}=se(i),z=await f(o,e.value,ne);z&&(B=z.node,z.stop(o+t))}else throw new Error(`sound ${i} not found! Is it loaded?`);if(!B)return;if(s.currentTime>o){ue("[webaudio] skip hap: still loading",s.currentTime-o);return}const g=[];if(g.push(B),g.push(M(d)),u!==void 0&&g.push(x("lowpass",u,m)),p!==void 0&&g.push(x("highpass",p,A)),C!==void 0&&g.push(x("bandpass",C,h)),j!==void 0&&g.push(s.createVowelFilter(j)),I!==void 0&&g.push(P(s,"coarse-processor",{coarse:I})),b!==void 0&&g.push(P(s,"crush-processor",{crush:b})),H!==void 0&&g.push(P(s,"shape-processor",{shape:H})),F!==void 0){const f=s.createStereoPanner();f.pan.value=2*F-1,g.push(f)}const X=M(1);g.push(X),X.connect(O());let _;if(Z>0&&l>0&&G>0){const f=Ze(Y,l,G,o);_=ce(X,f,Z)}let te;if(K>0&&R>0){const f=ze(Y,R);te=ce(X,f,K)}g.slice(1).reduce((f,z)=>f.connect(z),g[0]),V=g.concat([_,te])},Ne=(e,n,t,a)=>le(n,e-t,n.duration/a);_e.prototype.webaudio=function(){return this.onTrigger(Ne)};function rn(e={}){e={getTime:()=>w().currentTime,defaultOutput:le,...e};const{defaultOutput:n,getTime:t}=e;return new Be({...e,onTrigger:ve({defaultOutput:n,getTime:t})})}const ee={},U={},dn=e=>ee[e];function Se(e,n){var t=n?1e3:1024;if(e<t)return e+" B";var a=n?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s=-1;do e/=t,++s;while(e>=t);return e.toFixed(1)+" "+a[s]}const We=async(e,n,t,a,s,o,i)=>{let c=0;s!==void 0&&t!==void 0&&S("[sampler] hap has note and freq. ignoring note","warning");let r=E({freq:s,note:t},36);c=r-36;const d=w();let u;if(Array.isArray(o))u=o[n%o.length];else{const C=I=>J(I)-r,h=Object.keys(o).filter(I=>!I.startsWith("_")).reduce((I,b,H)=>!I||Math.abs(C(b))<Math.abs(C(I))?b:I,null);c=-C(h),u=o[h][n%o[h].length]}i&&(u=await i(u));let m=await we(u,d,e,n);a<0&&(m=Fe(m));const p=d.createBufferSource();p.buffer=m;const A=1*Math.pow(2,c/12);return p.playbackRate.value=A,p},we=(e,n,t,a=0)=>{const s=t?`sound "${t}:${a}"`:"sample";if(!U[e]){S(`[sampler] load ${s}..`,"load-sample",{url:e});const o=Date.now();U[e]=fetch(e).then(i=>i.arrayBuffer()).then(async i=>{const c=Date.now()-o,r=Se(i.byteLength);S(`[sampler] load ${s}... done! loaded ${r} in ${c}ms`,"loaded-sample",{url:e});const d=await n.decodeAudioData(i);return ee[e]=d,d})}return U[e]};function Fe(e){const n=w(),t=n.createBuffer(e.numberOfChannels,e.length,n.sampleRate);for(let a=0;a<e.numberOfChannels;a++)t.copyToChannel(e.getChannelData(a).slice().reverse(),a,a);return t}const gn=e=>ee[e],Ie=(e,n,t=e._base||"")=>Object.entries(e).forEach(([a,s])=>{if(typeof s=="string"&&(s=[s]),typeof s!="object")throw new Error("wrong sample map format for "+a);t=s._base||t;const o=i=>(t+i).replace("github:","https://raw.githubusercontent.com/");Array.isArray(s)?s=s.map(o):s=Object.fromEntries(Object.entries(s).map(([i,c])=>[i,(typeof c=="string"?[c]:c).map(o)])),n(a,s)});let pe={};function je(e,n){pe[e]=n}function Ye(e){const n=Object.entries(pe).find(([t])=>e.startsWith(t));if(n)return n[1]}const T=async(e,n=e._base||"",t={})=>{if(typeof e=="string"){const o=Ye(e);if(o)return o(e);if(e.startsWith("github:")){let[c,r]=e.split("github:");r=r.endsWith("/")?r.slice(0,-1):r,e=`https://raw.githubusercontent.com/${r}/strudel.json`.replace("//strudel.json","/strudel.json")}if(typeof fetch!="function")return;const i=e.split("/").slice(0,-1).join("/");return typeof fetch>"u"?void 0:fetch(e).then(c=>c.json()).then(c=>T(c,n||c._base||i,t)).catch(c=>{throw console.error(c),new Error(`error loading "${e}"`)})}const{prebake:a,tag:s}=t;Ie(e,(o,i)=>$(o,(c,r,d)=>Ce(c,r,d,i),{type:"sample",samples:i,baseUrl:n,prebake:a,tag:s}),n)},ie=[];async function Ce(e,n,t,a,s){const{s:o,freq:i,unit:c,nudge:r=0,cut:d,loop:u,clip:m=void 0,n:p=0,note:A,speed:C=1,begin:h=0,end:I=1}=n;if(C===0)return;const b=w(),{attack:H=.001,decay:F=.001,sustain:j=1,release:Z=.001}=n,G=e+r,l=await We(o,p,A,C,i,a,s);if(b.currentTime>e){S(`[sampler] still loading sound "${o}:${p}"`,"highlight");return}if(!l){S(`[sampler] could not load "${o}:${p}"`,"error");return}l.playbackRate.value=Math.abs(C)*l.playbackRate.value,c==="c"&&(l.playbackRate.value=l.playbackRate.value*l.buffer.duration*1);const Y=h*l.buffer.duration;l.start(G,Y);const K=l.buffer.duration/l.playbackRate.value,{node:R,stop:Q}=ge(H,F,j,Z,1,e);l.connect(R);const V=b.createGain();R.connect(V),l.onended=function(){l.disconnect(),R.disconnect(),V.disconnect(),t()};const B={node:V,bufferSource:l,stop:(g,X=m===void 0)=>{let _=g;X&&(_=e+(I-h)*K),l.stop(_+Z),Q(_)}};if(d!==void 0){const g=ie[d];g&&(g.node.gain.setValueAtTime(1,G),g.node.gain.linearRampToValueAtTime(0,G+.01)),ie[d]=B}return B}function Ke(){["sine","square","triangle","sawtooth"].forEach(e=>{$(e,(n,t,a)=>{const{attack:s=.001,decay:o=.05,sustain:i=.6,release:c=.01}=t;let{n:r,note:d,freq:u}=t;r=d||r||36,typeof r=="string"&&(r=J(r)),!u&&typeof r=="number"&&(u=Ge(r));const{node:m,stop:p}=Xe({t:n,s:e,freq:u}),A=M(.3),{node:C,stop:h}=ge(s,o,i,c,1,n);return m.onended=()=>{m.disconnect(),A.disconnect(),a()},{node:m.connect(A).connect(C),stop:I=>{h(I),p(I+c)}}},{type:"synth",prebake:!0})})}const De=J("C8"),ke=(e,n)=>e*n+(1-n)/2;de.prototype.piano=function(){return this.clip(1).s("piano").release(.1).fmap(e=>{const n=E(e),t=ke(Math.min(Math.round(n)/De,1),.5);return{...e,pan:(e.pan||1)*t}})};let fe;typeof window<"u"&&(fe=window?.__TAURI__);const{BaseDirectory:Me,readDir:Je,readBinaryFile:Oe,writeTextFile:Qe,readTextFile:xe,exists:Le}=fe?.fs||{},W=Me?.Audio,re="~/music/";async function Pe(e){return Le(e+"/strudel.json",{dir:W})}async function Ue(e){const n=await xe(e+"/strudel.json",{dir:W}),t=JSON.parse(n);Ie(t,(a,s)=>{$(a,(o,i,c)=>Ce(o,i,c,s,$e(e)),{type:"sample",samples:s,fileSystem:!0,tag:"local"})})}async function Ee(e){const n=await Je(e,{dir:W,recursive:!0}),a={name:e.split("/").slice(-1)[0],children:n};let s={},o=0;me(a,(r,d)=>{["wav","mp3"].includes(r.name.split(".").slice(-1)[0])&&(s[d.name]=s[d.name]||[],o+=1,s[d.name].push(r.subpath.slice(1).concat([r.name]).join("/")))});const i=JSON.stringify(s,null,2),c=e+"/strudel.json";await Qe(c,i,{dir:W}),console.log(`wrote strudel.json with ${o} samples to ${e}!`)}je(re,async e=>{const n=e.replace(re,"");return await Pe(n)||await Ee(n),Ue(n)});const me=(e,n)=>{if(Array.isArray(e?.children))for(const t of e.children)t.subpath=(e.subpath||[]).concat([e.name]),n(t,e),t.children&&me(t,n)},un=e=>["wav","mp3"].includes(e.split(".").slice(-1)[0]);function qe(e){const n=new Blob([e],{type:"audio/*"});return URL.createObjectURL(n)}const k={};async function he(e){return k[e]||(k[e]=(async()=>{const n=await Oe(e,{dir:W});return qe(n)})()),k[e]}const $e=e=>n=>he(e.endsWith("/")?e+n:e+"/"+n);async function ln(e){const n=await he(e),t=w(),a=t.createBufferSource();a.buffer=await we(n,t),a.connect(t.destination),a.start(t.currentTime)}async function wn(){await Promise.all([Ke(),Re(()=>import("./index.0d606562.js"),["_astro/index.0d606562.js","_astro/settings.ea7ba944.js","_astro/index.528e429e.js"]).then(({registerSoundfonts:e})=>e()),T("./piano.json","./piano/",{prebake:!0}),T("./vcsl.json","github:sgossner/VCSL/master/",{prebake:!0}),T("./tidal-drum-machines.json","github:ritchse/tidal-drum-machines/main/machines/",{prebake:!0,tag:"drum-machines"}),T("./EmuSP12.json","./EmuSP12/",{prebake:!0,tag:"drum-machines"}),T({casio:["casio/high.wav","casio/low.wav","casio/noise.wav"],crow:["crow/000_crow.wav","crow/001_crow2.wav","crow/002_crow3.wav","crow/003_crow4.wav"],insect:["insect/000_everglades_conehead.wav","insect/001_robust_shieldback.wav","insect/002_seashore_meadow_katydid.wav"],wind:["wind/000_wind1.wav","wind/001_wind10.wav","wind/002_wind2.wav","wind/003_wind3.wav","wind/004_wind4.wav","wind/005_wind5.wav","wind/006_wind6.wav","wind/007_wind7.wav","wind/008_wind8.wav","wind/009_wind9.wav"],jazz:["jazz/000_BD.wav","jazz/001_CB.wav","jazz/002_FX.wav","jazz/003_HH.wav","jazz/004_OH.wav","jazz/005_P1.wav","jazz/006_P2.wav","jazz/007_SN.wav"],metal:["metal/000_0.wav","metal/001_1.wav","metal/002_2.wav","metal/003_3.wav","metal/004_4.wav","metal/005_5.wav","metal/006_6.wav","metal/007_7.wav","metal/008_8.wav","metal/009_9.wav"],east:["east/000_nipon_wood_block.wav","east/001_ohkawa_mute.wav","east/002_ohkawa_open.wav","east/003_shime_hi.wav","east/004_shime_hi_2.wav","east/005_shime_mute.wav","east/006_taiko_1.wav","east/007_taiko_2.wav","east/008_taiko_3.wav"],space:["space/000_0.wav","space/001_1.wav","space/002_11.wav","space/003_12.wav","space/004_13.wav","space/005_14.wav","space/006_15.wav","space/007_16.wav","space/008_17.wav","space/009_18.wav","space/010_2.wav","space/011_3.wav","space/012_4.wav","space/013_5.wav","space/014_6.wav","space/015_7.wav","space/016_8.wav","space/017_9.wav"],numbers:["numbers/0.wav","numbers/1.wav","numbers/2.wav","numbers/3.wav","numbers/4.wav","numbers/5.wav","numbers/6.wav","numbers/7.wav","numbers/8.wav"]},"github:tidalcycles/Dirt-Samples/master/")])}const en=J("C8"),nn=(e,n)=>e*n+(1-n)/2;de.prototype.piano=function(){return this.fmap(e=>({...e,clip:e.clip??1})).s("piano").release(.1).fmap(e=>{const n=E(e),t=nn(Math.min(Math.round(n)/en,1),.5);return{...e,pan:(e.pan||1)*t}})};export{Xe as A,ge as B,an as C,x as D,Ke as E,un as a,ln as b,sn as c,W as d,$ as e,se as f,w as g,on as h,cn as i,He as j,Ne as k,rn as l,dn as m,We as n,we as o,wn as p,Fe as q,Je as r,q as s,gn as t,Ie as u,je as v,le as w,T as x,Ce as y,M as z};
