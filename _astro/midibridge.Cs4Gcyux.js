import{I as M}from"./utils.BYZQkm0v.js";import{P as b,t as v,u as E}from"./index.Cq8ZdErn.js";import"./useClient.B1682OP0.js";import"./preload-helper.2gUCEsfF.js";import"./_commonjsHelpers.BosuxZz1.js";import"./scope.R9TuNW29.js";import"./index.DIn8BZQ7.js";/* empty css                      */const y=144,S=128,w=176;b.prototype.midi=function(f){return this.onTrigger((x,s,u,d,p)=>{let{note:o,nrpnn:O,nrpv:A,ccn:i,ccv:t,velocity:n=.9,gain:l=1}=s.value;const g=E(p,u)+34;n=Math.floor(l*n*100);const h=Math.floor(s.duration.valueOf()/d*1e3-10),c=Math.round(g),m=(s.value.midichan??1)-1,a=f??"IAC",e=[];if(o!=null){const r=typeof o=="number"?o:v(o);e.push({requestedport:a,message:[y+m,r,n],offset:c}),e.push({requestedport:a,message:[S+m,r,n],offset:c+h})}if(t&&i){if(typeof t!="number"||t<0||t>1)throw new Error("expected ccv to be a number between 0 and 1");if(!["string","number"].includes(typeof i))throw new Error("expected ccn to be a number or a string");const r=Math.round(t*127);e.push({requestedport:a,message:[w+m,i,r],offset:c})}e.length&&setTimeout(()=>{M("sendmidi",{messagesfromjs:e})})})};
//# sourceMappingURL=midibridge.Cs4Gcyux.js.map
