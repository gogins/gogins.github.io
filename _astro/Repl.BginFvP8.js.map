{"version":3,"file":"Repl.BginFvP8.js","sources":["../../src/repl/components/Loader.jsx","../../src/repl/components/panel/ConsoleTab.jsx","../../src/repl/components/panel/FilesTab.jsx","../../src/repl/components/panel/Reference.jsx","../../src/repl/components/panel/SelectInput.jsx","../../src/repl/components/panel/AudioDeviceSelector.jsx","../../src/repl/components/panel/AudioEngineTargetSelector.jsx","../../src/repl/components/panel/SettingsTab.jsx","../../src/repl/components/panel/ImportSoundsButton.jsx","../../src/repl/components/panel/SoundsTab.jsx","../../src/repl/components/panel/WelcomeTab.jsx","../../../node_modules/.pnpm/@heroicons+react@2.1.5_react@18.3.1/node_modules/@heroicons/react/16/solid/esm/ChevronLeftIcon.js","../../../node_modules/.pnpm/@heroicons+react@2.1.5_react@18.3.1/node_modules/@heroicons/react/16/solid/esm/XMarkIcon.js","../../src/repl/components/panel/Panel.jsx","../../src/repl/components/Code.jsx","../../../node_modules/.pnpm/@heroicons+react@2.1.5_react@18.3.1/node_modules/@heroicons/react/20/solid/esm/PlayCircleIcon.js","../../src/repl/components/BigPlayButton.jsx","../../src/repl/components/UserFacingErrorMessage.jsx","../../src/components/Udels/UdelsEditor.jsx","../../../node_modules/.pnpm/@heroicons+react@2.1.5_react@18.3.1/node_modules/@heroicons/react/20/solid/esm/StopCircleIcon.js","../../src/repl/components/Header.jsx","../../src/repl/components/ReplEditor.jsx","../../src/repl/components/EmbeddedReplEditor.jsx","../../../packages/osc/superdirtoutput.js","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/factories/cache.js","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/factories/generate-unique-number.js","../../../node_modules/.pnpm/fast-unique-numbers@8.0.13/node_modules/fast-unique-numbers/build/es2019/module.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.8/node_modules/worker-timers-broker/build/es2019/guards/call-notification.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.8/node_modules/worker-timers-broker/build/es2019/guards/clear-response.js","../../../node_modules/.pnpm/worker-timers-broker@6.1.8/node_modules/worker-timers-broker/build/es2019/module.js","../../../node_modules/.pnpm/worker-timers@7.1.8/node_modules/worker-timers/build/es2019/factories/load-or-return-broker.js","../../../node_modules/.pnpm/worker-timers@7.1.8/node_modules/worker-timers/build/es2019/worker/worker.js","../../../node_modules/.pnpm/worker-timers@7.1.8/node_modules/worker-timers/build/es2019/module.js","../../src/repl/useReplContext.jsx","../../src/repl/Repl.jsx"],"sourcesContent":["import cx from '@src/cx.mjs';\n\nfunction Loader({ active }) {\n  return (\n    <div className=\"overflow-hidden opacity-50 fixed top-0 left-0 w-full z-[1000]\">\n      <div className={cx('h-[2px] block w-full', active ? 'bg-foreground animate-train' : 'bg-transparent')}>\n        <div />\n      </div>\n    </div>\n  );\n}\nexport default Loader;\n","import { logger } from '@strudel/core';\nimport useEvent from '@src/useEvent.mjs';\nimport cx from '@src/cx.mjs';\nimport { nanoid } from 'nanoid';\nimport { useCallback, useState } from 'react';\nimport { useSettings } from '../../../settings.mjs';\n\nexport function ConsoleTab() {\n  const [log, setLog] = useState([]);\n  const { fontFamily, fontSize } = useSettings();\n  useLogger(\n    useCallback((e) => {\n      const { message, type, data } = e.detail;\n      setLog((l) => {\n        const lastLog = l.length ? l[l.length - 1] : undefined;\n        const id = nanoid(12);\n        // if (type === 'loaded-sample' && lastLog.type === 'load-sample' && lastLog.url === data.url) {\n        if (type === 'loaded-sample') {\n          // const loadIndex = l.length - 1;\n          const loadIndex = l.findIndex(({ data: { url }, type }) => type === 'load-sample' && url === data.url);\n          l[loadIndex] = { message, type, id, data };\n        } else if (lastLog && lastLog.message === message) {\n          l = l.slice(0, -1).concat([{ message, type, count: (lastLog.count ?? 1) + 1, id, data }]);\n        } else {\n          l = l.concat([{ message, type, id, data }]);\n        }\n        return l.slice(-20);\n      });\n    }, []),\n  );\n  return (\n    <div\n      id=\"console-tab\"\n      className=\"break-all px-4 dark:text-white text-stone-900 text-sm py-2 space-y-1\"\n      style={{ fontFamily, fontSize }}\n    >\n      {log.map((l, i) => {\n        const message = linkify(l.message);\n        const color = l.data?.hap?.value?.color;\n        return (\n          <div\n            key={l.id}\n            className={cx(l.type === 'error' && 'text-red-500', l.type === 'highlight' && 'underline')}\n            style={color ? { color } : {}}\n          >\n            <span dangerouslySetInnerHTML={{ __html: message }} />\n            {l.count ? ` (${l.count})` : ''}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nfunction linkify(inputText) {\n  var replacedText, replacePattern1, replacePattern2, replacePattern3;\n\n  //URLs starting with http://, https://, or ftp://\n  replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n  replacedText = inputText.replace(replacePattern1, '<a class=\"underline\" href=\"$1\" target=\"_blank\">$1</a>');\n\n  //URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n  replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n  replacedText = replacedText.replace(\n    replacePattern2,\n    '$1<a class=\"underline\" href=\"http://$2\" target=\"_blank\">$2</a>',\n  );\n\n  //Change email addresses to mailto:: links.\n  replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n  replacedText = replacedText.replace(replacePattern3, '<a class=\"underline\" href=\"mailto:$1\">$1</a>');\n\n  return replacedText;\n}\n\nfunction useLogger(onTrigger) {\n  useEvent(logger.key, onTrigger);\n}\n","import { Fragment, useEffect } from 'react';\nimport React, { useMemo, useState } from 'react';\nimport { isAudioFile, readDir, dir, playFile } from '../../files.mjs';\n\nexport function FilesTab() {\n  const [path, setPath] = useState([]);\n  useEffect(() => {\n    let init = false;\n    readDir('', { dir, recursive: true })\n      .then((children) => setPath([{ name: '~/music', children }]))\n      .catch((err) => {\n        console.log('error loadin files', err);\n      });\n    return () => {\n      init = true;\n    };\n  }, []);\n  const current = useMemo(() => path[path.length - 1], [path]);\n  const subpath = useMemo(\n    () =>\n      path\n        .slice(1)\n        .map((p) => p.name)\n        .join('/'),\n    [path],\n  );\n  const folders = useMemo(() => current?.children.filter((e) => !!e.children), [current]);\n  const files = useMemo(() => current?.children.filter((e) => !e.children && isAudioFile(e.name)), [current]);\n  const select = (e) => setPath((p) => p.concat([e]));\n  return (\n    <div className=\"px-4 flex flex-col h-full\">\n      <div className=\"flex justify-between font-mono pb-1\">\n        <div>\n          <span>{`samples('`}</span>\n          {path?.map((p, i) => {\n            if (i < path.length - 1) {\n              return (\n                <Fragment key={i}>\n                  <span className=\"cursor-pointer underline\" onClick={() => setPath((p) => p.slice(0, i + 1))}>\n                    {p.name}\n                  </span>\n                  <span>/</span>\n                </Fragment>\n              );\n            } else {\n              return (\n                <span className=\"cursor-pointer underline\" key={i}>\n                  {p.name}\n                </span>\n              );\n            }\n          })}\n          <span>{`')`}</span>\n        </div>\n      </div>\n      <div className=\"overflow-auto\">\n        {!folders?.length && !files?.length && <span className=\"text-gray-500\">Nothing here</span>}\n        {folders?.map((e, i) => (\n          <div className=\"cursor-pointer\" key={i} onClick={() => select(e)}>\n            {e.name}\n          </div>\n        ))}\n        {files?.map((e, i) => (\n          <div\n            className=\"text-gray-500 cursor-pointer select-none\"\n            key={i}\n            onClick={async () => playFile(`${subpath}/${e.name}`)}\n          >\n            {e.name}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useMemo, useState } from 'react';\n\nimport jsdocJson from '../../../../../doc.json';\nconst availableFunctions = jsdocJson.docs\n  .filter(({ name, description }) => name && !name.startsWith('_') && !!description)\n  .sort((a, b) => /* a.meta.filename.localeCompare(b.meta.filename) +  */ a.name.localeCompare(b.name));\n\nconst getInnerText = (html) => {\n  var div = document.createElement('div');\n  div.innerHTML = html;\n  return div.textContent || div.innerText || '';\n};\n\nexport function Reference() {\n  const [search, setSearch] = useState('');\n\n  const visibleFunctions = useMemo(() => {\n    return availableFunctions.filter((entry) => {\n      if (!search) {\n        return true;\n      }\n\n      return entry.name.includes(search) || (entry.synonyms?.some((s) => s.includes(search)) ?? false);\n    });\n  }, [search]);\n\n  return (\n    <div className=\"flex h-full w-full p-2 text-foreground overflow-hidden\">\n      <div className=\"h-full  flex flex-col gap-2 w-1/3 max-w-72 \">\n        <div class=\"w-full flex\">\n          <input\n            className=\"w-full p-1 bg-background rounded-md border-none\"\n            placeholder=\"Search\"\n            value={search}\n            onInput={(event) => setSearch(event.target.value)}\n          />\n        </div>\n        <div className=\"flex flex-col h-full overflow-y-auto  gap-1.5 bg-background bg-opacity-50  rounded-md\">\n          {visibleFunctions.map((entry, i) => (\n            <a\n              key={i}\n              className=\"cursor-pointer flex-none hover:bg-lineHighlight overflow-x-hidden  px-1 text-ellipsis\"\n              onClick={() => {\n                const el = document.getElementById(`doc-${i}`);\n                const container = document.getElementById('reference-container');\n                container.scrollTo(0, el.offsetTop);\n              }}\n            >\n              {entry.name} {/* <span className=\"text-gray-600\">{entry.meta.filename}</span> */}\n            </a>\n          ))}\n        </div>\n      </div>\n      <div\n        className=\"break-normal flex-grow flex-col overflow-y-auto overflow-x-hidden   px-2 flex relative\"\n        id=\"reference-container\"\n      >\n        <div className=\"prose dark:prose-invert min-w-full px-1 \">\n          <h2>API Reference</h2>\n          <p>\n            This is the long list functions you can use! Remember that you don't need to remember all of those and that\n            you can already make music with a small set of functions!\n          </p>\n          {visibleFunctions.map((entry, i) => (\n            <section key={i}>\n              <h3 id={`doc-${i}`}>{entry.name}</h3>\n              {!!entry.synonyms_text && (\n                <p>\n                  Synonyms: <code>{entry.synonyms_text}</code>\n                </p>\n              )}\n              {/* <small>{entry.meta.filename}</small> */}\n              <p dangerouslySetInnerHTML={{ __html: entry.description }}></p>\n              <ul>\n                {entry.params?.map(({ name, type, description }, i) => (\n                  <li key={i}>\n                    {name} : {type.names?.join(' | ')} {description ? <> - {getInnerText(description)}</> : ''}\n                  </li>\n                ))}\n              </ul>\n              {entry.examples?.map((example, j) => (\n                <pre key={j}>{example}</pre>\n              ))}\n            </section>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\n//      value: ?ID, options: Map<ID, any>, onChange: ID => null, onClick: event => void, isDisabled: boolean\nexport function SelectInput({ value, options, onChange, onClick, isDisabled }) {\n  return (\n    <select\n      disabled={isDisabled}\n      onClick={onClick}\n      className=\"p-2 bg-background rounded-md text-foreground\"\n      value={value ?? ''}\n      onChange={(e) => onChange(e.target.value)}\n    >\n      {options.size == 0 && <option value={value}>{`${value ?? 'select an option'}`}</option>}\n      {Array.from(options.keys()).map((id) => (\n        <option key={id} className=\"bg-background\" value={id}>\n          {options.get(id)}\n        </option>\n      ))}\n    </select>\n  );\n}\n","import React, { useState } from 'react';\nimport { getAudioDevices, setAudioDevice } from '../../util.mjs';\nimport { SelectInput } from './SelectInput';\n\nconst initdevices = new Map();\n\n// Allows the user to select an audio interface for Strudel to play through\nexport function AudioDeviceSelector({ audioDeviceName, onChange, isDisabled }) {\n  const [devices, setDevices] = useState(initdevices);\n  const devicesInitialized = devices.size > 0;\n\n  const onClick = () => {\n    if (devicesInitialized) {\n      return;\n    }\n    getAudioDevices().then((devices) => {\n      setDevices(devices);\n    });\n  };\n  const onDeviceChange = (deviceName) => {\n    if (!devicesInitialized) {\n      return;\n    }\n    const deviceID = devices.get(deviceName);\n    onChange(deviceName);\n    setAudioDevice(deviceID);\n  };\n  const options = new Map();\n  Array.from(devices.keys()).forEach((deviceName) => {\n    options.set(deviceName, deviceName);\n  });\n  return (\n    <SelectInput\n      isDisabled={isDisabled}\n      options={options}\n      onClick={onClick}\n      value={audioDeviceName}\n      onChange={onDeviceChange}\n    />\n  );\n}\n","import React from 'react';\nimport { audioEngineTargets } from '../../../settings.mjs';\nimport { SelectInput } from './SelectInput';\n\n// Allows the user to select an audio interface for Strudel to play through\nexport function AudioEngineTargetSelector({ target, onChange, isDisabled }) {\n  const onTargetChange = (target) => {\n    onChange(target);\n  };\n  const options = new Map([\n    [audioEngineTargets.webaudio, audioEngineTargets.webaudio],\n    [audioEngineTargets.osc, audioEngineTargets.osc],\n  ]);\n  return (\n    <div className=\" flex flex-col gap-1\">\n      <SelectInput isDisabled={isDisabled} options={options} value={target} onChange={onTargetChange} />\n      {target === audioEngineTargets.osc && (\n        <div>\n          <p className=\"text-sm italic\">\n            âš  All events routed to OSC, audio is silenced! See{' '}\n            <a className=\"text-blue-500\" href=\"https://strudel.cc/learn/input-output/\">\n              Docs\n            </a>\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { defaultSettings, settingsMap, useSettings } from '../../../settings.mjs';\nimport { themes } from '@strudel/codemirror';\nimport { isUdels } from '../../util.mjs';\nimport { ButtonGroup } from './Forms.jsx';\nimport { AudioDeviceSelector } from './AudioDeviceSelector.jsx';\nimport { AudioEngineTargetSelector } from './AudioEngineTargetSelector.jsx';\nimport { confirmDialog } from '../../util.mjs';\n\nfunction Checkbox({ label, value, onChange, disabled = false }) {\n  return (\n    <label>\n      <input disabled={disabled} type=\"checkbox\" checked={value} onChange={onChange} />\n      {' ' + label}\n    </label>\n  );\n}\n\nfunction SelectInput({ value, options, onChange }) {\n  return (\n    <select\n      className=\"p-2 bg-background rounded-md text-foreground\"\n      value={value}\n      onChange={(e) => onChange(e.target.value)}\n    >\n      {Object.entries(options).map(([k, label]) => (\n        <option key={k} className=\"bg-background\" value={k}>\n          {label}\n        </option>\n      ))}\n    </select>\n  );\n}\n\nfunction NumberSlider({ value, onChange, step = 1, ...rest }) {\n  return (\n    <div className=\"flex space-x-2 gap-1\">\n      <input\n        className=\"p-2 grow\"\n        type=\"range\"\n        value={value}\n        step={step}\n        onChange={(e) => onChange(Number(e.target.value))}\n        {...rest}\n      />\n      <input\n        type=\"number\"\n        value={value}\n        step={step}\n        className=\"w-16 bg-background rounded-md\"\n        onChange={(e) => onChange(Number(e.target.value))}\n      />\n    </div>\n  );\n}\n\nfunction FormItem({ label, children }) {\n  return (\n    <div className=\"grid gap-2\">\n      <label>{label}</label>\n      {children}\n    </div>\n  );\n}\n\nconst themeOptions = Object.fromEntries(Object.keys(themes).map((k) => [k, k]));\nconst fontFamilyOptions = {\n  monospace: 'monospace',\n  Courier: 'Courier',\n  JetBrains: 'JetBrains',\n  Hack: 'Hack',\n  FiraCode: 'FiraCode',\n  'FiraCode-SemiBold': 'FiraCode SemiBold',\n  teletext: 'teletext',\n  mode7: 'mode7',\n  BigBlueTerminal: 'BigBlueTerminal',\n  x3270: 'x3270',\n  Monocraft: 'Monocraft',\n  PressStart: 'PressStart2P',\n  'we-come-in-peace': 'we-come-in-peace',\n  galactico: 'galactico',\n};\n\nconst RELOAD_MSG = 'Changing this setting requires the window to reload itself. OK?';\n\nexport function SettingsTab({ started }) {\n  const {\n    theme,\n    keybindings,\n    isBracketClosingEnabled,\n    isBracketMatchingEnabled,\n    isLineNumbersDisplayed,\n    isPatternHighlightingEnabled,\n    isActiveLineHighlighted,\n    isAutoCompletionEnabled,\n    isTooltipEnabled,\n    isFlashEnabled,\n    isButtonRowHidden,\n    isCSSAnimationDisabled,\n    isSyncEnabled,\n    isLineWrappingEnabled,\n    fontSize,\n    fontFamily,\n    panelPosition,\n    audioDeviceName,\n    audioEngineTarget,\n    togglePanelTrigger,\n  } = useSettings();\n  const shouldAlwaysSync = isUdels();\n  const canChangeAudioDevice = AudioContext.prototype.setSinkId != null;\n  return (\n    <div className=\"text-foreground p-4 space-y-4 w-full\">\n      {canChangeAudioDevice && (\n        <FormItem label=\"Audio Output Device\">\n          <AudioDeviceSelector\n            isDisabled={started}\n            audioDeviceName={audioDeviceName}\n            onChange={(audioDeviceName) => {\n              confirmDialog(RELOAD_MSG).then((r) => {\n                if (r == true) {\n                  settingsMap.setKey('audioDeviceName', audioDeviceName);\n                  return window.location.reload();\n                }\n              });\n            }}\n          />\n        </FormItem>\n      )}\n      <FormItem label=\"Audio Engine Target\">\n        <AudioEngineTargetSelector\n          target={audioEngineTarget}\n          onChange={(target) => {\n            confirmDialog(RELOAD_MSG).then((r) => {\n              if (r == true) {\n                settingsMap.setKey('audioEngineTarget', target);\n                return window.location.reload();\n              }\n            });\n          }}\n        />\n      </FormItem>\n      <FormItem label=\"Theme\">\n        <SelectInput options={themeOptions} value={theme} onChange={(theme) => settingsMap.setKey('theme', theme)} />\n      </FormItem>\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <FormItem label=\"Font Family\">\n          <SelectInput\n            options={fontFamilyOptions}\n            value={fontFamily}\n            onChange={(fontFamily) => settingsMap.setKey('fontFamily', fontFamily)}\n          />\n        </FormItem>\n        <FormItem label=\"Font Size\">\n          <NumberSlider\n            value={fontSize}\n            onChange={(fontSize) => settingsMap.setKey('fontSize', fontSize)}\n            min={10}\n            max={40}\n            step={2}\n          />\n        </FormItem>\n      </div>\n      <FormItem label=\"Keybindings\">\n        <ButtonGroup\n          value={keybindings}\n          onChange={(keybindings) => settingsMap.setKey('keybindings', keybindings)}\n          items={{ codemirror: 'Codemirror', vim: 'Vim', emacs: 'Emacs', vscode: 'VSCode' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Panel Position\">\n        <ButtonGroup\n          value={panelPosition}\n          onChange={(value) => settingsMap.setKey('panelPosition', value)}\n          items={{ bottom: 'Bottom', right: 'Right' }}\n        ></ButtonGroup>\n      </FormItem>\n      <FormItem label=\"Open Panel on:                       \">\n        <ButtonGroup\n          value={togglePanelTrigger}\n          onChange={(value) => settingsMap.setKey('togglePanelTrigger', value)}\n          items={{ click: 'Click', hover: 'Hover' }}\n        ></ButtonGroup>\n        {/* <Checkbox\n          label=\"Click\"\n          onChange={(cbEvent) => {\n            if (cbEvent.target.checked) {\n              settingsMap.setKey('togglePanelTrigger', 'click');\n            }\n          }}\n          value={togglePanelTrigger != 'hover'}\n        />\n        <Checkbox\n          label=\"Hover\"\n          onChange={(cbEvent) => {\n            if (cbEvent.target.checked) {\n              settingsMap.setKey('togglePanelTrigger', 'hover');\n            }\n          }}\n          value={togglePanelTrigger == 'hover'}\n        /> */}\n      </FormItem>\n      <FormItem label=\"More Settings\">\n        <Checkbox\n          label=\"Enable bracket matching\"\n          onChange={(cbEvent) => settingsMap.setKey('isBracketMatchingEnabled', cbEvent.target.checked)}\n          value={isBracketMatchingEnabled}\n        />\n        <Checkbox\n          label=\"Auto close brackets\"\n          onChange={(cbEvent) => settingsMap.setKey('isBracketClosingEnabled', cbEvent.target.checked)}\n          value={isBracketClosingEnabled}\n        />\n        <Checkbox\n          label=\"Display line numbers\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineNumbersDisplayed', cbEvent.target.checked)}\n          value={isLineNumbersDisplayed}\n        />\n        <Checkbox\n          label=\"Highlight active line\"\n          onChange={(cbEvent) => settingsMap.setKey('isActiveLineHighlighted', cbEvent.target.checked)}\n          value={isActiveLineHighlighted}\n        />\n        <Checkbox\n          label=\"Highlight events in code\"\n          onChange={(cbEvent) => settingsMap.setKey('isPatternHighlightingEnabled', cbEvent.target.checked)}\n          value={isPatternHighlightingEnabled}\n        />\n        <Checkbox\n          label=\"Enable auto-completion\"\n          onChange={(cbEvent) => settingsMap.setKey('isAutoCompletionEnabled', cbEvent.target.checked)}\n          value={isAutoCompletionEnabled}\n        />\n        <Checkbox\n          label=\"Enable tooltips on Ctrl and hover\"\n          onChange={(cbEvent) => settingsMap.setKey('isTooltipEnabled', cbEvent.target.checked)}\n          value={isTooltipEnabled}\n        />\n        <Checkbox\n          label=\"Enable line wrapping\"\n          onChange={(cbEvent) => settingsMap.setKey('isLineWrappingEnabled', cbEvent.target.checked)}\n          value={isLineWrappingEnabled}\n        />\n        <Checkbox\n          label=\"Enable flashing on evaluation\"\n          onChange={(cbEvent) => settingsMap.setKey('isFlashEnabled', cbEvent.target.checked)}\n          value={isFlashEnabled}\n        />\n        <Checkbox\n          label=\"Sync across Browser Tabs / Windows\"\n          onChange={(cbEvent) => {\n            const newVal = cbEvent.target.checked;\n            confirmDialog(RELOAD_MSG).then((r) => {\n              if (r) {\n                settingsMap.setKey('isSyncEnabled', newVal);\n                window.location.reload();\n              }\n            });\n          }}\n          disabled={shouldAlwaysSync}\n          value={isSyncEnabled}\n        />\n        <Checkbox\n          label=\"Hide top buttons\"\n          onChange={(cbEvent) => settingsMap.setKey('isButtonRowHidden', cbEvent.target.checked)}\n          value={isButtonRowHidden}\n        />\n        <Checkbox\n          label=\"Disable CSS Animations\"\n          onChange={(cbEvent) => settingsMap.setKey('isCSSAnimationDisabled', cbEvent.target.checked)}\n          value={isCSSAnimationDisabled}\n        />\n      </FormItem>\n      <FormItem label=\"Zen Mode\">Try clicking the logo in the top left!</FormItem>\n      <FormItem label=\"Reset Settings\">\n        <button\n          className=\"bg-background p-2 max-w-[300px] rounded-md hover:opacity-50\"\n          onClick={() => {\n            confirmDialog('Sure?').then((r) => {\n              if (r) {\n                settingsMap.set(defaultSettings);\n              }\n            });\n          }}\n        >\n          restore default settings\n        </button>\n      </FormItem>\n    </div>\n  );\n}\n","import React, { useCallback, useState } from 'react';\nimport { registerSamplesFromDB, uploadSamplesToDB, userSamplesDBConfig } from '../../idbutils.mjs';\n\n//choose a directory to locally import samples\nexport default function ImportSoundsButton({ onComplete }) {\n  let fileUploadRef = React.createRef();\n  const [isUploading, setIsUploading] = useState(false);\n  const onChange = useCallback(async () => {\n    if (!fileUploadRef.current.files?.length) {\n      return;\n    }\n    setIsUploading(true);\n\n    await uploadSamplesToDB(userSamplesDBConfig, fileUploadRef.current.files).then(() => {\n      registerSamplesFromDB(userSamplesDBConfig, () => {\n        onComplete();\n        setIsUploading(false);\n      });\n    });\n  });\n\n  return (\n    <label\n      style={{ alignItems: 'center' }}\n      className=\"flex bg-background ml-2 pl-2 pr-2 max-w-[300px] rounded-md hover:opacity-50 whitespace-nowrap cursor-pointer\"\n    >\n      <input\n        disabled={isUploading}\n        ref={fileUploadRef}\n        id=\"audio_file\"\n        style={{ display: 'none' }}\n        type=\"file\"\n        directory=\"\"\n        webkitdirectory=\"\"\n        multiple\n        accept=\"audio/*, .wav, .mp3, .m4a, .flac, .aac, .ogg\"\n        onChange={() => {\n          onChange();\n        }}\n      />\n      {isUploading ? 'importing...' : 'import sounds'}\n    </label>\n  );\n}\n","import useEvent from '@src/useEvent.mjs';\nimport { useStore } from '@nanostores/react';\nimport { getAudioContext, soundMap, connectToDestination } from '@strudel/webaudio';\nimport { useMemo, useRef, useState } from 'react';\nimport { settingsMap, useSettings } from '../../../settings.mjs';\nimport { ButtonGroup } from './Forms.jsx';\nimport ImportSoundsButton from './ImportSoundsButton.jsx';\n\nconst getSamples = (samples) =>\n  Array.isArray(samples) ? samples.length : typeof samples === 'object' ? Object.values(samples).length : 1;\n\nexport function SoundsTab() {\n  const sounds = useStore(soundMap);\n  const { soundsFilter } = useSettings();\n  const [search, setSearch] = useState('');\n\n  const soundEntries = useMemo(() => {\n    if (!sounds) {\n      return [];\n    }\n\n    let filtered = Object.entries(sounds)\n      .filter(([key]) => !key.startsWith('_'))\n      .sort((a, b) => a[0].localeCompare(b[0]))\n      .filter(([name]) => name.toLowerCase().includes(search.toLowerCase()));\n\n    if (soundsFilter === 'user') {\n      return filtered.filter(([_, { data }]) => !data.prebake);\n    }\n    if (soundsFilter === 'drums') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag === 'drum-machines');\n    }\n    if (soundsFilter === 'samples') {\n      return filtered.filter(([_, { data }]) => data.type === 'sample' && data.tag !== 'drum-machines');\n    }\n    if (soundsFilter === 'synths') {\n      return filtered.filter(([_, { data }]) => ['synth', 'soundfont'].includes(data.type));\n    }\n    return filtered;\n  }, [sounds, soundsFilter, search]);\n\n  // holds mutable ref to current triggered sound\n  const trigRef = useRef();\n\n  // stop current sound on mouseup\n  useEvent('mouseup', () => {\n    const t = trigRef.current;\n    trigRef.current = undefined;\n    t?.then((ref) => {\n      ref?.stop(getAudioContext().currentTime + 0.01);\n    });\n  });\n\n  return (\n    <div id=\"sounds-tab\" className=\"px-4 flex flex-col w-full h-full  dark:text-white text-stone-900\">\n      <input\n        className=\"w-full p-1 bg-background rounded-md my-2\"\n        placeholder=\"Search\"\n        value={search}\n        onChange={(e) => setSearch(e.target.value)}\n      />\n\n      <div className=\"pb-2 flex shrink-0 flex-wrap\">\n        <ButtonGroup\n          value={soundsFilter}\n          onChange={(value) => settingsMap.setKey('soundsFilter', value)}\n          items={{\n            samples: 'samples',\n            drums: 'drum-machines',\n            synths: 'Synths',\n            user: 'User',\n          }}\n        ></ButtonGroup>\n        <ImportSoundsButton onComplete={() => settingsMap.setKey('soundsFilter', 'user')} />\n      </div>\n\n      <div className=\"min-h-0 max-h-full grow overflow-auto font-mono text-sm break-normal pb-2\">\n        {soundEntries.map(([name, { data, onTrigger }]) => {\n          return (\n            <span\n              key={name}\n              className=\"cursor-pointer hover:opacity-50\"\n              onMouseDown={async () => {\n                const ctx = getAudioContext();\n                const params = {\n                  note: ['synth', 'soundfont'].includes(data.type) ? 'a3' : undefined,\n                  s: name,\n                  clip: 1,\n                  release: 0.5,\n                  sustain: 1,\n                  duration: 0.5,\n                };\n                const time = ctx.currentTime + 0.05;\n                const onended = () => trigRef.current?.node?.disconnect();\n                trigRef.current = Promise.resolve(onTrigger(time, params, onended));\n                trigRef.current.then((ref) => {\n                  connectToDestination(ref?.node);\n                });\n              }}\n            >\n              {' '}\n              {name}\n              {data?.type === 'sample' ? `(${getSamples(data.samples)})` : ''}\n              {data?.type === 'soundfont' ? `(${data.fonts.length})` : ''}\n            </span>\n          );\n        })}\n        {!soundEntries.length ? 'No custom sounds loaded in this pattern (yet).' : ''}\n      </div>\n    </div>\n  );\n}\n","import cx from '@src/cx.mjs';\n\nconst { BASE_URL } = import.meta.env;\nconst baseNoTrailing = BASE_URL.endsWith('/') ? BASE_URL.slice(0, -1) : BASE_URL;\n\nexport function WelcomeTab({ context }) {\n  return (\n    <div className=\"prose dark:prose-invert min-w-full pt-2 font-sans pb-8 px-4 \">\n      <h3>ê©œ welcome</h3>\n      <p>\n        You have found <span className=\"underline\">strudel</span>, a new live coding platform to write dynamic music\n        pieces in the browser! It is free and open-source and made for beginners and experts alike. To get started:\n        <br />\n        <br />\n        <span className=\"underline\">1. hit play</span> - <span className=\"underline\">2. change something</span> -{' '}\n        <span className=\"underline\">3. hit update</span>\n        <br />\n        If you don't like what you hear, try <span className=\"underline\">shuffle</span>!\n      </p>\n      <p>\n        To learn more about what this all means, check out the{' '}\n        <a href={`${baseNoTrailing}/workshop/getting-started/`} target=\"_blank\">\n          interactive tutorial\n        </a>\n        . Also feel free to join the{' '}\n        <a href=\"https://discord.com/invite/HGEdXmRkzT\" target=\"_blank\">\n          tidalcycles discord channel\n        </a>{' '}\n        to ask any questions, give feedback or just say hello.\n      </p>\n      <h3>ê©œ about</h3>\n      <p>\n        strudel is a JavaScript version of{' '}\n        <a href=\"https://tidalcycles.org/\" target=\"_blank\">\n          tidalcycles\n        </a>\n        , which is a popular live coding language for music, written in Haskell. Strudel is free/open source software:\n        you can redistribute and/or modify it under the terms of the{' '}\n        <a href=\"https://github.com/tidalcycles/strudel/blob/main/LICENSE\" target=\"_blank\">\n          GNU Affero General Public License\n        </a>\n        . You can find the source code at{' '}\n        <a href=\"https://github.com/tidalcycles/strudel\" target=\"_blank\">\n          github\n        </a>\n        . Please consider to{' '}\n        <a href=\"https://opencollective.com/tidalcycles\" target=\"_blank\">\n          support this project\n        </a>{' '}\n        to ensure ongoing development ðŸ’–\n      </p>\n    </div>\n  );\n}\n","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M9.78 4.22a.75.75 0 0 1 0 1.06L7.06 8l2.72 2.72a.75.75 0 1 1-1.06 1.06L5.47 8.53a.75.75 0 0 1 0-1.06l3.25-3.25a.75.75 0 0 1 1.06 0Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M5.28 4.22a.75.75 0 0 0-1.06 1.06L6.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L8 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L9.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L8 6.94 5.28 4.22Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import cx from '@src/cx.mjs';\nimport { setPanelPinned, setActiveFooter as setTab, setIsPanelOpened, useSettings } from '../../../settings.mjs';\nimport { ConsoleTab } from './ConsoleTab';\nimport { FilesTab } from './FilesTab';\nimport { Reference } from './Reference';\nimport { SettingsTab } from './SettingsTab';\nimport { SoundsTab } from './SoundsTab';\nimport { WelcomeTab } from './WelcomeTab';\nimport { PatternsTab } from './PatternsTab';\nimport { ChevronLeftIcon, XMarkIcon } from '@heroicons/react/16/solid';\n\nconst TAURI = typeof window !== 'undefined' && window.__TAURI__;\n\nexport function HorizontalPanel({ context }) {\n  const settings = useSettings();\n  const { isPanelOpen, activeFooter: tab } = settings;\n\n  return (\n    <PanelNav\n      settings={settings}\n      className={cx(isPanelOpen ? `min-h-[360px] max-h-[360px]` : 'min-h-12 max-h-12', 'overflow-hidden flex flex-col')}\n    >\n      {isPanelOpen && (\n        <div className=\"flex h-full overflow-auto pr-10 \">\n          <PanelContent context={context} tab={tab} />\n        </div>\n      )}\n\n      <div className=\"absolute right-4 pt-4\">\n        <PanelActionButton settings={settings} />\n      </div>\n\n      <div className=\"flex  justify-between min-h-12 max-h-12 grid-cols-2 items-center\">\n        <Tabs setTab={setTab} tab={tab} />\n      </div>\n    </PanelNav>\n  );\n}\n\nexport function VerticalPanel({ context }) {\n  const settings = useSettings();\n  const { activeFooter: tab, isPanelOpen } = settings;\n\n  return (\n    <PanelNav\n      settings={settings}\n      className={cx(isPanelOpen ? `min-w-[min(600px,80vw)] max-w-[min(600px,80vw)]` : 'min-w-12 max-w-12')}\n    >\n      {isPanelOpen ? (\n        <div className={cx('flex flex-col h-full')}>\n          <div className=\"flex justify-between w-full \">\n            <Tabs setTab={setTab} tab={tab} />\n            <PanelActionButton settings={settings} />\n          </div>\n\n          <div className=\"overflow-auto h-full\">\n            <PanelContent context={context} tab={tab} />\n          </div>\n        </div>\n      ) : (\n        <button\n          onClick={(e) => {\n            setIsPanelOpened(true);\n          }}\n          aria-label=\"open menu panel\"\n          className={cx(\n            'flex flex-col hover:bg-lineBackground items-center cursor-pointer justify-center w-full  h-full',\n          )}\n        >\n          <ChevronLeftIcon className=\"text-foreground opacity-50 w-6 h-6\" />\n        </button>\n      )}\n    </PanelNav>\n  );\n}\n\nconst tabNames = {\n  welcome: 'intro',\n  patterns: 'patterns',\n  sounds: 'sounds',\n  reference: 'reference',\n  console: 'console',\n  settings: 'settings',\n};\nif (TAURI) {\n  tabNames.files = 'files';\n}\n\nfunction PanelNav({ children, className, settings, ...props }) {\n  const isHoverBehavior = settings.togglePanelTrigger === 'hover';\n  return (\n    <nav\n      onClick={() => {\n        if (!settings.isPanelOpen) {\n          setIsPanelOpened(true);\n        }\n      }}\n      onMouseEnter={() => {\n        if (isHoverBehavior && !settings.isPanelOpen) {\n          setIsPanelOpened(true);\n        }\n      }}\n      onMouseLeave={() => {\n        if (isHoverBehavior && !settings.isPanelPinned) {\n          setIsPanelOpened(false);\n        }\n      }}\n      aria-label=\"Menu Panel\"\n      className={cx('bg-lineHighlight group overflow-x-auto', className)}\n      {...props}\n    >\n      {children}\n    </nav>\n  );\n}\n\nfunction PanelContent({ context, tab }) {\n  switch (tab) {\n    case tabNames.patterns:\n      return <PatternsTab context={context} />;\n    case tabNames.console:\n      return <ConsoleTab />;\n    case tabNames.sounds:\n      return <SoundsTab />;\n    case tabNames.reference:\n      return <Reference />;\n    case tabNames.settings:\n      return <SettingsTab started={context.started} />;\n    case tabNames.files:\n      return <FilesTab />;\n    default:\n      return <WelcomeTab context={context} />;\n  }\n}\n\nfunction PanelTab({ label, isSelected, onClick }) {\n  return (\n    <>\n      <button\n        onClick={onClick}\n        className={cx(\n          'h-8 px-2 text-foreground cursor-pointer hover:opacity-50 flex items-center space-x-1 border-b',\n          isSelected ? 'border-foreground' : 'border-transparent',\n        )}\n      >\n        {label}\n      </button>\n    </>\n  );\n}\nfunction Tabs({ setTab, tab, className }) {\n  return (\n    <div className={cx('flex select-none max-w-full overflow-auto pb-2', className)}>\n      {Object.keys(tabNames).map((key) => {\n        const val = tabNames[key];\n        return <PanelTab key={key} isSelected={tab === val} label={key} onClick={() => setTab(val)} />;\n      })}\n    </div>\n  );\n}\n\nfunction PanelActionButton({ settings }) {\n  const { togglePanelTrigger, isPanelPinned, isPanelOpen } = settings;\n  const isHoverBehavior = togglePanelTrigger === 'hover';\n  if (!isPanelOpen) {\n    return;\n  }\n\n  if (isHoverBehavior) {\n    return <PinButton pinned={isPanelPinned} />;\n  }\n  return <CloseButton onClick={() => setIsPanelOpened(false)} />;\n}\n\nfunction PinButton({ pinned }) {\n  return (\n    <button\n      onClick={() => setPanelPinned(!pinned)}\n      className={cx(\n        'text-foreground max-h-8 min-h-8 max-w-8 min-w-8 items-center justify-center p-1.5 group-hover:flex',\n        pinned ? 'flex' : 'hidden',\n      )}\n      aria-label=\"Pin Menu Panel\"\n    >\n      <svg\n        stroke=\"currentColor\"\n        fill={'currentColor'}\n        strokeWidth=\"0\"\n        className=\"w-full h-full\"\n        opacity={pinned ? 1 : '.3'}\n        viewBox=\"0 0 16 16\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path d=\"M9.828.722a.5.5 0 0 1 .354.146l4.95 4.95a.5.5 0 0 1 0 .707c-.48.48-1.072.588-1.503.588-.177 0-.335-.018-.46-.039l-3.134 3.134a6 6 0 0 1 .16 1.013c.046.702-.032 1.687-.72 2.375a.5.5 0 0 1-.707 0l-2.829-2.828-3.182 3.182c-.195.195-1.219.902-1.414.707s.512-1.22.707-1.414l3.182-3.182-2.828-2.829a.5.5 0 0 1 0-.707c.688-.688 1.673-.767 2.375-.72a6 6 0 0 1 1.013.16l3.134-3.133a3 3 0 0 1-.04-.461c0-.43.108-1.022.589-1.503a.5.5 0 0 1 .353-.146\"></path>\n      </svg>\n    </button>\n  );\n}\n\nfunction CloseButton({ onClick }) {\n  return (\n    <button\n      onClick={onClick}\n      className={cx(\n        'text-foreground max-h-8 min-h-8 max-w-8 min-w-8 items-center justify-center p-1.5 group-hover:flex',\n      )}\n      aria-label=\"Close Menu\"\n    >\n      <XMarkIcon />\n    </button>\n  );\n}\n","// type Props = {\n//   containerRef:  React.MutableRefObject<HTMLElement | null>,\n//   editorRef:  React.MutableRefObject<HTMLElement | null>,\n//   init: () => void\n// }\nexport function Code(Props) {\n  const { editorRef, containerRef, init } = Props;\n\n  return (\n    <section\n      className={'text-gray-100 cursor-text pb-0 overflow-auto grow'}\n      id=\"code\"\n      ref={(el) => {\n        containerRef.current = el;\n        if (!editorRef.current) {\n          init();\n        }\n      }}\n    ></section>\n  );\n}\n","import * as React from \"react\";\nfunction PlayCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm6.39-2.908a.75.75 0 0 1 .766.027l3.5 2.25a.75.75 0 0 1 0 1.262l-3.5 2.25A.75.75 0 0 1 8 12.25v-4.5a.75.75 0 0 1 .39-.658Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlayCircleIcon);\nexport default ForwardRef;","import PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\n\n// type Props = {\n//   started: boolean;\n//   handleTogglePlay: () => void;\n// };\nexport default function BigPlayButton(Props) {\n  const { started, handleTogglePlay } = Props;\n  if (started) {\n    return;\n  }\n\n  return (\n    <button\n      onClick={() => handleTogglePlay()}\n      className=\"text-white text-2xl fixed left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%] z-[1000] m-auto p-4 bg-black rounded-md flex items-center space-x-2\"\n    >\n      <PlayCircleIcon className=\"w-6 h-6\" />\n      <span>play</span>\n    </button>\n  );\n}\n","// type Props = { error: Error | null };\nexport default function UserFacingErrorMessage(Props) {\n  const { error } = Props;\n  if (error == null) {\n    return;\n  }\n  return <div className=\"text-red-500 p-4 bg-lineHighlight animate-pulse\">{error.message || 'Unknown Error :-/'}</div>;\n}\n","import Loader from '@src/repl/components/Loader';\nimport { HorizontalPanel } from '@src/repl/components/panel/Panel';\nimport { Code } from '@src/repl/components/Code';\nimport BigPlayButton from '@src/repl/components/BigPlayButton';\nimport UserFacingErrorMessage from '@src/repl/components/UserFacingErrorMessage';\n\n// type Props = {\n//  context: replcontext,\n// }\n\nexport default function UdelsEditor(Props) {\n  const { context } = Props;\n  const { containerRef, editorRef, error, init, pending, started, handleTogglePlay } = context;\n\n  return (\n    <div className={'h-full flex w-full flex-col relative'}>\n      <Loader active={pending} />\n      <BigPlayButton started={started} handleTogglePlay={handleTogglePlay} />\n      <div className=\"grow flex relative overflow-hidden\">\n        <Code containerRef={containerRef} editorRef={editorRef} init={init} />\n      </div>\n      <UserFacingErrorMessage error={error} />\n      <HorizontalPanel context={context} />\n    </div>\n  );\n}\n","import * as React from \"react\";\nfunction StopCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 20 20\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M2 10a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm5-2.25A.75.75 0 0 1 7.75 7h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-4.5Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(StopCircleIcon);\nexport default ForwardRef;","import PlayCircleIcon from '@heroicons/react/20/solid/PlayCircleIcon';\nimport StopCircleIcon from '@heroicons/react/20/solid/StopCircleIcon';\nimport cx from '@src/cx.mjs';\nimport { useSettings, setIsZen } from '../../settings.mjs';\nimport '../Repl.css';\n\nconst { BASE_URL } = import.meta.env;\nconst baseNoTrailing = BASE_URL.endsWith('/') ? BASE_URL.slice(0, -1) : BASE_URL;\n\nexport function Header({ context, embedded = false }) {\n  const { started, pending, isDirty, activeCode, handleTogglePlay, handleEvaluate, handleShuffle, handleShare } =\n    context;\n  const isEmbedded = typeof window !== 'undefined' && (embedded || window.location !== window.parent.location);\n  const { isZen, isButtonRowHidden, isCSSAnimationDisabled } = useSettings();\n\n  return (\n    <header\n      id=\"header\"\n      className={cx(\n        'flex-none text-black  z-[100] text-lg select-none h-20 md:h-14',\n        !isZen && !isEmbedded && 'bg-lineHighlight',\n        isZen ? 'h-12 w-8 fixed top-0 left-0' : 'sticky top-0 w-full py-1 justify-between',\n        isEmbedded ? 'flex' : 'md:flex',\n      )}\n    >\n      <div className=\"px-4 flex space-x-2 md:pt-0 select-none\">\n        <h1\n          onClick={() => {\n            if (isEmbedded) window.open(window.location.href.replace('embed', ''));\n          }}\n          className={cx(\n            isEmbedded ? 'text-l cursor-pointer' : 'text-xl',\n            'text-foreground font-bold flex space-x-2 items-center',\n          )}\n        >\n          <div\n            className={cx(\n              'mt-[1px]',\n              started && !isCSSAnimationDisabled && 'animate-spin',\n              'cursor-pointer text-blue-500',\n              isZen && 'fixed top-2 right-4',\n            )}\n            onClick={() => {\n              if (!isEmbedded) {\n                setIsZen(!isZen);\n              }\n            }}\n          >\n            <span className=\"block rotate-90\">ê©œ</span>\n          </div>\n          {!isZen && (\n            <div className=\"space-x-2\">\n              <span className=\"\">strudel</span>\n              <span className=\"text-sm font-medium\">REPL</span>\n              {!isEmbedded && isButtonRowHidden && (\n                <a href={`${baseNoTrailing}/learn`} className=\"text-sm opacity-25 font-medium\">\n                  DOCS\n                </a>\n              )}\n            </div>\n          )}\n        </h1>\n      </div>\n      {!isZen && !isButtonRowHidden && (\n        <div className=\"flex max-w-full overflow-auto text-foreground px-1 md:px-2\">\n          <button\n            onClick={handleTogglePlay}\n            title={started ? 'stop' : 'play'}\n            className={cx(\n              !isEmbedded ? 'p-2' : 'px-2',\n              'hover:opacity-50',\n              !started && !isCSSAnimationDisabled && 'animate-pulse',\n            )}\n          >\n            {!pending ? (\n              <span className={cx('flex items-center space-x-2')}>\n                {started ? <StopCircleIcon className=\"w-6 h-6\" /> : <PlayCircleIcon className=\"w-6 h-6\" />}\n                {!isEmbedded && <span>{started ? 'stop' : 'play'}</span>}\n              </span>\n            ) : (\n              <>loading...</>\n            )}\n          </button>\n          <button\n            onClick={handleEvaluate}\n            title=\"update\"\n            className={cx(\n              'flex items-center space-x-1',\n              !isEmbedded ? 'p-2' : 'px-2',\n              !isDirty || !activeCode ? 'opacity-50' : 'hover:opacity-50',\n            )}\n          >\n            {!isEmbedded && <span>update</span>}\n          </button>\n          {!isEmbedded && (\n            <button\n              title=\"shuffle\"\n              className=\"hover:opacity-50 p-2 flex items-center space-x-1\"\n              onClick={handleShuffle}\n            >\n              <span> shuffle</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <button\n              title=\"share\"\n              className={cx(\n                'cursor-pointer hover:opacity-50 flex items-center space-x-1',\n                !isEmbedded ? 'p-2' : 'px-2',\n              )}\n              onClick={handleShare}\n            >\n              <span>share</span>\n            </button>\n          )}\n          {!isEmbedded && (\n            <a\n              title=\"learn\"\n              href={`${baseNoTrailing}/workshop/getting-started/`}\n              className={cx('hover:opacity-50 flex items-center space-x-1', !isEmbedded ? 'p-2' : 'px-2')}\n            >\n              <span>learn</span>\n            </a>\n          )}\n          {/* {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a href={window.location.href} target=\"_blank\" rel=\"noopener noreferrer\" title=\"Open in REPL\">\n                ðŸš€\n              </a>\n            </button>\n          )}\n          {isEmbedded && (\n            <button className={cx('hover:opacity-50 px-2')}>\n              <a\n                onClick={() => {\n                  window.location.href = initialUrl;\n                  window.location.reload();\n                }}\n                title=\"Reset\"\n              >\n                ðŸ’”\n              </a>\n            </button>\n          )} */}\n        </div>\n      )}\n    </header>\n  );\n}\n","import Loader from '@src/repl/components/Loader';\nimport { HorizontalPanel, VerticalPanel } from '@src/repl/components/panel/Panel';\nimport { Code } from '@src/repl/components/Code';\nimport UserFacingErrorMessage from '@src/repl/components/UserFacingErrorMessage';\nimport { Header } from './Header';\nimport { useSettings } from '@src/settings.mjs';\n\n// type Props = {\n//  context: replcontext,\n// }\n\nexport default function ReplEditor(Props) {\n  const { context } = Props;\n  const { containerRef, editorRef, error, init, pending } = context;\n  const settings = useSettings();\n  const { panelPosition, isZen } = settings;\n\n  return (\n    <div className=\"h-full flex flex-col relative\">\n      <Loader active={pending} />\n      <Header context={context} />\n      <div className=\"grow flex relative overflow-hidden\">\n        <Code containerRef={containerRef} editorRef={editorRef} init={init} />\n        {!isZen && panelPosition === 'right' && <VerticalPanel context={context} />}\n      </div>\n      <UserFacingErrorMessage error={error} />\n      {!isZen && panelPosition === 'bottom' && <HorizontalPanel context={context} />}\n    </div>\n  );\n}\n","import Loader from '@src/repl/components/Loader';\nimport { Code } from '@src/repl/components/Code';\nimport BigPlayButton from '@src/repl/components/BigPlayButton';\nimport UserFacingErrorMessage from '@src/repl/components/UserFacingErrorMessage';\nimport { Header } from './Header';\n\n// type Props = {\n//  context: replcontext,\n// }\n\nexport default function EmbeddedReplEditor(Props) {\n  const { context } = Props;\n  const { pending, started, handleTogglePlay, containerRef, editorRef, error, init } = context;\n  return (\n    <div className=\"h-full flex flex-col relative\">\n      <Loader active={pending} />\n      <Header context={context} embedded={true} />\n      <BigPlayButton started={started} handleTogglePlay={handleTogglePlay} />\n      <div className=\"grow flex relative overflow-hidden\">\n        <Code containerRef={containerRef} editorRef={editorRef} init={init} />\n      </div>\n      <UserFacingErrorMessage error={error} />\n    </div>\n  );\n}\n","import { oscTriggerTauri } from '../desktopbridge/oscbridge.mjs';\nimport { isTauri } from '../desktopbridge/utils.mjs';\nimport { oscTrigger } from './osc.mjs';\n\nconst trigger = isTauri() ? oscTriggerTauri : oscTrigger;\n\nexport const superdirtOutput = (hap, deadline, hapDuration, cps, targetTime) => {\n  const currentTime = performance.now() / 1000;\n  return trigger(null, hap, currentTime, cps, targetTime);\n};\n","export const createCache = (lastNumberWeakMap) => {\n    return (collection, nextNumber) => {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n    };\n};\n//# sourceMappingURL=cache.js.map","/*\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n * is fairly new.\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\nexport const createGenerateUniqueNumber = (cache, lastNumberWeakMap) => {\n    return (collection) => {\n        const lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n            return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n            while (collection.has(nextNumber)) {\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n            }\n            return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n    };\n};\n//# sourceMappingURL=generate-unique-number.js.map","import { createAddUniqueNumber } from './factories/add-unique-number';\nimport { createCache } from './factories/cache';\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './types/index';\nconst LAST_NUMBER_WEAK_MAP = new WeakMap();\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\nexport { addUniqueNumber, generateUniqueNumber };\n//# sourceMappingURL=module.js.map","export const isCallNotification = (message) => {\n    return message.method !== undefined && message.method === 'call';\n};\n//# sourceMappingURL=call-notification.js.map","export const isClearResponse = (message) => {\n    return message.error === null && typeof message.id === 'number';\n};\n//# sourceMappingURL=clear-response.js.map","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { isCallNotification } from './guards/call-notification';\nimport { isClearResponse } from './guards/clear-response';\nexport const load = (url) => {\n    // Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.\n    const scheduledIntervalFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const scheduledTimeoutFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const unrespondedRequests = new Map();\n    const worker = new Worker(url);\n    worker.addEventListener('message', ({ data }) => {\n        if (isCallNotification(data)) {\n            const { params: { timerId, timerType } } = data;\n            if (timerType === 'interval') {\n                const idOrFunc = scheduledIntervalFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n            else if (timerType === 'timeout') {\n                const idOrFunc = scheduledTimeoutFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                    // A timeout can be savely deleted because it is only called once.\n                    scheduledTimeoutFunctions.delete(timerId);\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n        }\n        else if (isClearResponse(data)) {\n            const { id } = data;\n            const timerIdAndTimerType = unrespondedRequests.get(id);\n            if (timerIdAndTimerType === undefined) {\n                throw new Error('The timer is in an undefined state.');\n            }\n            const { timerId, timerType } = timerIdAndTimerType;\n            unrespondedRequests.delete(id);\n            if (timerType === 'interval') {\n                scheduledIntervalFunctions.delete(timerId);\n            }\n            else {\n                scheduledTimeoutFunctions.delete(timerId);\n            }\n        }\n        else {\n            const { error: { message } } = data;\n            throw new Error(message);\n        }\n    });\n    const clearInterval = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'interval' });\n        scheduledIntervalFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'interval' }\n        });\n    };\n    const clearTimeout = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'timeout' });\n        scheduledTimeoutFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'timeout' }\n        });\n    };\n    const setInterval = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledIntervalFunctions);\n        scheduledIntervalFunctions.set(timerId, () => {\n            func();\n            // Doublecheck if the interval should still be rescheduled because it could have been cleared inside of func().\n            if (typeof scheduledIntervalFunctions.get(timerId) === 'function') {\n                worker.postMessage({\n                    id: null,\n                    method: 'set',\n                    params: {\n                        delay,\n                        now: performance.now(),\n                        timerId,\n                        timerType: 'interval'\n                    }\n                });\n            }\n        });\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'interval'\n            }\n        });\n        return timerId;\n    };\n    const setTimeout = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledTimeoutFunctions);\n        scheduledTimeoutFunctions.set(timerId, func);\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'timeout'\n            }\n        });\n        return timerId;\n    };\n    return {\n        clearInterval,\n        clearTimeout,\n        setInterval,\n        setTimeout\n    };\n};\n//# sourceMappingURL=module.js.map","export const createLoadOrReturnBroker = (loadBroker, worker) => {\n    let broker = null;\n    return () => {\n        if (broker !== null) {\n            return broker;\n        }\n        const blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        broker = loadBroker(url);\n        // Bug #1: Edge up until v18 didn't like the URL to be revoked directly.\n        setTimeout(() => URL.revokeObjectURL(url));\n        return broker;\n    };\n};\n//# sourceMappingURL=load-or-return-broker.js.map","// This is the minified and stringified code of the worker-timers-worker package.\nexport const worker = `(()=>{\"use strict\";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:\"call\",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener(\"message\",(i=>{let{data:s}=i;try{if(\"clear\"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if(\"interval\"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id \"'.concat(t,'\".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if(\"timeout\"!==i)throw new Error('The given type \"'.concat(i,'\" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id \"'.concat(e,'\".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if(\"set\"!==s.method)throw new Error('The given method \"'.concat(s.method,'\" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if(\"interval\"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,\"interval\"))})(i,a,n);else{if(\"timeout\"!==d)throw new Error('The given type \"'.concat(d,'\" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,\"timeout\"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`; // tslint:disable-line:max-line-length\n//# sourceMappingURL=worker.js.map","import { load } from 'worker-timers-broker';\nimport { createLoadOrReturnBroker } from './factories/load-or-return-broker';\nimport { worker } from './worker/worker';\nconst loadOrReturnBroker = createLoadOrReturnBroker(load, worker);\nexport const clearInterval = (timerId) => loadOrReturnBroker().clearInterval(timerId);\nexport const clearTimeout = (timerId) => loadOrReturnBroker().clearTimeout(timerId);\nexport const setInterval = (...args) => loadOrReturnBroker().setInterval(...args);\nexport const setTimeout = (...args) => loadOrReturnBroker().setTimeout(...args);\n//# sourceMappingURL=module.js.map","/*\nRepl.jsx - <short description TODO>\nCopyright (C) 2022 Strudel contributors - see <https://github.com/tidalcycles/strudel/blob/main/repl/src/App.js>\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { code2hash, getPerformanceTimeSeconds, logger, silence } from '@strudel/core';\nimport { getDrawContext } from '@strudel/draw';\nimport { transpiler } from '@strudel/transpiler';\nimport {\n  getAudioContextCurrentTime,\n  webaudioOutput,\n  resetGlobalEffects,\n  resetLoadedSounds,\n  initAudioOnFirstClick,\n} from '@strudel/webaudio';\nimport { getAudioDevices, setAudioDevice, setVersionDefaultsFrom } from './util.mjs';\nimport { StrudelMirror, defaultSettings } from '@strudel/codemirror';\nimport { clearHydra } from '@strudel/hydra';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { settingsMap, useSettings } from '../settings.mjs';\nimport {\n  setActivePattern,\n  setLatestCode,\n  createPatternID,\n  userPattern,\n  getViewingPatternData,\n  setViewingPatternData,\n} from '../user_pattern_utils.mjs';\nimport { superdirtOutput } from '@strudel/osc/superdirtoutput';\nimport { audioEngineTargets, defaultAudioDeviceName } from '../settings.mjs';\nimport { useStore } from '@nanostores/react';\nimport { prebake } from './prebake.mjs';\nimport { getRandomTune, initCode, loadModules, shareCode } from './util.mjs';\nimport './Repl.css';\nimport { setInterval, clearInterval } from 'worker-timers';\nimport { getMetadata } from '../metadata_parser';\n\nconst { latestCode } = settingsMap.get();\nlet modulesLoading, presets, drawContext, clearCanvas, audioReady;\n\nif (typeof window !== 'undefined') {\n  audioReady = initAudioOnFirstClick();\n  modulesLoading = loadModules();\n  presets = prebake();\n  drawContext = getDrawContext();\n  clearCanvas = () => drawContext.clearRect(0, 0, drawContext.canvas.height, drawContext.canvas.width);\n}\n\nasync function getModule(name) {\n  if (!modulesLoading) {\n    return;\n  }\n  const modules = await modulesLoading;\n  return modules.find((m) => m.packageName === name);\n}\n\nexport function useReplContext() {\n  const { isSyncEnabled, audioEngineTarget } = useSettings();\n  const shouldUseWebaudio = audioEngineTarget !== audioEngineTargets.osc;\n  const defaultOutput = shouldUseWebaudio ? webaudioOutput : superdirtOutput;\n  const getTime = shouldUseWebaudio ? getAudioContextCurrentTime : getPerformanceTimeSeconds;\n\n  const init = useCallback(() => {\n    const drawTime = [-2, 2];\n    const drawContext = getDrawContext();\n    const editor = new StrudelMirror({\n      sync: isSyncEnabled,\n      defaultOutput,\n      getTime,\n      setInterval,\n      clearInterval,\n      transpiler,\n      autodraw: false,\n      root: containerRef.current,\n      initialCode: '// LOADING',\n      pattern: silence,\n      drawTime,\n      drawContext,\n      prebake: async () => Promise.all([modulesLoading, presets]),\n      onUpdateState: (state) => {\n        setReplState({ ...state });\n      },\n      onToggle: (playing) => {\n        if (!playing) {\n          clearHydra();\n        }\n      },\n      beforeEval: () => audioReady,\n      afterEval: (all) => {\n        const { code } = all;\n        //post to iframe parent (like Udels) if it exists...\n        window.parent?.postMessage(code);\n\n        setLatestCode(code);\n        window.location.hash = '#' + code2hash(code);\n        setDocumentTitle(code);\n        const viewingPatternData = getViewingPatternData();\n        setVersionDefaultsFrom(code);\n        const data = { ...viewingPatternData, code };\n        let id = data.id;\n        const isExamplePattern = viewingPatternData.collection !== userPattern.collection;\n\n        if (isExamplePattern) {\n          const codeHasChanged = code !== viewingPatternData.code;\n          if (codeHasChanged) {\n            // fork example\n            const newPattern = userPattern.duplicate(data);\n            id = newPattern.id;\n            setViewingPatternData(newPattern.data);\n          }\n        } else {\n          id = userPattern.isValidID(id) ? id : createPatternID();\n          setViewingPatternData(userPattern.update(id, data).data);\n        }\n        setActivePattern(id);\n      },\n      bgFill: false,\n    });\n    window.strudelMirror = editor;\n\n    // init settings\n    initCode().then(async (decoded) => {\n      let code, msg;\n      if (decoded) {\n        code = decoded;\n        msg = `I have loaded the code from the URL.`;\n      } else if (latestCode) {\n        code = latestCode;\n        msg = `Your last session has been loaded!`;\n      } else {\n        const { code: randomTune, name } = await getRandomTune();\n        code = randomTune;\n        msg = `A random code snippet named \"${name}\" has been loaded!`;\n      }\n      editor.setCode(code);\n      setDocumentTitle(code);\n      logger(`Welcome to Strudel! ${msg} Press play or hit ctrl+enter to run it!`, 'highlight');\n    });\n\n    editorRef.current = editor;\n  }, []);\n\n  const [replState, setReplState] = useState({});\n  const { started, isDirty, error, activeCode, pending } = replState;\n  const editorRef = useRef();\n  const containerRef = useRef();\n\n  // this can be simplified once SettingsTab has been refactored to change codemirrorSettings directly!\n  // this will be the case when the main repl is being replaced\n  const _settings = useStore(settingsMap, { keys: Object.keys(defaultSettings) });\n  useEffect(() => {\n    let editorSettings = {};\n    Object.keys(defaultSettings).forEach((key) => {\n      if (Object.prototype.hasOwnProperty.call(_settings, key)) {\n        editorSettings[key] = _settings[key];\n      }\n    });\n    editorRef.current?.updateSettings(editorSettings);\n  }, [_settings]);\n\n  // on first load, set stored audio device if possible\n  useEffect(() => {\n    const { audioDeviceName } = _settings;\n    if (audioDeviceName !== defaultAudioDeviceName) {\n      getAudioDevices().then((devices) => {\n        const deviceID = devices.get(audioDeviceName);\n        if (deviceID == null) {\n          return;\n        }\n        setAudioDevice(deviceID);\n      });\n    }\n  }, []);\n\n  //\n  // UI Actions\n  //\n\n  const setDocumentTitle = (code) => {\n    const meta = getMetadata(code);\n    document.title = (meta.title ? `${meta.title} - ` : '') + 'Strudel REPL';\n  };\n\n  const handleTogglePlay = async () => {\n    editorRef.current?.toggle();\n  };\n\n  const resetEditor = async () => {\n    (await getModule('@strudel/tonal'))?.resetVoicings();\n    resetGlobalEffects();\n    clearCanvas();\n    clearHydra();\n    resetLoadedSounds();\n    editorRef.current.repl.setCps(0.5);\n    await prebake(); // declare default samples\n  };\n\n  const handleUpdate = async (patternData, reset = false) => {\n    setViewingPatternData(patternData);\n    editorRef.current.setCode(patternData.code);\n    if (reset) {\n      await resetEditor();\n      handleEvaluate();\n    }\n  };\n\n  const handleEvaluate = () => {\n    editorRef.current.evaluate();\n  };\n  const handleShuffle = async () => {\n    const patternData = await getRandomTune();\n    const code = patternData.code;\n    logger(`[repl] âœ¨ loading random tune \"${patternData.id}\"`);\n    setActivePattern(patternData.id);\n    setViewingPatternData(patternData);\n    await resetEditor();\n    editorRef.current.setCode(code);\n    editorRef.current.repl.evaluate(code);\n  };\n\n  const handleShare = async () => shareCode(replState.code);\n  const context = {\n    started,\n    pending,\n    isDirty,\n    activeCode,\n    handleTogglePlay,\n    handleUpdate,\n    handleShuffle,\n    handleShare,\n    handleEvaluate,\n    init,\n    error,\n    editorRef,\n    containerRef,\n  };\n  return context;\n}\n","/*\nRepl.jsx - <short description TODO>\nCopyright (C) 2022 Strudel contributors - see <https://github.com/tidalcycles/strudel/blob/main/repl/src/App.js>\nThis program is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Affero General Public License for more details. You should have received a copy of the GNU Affero General Public License along with this program.  If not, see <https://www.gnu.org/licenses/>.\n*/\n\nimport { isIframe, isUdels } from './util.mjs';\nimport UdelsEditor from '@components/Udels/UdelsEditor';\nimport ReplEditor from './components/ReplEditor';\nimport EmbeddedReplEditor from './components/EmbeddedReplEditor';\nimport { useReplContext } from './useReplContext';\n\nexport function Repl({ embedded = false }) {\n  const isEmbedded = embedded || isIframe();\n  const Editor = isUdels() ? UdelsEditor : isEmbedded ? EmbeddedReplEditor : ReplEditor;\n  const context = useReplContext();\n  return <Editor context={context} />;\n}\n"],"names":["Loader","active","jsx","cx","ConsoleTab","log","setLog","useState","fontFamily","fontSize","useSettings","useLogger","useCallback","e","message","type","data","l","lastLog","id","nanoid","loadIndex","url","i","linkify","color","jsxs","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","onTrigger","useEvent","logger","FilesTab","path","setPath","useEffect","readDir","dir","children","err","current","useMemo","subpath","p","folders","files","isAudioFile","select","Fragment","playFile","availableFunctions","jsdocJson","name","description","a","b","getInnerText","html","div","Reference","search","setSearch","visibleFunctions","entry","s","event","el","example","j","SelectInput","value","options","onChange","onClick","isDisabled","initdevices","AudioDeviceSelector","audioDeviceName","devices","setDevices","devicesInitialized","getAudioDevices","onDeviceChange","deviceName","deviceID","setAudioDevice","AudioEngineTargetSelector","target","onTargetChange","audioEngineTargets","Checkbox","label","disabled","k","NumberSlider","step","rest","FormItem","themeOptions","themes","fontFamilyOptions","RELOAD_MSG","SettingsTab","started","theme","keybindings","isBracketClosingEnabled","isBracketMatchingEnabled","isLineNumbersDisplayed","isPatternHighlightingEnabled","isActiveLineHighlighted","isAutoCompletionEnabled","isTooltipEnabled","isFlashEnabled","isButtonRowHidden","isCSSAnimationDisabled","isSyncEnabled","isLineWrappingEnabled","panelPosition","audioEngineTarget","togglePanelTrigger","shouldAlwaysSync","isUdels","canChangeAudioDevice","confirmDialog","r","settingsMap","ButtonGroup","cbEvent","newVal","defaultSettings","ImportSoundsButton","onComplete","fileUploadRef","React","isUploading","setIsUploading","uploadSamplesToDB","userSamplesDBConfig","registerSamplesFromDB","getSamples","samples","SoundsTab","sounds","useStore","soundMap","soundsFilter","soundEntries","filtered","key","_","trigRef","useRef","t","ref","getAudioContext","ctx","params","time","onended","connectToDestination","BASE_URL","__vite_import_meta_env__","baseNoTrailing","WelcomeTab","context","ChevronLeftIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","XMarkIcon","TAURI","HorizontalPanel","settings","isPanelOpen","tab","PanelNav","PanelContent","PanelActionButton","Tabs","setTab","VerticalPanel","setIsPanelOpened","tabNames","className","isHoverBehavior","PatternsTab","PanelTab","isSelected","val","isPanelPinned","PinButton","CloseButton","pinned","setPanelPinned","Code","Props","editorRef","containerRef","init","PlayCircleIcon","BigPlayButton","handleTogglePlay","UserFacingErrorMessage","error","UdelsEditor","pending","StopCircleIcon","Header","embedded","isDirty","activeCode","handleEvaluate","handleShuffle","handleShare","isEmbedded","isZen","setIsZen","ReplEditor","EmbeddedReplEditor","trigger","isTauri","oscTriggerTauri","oscTrigger","superdirtOutput","hap","deadline","hapDuration","cps","targetTime","currentTime","createCache","lastNumberWeakMap","collection","nextNumber","MAX_SAFE_INTEGER","TWO_TO_THE_POWER_OF_TWENTY_NINE","TWO_TO_THE_POWER_OF_THIRTY","createGenerateUniqueNumber","cache","lastNumber","LAST_NUMBER_WEAK_MAP","generateUniqueNumber","isCallNotification","isClearResponse","load","scheduledIntervalFunctions","scheduledTimeoutFunctions","unrespondedRequests","worker","timerId","timerType","idOrFunc","timerIdAndTimerType","func","delay","createLoadOrReturnBroker","loadBroker","broker","blob","loadOrReturnBroker","clearInterval","setInterval","args","latestCode","modulesLoading","presets","drawContext","clearCanvas","audioReady","initAudioOnFirstClick","loadModules","prebake","getDrawContext","getModule","m","useReplContext","shouldUseWebaudio","defaultOutput","webaudioOutput","getTime","getAudioContextCurrentTime","getPerformanceTimeSeconds","drawTime","editor","StrudelMirror","transpiler","silence","state","setReplState","playing","clearHydra","all","code","setLatestCode","code2hash","setDocumentTitle","viewingPatternData","getViewingPatternData","setVersionDefaultsFrom","userPattern","newPattern","setViewingPatternData","createPatternID","setActivePattern","initCode","decoded","msg","randomTune","getRandomTune","replState","_settings","editorSettings","defaultAudioDeviceName","meta","getMetadata","resetEditor","resetGlobalEffects","resetLoadedSounds","handleUpdate","patternData","reset","shareCode","Repl","isIframe","Editor"],"mappings":"6iCAEA,SAASA,EAAO,CAAE,OAAAC,GAAU,CAC1B,aACG,MAAI,CAAA,UAAU,gEACb,SAAAC,MAAC,OAAI,UAAWC,EAAG,uBAAwBF,EAAS,8BAAgC,gBAAgB,EAClG,SAACC,MAAA,MAAA,CAAI,CAAA,EACP,CACF,CAAA,CAEJ,CCHO,SAASE,IAAa,CAC3B,KAAM,CAACC,EAAKC,CAAM,EAAIC,EAAA,SAAS,CAAE,CAAA,EAC3B,CAAE,WAAAC,EAAY,SAAAC,CAAS,EAAIC,EAAY,EAC7C,OAAAC,GACEC,EAAA,YAAaC,GAAM,CACjB,KAAM,CAAE,QAAAC,EAAS,KAAAC,EAAM,KAAAC,CAAA,EAASH,EAAE,OAClCP,EAAQW,GAAM,CACZ,MAAMC,EAAUD,EAAE,OAASA,EAAEA,EAAE,OAAS,CAAC,EAAI,OACvCE,EAAKC,GAAO,EAAE,EAEpB,GAAIL,IAAS,gBAAiB,CAE5B,MAAMM,EAAYJ,EAAE,UAAU,CAAC,CAAE,KAAM,CAAE,IAAAK,CAAO,EAAA,KAAAP,KAAWA,IAAS,eAAiBO,IAAQN,EAAK,GAAG,EACrGC,EAAEI,CAAS,EAAI,CAAE,QAAAP,EAAS,KAAAC,EAAM,GAAAI,EAAI,KAAAH,EAC3B,MAAAE,GAAWA,EAAQ,UAAYJ,EACxCG,EAAIA,EAAE,MAAM,EAAG,EAAE,EAAE,OAAO,CAAC,CAAE,QAAAH,EAAS,KAAAC,EAAM,OAAQG,EAAQ,OAAS,GAAK,EAAG,GAAAC,EAAI,KAAAH,CAAM,CAAA,CAAC,EAEpFC,EAAAA,EAAE,OAAO,CAAC,CAAE,QAAAH,EAAS,KAAAC,EAAM,GAAAI,EAAI,KAAAH,CAAM,CAAA,CAAC,EAErC,OAAAC,EAAE,MAAM,GAAG,CAAA,CACnB,CACH,EAAG,EAAE,CAAA,EAGLf,EAAA,IAAC,MAAA,CACC,GAAG,cACH,UAAU,uEACV,MAAO,CAAE,WAAAM,EAAY,SAAAC,CAAS,EAE7B,SAAIJ,EAAA,IAAI,CAACY,EAAGM,IAAM,CACX,MAAAT,EAAUU,GAAQP,EAAE,OAAO,EAC3BQ,EAAQR,EAAE,MAAM,KAAK,OAAO,MAEhC,OAAAS,EAAA,KAAC,MAAA,CAEC,UAAWvB,EAAGc,EAAE,OAAS,SAAW,eAAgBA,EAAE,OAAS,aAAe,WAAW,EACzF,MAAOQ,EAAQ,CAAE,MAAAA,CAAA,EAAU,CAAC,EAE5B,SAAA,CAAAvB,EAAA,IAAC,OAAK,CAAA,wBAAyB,CAAE,OAAQY,GAAW,EACnDG,EAAE,MAAQ,KAAKA,EAAE,KAAK,IAAM,EAAA,CAAA,EALxBA,EAAE,EAAA,CAMT,CAEH,CAAA,CAAA,CAGP,CAEA,SAASO,GAAQG,EAAW,CACtB,IAAAC,EAAcC,EAAiBC,EAAiBC,EAGlC,OAAAF,EAAA,0EACHD,EAAAD,EAAU,QAAQE,EAAiB,uDAAuD,EAGvFC,EAAA,iCAClBF,EAAeA,EAAa,QAC1BE,EACA,gEAAA,EAIgBC,EAAA,2DACHH,EAAAA,EAAa,QAAQG,EAAiB,8CAA8C,EAE5FH,CACT,CAEA,SAASjB,GAAUqB,EAAW,CACnBC,GAAAC,EAAO,IAAKF,CAAS,CAChC,CCzEO,SAASG,IAAW,CACzB,KAAM,CAACC,EAAMC,CAAO,EAAI9B,EAAA,SAAS,CAAE,CAAA,EACnC+B,EAAAA,UAAU,KAEAC,GAAA,GAAI,CAAE,IAAAC,GAAK,UAAW,GAAM,EACjC,KAAMC,GAAaJ,EAAQ,CAAC,CAAE,KAAM,UAAW,SAAAI,CAAS,CAAC,CAAC,CAAC,EAC3D,MAAOC,GAAQ,CACN,QAAA,IAAI,qBAAsBA,CAAG,CAAA,CACtC,EACI,IAAM,CACJ,GAER,CAAE,CAAA,EACC,MAAAC,EAAUC,UAAQ,IAAMR,EAAKA,EAAK,OAAS,CAAC,EAAG,CAACA,CAAI,CAAC,EACrDS,EAAUD,EAAA,QACd,IACER,EACG,MAAM,CAAC,EACP,IAAKU,GAAMA,EAAE,IAAI,EACjB,KAAK,GAAG,EACb,CAACV,CAAI,CAAA,EAEDW,EAAUH,EAAA,QAAQ,IAAMD,GAAS,SAAS,OAAQ9B,GAAM,CAAC,CAACA,EAAE,QAAQ,EAAG,CAAC8B,CAAO,CAAC,EAChFK,EAAQJ,EAAAA,QAAQ,IAAMD,GAAS,SAAS,OAAQ9B,GAAM,CAACA,EAAE,UAAYoC,GAAYpC,EAAE,IAAI,CAAC,EAAG,CAAC8B,CAAO,CAAC,EACpGO,EAAUrC,GAAMwB,EAASS,GAAMA,EAAE,OAAO,CAACjC,CAAC,CAAC,CAAC,EAEhD,OAAAa,EAAA,KAAC,MAAI,CAAA,UAAU,4BACb,SAAA,CAAAxB,MAAC,MAAI,CAAA,UAAU,sCACb,SAAAwB,EAAA,KAAC,MACC,CAAA,SAAA,CAAAxB,EAAAA,IAAC,QAAM,SAAY,WAAA,CAAA,EAClBkC,GAAM,IAAI,CAACU,EAAG,IACT,EAAIV,EAAK,OAAS,SAEjBe,WACC,CAAA,SAAA,CAAAjD,EAAA,IAAC,QAAK,UAAU,2BAA2B,QAAS,IAAMmC,EAASS,GAAMA,EAAE,MAAM,EAAG,EAAI,CAAC,CAAC,EACvF,WAAE,KACL,EACA5C,EAAAA,IAAC,QAAK,SAAC,GAAA,CAAA,CAAA,CAAA,EAJM,CAKf,QAIC,OAAK,CAAA,UAAU,2BACb,SAAA4C,EAAE,MAD2C,CAEhD,CAGL,EACD5C,EAAAA,IAAC,QAAM,SAAK,IAAA,CAAA,CAAA,CAAA,CACd,CACF,CAAA,EACAwB,EAAAA,KAAC,MAAI,CAAA,UAAU,gBACZ,SAAA,CAAC,CAAAqB,GAAS,QAAU,CAACC,GAAO,QAAW9C,EAAAA,IAAA,OAAA,CAAK,UAAU,gBAAgB,SAAY,cAAA,CAAA,EAClF6C,GAAS,IAAI,CAAClC,EAAG,UACf,MAAI,CAAA,UAAU,iBAAyB,QAAS,IAAMqC,EAAOrC,CAAC,EAC5D,SAAEA,EAAA,IAAA,EADgC,CAErC,CACD,EACAmC,GAAO,IAAI,CAACnC,EAAG,IACdX,EAAA,IAAC,MAAA,CACC,UAAU,2CAEV,QAAS,SAAYkD,GAAS,GAAGP,CAAO,IAAIhC,EAAE,IAAI,EAAE,EAEnD,SAAEA,EAAA,IAAA,EAHE,CAAA,CAKR,CAAA,EACH,CACF,CAAA,CAAA,CAEJ,CCvEA,MAAMwC,GAAqBC,GAAU,KAClC,OAAO,CAAC,CAAE,KAAAC,EAAM,YAAAC,KAAkBD,GAAQ,CAACA,EAAK,WAAW,GAAG,GAAK,CAAC,CAACC,CAAW,EAChF,KAAK,CAACC,EAAGC,IAA8DD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAEhGC,GAAgBC,GAAS,CACzB,IAAAC,EAAM,SAAS,cAAc,KAAK,EACtC,OAAAA,EAAI,UAAYD,EACTC,EAAI,aAAeA,EAAI,WAAa,EAC7C,EAEO,SAASC,IAAY,CAC1B,KAAM,CAACC,EAAQC,CAAS,EAAIzD,WAAS,EAAE,EAEjC0D,EAAmBrB,EAAAA,QAAQ,IACxBS,GAAmB,OAAQa,GAC3BH,EAIEG,EAAM,KAAK,SAASH,CAAM,IAAMG,EAAM,UAAU,KAAMC,GAAMA,EAAE,SAASJ,CAAM,CAAC,GAAK,IAHjF,EAIV,EACA,CAACA,CAAM,CAAC,EAGT,OAAArC,EAAA,KAAC,MAAI,CAAA,UAAU,yDACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8CACb,SAAA,CAACxB,EAAAA,IAAA,MAAA,CAAI,MAAM,cACT,SAAAA,EAAA,IAAC,QAAA,CACC,UAAU,kDACV,YAAY,SACZ,MAAO6D,EACP,QAAUK,GAAUJ,EAAUI,EAAM,OAAO,KAAK,CAAA,CAAA,EAEpD,EACAlE,EAAAA,IAAC,OAAI,UAAU,wFACZ,WAAiB,IAAI,CAACgE,EAAO3C,IAC5BG,EAAA,KAAC,IAAA,CAEC,UAAU,wFACV,QAAS,IAAM,CACb,MAAM2C,EAAK,SAAS,eAAe,OAAO9C,CAAC,EAAE,EAC3B,SAAS,eAAe,qBAAqB,EACrD,SAAS,EAAG8C,EAAG,SAAS,CACpC,EAEC,SAAA,CAAMH,EAAA,KAAK,GAAA,CAAA,EARP3C,CAUR,CAAA,EACH,CAAA,EACF,EACArB,EAAA,IAAC,MAAA,CACC,UAAU,yFACV,GAAG,sBAEH,SAAAwB,EAAA,KAAC,MAAI,CAAA,UAAU,2CACb,SAAA,CAAAxB,EAAAA,IAAC,MAAG,SAAa,eAAA,CAAA,EACjBA,EAAAA,IAAC,KAAE,SAGH,uKAAA,CAAA,EACC+D,EAAiB,IAAI,CAACC,EAAO3C,WAC3B,UACC,CAAA,SAAA,CAAArB,EAAAA,IAAC,MAAG,GAAI,OAAOqB,CAAC,GAAK,WAAM,KAAK,EAC/B,CAAC,CAAC2C,EAAM,sBACN,IAAE,CAAA,SAAA,CAAA,aACShE,EAAAA,IAAC,OAAM,CAAA,SAAAgE,EAAM,aAAc,CAAA,CAAA,EACvC,QAGD,IAAE,CAAA,wBAAyB,CAAE,OAAQA,EAAM,aAAe,EAC1DhE,EAAA,IAAA,KAAA,CACE,SAAMgE,EAAA,QAAQ,IAAI,CAAC,CAAE,KAAAX,EAAM,KAAAxC,EAAM,YAAAyC,CAAA,EAAejC,WAC9C,KACE,CAAA,SAAA,CAAAgC,EAAK,MAAIxC,EAAK,OAAO,KAAK,KAAK,EAAE,IAAEyC,EAAgB9B,EAAA,KAAAyB,WAAA,CAAA,SAAA,CAAA,MAAIQ,GAAaH,CAAW,CAAA,CAAA,CAAE,EAAM,EAAA,GADjFjC,CAET,CACD,EACH,EACC2C,EAAM,UAAU,IAAI,CAACI,EAASC,IAC5BrE,MAAA,MAAA,CAAa,SAAJoE,CAAA,EAAAC,CAAY,CACvB,CAAA,CAAA,EAlBWhD,CAmBd,CACD,CAAA,EACH,CAAA,CACF,CACF,CAAA,CAAA,CAEJ,CCvFO,SAASiD,GAAY,CAAE,MAAAC,EAAO,QAAAC,EAAS,SAAAC,EAAU,QAAAC,EAAS,WAAAC,GAAc,CAE3E,OAAAnD,EAAA,KAAC,SAAA,CACC,SAAUmD,EACV,QAAAD,EACA,UAAU,+CACV,MAAOH,GAAS,GAChB,SAAW5D,GAAM8D,EAAS9D,EAAE,OAAO,KAAK,EAEvC,SAAA,CAAQ6D,EAAA,MAAQ,GAAMxE,EAAAA,IAAA,SAAA,CAAO,MAAAuE,EAAe,SAAG,GAAAA,GAAS,kBAAkB,EAAG,CAAA,EAC7E,MAAM,KAAKC,EAAQ,KAAM,CAAA,EAAE,IAAKvD,GAC/BjB,EAAA,IAAC,UAAgB,UAAU,gBAAgB,MAAOiB,EAC/C,SAAAuD,EAAQ,IAAIvD,CAAE,GADJA,CAEb,CACD,CAAA,CAAA,CAAA,CAGP,CCfA,MAAM2D,OAAkB,IAGjB,SAASC,GAAoB,CAAE,gBAAAC,EAAiB,SAAAL,EAAU,WAAAE,GAAc,CAC7E,KAAM,CAACI,EAASC,CAAU,EAAI3E,WAASuE,EAAW,EAC5CK,EAAqBF,EAAQ,KAAO,EAEpCL,EAAU,IAAM,CAChBO,GAGYC,GAAA,EAAE,KAAMH,GAAY,CAClCC,EAAWD,CAAO,CAAA,CACnB,CAAA,EAEGI,EAAkBC,GAAe,CACrC,GAAI,CAACH,EACH,OAEI,MAAAI,EAAWN,EAAQ,IAAIK,CAAU,EACvCX,EAASW,CAAU,EACnBE,GAAeD,CAAQ,CAAA,EAEnBb,MAAc,IACpB,aAAM,KAAKO,EAAQ,KAAM,CAAA,EAAE,QAASK,GAAe,CACzCZ,EAAA,IAAIY,EAAYA,CAAU,CAAA,CACnC,EAECpF,EAAA,IAACsE,GAAA,CACC,WAAAK,EACA,QAAAH,EACA,QAAAE,EACA,MAAOI,EACP,SAAUK,CAAA,CAAA,CAGhB,CCnCO,SAASI,GAA0B,CAAE,OAAAC,EAAQ,SAAAf,EAAU,WAAAE,GAAc,CACpE,MAAAc,EAAkBD,GAAW,CACjCf,EAASe,CAAM,CAAA,EAEXhB,MAAc,IAAI,CACtB,CAACkB,EAAmB,SAAUA,EAAmB,QAAQ,EACzD,CAACA,EAAmB,IAAKA,EAAmB,GAAG,CAAA,CAChD,EAEC,OAAAlE,EAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAAAxB,MAACsE,IAAY,WAAAK,EAAwB,QAAAH,EAAkB,MAAOgB,EAAQ,SAAUC,EAAgB,EAC/FD,IAAWE,EAAmB,KAC7B1F,EAAAA,IAAC,OACC,SAACwB,EAAAA,KAAA,IAAA,CAAE,UAAU,iBAAiB,SAAA,CAAA,qDACuB,UAClD,IAAE,CAAA,UAAU,gBAAgB,KAAK,yCAAyC,SAE3E,OAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ,CAAA,CAAA,CAEJ,CCpBA,SAASmE,EAAS,CAAE,MAAAC,EAAO,MAAArB,EAAO,SAAAE,EAAU,SAAAoB,EAAW,IAAS,CAC9D,cACG,QACC,CAAA,SAAA,CAAA7F,MAAC,SAAM,SAAA6F,EAAoB,KAAK,WAAW,QAAStB,EAAO,SAAAE,EAAoB,EAC9E,IAAMmB,CACT,CAAA,CAAA,CAEJ,CAEA,SAAStB,GAAY,CAAE,MAAAC,EAAO,QAAAC,EAAS,SAAAC,GAAY,CAE/C,OAAAzE,EAAA,IAAC,SAAA,CACC,UAAU,+CACV,MAAAuE,EACA,SAAW5D,GAAM8D,EAAS9D,EAAE,OAAO,KAAK,EAEvC,gBAAO,QAAQ6D,CAAO,EAAE,IAAI,CAAC,CAACsB,EAAGF,CAAK,IACrC5F,EAAAA,IAAC,UAAe,UAAU,gBAAgB,MAAO8F,EAC9C,SAAAF,GADUE,CAEb,CACD,CAAA,CAAA,CAGP,CAEA,SAASC,GAAa,CAAE,MAAAxB,EAAO,SAAAE,EAAU,KAAAuB,EAAO,EAAG,GAAGC,GAAQ,CAE1D,OAAAzE,EAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAAAxB,EAAA,IAAC,QAAA,CACC,UAAU,WACV,KAAK,QACL,MAAAuE,EACA,KAAAyB,EACA,SAAWrF,GAAM8D,EAAS,OAAO9D,EAAE,OAAO,KAAK,CAAC,EAC/C,GAAGsF,CAAA,CACN,EACAjG,EAAA,IAAC,QAAA,CACC,KAAK,SACL,MAAAuE,EACA,KAAAyB,EACA,UAAU,gCACV,SAAWrF,GAAM8D,EAAS,OAAO9D,EAAE,OAAO,KAAK,CAAC,CAAA,CAClD,CACF,CAAA,CAAA,CAEJ,CAEA,SAASuF,EAAS,CAAE,MAAAN,EAAO,SAAArD,GAAY,CAEnC,OAAAf,EAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAAAxB,EAAAA,IAAC,SAAO,SAAM4F,CAAA,CAAA,EACbrD,CACH,CAAA,CAAA,CAEJ,CAEA,MAAM4D,GAAe,OAAO,YAAY,OAAO,KAAKC,EAAM,EAAE,IAAKN,GAAM,CAACA,EAAGA,CAAC,CAAC,CAAC,EACxEO,GAAoB,CACxB,UAAW,YACX,QAAS,UACT,UAAW,YACX,KAAM,OACN,SAAU,WACV,oBAAqB,oBACrB,SAAU,WACV,MAAO,QACP,gBAAiB,kBACjB,MAAO,QACP,UAAW,YACX,WAAY,eACZ,mBAAoB,mBACpB,UAAW,WACb,EAEMC,EAAa,kEAEH,SAAAC,GAAY,CAAE,QAAAC,GAAW,CACjC,KAAA,CACJ,MAAAC,EACA,YAAAC,EACA,wBAAAC,EACA,yBAAAC,EACA,uBAAAC,EACA,6BAAAC,EACA,wBAAAC,EACA,wBAAAC,EACA,iBAAAC,EACA,eAAAC,EACA,kBAAAC,EACA,uBAAAC,EACA,cAAAC,EACA,sBAAAC,EACA,SAAA/G,EACA,WAAAD,EACA,cAAAiH,EACA,gBAAAzC,EACA,kBAAA0C,EACA,mBAAAC,GACEjH,EAAY,EACVkH,GAAmBC,KACnBC,GAAuB,aAAa,UAAU,WAAa,KAE/D,OAAApG,EAAA,KAAC,MAAI,CAAA,UAAU,uCACZ,SAAA,CACCoG,IAAA5H,EAAA,IAACkG,EAAS,CAAA,MAAM,sBACd,SAAAlG,EAAA,IAAC6E,GAAA,CACC,WAAY2B,EACZ,gBAAA1B,EACA,SAAWA,GAAoB,CAC7B+C,EAAcvB,CAAU,EAAE,KAAMwB,GAAM,CACpC,GAAIA,GAAK,GACK,OAAAC,EAAA,OAAO,kBAAmBjD,CAAe,EAC9C,OAAO,SAAS,QACzB,CACD,CACH,CAAA,CAAA,EAEJ,EAEF9E,EAAAA,IAACkG,EAAS,CAAA,MAAM,sBACd,SAAAlG,EAAA,IAACuF,GAAA,CACC,OAAQiC,EACR,SAAWhC,GAAW,CACpBqC,EAAcvB,CAAU,EAAE,KAAMwB,GAAM,CACpC,GAAIA,GAAK,GACK,OAAAC,EAAA,OAAO,oBAAqBvC,CAAM,EACvC,OAAO,SAAS,QACzB,CACD,CACH,CAAA,CAAA,EAEJ,QACCU,EAAS,CAAA,MAAM,QACd,SAAClG,MAAAsE,GAAA,CAAY,QAAS6B,GAAc,MAAOM,EAAO,SAAWA,GAAUsB,EAAY,OAAO,QAAStB,CAAK,CAAG,CAAA,EAC7G,EACAjF,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACb,SAAA,CAACxB,EAAAA,IAAAkG,EAAA,CAAS,MAAM,cACd,SAAAlG,EAAA,IAACsE,GAAA,CACC,QAAS+B,GACT,MAAO/F,EACP,SAAWA,GAAeyH,EAAY,OAAO,aAAczH,CAAU,CAAA,CAAA,EAEzE,EACAN,EAAAA,IAACkG,EAAS,CAAA,MAAM,YACd,SAAAlG,EAAA,IAAC+F,GAAA,CACC,MAAOxF,EACP,SAAWA,GAAawH,EAAY,OAAO,WAAYxH,CAAQ,EAC/D,IAAK,GACL,IAAK,GACL,KAAM,CAAA,CAAA,EAEV,CAAA,EACF,EACAP,EAAAA,IAACkG,EAAS,CAAA,MAAM,cACd,SAAAlG,EAAA,IAACgI,EAAA,CACC,MAAOtB,EACP,SAAWA,GAAgBqB,EAAY,OAAO,cAAerB,CAAW,EACxE,MAAO,CAAE,WAAY,aAAc,IAAK,MAAO,MAAO,QAAS,OAAQ,QAAS,CAAA,CAAA,EAEpF,EACA1G,EAAAA,IAACkG,EAAS,CAAA,MAAM,iBACd,SAAAlG,EAAA,IAACgI,EAAA,CACC,MAAOT,EACP,SAAWhD,GAAUwD,EAAY,OAAO,gBAAiBxD,CAAK,EAC9D,MAAO,CAAE,OAAQ,SAAU,MAAO,OAAQ,CAAA,CAAA,EAE9C,EACAvE,EAAAA,IAACkG,EAAS,CAAA,MAAM,wCACd,SAAAlG,EAAA,IAACgI,EAAA,CACC,MAAOP,EACP,SAAWlD,GAAUwD,EAAY,OAAO,qBAAsBxD,CAAK,EACnE,MAAO,CAAE,MAAO,QAAS,MAAO,OAAQ,CAAA,CAAA,EAoB5C,EACA/C,EAAAA,KAAC0E,EAAS,CAAA,MAAM,gBACd,SAAA,CAAAlG,EAAA,IAAC2F,EAAA,CACC,MAAM,0BACN,SAAWsC,GAAYF,EAAY,OAAO,2BAA4BE,EAAQ,OAAO,OAAO,EAC5F,MAAOrB,CAAA,CACT,EACA5G,EAAA,IAAC2F,EAAA,CACC,MAAM,sBACN,SAAWsC,GAAYF,EAAY,OAAO,0BAA2BE,EAAQ,OAAO,OAAO,EAC3F,MAAOtB,CAAA,CACT,EACA3G,EAAA,IAAC2F,EAAA,CACC,MAAM,uBACN,SAAWsC,GAAYF,EAAY,OAAO,yBAA0BE,EAAQ,OAAO,OAAO,EAC1F,MAAOpB,CAAA,CACT,EACA7G,EAAA,IAAC2F,EAAA,CACC,MAAM,wBACN,SAAWsC,GAAYF,EAAY,OAAO,0BAA2BE,EAAQ,OAAO,OAAO,EAC3F,MAAOlB,CAAA,CACT,EACA/G,EAAA,IAAC2F,EAAA,CACC,MAAM,2BACN,SAAWsC,GAAYF,EAAY,OAAO,+BAAgCE,EAAQ,OAAO,OAAO,EAChG,MAAOnB,CAAA,CACT,EACA9G,EAAA,IAAC2F,EAAA,CACC,MAAM,yBACN,SAAWsC,GAAYF,EAAY,OAAO,0BAA2BE,EAAQ,OAAO,OAAO,EAC3F,MAAOjB,CAAA,CACT,EACAhH,EAAA,IAAC2F,EAAA,CACC,MAAM,oCACN,SAAWsC,GAAYF,EAAY,OAAO,mBAAoBE,EAAQ,OAAO,OAAO,EACpF,MAAOhB,CAAA,CACT,EACAjH,EAAA,IAAC2F,EAAA,CACC,MAAM,uBACN,SAAWsC,GAAYF,EAAY,OAAO,wBAAyBE,EAAQ,OAAO,OAAO,EACzF,MAAOX,CAAA,CACT,EACAtH,EAAA,IAAC2F,EAAA,CACC,MAAM,gCACN,SAAWsC,GAAYF,EAAY,OAAO,iBAAkBE,EAAQ,OAAO,OAAO,EAClF,MAAOf,CAAA,CACT,EACAlH,EAAA,IAAC2F,EAAA,CACC,MAAM,qCACN,SAAWsC,GAAY,CACf,MAAAC,EAASD,EAAQ,OAAO,QAC9BJ,EAAcvB,CAAU,EAAE,KAAMwB,GAAM,CAChCA,IACUC,EAAA,OAAO,gBAAiBG,CAAM,EAC1C,OAAO,SAAS,SAClB,CACD,CACH,EACA,SAAUR,GACV,MAAOL,CAAA,CACT,EACArH,EAAA,IAAC2F,EAAA,CACC,MAAM,mBACN,SAAWsC,GAAYF,EAAY,OAAO,oBAAqBE,EAAQ,OAAO,OAAO,EACrF,MAAOd,CAAA,CACT,EACAnH,EAAA,IAAC2F,EAAA,CACC,MAAM,yBACN,SAAWsC,GAAYF,EAAY,OAAO,yBAA0BE,EAAQ,OAAO,OAAO,EAC1F,MAAOb,CAAA,CACT,CAAA,EACF,EACCpH,EAAA,IAAAkG,EAAA,CAAS,MAAM,WAAW,SAAsC,yCAAA,EACjElG,EAAAA,IAACkG,EAAS,CAAA,MAAM,iBACd,SAAAlG,EAAA,IAAC,SAAA,CACC,UAAU,8DACV,QAAS,IAAM,CACb6H,EAAc,OAAO,EAAE,KAAMC,GAAM,CAC7BA,GACFC,EAAY,IAAII,EAAe,CACjC,CACD,CACH,EACD,SAAA,0BAAA,CAAA,EAGH,CACF,CAAA,CAAA,CAEJ,CC5RwB,SAAAC,GAAmB,CAAE,WAAAC,GAAc,CACrD,IAAAC,EAAgBC,GAAM,YAC1B,KAAM,CAACC,EAAaC,CAAc,EAAIpI,WAAS,EAAK,EAC9CoE,EAAW/D,EAAAA,YAAY,SAAY,CAClC4H,EAAc,QAAQ,OAAO,SAGlCG,EAAe,EAAI,EAEnB,MAAMC,GAAkBC,GAAqBL,EAAc,QAAQ,KAAK,EAAE,KAAK,IAAM,CACnFM,GAAsBD,GAAqB,IAAM,CACpCN,IACXI,EAAe,EAAK,CAAA,CACrB,CAAA,CACF,EAAA,CACF,EAGC,OAAAjH,EAAA,KAAC,QAAA,CACC,MAAO,CAAE,WAAY,QAAS,EAC9B,UAAU,+GAEV,SAAA,CAAAxB,EAAA,IAAC,QAAA,CACC,SAAUwI,EACV,IAAKF,EACL,GAAG,aACH,MAAO,CAAE,QAAS,MAAO,EACzB,KAAK,OACL,UAAU,GACV,gBAAgB,GAChB,SAAQ,GACR,OAAO,+CACP,SAAU,IAAM,CACL7D,GACX,CAAA,CACF,EACC+D,EAAc,eAAiB,eAAA,CAAA,CAAA,CAGtC,CCnCA,MAAMK,GAAcC,GAClB,MAAM,QAAQA,CAAO,EAAIA,EAAQ,OAAS,OAAOA,GAAY,SAAW,OAAO,OAAOA,CAAO,EAAE,OAAS,EAEnG,SAASC,IAAY,CACpB,MAAAC,EAASC,GAASC,EAAQ,EAC1B,CAAE,aAAAC,GAAiB3I,IACnB,CAACqD,EAAQC,CAAS,EAAIzD,WAAS,EAAE,EAEjC+I,EAAe1G,EAAAA,QAAQ,IAAM,CACjC,GAAI,CAACsG,EACH,MAAO,GAGT,IAAIK,EAAW,OAAO,QAAQL,CAAM,EACjC,OAAO,CAAC,CAACM,CAAG,IAAM,CAACA,EAAI,WAAW,GAAG,CAAC,EACtC,KAAK,CAAC/F,EAAGC,IAAMD,EAAE,CAAC,EAAE,cAAcC,EAAE,CAAC,CAAC,CAAC,EACvC,OAAO,CAAC,CAACH,CAAI,IAAMA,EAAK,cAAc,SAASQ,EAAO,YAAa,CAAA,CAAC,EAEvE,OAAIsF,IAAiB,OACZE,EAAS,OAAO,CAAC,CAACE,EAAG,CAAE,KAAAzI,CAAA,CAAM,IAAM,CAACA,EAAK,OAAO,EAErDqI,IAAiB,QACZE,EAAS,OAAO,CAAC,CAACE,EAAG,CAAE,KAAAzI,CAAM,CAAA,IAAMA,EAAK,OAAS,UAAYA,EAAK,MAAQ,eAAe,EAE9FqI,IAAiB,UACZE,EAAS,OAAO,CAAC,CAACE,EAAG,CAAE,KAAAzI,CAAM,CAAA,IAAMA,EAAK,OAAS,UAAYA,EAAK,MAAQ,eAAe,EAE9FqI,IAAiB,SACZE,EAAS,OAAO,CAAC,CAACE,EAAG,CAAE,KAAAzI,CAAM,CAAA,IAAM,CAAC,QAAS,WAAW,EAAE,SAASA,EAAK,IAAI,CAAC,EAE/EuI,CACN,EAAA,CAACL,EAAQG,EAActF,CAAM,CAAC,EAG3B2F,EAAUC,EAAAA,SAGhB,OAAA1H,GAAS,UAAW,IAAM,CACxB,MAAM2H,EAAIF,EAAQ,QAClBA,EAAQ,QAAU,OACfE,GAAA,KAAMC,GAAQ,CACfA,GAAK,KAAKC,GAAkB,EAAA,YAAc,GAAI,CAAA,CAC/C,CAAA,CACF,EAGEpI,EAAAA,KAAA,MAAA,CAAI,GAAG,aAAa,UAAU,mEAC7B,SAAA,CAAAxB,EAAA,IAAC,QAAA,CACC,UAAU,2CACV,YAAY,SACZ,MAAO6D,EACP,SAAWlD,GAAMmD,EAAUnD,EAAE,OAAO,KAAK,CAAA,CAC3C,EAEAa,EAAAA,KAAC,MAAI,CAAA,UAAU,+BACb,SAAA,CAAAxB,EAAA,IAACgI,EAAA,CACC,MAAOmB,EACP,SAAW5E,GAAUwD,EAAY,OAAO,eAAgBxD,CAAK,EAC7D,MAAO,CACL,QAAS,UACT,MAAO,gBACP,OAAQ,SACR,KAAM,MACR,CAAA,CACD,EACDvE,MAACoI,IAAmB,WAAY,IAAML,EAAY,OAAO,eAAgB,MAAM,EAAG,CAAA,EACpF,EAEAvG,EAAAA,KAAC,MAAI,CAAA,UAAU,4EACZ,SAAA,CAAa4H,EAAA,IAAI,CAAC,CAAC/F,EAAM,CAAE,KAAAvC,EAAM,UAAAgB,CAAA,CAAW,IAEzCN,EAAA,KAAC,OAAA,CAEC,UAAU,kCACV,YAAa,SAAY,CACvB,MAAMqI,EAAMD,KACNE,EAAS,CACb,KAAM,CAAC,QAAS,WAAW,EAAE,SAAShJ,EAAK,IAAI,EAAI,KAAO,OAC1D,EAAGuC,EACH,KAAM,EACN,QAAS,GACT,QAAS,EACT,SAAU,EAAA,EAEN0G,EAAOF,EAAI,YAAc,IACzBG,EAAU,IAAMR,EAAQ,SAAS,MAAM,WAAW,EACxDA,EAAQ,QAAU,QAAQ,QAAQ1H,EAAUiI,EAAMD,EAAQE,CAAO,CAAC,EAC1DR,EAAA,QAAQ,KAAMG,GAAQ,CAC5BM,GAAqBN,GAAK,IAAI,CAAA,CAC/B,CACH,EAEC,SAAA,CAAA,IACAtG,EACAvC,GAAM,OAAS,SAAW,IAAI+H,GAAW/H,EAAK,OAAO,CAAC,IAAM,GAC5DA,GAAM,OAAS,YAAc,IAAIA,EAAK,MAAM,MAAM,IAAM,EAAA,CAAA,EAvBpDuC,CAAA,CA0BV,EACC+F,EAAa,OAA4D,GAAnD,gDAAmD,EAC7E,CACF,CAAA,CAAA,CAEJ,iHC7GM,CAAEc,SAAAA,CAAa,EAAAC,GACfC,GAAiBF,EAAS,SAAS,GAAG,EAAIA,EAAS,MAAM,EAAG,EAAE,EAAIA,EAExD,SAAAG,GAAW,CAAE,QAAAC,GAAW,CAEpC,OAAC9I,EAAA,KAAA,MAAI,CAAA,UAAU,+DACb,SAAA,CAACxB,EAAAA,IAAA,MAAG,SAAS,YAAA,SACZ,IAAE,CAAA,SAAA,CAAA,wBACe,OAAA,CAAK,UAAU,YAAY,SAAO,UAAA,EAAO,wKAExD,KAAG,EAAA,QACH,KAAG,EAAA,QACH,OAAA,CAAK,UAAU,YAAY,SAAW,cAAA,EAAO,YAAI,OAAA,CAAK,UAAU,YAAY,SAAmB,sBAAA,EAAO,KAAG,UACzG,OAAA,CAAK,UAAU,YAAY,SAAa,gBAAA,QACxC,KAAG,EAAA,EAAE,8CACgC,OAAA,CAAK,UAAU,YAAY,SAAO,UAAA,EAAO,GAAA,EACjF,SACC,IAAE,CAAA,SAAA,CAAA,yDACsD,IACvDA,EAAAA,IAAC,KAAE,KAAM,GAAGoK,EAAc,6BAA8B,OAAO,SAAS,SAExE,sBAAA,CAAA,EAAI,+BACyB,UAC5B,IAAE,CAAA,KAAK,wCAAwC,OAAO,SAAS,SAEhE,8BAAA,EAAK,IAAI,wDAAA,EAEX,EACCpK,EAAAA,IAAA,MAAG,SAAO,UAAA,SACV,IAAE,CAAA,SAAA,CAAA,qCACkC,UAClC,IAAE,CAAA,KAAK,2BAA2B,OAAO,SAAS,SAEnD,cAAA,EAAI,8KAEyD,UAC5D,IAAE,CAAA,KAAK,2DAA2D,OAAO,SAAS,SAEnF,oCAAA,EAAI,oCAC8B,UACjC,IAAE,CAAA,KAAK,yCAAyC,OAAO,SAAS,SAEjE,SAAA,EAAI,uBACiB,UACpB,IAAE,CAAA,KAAK,yCAAyC,OAAO,SAAS,SAEjE,uBAAA,EAAK,IAAI,kCAAA,EAEX,GACF,CAEJ,CCpDA,SAASuK,GAAgB,CACvB,MAAAC,EACA,QAAAC,EACA,GAAGC,CACL,EAAGC,EAAQ,CACT,OAAoBC,gBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,6BACP,QAAS,YACT,KAAM,eACN,cAAe,OACf,YAAa,OACb,IAAKD,EACL,kBAAmBF,CACpB,EAAEC,CAAK,EAAGF,EAAqBI,EAAAA,cAAoB,QAAS,CAC3D,GAAIH,CACL,EAAED,CAAK,EAAI,KAAmBI,EAAAA,cAAoB,OAAQ,CACzD,SAAU,UACV,EAAG,sIACH,SAAU,SACX,CAAA,CAAC,CACJ,CACA,MAAMC,GAA2BC,EAAgB,WAACP,EAAe,ECrBjE,SAASQ,GAAU,CACjB,MAAAP,EACA,QAAAC,EACA,GAAGC,CACL,EAAGC,EAAQ,CACT,OAAoBC,gBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,6BACP,QAAS,YACT,KAAM,eACN,cAAe,OACf,YAAa,OACb,IAAKD,EACL,kBAAmBF,CACpB,EAAEC,CAAK,EAAGF,EAAqBI,EAAAA,cAAoB,QAAS,CAC3D,GAAIH,CACL,EAAED,CAAK,EAAI,KAAmBI,EAAAA,cAAoB,OAAQ,CACzD,EAAG,8KACJ,CAAA,CAAC,CACJ,CACA,MAAMC,GAA2BC,EAAgB,WAACC,EAAS,ECTrDC,GAAQ,OAAO,OAAW,KAAe,OAAO,UAEtC,SAAAC,GAAgB,CAAE,QAAAX,GAAW,CAC3C,MAAMY,EAAW1K,IACX,CAAE,YAAA2K,EAAa,aAAcC,CAAA,EAAQF,EAGzC,OAAA1J,EAAA,KAAC6J,GAAA,CACC,SAAAH,EACA,UAAWjL,EAAGkL,EAAc,8BAAgC,oBAAqB,+BAA+B,EAE/G,SAAA,CACCA,GAAAnL,EAAAA,IAAC,OAAI,UAAU,mCACb,eAACsL,GAAa,CAAA,QAAAhB,EAAkB,IAAAc,EAAU,CAC5C,CAAA,QAGD,MAAI,CAAA,UAAU,wBACb,SAACpL,EAAA,IAAAuL,GAAA,CAAkB,SAAAL,CAAoB,CAAA,EACzC,EAEAlL,EAAAA,IAAC,OAAI,UAAU,mEACb,eAACwL,GAAK,CAAAC,OAAAA,GAAgB,IAAAL,EAAU,CAClC,CAAA,CAAA,CAAA,CAAA,CAGN,CAEgB,SAAAM,GAAc,CAAE,QAAApB,GAAW,CACzC,MAAMY,EAAW1K,IACX,CAAE,aAAc4K,EAAK,YAAAD,CAAA,EAAgBD,EAGzC,OAAAlL,EAAA,IAACqL,GAAA,CACC,SAAAH,EACA,UAAWjL,EAAGkL,EAAc,kDAAoD,mBAAmB,EAElG,WACE3J,EAAAA,KAAA,MAAA,CAAI,UAAWvB,EAAG,sBAAsB,EACvC,SAAA,CAACuB,EAAAA,KAAA,MAAA,CAAI,UAAU,+BACb,SAAA,CAACxB,EAAAA,IAAAwL,GAAA,QAAKC,GAAgB,IAAAL,CAAU,CAAA,EAChCpL,MAACuL,IAAkB,SAAAL,EAAoB,CAAA,EACzC,EAEAlL,EAAAA,IAAC,OAAI,UAAU,uBACb,eAACsL,GAAa,CAAA,QAAAhB,EAAkB,IAAAc,EAAU,CAC5C,CAAA,CAAA,CAAA,CACF,EAEApL,EAAA,IAAC,SAAA,CACC,QAAUW,GAAM,CACdgL,EAAiB,EAAI,CACvB,EACA,aAAW,kBACX,UAAW1L,EACT,iGACF,EAEA,SAAAD,EAAAA,IAACuK,GAAgB,CAAA,UAAU,oCAAqC,CAAA,CAAA,CAClE,CAAA,CAAA,CAIR,CAEA,MAAMqB,EAAW,CACf,QAAS,QACT,SAAU,WACV,OAAQ,SACR,UAAW,YACX,QAAS,UACT,SAAU,UACZ,EACIZ,KACFY,EAAS,MAAQ,SAGnB,SAASP,GAAS,CAAE,SAAA9I,EAAU,UAAAsJ,EAAW,SAAAX,EAAU,GAAGR,GAAS,CACvD,MAAAoB,EAAkBZ,EAAS,qBAAuB,QAEtD,OAAAlL,EAAA,IAAC,MAAA,CACC,QAAS,IAAM,CACRkL,EAAS,aACZS,EAAiB,EAAI,CAEzB,EACA,aAAc,IAAM,CACdG,GAAmB,CAACZ,EAAS,aAC/BS,EAAiB,EAAI,CAEzB,EACA,aAAc,IAAM,CACdG,GAAmB,CAACZ,EAAS,eAC/BS,EAAiB,EAAK,CAE1B,EACA,aAAW,aACX,UAAW1L,EAAG,yCAA0C4L,CAAS,EAChE,GAAGnB,EAEH,SAAAnI,CAAA,CAAA,CAGP,CAEA,SAAS+I,GAAa,CAAE,QAAAhB,EAAS,IAAAc,GAAO,CACtC,OAAQA,EAAK,CACX,KAAKQ,EAAS,SACL,OAAA5L,MAAC+L,IAAY,QAAAzB,CAAkB,CAAA,EACxC,KAAKsB,EAAS,QACZ,aAAQ1L,GAAW,CAAA,CAAA,EACrB,KAAK0L,EAAS,OACZ,aAAQ7C,GAAU,CAAA,CAAA,EACpB,KAAK6C,EAAS,UACZ,aAAQhI,GAAU,CAAA,CAAA,EACpB,KAAKgI,EAAS,SACZ,OAAQ5L,EAAAA,IAAAuG,GAAA,CAAY,QAAS+D,EAAQ,OAAS,CAAA,EAChD,KAAKsB,EAAS,MACZ,aAAQ3J,GAAS,CAAA,CAAA,EACnB,QACS,OAAAjC,MAACqK,IAAW,QAAAC,CAAkB,CAAA,CACzC,CACF,CAEA,SAAS0B,GAAS,CAAE,MAAApG,EAAO,WAAAqG,EAAY,QAAAvH,GAAW,CAChD,OAEI1E,MAAAiD,EAAAA,SAAA,CAAA,SAAAjD,EAAA,IAAC,SAAA,CACC,QAAA0E,EACA,UAAWzE,EACT,gGACAgM,EAAa,oBAAsB,oBACrC,EAEC,SAAArG,CAAA,CAEL,CAAA,CAAA,CAEJ,CACA,SAAS4F,GAAK,CAAE,OAAAC,EAAQ,IAAAL,EAAK,UAAAS,GAAa,CACxC,OACG7L,EAAAA,IAAA,MAAA,CAAI,UAAWC,EAAG,iDAAkD4L,CAAS,EAC3E,SAAA,OAAO,KAAKD,CAAQ,EAAE,IAAKtC,GAAQ,CAC5B,MAAA4C,EAAMN,EAAStC,CAAG,EACxB,OAAQtJ,EAAA,IAAAgM,GAAA,CAAmB,WAAYZ,IAAQc,EAAK,MAAO5C,EAAK,QAAS,IAAMmC,EAAOS,CAAG,CAAA,EAAnE5C,CAAsE,CAC7F,CAAA,CACH,CAAA,CAEJ,CAEA,SAASiC,GAAkB,CAAE,SAAAL,GAAY,CACvC,KAAM,CAAE,mBAAAzD,EAAoB,cAAA0E,EAAe,YAAAhB,CAAA,EAAgBD,EACrDY,EAAkBrE,IAAuB,QAC/C,GAAK0D,EAIL,OAAIW,EACK9L,EAAA,IAACoM,GAAU,CAAA,OAAQD,CAAe,CAAA,QAEnCE,GAAY,CAAA,QAAS,IAAMV,EAAiB,EAAK,CAAG,CAAA,CAC9D,CAEA,SAASS,GAAU,CAAE,OAAAE,GAAU,CAE3B,OAAAtM,EAAA,IAAC,SAAA,CACC,QAAS,IAAMuM,GAAe,CAACD,CAAM,EACrC,UAAWrM,EACT,qGACAqM,EAAS,OAAS,QACpB,EACA,aAAW,iBAEX,SAAAtM,EAAA,IAAC,MAAA,CACC,OAAO,eACP,KAAM,eACN,YAAY,IACZ,UAAU,gBACV,QAASsM,EAAS,EAAI,KACtB,QAAQ,YACR,MAAM,6BAEN,SAAAtM,EAAAA,IAAC,OAAK,CAAA,EAAE,wbAAyb,CAAA,CAAA,CACnc,CAAA,CAAA,CAGN,CAEA,SAASqM,GAAY,CAAE,QAAA3H,GAAW,CAE9B,OAAA1E,EAAA,IAAC,SAAA,CACC,QAAA0E,EACA,UAAWzE,EACT,oGACF,EACA,aAAW,aAEX,eAAC8K,GAAU,EAAA,CAAA,CAAA,CAGjB,CC9MO,SAASyB,EAAKC,EAAO,CAC1B,KAAM,CAAE,UAAAC,EAAW,aAAAC,EAAc,KAAAC,CAAA,EAASH,EAGxC,OAAAzM,EAAA,IAAC,UAAA,CACC,UAAW,oDACX,GAAG,OACH,IAAMmE,GAAO,CACXwI,EAAa,QAAUxI,EAClBuI,EAAU,SACRE,GAET,CAAA,CAAA,CAGN,CCnBA,SAASC,GAAe,CACtB,MAAArC,EACA,QAAAC,EACA,GAAGC,CACL,EAAGC,EAAQ,CACT,OAAoBC,gBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,6BACP,QAAS,YACT,KAAM,eACN,cAAe,OACf,YAAa,OACb,IAAKD,EACL,kBAAmBF,CACpB,EAAEC,CAAK,EAAGF,EAAqBI,EAAAA,cAAoB,QAAS,CAC3D,GAAIH,CACL,EAAED,CAAK,EAAI,KAAmBI,EAAAA,cAAoB,OAAQ,CACzD,SAAU,UACV,EAAG,iKACH,SAAU,SACX,CAAA,CAAC,CACJ,CACA,MAAMC,GAA2BC,EAAgB,WAAC+B,EAAc,EChBhE,SAAwBC,GAAcL,EAAO,CACrC,KAAA,CAAE,QAAAjG,EAAS,iBAAAuG,CAAqB,EAAAN,EACtC,GAAI,CAAAjG,EAKF,OAAAhF,EAAA,KAAC,SAAA,CACC,QAAS,IAAMuL,EAAiB,EAChC,UAAU,2JAEV,SAAA,CAAC/M,EAAAA,IAAA6M,GAAA,CAAe,UAAU,SAAU,CAAA,EACpC7M,EAAAA,IAAC,QAAK,SAAI,MAAA,CAAA,CAAA,CAAA,CAAA,CAGhB,CCpBA,SAAwBgN,EAAuBP,EAAO,CAC9C,KAAA,CAAE,MAAAQ,CAAU,EAAAR,EAClB,GAAIQ,GAAS,KAGb,aAAQ,MAAI,CAAA,UAAU,kDAAmD,SAAAA,EAAM,SAAW,mBAAoB,CAAA,CAChH,CCGA,SAAwBC,GAAYT,EAAO,CACnC,KAAA,CAAE,QAAAnC,CAAY,EAAAmC,EACd,CAAE,aAAAE,EAAc,UAAAD,EAAW,MAAAO,EAAO,KAAAL,EAAM,QAAAO,EAAS,QAAA3G,EAAS,iBAAAuG,CAAqB,EAAAzC,EAGnF,OAAA9I,EAAA,KAAC,MAAI,CAAA,UAAW,uCACd,SAAA,CAACxB,EAAAA,IAAAF,EAAA,CAAO,OAAQqN,CAAS,CAAA,EACzBnN,EAAAA,IAAC8M,GAAc,CAAA,QAAAtG,EAAkB,iBAAAuG,CAAoC,CAAA,EACrE/M,EAAAA,IAAC,OAAI,UAAU,qCACb,eAACwM,EAAK,CAAA,aAAAG,EAA4B,UAAAD,EAAsB,KAAAE,CAAA,CAAY,CACtE,CAAA,EACA5M,MAACgN,GAAuB,MAAAC,EAAc,EACtCjN,MAACiL,IAAgB,QAAAX,EAAkB,CACrC,CAAA,CAAA,CAEJ,CCxBA,SAAS8C,GAAe,CACtB,MAAA5C,EACA,QAAAC,EACA,GAAGC,CACL,EAAGC,EAAQ,CACT,OAAoBC,gBAAoB,MAAO,OAAO,OAAO,CAC3D,MAAO,6BACP,QAAS,YACT,KAAM,eACN,cAAe,OACf,YAAa,OACb,IAAKD,EACL,kBAAmBF,CACpB,EAAEC,CAAK,EAAGF,EAAqBI,EAAAA,cAAoB,QAAS,CAC3D,GAAIH,CACL,EAAED,CAAK,EAAI,KAAmBI,EAAAA,cAAoB,OAAQ,CACzD,SAAU,UACV,EAAG,kJACH,SAAU,SACX,CAAA,CAAC,CACJ,CACA,MAAMC,GAA2BC,EAAgB,WAACsC,EAAc,4GChB1D,CAAE,SAAAlD,CAAa,EAAAC,GACfC,GAAiBF,EAAS,SAAS,GAAG,EAAIA,EAAS,MAAM,EAAG,EAAE,EAAIA,EAEjE,SAASmD,GAAO,CAAE,QAAA/C,EAAS,SAAAgD,EAAW,IAAS,CAC9C,KAAA,CAAE,QAAA9G,EAAS,QAAA2G,EAAS,QAAAI,EAAS,WAAAC,EAAY,iBAAAT,EAAkB,eAAAU,EAAgB,cAAAC,EAAe,YAAAC,CAC9F,EAAArD,EACIsD,EAAa,OAAO,OAAW,MAAgBN,GAAY,OAAO,WAAa,OAAO,OAAO,UAC7F,CAAE,MAAAO,EAAO,kBAAA1G,EAAmB,uBAAAC,GAA2B5G,EAAY,EAGvE,OAAAgB,EAAA,KAAC,SAAA,CACC,GAAG,SACH,UAAWvB,EACT,iEACA,CAAC4N,GAAS,CAACD,GAAc,mBACzBC,EAAQ,8BAAgC,2CACxCD,EAAa,OAAS,SACxB,EAEA,SAAA,CAAC5N,EAAAA,IAAA,MAAA,CAAI,UAAU,0CACb,SAAAwB,EAAA,KAAC,KAAA,CACC,QAAS,IAAM,CACToM,UAAmB,KAAK,OAAO,SAAS,KAAK,QAAQ,QAAS,EAAE,CAAC,CACvE,EACA,UAAW3N,EACT2N,EAAa,wBAA0B,UACvC,uDACF,EAEA,SAAA,CAAA5N,EAAA,IAAC,MAAA,CACC,UAAWC,EACT,WACAuG,GAAW,CAACY,GAA0B,eACtC,+BACAyG,GAAS,qBACX,EACA,QAAS,IAAM,CACRD,GACHE,GAAS,CAACD,CAAK,CAEnB,EAEA,eAAC,OAAA,CAAK,UAAU,kBAAkB,SAAC,IAAA,CAAA,CACrC,EACC,CAACA,GACCrM,EAAAA,KAAA,MAAA,CAAI,UAAU,YACb,SAAA,OAAC,OAAA,CAAK,UAAU,GAAG,SAAO,UAAA,QACzB,OAAA,CAAK,UAAU,sBAAsB,SAAI,OAAA,EACzC,CAACoM,GAAczG,GACbnH,EAAA,IAAA,IAAA,CAAE,KAAM,GAAGoK,EAAc,SAAU,UAAU,iCAAiC,SAE/E,OAAA,CAAA,EAEJ,CAAA,CAAA,CAAA,EAGN,EACC,CAACyD,GAAS,CAAC1G,UACT,MAAA,CAAI,UAAU,6DACb,SAAA,CAAAnH,EAAA,IAAC,SAAA,CACC,QAAS+M,EACT,MAAOvG,EAAU,OAAS,OAC1B,UAAWvG,EACR2N,EAAqB,OAAR,MACd,mBACA,CAACpH,GAAW,CAACY,GAA0B,eACzC,EAEC,SAAC+F,oBAME,SAAU,aAAA,EALX3L,EAAAA,KAAA,QAAK,UAAWvB,EAAG,6BAA6B,EAC9C,SAAA,CAAUuG,EAAAxG,EAAA,IAACoN,IAAe,UAAU,SAAA,CAAU,EAAMpN,EAAAA,IAAA6M,GAAA,CAAe,UAAU,UAAU,EACvF,CAACe,GAAe5N,EAAA,IAAA,OAAM,CAAA,SAAAwG,EAAU,OAAS,OAAO,CAAA,CACnD,CAAA,CAEY,CAEhB,EACAxG,EAAA,IAAC,SAAA,CACC,QAASyN,EACT,MAAM,SACN,UAAWxN,EACT,8BACC2N,EAAqB,OAAR,MACd,CAACL,GAAW,CAACC,EAAa,aAAe,kBAC3C,EAEC,SAAC,CAAAI,GAAe5N,EAAA,IAAA,OAAA,CAAK,SAAM,SAAA,CAAA,CAC9B,EACC,CAAC4N,GACA5N,EAAA,IAAC,SAAA,CACC,MAAM,UACN,UAAU,mDACV,QAAS0N,EAET,SAAC1N,EAAAA,IAAA,QAAK,SAAQ,WAAA,CAAA,CAChB,EAED,CAAC4N,GACA5N,EAAA,IAAC,SAAA,CACC,MAAM,QACN,UAAWC,EACT,8DACC2N,EAAqB,OAAR,KAChB,EACA,QAASD,EAET,SAAC3N,EAAAA,IAAA,QAAK,SAAK,QAAA,CAAA,CACb,EAED,CAAC4N,GACA5N,EAAA,IAAC,IAAA,CACC,MAAM,QACN,KAAM,GAAGoK,EAAc,6BACvB,UAAWnK,EAAG,+CAAiD2N,EAAqB,OAAR,KAAc,EAE1F,SAAC5N,EAAAA,IAAA,QAAK,SAAK,QAAA,CAAA,CACb,CAAA,EAsBJ,CAAA,CAAA,CAAA,CAIR,CCzIA,SAAwB+N,GAAWtB,EAAO,CAClC,KAAA,CAAE,QAAAnC,CAAY,EAAAmC,EACd,CAAE,aAAAE,EAAc,UAAAD,EAAW,MAAAO,EAAO,KAAAL,EAAM,QAAAO,CAAY,EAAA7C,EACpDY,EAAW1K,IACX,CAAE,cAAA+G,EAAe,MAAAsG,CAAU,EAAA3C,EAG/B,OAAA1J,EAAA,KAAC,MAAI,CAAA,UAAU,gCACb,SAAA,CAACxB,EAAAA,IAAAF,EAAA,CAAO,OAAQqN,CAAS,CAAA,EACzBnN,MAACqN,IAAO,QAAA/C,EAAkB,EAC1B9I,EAAAA,KAAC,MAAI,CAAA,UAAU,qCACb,SAAA,CAACxB,EAAAA,IAAAwM,EAAA,CAAK,aAAAG,EAA4B,UAAAD,EAAsB,KAAAE,CAAY,CAAA,EACnE,CAACiB,GAAStG,IAAkB,SAAWvH,EAAA,IAAC0L,IAAc,QAAApB,EAAkB,CAAA,EAC3E,EACAtK,MAACgN,GAAuB,MAAAC,EAAc,EACrC,CAACY,GAAStG,IAAkB,UAAYvH,EAAA,IAACiL,IAAgB,QAAAX,EAAkB,CAC9E,CAAA,CAAA,CAEJ,CCnBA,SAAwB0D,GAAmBvB,EAAO,CAC1C,KAAA,CAAE,QAAAnC,CAAY,EAAAmC,EACd,CAAE,QAAAU,EAAS,QAAA3G,EAAS,iBAAAuG,EAAkB,aAAAJ,EAAc,UAAAD,EAAW,MAAAO,EAAO,KAAAL,CAAS,EAAAtC,EAEnF,OAAA9I,EAAA,KAAC,MAAI,CAAA,UAAU,gCACb,SAAA,CAACxB,EAAAA,IAAAF,EAAA,CAAO,OAAQqN,CAAS,CAAA,EACxBnN,EAAAA,IAAAqN,GAAA,CAAO,QAAA/C,EAAkB,SAAU,EAAM,CAAA,EAC1CtK,EAAAA,IAAC8M,GAAc,CAAA,QAAAtG,EAAkB,iBAAAuG,CAAoC,CAAA,EACrE/M,EAAAA,IAAC,OAAI,UAAU,qCACb,eAACwM,EAAK,CAAA,aAAAG,EAA4B,UAAAD,EAAsB,KAAAE,CAAA,CAAY,CACtE,CAAA,EACA5M,MAACgN,GAAuB,MAAAC,EAAc,CACxC,CAAA,CAAA,CAEJ,CCpBA,MAAMgB,GAAUC,GAAO,EAAKC,GAAkBC,GAEjCC,GAAkB,CAACC,EAAKC,EAAUC,EAAaC,EAAKC,IAAe,CAC9E,MAAMC,EAAc,YAAY,IAAG,EAAK,IACxC,OAAOV,GAAQ,KAAMK,EAAKK,EAAaF,EAAKC,CAAU,CACxD,ECTaE,GAAeC,GACjB,CAACC,EAAYC,KAChBF,EAAkB,IAAIC,EAAYC,CAAU,EACrCA,GCCTC,GAAmB,OAAO,mBAAqB,OAAY,iBAAmB,OAAO,iBACrFC,GAAkC,UAClCC,GAA6BD,GAAkC,EACxDE,GAA6B,CAACC,EAAOP,IACtCC,GAAe,CACnB,MAAMO,EAAaR,EAAkB,IAAIC,CAAU,EASnD,IAAIC,EAAaM,IAAe,OAAYP,EAAW,KAAOO,EAAaH,GAA6BG,EAAa,EAAI,EACzH,GAAI,CAACP,EAAW,IAAIC,CAAU,EAC1B,OAAOK,EAAMN,EAAYC,CAAU,EAQvC,GAAID,EAAW,KAAOG,GAAiC,CACnD,KAAOH,EAAW,IAAIC,CAAU,GAC5BA,EAAa,KAAK,MAAM,KAAK,OAAM,EAAKG,EAA0B,EAEtE,OAAOE,EAAMN,EAAYC,CAAU,CACtC,CAED,GAAID,EAAW,KAAOE,GAClB,MAAM,IAAI,MAAM,gGAAgG,EAGpH,KAAOF,EAAW,IAAIC,CAAU,GAC5BA,EAAa,KAAK,MAAM,KAAK,OAAM,EAAKC,EAAgB,EAE5D,OAAOI,EAAMN,EAAYC,CAAU,CAC3C,ECnCMO,GAAuB,IAAI,QAC3BF,GAAQR,GAAYU,EAAoB,EACxCC,EAAuBJ,GAA2BC,GAAOE,EAAoB,ECVtEE,GAAsB5O,GACxBA,EAAQ,SAAW,QAAaA,EAAQ,SAAW,OCDjD6O,GAAmB7O,GACrBA,EAAQ,QAAU,MAAQ,OAAOA,EAAQ,IAAO,SCE9C8O,GAAQtO,GAAQ,CAEzB,MAAMuO,EAA6B,IAAI,IAAI,CAAC,CAAC,EAAG,IAAM,CAAA,CAAG,CAAC,CAAC,EACrDC,EAA4B,IAAI,IAAI,CAAC,CAAC,EAAG,IAAM,CAAA,CAAG,CAAC,CAAC,EACpDC,EAAsB,IAAI,IAC1BC,EAAS,IAAI,OAAO1O,CAAG,EAC7B,OAAA0O,EAAO,iBAAiB,UAAW,CAAC,CAAE,KAAAhP,CAAI,IAAO,CAC7C,GAAI0O,GAAmB1O,CAAI,EAAG,CAC1B,KAAM,CAAE,OAAQ,CAAE,QAAAiP,EAAS,UAAAC,CAAW,CAAA,EAAKlP,EAC3C,GAAIkP,IAAc,WAAY,CAC1B,MAAMC,EAAWN,EAA2B,IAAII,CAAO,EACvD,GAAI,OAAOE,GAAa,SAAU,CAC9B,MAAMC,EAAsBL,EAAoB,IAAII,CAAQ,EAC5D,GAAIC,IAAwB,QACxBA,EAAoB,UAAYH,GAChCG,EAAoB,YAAcF,EAClC,MAAM,IAAI,MAAM,qCAAqC,CAE5D,SACQ,OAAOC,EAAa,IACzBA,QAGA,OAAM,IAAI,MAAM,qCAAqC,CAE5D,SACQD,IAAc,UAAW,CAC9B,MAAMC,EAAWL,EAA0B,IAAIG,CAAO,EACtD,GAAI,OAAOE,GAAa,SAAU,CAC9B,MAAMC,EAAsBL,EAAoB,IAAII,CAAQ,EAC5D,GAAIC,IAAwB,QACxBA,EAAoB,UAAYH,GAChCG,EAAoB,YAAcF,EAClC,MAAM,IAAI,MAAM,qCAAqC,CAE5D,SACQ,OAAOC,EAAa,IACzBA,IAEAL,EAA0B,OAAOG,CAAO,MAGxC,OAAM,IAAI,MAAM,qCAAqC,CAE5D,CACJ,SACQN,GAAgB3O,CAAI,EAAG,CAC5B,KAAM,CAAE,GAAAG,CAAI,EAAGH,EACToP,EAAsBL,EAAoB,IAAI5O,CAAE,EACtD,GAAIiP,IAAwB,OACxB,MAAM,IAAI,MAAM,qCAAqC,EAEzD,KAAM,CAAE,QAAAH,EAAS,UAAAC,CAAW,EAAGE,EAC/BL,EAAoB,OAAO5O,CAAE,EACzB+O,IAAc,WACdL,EAA2B,OAAOI,CAAO,EAGzCH,EAA0B,OAAOG,CAAO,CAE/C,KACI,CACD,KAAM,CAAE,MAAO,CAAE,QAAAnP,CAAS,CAAA,EAAKE,EAC/B,MAAM,IAAI,MAAMF,CAAO,CAC1B,CACT,CAAK,EAkEM,CACH,cAlEmBmP,GAAY,CAC/B,MAAM9O,EAAKsO,EAAqBM,CAAmB,EACnDA,EAAoB,IAAI5O,EAAI,CAAE,QAAA8O,EAAS,UAAW,UAAU,CAAE,EAC9DJ,EAA2B,IAAII,EAAS9O,CAAE,EAC1C6O,EAAO,YAAY,CACf,GAAA7O,EACA,OAAQ,QACR,OAAQ,CAAE,QAAA8O,EAAS,UAAW,UAAY,CACtD,CAAS,CACT,EA0DQ,aAzDkBA,GAAY,CAC9B,MAAM9O,EAAKsO,EAAqBM,CAAmB,EACnDA,EAAoB,IAAI5O,EAAI,CAAE,QAAA8O,EAAS,UAAW,SAAS,CAAE,EAC7DH,EAA0B,IAAIG,EAAS9O,CAAE,EACzC6O,EAAO,YAAY,CACf,GAAA7O,EACA,OAAQ,QACR,OAAQ,CAAE,QAAA8O,EAAS,UAAW,SAAW,CACrD,CAAS,CACT,EAiDQ,YAhDgB,CAACI,EAAMC,EAAQ,IAAM,CACrC,MAAML,EAAUR,EAAqBI,CAA0B,EAC/D,OAAAA,EAA2B,IAAII,EAAS,IAAM,CAC1CI,IAEI,OAAOR,EAA2B,IAAII,CAAO,GAAM,YACnDD,EAAO,YAAY,CACf,GAAI,KACJ,OAAQ,MACR,OAAQ,CACJ,MAAAM,EACA,IAAK,YAAY,IAAK,EACtB,QAAAL,EACA,UAAW,UACd,CACrB,CAAiB,CAEjB,CAAS,EACDD,EAAO,YAAY,CACf,GAAI,KACJ,OAAQ,MACR,OAAQ,CACJ,MAAAM,EACA,IAAK,YAAY,IAAK,EACtB,QAAAL,EACA,UAAW,UACd,CACb,CAAS,EACMA,CACf,EAoBQ,WAnBe,CAACI,EAAMC,EAAQ,IAAM,CACpC,MAAML,EAAUR,EAAqBK,CAAyB,EAC9D,OAAAA,EAA0B,IAAIG,EAASI,CAAI,EAC3CL,EAAO,YAAY,CACf,GAAI,KACJ,OAAQ,MACR,OAAQ,CACJ,MAAAM,EACA,IAAK,YAAY,IAAK,EACtB,QAAAL,EACA,UAAW,SACd,CACb,CAAS,EACMA,CACf,CAMA,CACA,EC5IaM,GAA2B,CAACC,EAAYR,IAAW,CAC5D,IAAIS,EAAS,KACb,MAAO,IAAM,CACT,GAAIA,IAAW,KACX,OAAOA,EAEX,MAAMC,EAAO,IAAI,KAAK,CAACV,CAAM,EAAG,CAAE,KAAM,uCAAuC,CAAE,EAC3E1O,EAAM,IAAI,gBAAgBoP,CAAI,EACpC,OAAAD,EAASD,EAAWlP,CAAG,EAEvB,WAAW,IAAM,IAAI,gBAAgBA,CAAG,CAAC,EAClCmP,CACf,CACA,ECZaT,GAAS,y6CCEhBW,GAAqBJ,GAAyBX,GAAMI,EAAM,EACnDY,GAAiBX,GAAYU,GAAoB,EAAC,cAAcV,CAAO,EAEvEY,GAAc,IAAIC,IAASH,GAAkB,EAAG,YAAY,GAAGG,CAAI,ECgC1E,CAAE,WAAAC,EAAe,EAAA9I,EAAY,MACnC,IAAI+I,EAAgBC,GAASC,EAAaC,GAAaC,GAEnD,OAAO,OAAW,MACpBA,GAAaC,GAAsB,EACnCL,EAAiBM,GAAY,EAC7BL,GAAUM,GAAQ,EAClBL,EAAcM,GAAe,EACfL,GAAA,IAAMD,EAAY,UAAU,EAAG,EAAGA,EAAY,OAAO,OAAQA,EAAY,OAAO,KAAK,GAGrG,eAAeO,GAAUlO,EAAM,CAC7B,OAAKyN,GAGW,MAAMA,GACP,KAAMU,GAAMA,EAAE,cAAgBnO,CAAI,EAH/C,MAIJ,CAEO,SAASoO,IAAiB,CAC/B,KAAM,CAAE,cAAApK,EAAe,kBAAAG,CAAkB,EAAIhH,EAAY,EACnDkR,EAAoBlK,IAAsB9B,EAAmB,IAC7DiM,EAAgBD,EAAoBE,GAAiBvD,GACrDwD,EAAUH,EAAoBI,GAA6BC,GAE3DnF,EAAOlM,EAAAA,YAAY,IAAM,CACvB,MAAAsR,EAAW,CAAC,GAAI,CAAC,EACjBhB,EAAcM,KACdW,EAAS,IAAIC,GAAc,CAC/B,KAAM7K,EACN,cAAAsK,EACA,QAAAE,EACA,YAAAlB,GACA,cAAAD,GACA,WAAAyB,GACA,SAAU,GACV,KAAMxF,EAAa,QACnB,YAAa,aACb,QAASyF,GACT,SAAAJ,EACA,YAAAhB,EACA,QAAS,SAAY,QAAQ,IAAI,CAACF,EAAgBC,EAAO,CAAC,EAC1D,cAAgBsB,GAAU,CACXC,EAAA,CAAE,GAAGD,CAAA,CAAO,CAC3B,EACA,SAAWE,GAAY,CAChBA,GACQC,IAEf,EACA,WAAY,IAAMtB,GAClB,UAAYuB,GAAQ,CACZ,KAAA,CAAE,KAAAC,CAAS,EAAAD,EAEV,OAAA,QAAQ,YAAYC,CAAI,EAE/BC,GAAcD,CAAI,EAClB,OAAO,SAAS,KAAO,IAAME,GAAUF,CAAI,EAC3CG,EAAiBH,CAAI,EACrB,MAAMI,EAAqBC,KAC3BC,GAAuBN,CAAI,EAC3B,MAAM5R,EAAO,CAAE,GAAGgS,EAAoB,KAAAJ,CAAK,EAC3C,IAAIzR,EAAKH,EAAK,GAGd,GAFyBgS,EAAmB,aAAeG,EAAY,YAIrE,GADuBP,IAASI,EAAmB,KAC/B,CAEZ,MAAAI,GAAaD,EAAY,UAAUnS,CAAI,EAC7CG,EAAKiS,GAAW,GAChBC,EAAsBD,GAAW,IAAI,CACvC,OAEAjS,EAAKgS,EAAY,UAAUhS,CAAE,EAAIA,EAAKmS,KACtCD,EAAsBF,EAAY,OAAOhS,EAAIH,CAAI,EAAE,IAAI,EAEzDuS,GAAiBpS,CAAE,CACrB,EACA,OAAQ,EAAA,CACT,EACD,OAAO,cAAgBgR,EAGdqB,GAAA,EAAE,KAAK,MAAOC,GAAY,CACjC,IAAIb,EAAMc,EACV,GAAID,EACKb,EAAAa,EACDC,EAAA,+CACG3C,GACF6B,EAAA7B,GACD2C,EAAA,yCACD,CACL,KAAM,CAAE,KAAMC,EAAY,KAAApQ,CAAK,EAAI,MAAMqQ,GAAc,EAChDhB,EAAAe,EACPD,EAAM,gCAAgCnQ,CAAI,oBAC5C,CACA4O,EAAO,QAAQS,CAAI,EACnBG,EAAiBH,CAAI,EACd1Q,EAAA,uBAAuBwR,CAAG,2CAA4C,WAAW,CAAA,CACzF,EAED9G,EAAU,QAAUuF,CACtB,EAAG,CAAE,CAAA,EAEC,CAAC0B,EAAWrB,CAAY,EAAIjS,EAAA,SAAS,CAAE,CAAA,EACvC,CAAE,QAAAmG,EAAS,QAAA+G,EAAS,MAAAN,EAAO,WAAAO,EAAY,QAAAL,CAAY,EAAAwG,EACnDjH,EAAYjD,EAAAA,SACZkD,EAAelD,EAAAA,SAIfmK,EAAY3K,GAASlB,EAAa,CAAE,KAAM,OAAO,KAAKI,EAAe,CAAA,CAAG,EAC9E/F,EAAAA,UAAU,IAAM,CACd,IAAIyR,EAAiB,CAAA,EACrB,OAAO,KAAK1L,EAAe,EAAE,QAASmB,GAAQ,CACxC,OAAO,UAAU,eAAe,KAAKsK,EAAWtK,CAAG,IACtCuK,EAAAvK,CAAG,EAAIsK,EAAUtK,CAAG,EACrC,CACD,EACSoD,EAAA,SAAS,eAAemH,CAAc,CAAA,EAC/C,CAACD,CAAS,CAAC,EAGdxR,EAAAA,UAAU,IAAM,CACR,KAAA,CAAE,gBAAA0C,CAAoB,EAAA8O,EACxB9O,IAAoBgP,IACN5O,GAAA,EAAE,KAAMH,GAAY,CAC5B,MAAAM,EAAWN,EAAQ,IAAID,CAAe,EACxCO,GAAY,MAGhBC,GAAeD,CAAQ,CAAA,CACxB,CAEL,EAAG,CAAE,CAAA,EAMC,MAAAwN,EAAoBH,GAAS,CAC3B,MAAAqB,EAAOC,GAAYtB,CAAI,EAC7B,SAAS,OAASqB,EAAK,MAAQ,GAAGA,EAAK,KAAK,MAAQ,IAAM,cAAA,EAGtDhH,EAAmB,SAAY,CACnCL,EAAU,SAAS,QAAO,EAGtBuH,EAAc,SAAY,EAC7B,MAAM1C,GAAU,gBAAgB,IAAI,cAAc,EAChC2C,KACPjD,KACDuB,KACO2B,KACRzH,EAAA,QAAQ,KAAK,OAAO,EAAG,EACjC,MAAM2E,GAAQ,CAAA,EAGV+C,EAAe,MAAOC,EAAaC,EAAQ,KAAU,CACzDnB,EAAsBkB,CAAW,EACvB3H,EAAA,QAAQ,QAAQ2H,EAAY,IAAI,EACtCC,IACF,MAAML,EAAY,EACHxG,IACjB,EAGIA,EAAiB,IAAM,CAC3Bf,EAAU,QAAQ,UAAS,EA6BtB,MAfS,CACd,QAAAlG,EACA,QAAA2G,EACA,QAAAI,EACA,WAAAC,EACA,iBAAAT,EACA,aAAAqH,EACA,cAnBoB,SAAY,CAC1B,MAAAC,EAAc,MAAMX,KACpBhB,EAAO2B,EAAY,KAClBrS,EAAA,iCAAiCqS,EAAY,EAAE,GAAG,EACzDhB,GAAiBgB,EAAY,EAAE,EAC/BlB,EAAsBkB,CAAW,EACjC,MAAMJ,EAAY,EACRvH,EAAA,QAAQ,QAAQgG,CAAI,EACpBhG,EAAA,QAAQ,KAAK,SAASgG,CAAI,CAAA,EAYpC,YATkB,SAAY6B,GAAUZ,EAAU,IAAI,EAUtD,eAAAlG,EACA,KAAAb,EACA,MAAAK,EACA,UAAAP,EACA,aAAAC,CAAA,CAGJ,CClOO,SAAS6H,GAAK,CAAE,SAAAlH,EAAW,IAAS,CACnC,MAAAM,EAAaN,GAAYmH,KACzBC,EAAS/M,GAAY,EAAAuF,GAAcU,EAAaI,GAAqBD,GACrEzD,EAAUmH,KACT,OAAAzR,MAAC0U,GAAO,QAAApK,CAAkB,CAAA,CACnC","x_google_ignoreList":[11,12,15,19,24,25,26,27,28,29,30,31,32]}