{"version":3,"file":"swatch.astro.mjs","sources":["../../../my-patterns/README.md?raw","../../src/my_patterns.js","../../../my-patterns/README.md","../../src/pages/swatch/index.astro"],"sourcesContent":["export default \"# my-patterns\\n\\nThis directory can be used to save your own patterns, which then get\\nmade into a pattern swatch.\\n\\nExample: <https://felixroos.github.io/strudel/swatch/>\\n\\n## deploy\\n\\n### 1. fork the [strudel repo on github](https://github.com/tidalcycles/strudel.git)\\n\\n### 2. clone your fork to your machine `git clone https://github.com/<your-username>/strudel.git strudel && cd strudel`\\n\\n### 3. create a separate branch like `git branch patternuary && git checkout patternuary`\\n\\n### 4. save one or more .txt files in the my-patterns folder\\n\\n### 5. edit `website/public/CNAME` to contain `<your-username>.github.io/strudel`\\n\\n### 6. edit `website/astro.config.mjs` to use site: `https://<your-username>.github.io` and base `/strudel`, like this\\n\\n```js\\nconst site = 'https://<your-username>.github.io';\\nconst base = '/strudel';\\n```\\n\\n### 7. commit & push the changes\\n\\n```sh\\ngit add . && git commit -m \\\"site config\\\" && git push --set-upstream origin\\n```\\n\\n### 8. deploy to github pages\\n\\n- go to settings -> pages and select \\\"Github Actions\\\" as source\\n- go to settings -> environments -> github-pages and press the edit button next to `main` and type in `patternuary` (under \\\"Deployment branches\\\")\\n- go to Actions -> `Build and Deploy` and click `Run workflow` with branch `patternuary`\\n\\n### 9. view your patterns at `<your-username>.github.io/strudel/swatch/`\\n\\nAlternatively, github pages allows you to use a custom domain, like https://mycooldomain.org/swatch/. [See their documentation for details](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site).\\n\\n### 10. optional: automatic deployment\\n\\nIf you want to automatically deploy your site on push, go to `deploy.yml` and change `workflow_dispatch` to `push`.\\n\\n## running locally\\n\\n- install dependencies with `npm run setup`\\n- run dev server with `npm run repl` and open `http://localhost:4321/strudel/swatch/`\\n\\n## tests fail?\\n\\nYour tests might fail if the code does not follow prettiers format.\\nIn that case, run `npm run codeformat`. To disable that, remove `npm run format-check` from `test.yml`\\n\\n## updating your fork\\n\\nTo update your fork, you can pull the main branch and merge it into your `patternuary` branch.\\n\"","import { getMetadata } from './metadata_parser';\n\nexport function getMyPatterns() {\n  const my = import.meta.glob('../../my-patterns/**', { as: 'raw', eager: true });\n  return Object.fromEntries(\n    Object.entries(my)\n      .filter(([name]) => name.endsWith('.txt'))\n      .map(([name, raw]) => [getMetadata(raw)['title'] || name.split('/').slice(-1), raw]),\n  );\n}\n","\n\t\t\t\timport { unescapeHTML, spreadAttributes, createComponent, render, renderComponent, maybeRenderHead } from \"/Users/michaelgogins/cloud-5/strudel/node_modules/.pnpm/astro@4.16.6_@types+node@20.16.12_rollup@2.79.2_terser@5.36.0_typescript@5.6.3/node_modules/astro/dist/runtime/server/index.js\";\n\t\t\t\timport { AstroError, AstroErrorData } from \"/Users/michaelgogins/cloud-5/strudel/node_modules/.pnpm/astro@4.16.6_@types+node@20.16.12_rollup@2.79.2_terser@5.36.0_typescript@5.6.3/node_modules/astro/dist/core/errors/index.js\";\n\t\t\t\t\n\n\t\t\t\tconst html = \"<h1 id=\\\"my-patterns\\\">my-patterns</h1>\\n<p>This directory can be used to save your own patterns, which then get\\nmade into a pattern swatch.</p>\\n<p>Example: <a href=\\\"https://felixroos.github.io/strudel/swatch/\\\">https://felixroos.github.io/strudel/swatch/</a></p>\\n<h2 id=\\\"deploy\\\">deploy</h2>\\n<h3 id=\\\"1-fork-the-strudel-repo-on-github\\\">1. fork the <a href=\\\"https://github.com/tidalcycles/strudel.git\\\">strudel repo on github</a></h3>\\n<h3 id=\\\"2-clone-your-fork-to-your-machine-git-clone-httpsgithubcomyour-usernamestrudelgit-strudel--cd-strudel\\\">2. clone your fork to your machine <code>git clone https://github.com/&#x3C;your-username>/strudel.git strudel &#x26;&#x26; cd strudel</code></h3>\\n<h3 id=\\\"3-create-a-separate-branch-like-git-branch-patternuary--git-checkout-patternuary\\\">3. create a separate branch like <code>git branch patternuary &#x26;&#x26; git checkout patternuary</code></h3>\\n<h3 id=\\\"4-save-one-or-more-txt-files-in-the-my-patterns-folder\\\">4. save one or more .txt files in the my-patterns folder</h3>\\n<h3 id=\\\"5-edit-websitepubliccname-to-contain-your-usernamegithubiostrudel\\\">5. edit <code>website/public/CNAME</code> to contain <code>&#x3C;your-username>.github.io/strudel</code></h3>\\n<h3 id=\\\"6-edit-websiteastroconfigmjs-to-use-site-httpsyour-usernamegithubio-and-base-strudel-like-this\\\">6. edit <code>website/astro.config.mjs</code> to use site: <code>https://&#x3C;your-username>.github.io</code> and base <code>/strudel</code>, like this</h3>\\n<pre class=\\\"astro-code github-dark\\\" style=\\\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\\\" tabindex=\\\"0\\\" data-language=\\\"js\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#F97583\\\">const</span><span style=\\\"color:#79B8FF\\\"> site</span><span style=\\\"color:#F97583\\\"> =</span><span style=\\\"color:#9ECBFF\\\"> 'https://&#x3C;your-username>.github.io'</span><span style=\\\"color:#E1E4E8\\\">;</span></span>\\n<span class=\\\"line\\\"><span style=\\\"color:#F97583\\\">const</span><span style=\\\"color:#79B8FF\\\"> base</span><span style=\\\"color:#F97583\\\"> =</span><span style=\\\"color:#9ECBFF\\\"> '/strudel'</span><span style=\\\"color:#E1E4E8\\\">;</span></span>\\n<span class=\\\"line\\\"></span></code></pre>\\n<h3 id=\\\"7-commit--push-the-changes\\\">7. commit &#x26; push the changes</h3>\\n<pre class=\\\"astro-code github-dark\\\" style=\\\"background-color:#24292e;color:#e1e4e8; overflow-x: auto;\\\" tabindex=\\\"0\\\" data-language=\\\"sh\\\"><code><span class=\\\"line\\\"><span style=\\\"color:#B392F0\\\">git</span><span style=\\\"color:#9ECBFF\\\"> add</span><span style=\\\"color:#9ECBFF\\\"> .</span><span style=\\\"color:#E1E4E8\\\"> &#x26;&#x26; </span><span style=\\\"color:#B392F0\\\">git</span><span style=\\\"color:#9ECBFF\\\"> commit</span><span style=\\\"color:#79B8FF\\\"> -m</span><span style=\\\"color:#9ECBFF\\\"> \\\"site config\\\"</span><span style=\\\"color:#E1E4E8\\\"> &#x26;&#x26; </span><span style=\\\"color:#B392F0\\\">git</span><span style=\\\"color:#9ECBFF\\\"> push</span><span style=\\\"color:#79B8FF\\\"> --set-upstream</span><span style=\\\"color:#9ECBFF\\\"> origin</span></span>\\n<span class=\\\"line\\\"></span></code></pre>\\n<h3 id=\\\"8-deploy-to-github-pages\\\">8. deploy to github pages</h3>\\n<ul>\\n<li>go to settings -> pages and select “Github Actions” as source</li>\\n<li>go to settings -> environments -> github-pages and press the edit button next to <code>main</code> and type in <code>patternuary</code> (under “Deployment branches”)</li>\\n<li>go to Actions -> <code>Build and Deploy</code> and click <code>Run workflow</code> with branch <code>patternuary</code></li>\\n</ul>\\n<h3 id=\\\"9-view-your-patterns-at-your-usernamegithubiostrudelswatch\\\">9. view your patterns at <code>&#x3C;your-username>.github.io/strudel/swatch/</code></h3>\\n<p>Alternatively, github pages allows you to use a custom domain, like <a href=\\\"https://mycooldomain.org/swatch/\\\">https://mycooldomain.org/swatch/</a>. <a href=\\\"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site\\\">See their documentation for details</a>.</p>\\n<h3 id=\\\"10-optional-automatic-deployment\\\">10. optional: automatic deployment</h3>\\n<p>If you want to automatically deploy your site on push, go to <code>deploy.yml</code> and change <code>workflow_dispatch</code> to <code>push</code>.</p>\\n<h2 id=\\\"running-locally\\\">running locally</h2>\\n<ul>\\n<li>install dependencies with <code>npm run setup</code></li>\\n<li>run dev server with <code>npm run repl</code> and open <code>http://localhost:4321/strudel/swatch/</code></li>\\n</ul>\\n<h2 id=\\\"tests-fail\\\">tests fail?</h2>\\n<p>Your tests might fail if the code does not follow prettiers format.\\nIn that case, run <code>npm run codeformat</code>. To disable that, remove <code>npm run format-check</code> from <code>test.yml</code></p>\\n<h2 id=\\\"updating-your-fork\\\">updating your fork</h2>\\n<p>To update your fork, you can pull the main branch and merge it into your <code>patternuary</code> branch.</p>\";\n\n\t\t\t\texport const frontmatter = {};\n\t\t\t\texport const file = \"/Users/michaelgogins/cloud-5/strudel/my-patterns/README.md\";\n\t\t\t\texport const url = undefined;\n\t\t\t\texport function rawContent() {\n\t\t\t\t\treturn \"# my-patterns\\n\\nThis directory can be used to save your own patterns, which then get\\nmade into a pattern swatch.\\n\\nExample: <https://felixroos.github.io/strudel/swatch/>\\n\\n## deploy\\n\\n### 1. fork the [strudel repo on github](https://github.com/tidalcycles/strudel.git)\\n\\n### 2. clone your fork to your machine `git clone https://github.com/<your-username>/strudel.git strudel && cd strudel`\\n\\n### 3. create a separate branch like `git branch patternuary && git checkout patternuary`\\n\\n### 4. save one or more .txt files in the my-patterns folder\\n\\n### 5. edit `website/public/CNAME` to contain `<your-username>.github.io/strudel`\\n\\n### 6. edit `website/astro.config.mjs` to use site: `https://<your-username>.github.io` and base `/strudel`, like this\\n\\n```js\\nconst site = 'https://<your-username>.github.io';\\nconst base = '/strudel';\\n```\\n\\n### 7. commit & push the changes\\n\\n```sh\\ngit add . && git commit -m \\\"site config\\\" && git push --set-upstream origin\\n```\\n\\n### 8. deploy to github pages\\n\\n- go to settings -> pages and select \\\"Github Actions\\\" as source\\n- go to settings -> environments -> github-pages and press the edit button next to `main` and type in `patternuary` (under \\\"Deployment branches\\\")\\n- go to Actions -> `Build and Deploy` and click `Run workflow` with branch `patternuary`\\n\\n### 9. view your patterns at `<your-username>.github.io/strudel/swatch/`\\n\\nAlternatively, github pages allows you to use a custom domain, like https://mycooldomain.org/swatch/. [See their documentation for details](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site).\\n\\n### 10. optional: automatic deployment\\n\\nIf you want to automatically deploy your site on push, go to `deploy.yml` and change `workflow_dispatch` to `push`.\\n\\n## running locally\\n\\n- install dependencies with `npm run setup`\\n- run dev server with `npm run repl` and open `http://localhost:4321/strudel/swatch/`\\n\\n## tests fail?\\n\\nYour tests might fail if the code does not follow prettiers format.\\nIn that case, run `npm run codeformat`. To disable that, remove `npm run format-check` from `test.yml`\\n\\n## updating your fork\\n\\nTo update your fork, you can pull the main branch and merge it into your `patternuary` branch.\\n\";\n\t\t\t\t}\n\t\t\t\texport function compiledContent() {\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\t\t\t\texport function getHeadings() {\n\t\t\t\t\treturn [{\"depth\":1,\"slug\":\"my-patterns\",\"text\":\"my-patterns\"},{\"depth\":2,\"slug\":\"deploy\",\"text\":\"deploy\"},{\"depth\":3,\"slug\":\"1-fork-the-strudel-repo-on-github\",\"text\":\"1. fork the strudel repo on github\"},{\"depth\":3,\"slug\":\"2-clone-your-fork-to-your-machine-git-clone-httpsgithubcomyour-usernamestrudelgit-strudel--cd-strudel\",\"text\":\"2. clone your fork to your machine git clone https://github.com/<your-username>/strudel.git strudel && cd strudel\"},{\"depth\":3,\"slug\":\"3-create-a-separate-branch-like-git-branch-patternuary--git-checkout-patternuary\",\"text\":\"3. create a separate branch like git branch patternuary && git checkout patternuary\"},{\"depth\":3,\"slug\":\"4-save-one-or-more-txt-files-in-the-my-patterns-folder\",\"text\":\"4. save one or more .txt files in the my-patterns folder\"},{\"depth\":3,\"slug\":\"5-edit-websitepubliccname-to-contain-your-usernamegithubiostrudel\",\"text\":\"5. edit website/public/CNAME to contain <your-username>.github.io/strudel\"},{\"depth\":3,\"slug\":\"6-edit-websiteastroconfigmjs-to-use-site-httpsyour-usernamegithubio-and-base-strudel-like-this\",\"text\":\"6. edit website/astro.config.mjs to use site: https://<your-username>.github.io and base /strudel, like this\"},{\"depth\":3,\"slug\":\"7-commit--push-the-changes\",\"text\":\"7. commit & push the changes\"},{\"depth\":3,\"slug\":\"8-deploy-to-github-pages\",\"text\":\"8. deploy to github pages\"},{\"depth\":3,\"slug\":\"9-view-your-patterns-at-your-usernamegithubiostrudelswatch\",\"text\":\"9. view your patterns at <your-username>.github.io/strudel/swatch/\"},{\"depth\":3,\"slug\":\"10-optional-automatic-deployment\",\"text\":\"10. optional: automatic deployment\"},{\"depth\":2,\"slug\":\"running-locally\",\"text\":\"running locally\"},{\"depth\":2,\"slug\":\"tests-fail\",\"text\":\"tests fail?\"},{\"depth\":2,\"slug\":\"updating-your-fork\",\"text\":\"updating your fork\"}];\n\t\t\t\t}\n\n\t\t\t\texport const Content = createComponent((result, _props, slots) => {\n\t\t\t\t\tconst { layout, ...content } = frontmatter;\n\t\t\t\t\tcontent.file = file;\n\t\t\t\t\tcontent.url = url;\n\n\t\t\t\t\treturn render`${maybeRenderHead(result)}${unescapeHTML(html)}`;\n\t\t\t\t});\n\t\t\t\texport default Content;\n\t\t\t\t","---\nimport { getMyPatterns } from '../../my_patterns.js';\n\nimport { Content } from '../../../../my-patterns/README.md';\nimport HeadCommon from '../../components/HeadCommon.astro';\n\nconst myPatterns = await getMyPatterns();\n\nconst { BASE_URL } = import.meta.env;\nconst baseNoTrailing = BASE_URL.endsWith('/') ? BASE_URL.slice(0, -1) : BASE_URL;\n---\n\n<head>\n  <HeadCommon />\n</head>\n<body class=\"bg-slate-800\">\n  {\n    Object.keys(myPatterns).length === 0 && (\n      <div class=\"prose prose-invert p-2\">\n        <Content />\n      </div>\n    )\n  }\n  <div class=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 p-2 select-none\">\n    {\n      Object.entries(myPatterns).map(([name, tune]) => (\n        <a\n          class=\"rounded-md bg-slate-900 hover:bg-slate-700 cursor-pointer relative block w-full h-[160px]\"\n          href={`${baseNoTrailing}/#${btoa(tune as string)}`}\n        >\n          <div class=\"absolute w-full h-full flex justify-center items-center\">\n            <span class=\"bg-slate-800 p-2 rounded-md text-white\">{name}</span>\n          </div>\n        </a>\n      ))\n    }\n  </div>\n</body>\n../../list.json\n"],"names":["render","$$createComponent","$$render","$$renderComponent","HeadCommon","$$renderHead","$$addAttribute"],"mappings":";;;;;;AAAA,wBAAe;;ACER,SAAS,aAAa,GAAG;AAChC,EAAE,MAAM,EAAE,kFAAuE,CAAC;AAClF,EAAE,OAAO,MAAM,CAAC,WAAW;AAC3B,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC;AACtB,OAAO,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAChD,OAAO,GAAG,CAAC,CAAC,CAAC,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAC1F,GAAG,CAAC;AACJ;;ACJI,MAAM,IAAI,GAAG,4xJAA4xJ,CAAC;AAC9yJ;AACA,IAAW,MAAM,WAAW,GAAG,EAAE,CAAC;AAClC,IAAW,MAAM,IAAI,GAAG,4DAA4D,CAAC;AACrF,IAAW,MAAM,GAAG,GAAG,SAAS,CAAC;AAUjC;AACA,IAAW,MAAM,OAAO,GAAG,eAAe,CAAC,CAAC,MAAM,EAAE,MAAM,EAAE,KAAK,KAAK;AACtE,KAAK,MAAM,EAAE,MAAM,EAAE,GAAG,OAAO,EAAE,GAAG,WAAW,CAAC;AAChD,KAAK,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACzB,KAAK,OAAO,CAAC,GAAG,GAAG,GAAG,CAAC;AACvB;AACA,KAAK,OAAOA,cAAM,CAAC,EAAE,eAAe,CAAO,CAAC,CAAC,EAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACpE,KAAK,CAAC;;;AC1BN,MAAA,OAAA,GAAAC,eAAA,CAAA,OAAA,QAAA,EAAA,SAAA,OAAA,KAAA;AAMM,EAAA,MAAA,UAAA,GAAa,MAAM,aAAc,EAAA,CAAA;AAEjC,EAAA,MAAA,EAAE,QAAS,EAAA,GAAI,MAAA,CAAA,MAAA,CAAA,wBAAA,EAAA,EAAA,CAAA,EAAA,OAAA,CAAA,GAAA,CAAA,CAAA,EAAA,CAAA,CAAA;AACf,EAAA,MAAA,cAAA,GAAiB,SAAS,QAAS,CAAA,GAAG,IAAI,QAAS,CAAA,KAAA,CAAM,CAAG,EAAA,CAAA,CAAE,CAAI,GAAA,QAAA,CAAA;AATxE,EAAA,OAAAC,cAAA,CAAA,MAAA,EAAAC,eAAA,CAAA,QAAA,EAAA,YAAA,EAAAC,YAAA,EAAA,EAaG,CAAA,CAbH,EAAAC,UAAA,CAAA,CAAA,uCAgBG,MACG,CAAA,IAAA,CAAK,UAAU,CAAA,CAAE,MAAW,KAAA,CAAA,IAjBlCH,sDAAAC,eAAA,CAAA,QAAA,EAAA,SAAA,EAAA,OAAA,EAAA,EAmBS,CAAA,CAGP,OAAA,CAAA,CAAA,mGAAA,EAEG,MACC,CAAA,OAAA,CAAQ,UAAU,CAAA,CAAE,IAAI,CAAC,CAAC,IAAM,EAAA,IAAI,CAzB1C,KAAAD,cAAA,CAAA,oGAAA,EAAAI,aA4BgB,CAAG,EAAA,cAAc,CAAK,EAAA,EAAA,IAAA,CAAK,IAAc,CAAC,CA5B1D,CAAA,EAAA,MAAA,CAAA,CAAA,6HAAA,EA+BkE,IAAI,CAAA,mBAAA,CAG/D,CACH,CAAA;AAAA,sBAAA,CAAA,CAAA;AAnCJ,CAAA,EAAA,6EAAA,KAAA,CAAA,CAAA,CAAA;;;;;;;;;;;;;;;"}